(function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)})(function(e){function t(t,s){var n,a,o,r=t.nodeName.toLowerCase();return"area"===r?(n=t.parentNode,a=n.name,t.href&&a&&"map"===n.nodeName.toLowerCase()?(o=e("img[usemap='#"+a+"']")[0],!!o&&i(o)):!1):(/^(input|select|textarea|button|object)$/.test(r)?!t.disabled:"a"===r?t.href||s:s)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}function s(e){for(var t,i;e.length&&e[0]!==document;){if(t=e.css("position"),("absolute"===t||"relative"===t||"fixed"===t)&&(i=parseInt(e.css("zIndex"),10),!isNaN(i)&&0!==i))return i;e=e.parent()}return 0}function n(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._UidatepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-Uidatepicker-div",this._inlineClass="ui-Uidatepicker-inline",this._appendClass="ui-Uidatepicker-append",this._triggerClass="ui-Uidatepicker-trigger",this._dialogClass="ui-Uidatepicker-dialog",this._disableClass="ui-Uidatepicker-disabled",this._unselectableClass="ui-Uidatepicker-unselectable",this._currentClass="ui-Uidatepicker-current-day",this._dayOverClass="ui-Uidatepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:text_kapat,prevText:text_prev,nextText:text_next,currentText:text_today,monthNames:text_months,monthNamesShort:text_monthsShort,dayNames:text_days,dayNamesShort:text_daysShort,dayNamesMin:text_daysMin,weekHeader:text_hafta,dateFormat:text_dateFormatUI,firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=a(e("<div id='"+this._mainDivId+"' class='ui-Uidatepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function a(t){var i="button, .ui-Uidatepicker-prev, .ui-Uidatepicker-next, .ui-Uidatepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-Uidatepicker-prev")&&e(this).removeClass("ui-Uidatepicker-prev-hover"),-1!==this.className.indexOf("ui-Uidatepicker-next")&&e(this).removeClass("ui-Uidatepicker-next-hover")}).delegate(i,"mouseover",o)}function o(){e.Uidatepicker._isDisabledDatepicker(v.inline?v.dpDiv.parent()[0]:v.input[0])||(e(this).parents(".ui-Uidatepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-Uidatepicker-prev")&&e(this).addClass("ui-Uidatepicker-prev-hover"),-1!==this.className.indexOf("ui-Uidatepicker-next")&&e(this).addClass("ui-Uidatepicker-next-hover"))}function r(t,i){e.extend(t,i);for(var s in i)null==i[s]&&(t[s]=i[s]);return t}function h(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var i=this.css("position"),s="absolute"===i,n=t?/(auto|scroll|hidden)/:/(auto|scroll)/,a=this.parents().filter(function(){var t=e(this);return s&&"static"===t.css("position")?!1:n.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&a.length?a:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(i){return t(i,!isNaN(e.attr(i,"tabindex")))},tabbable:function(i){var s=e.attr(i,"tabindex"),n=isNaN(s);return(n||s>=0)&&t(i,!n)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){function s(t,i,s,a){return e.each(n,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var n="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?o["inner"+i].call(this):this.each(function(){e(this).css(a,s(this,t)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?o["outer"+i].call(this,t):this.each(function(){e(this).css(a,s(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(i,s){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,s,n=e(this[0]);n.length&&n[0]!==document;){if(i=n.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(s=parseInt(n.css("zIndex"),10),!isNaN(s)&&0!==s))return s;n=n.parent()}return 0}}),e.ui.plugin={add:function(t,i,s){var n,a=e.ui[t].prototype;for(n in s)a.plugins[n]=a.plugins[n]||[],a.plugins[n].push([i,s[n]])},call:function(e,t,i,s){var n,a=e.plugins[t];if(a&&(s||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(n=0;a.length>n;n++)e.options[a[n][0]]&&a[n][1].apply(e.element,i)}};var l=0,u=Array.prototype.slice;e.cleanData=function(t){return function(i){var s,n,a;for(a=0;null!=(n=i[a]);a++)try{s=e._data(n,"events"),s&&s.remove&&e(n).triggerHandler("remove")}catch(o){}t(i)}}(e.cleanData),e.widget=function(t,i,s){var n,a,o,r,h={},l=t.split(".")[0];return t=t.split(".")[1],n=l+"-"+t,s||(s=i,i=e.Widget),e.expr[":"][n.toLowerCase()]=function(t){return!!e.data(t,n)},e[l]=e[l]||{},a=e[l][t],o=e[l][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new o(e,t)},e.extend(o,a,{version:s.version,_proto:e.extend({},s),_childConstructors:[]}),r=new i,r.options=e.widget.extend({},r.options),e.each(s,function(t,s){return e.isFunction(s)?(h[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},n=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,a=this._superApply;return this._super=e,this._superApply=n,t=s.apply(this,arguments),this._super=i,this._superApply=a,t}}(),void 0):(h[t]=s,void 0)}),o.prototype=e.widget.extend(r,{widgetEventPrefix:a?r.widgetEventPrefix||t:t},h,{constructor:o,namespace:l,widgetName:t,widgetFullName:n}),a?(e.each(a._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete a._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var i,s,n=u.call(arguments,1),a=0,o=n.length;o>a;a++)for(i in n[a])s=n[a][i],n[a].hasOwnProperty(i)&&void 0!==s&&(t[i]=e.isPlainObject(s)?e.isPlainObject(t[i])?e.widget.extend({},t[i],s):e.widget.extend({},s):s);return t},e.widget.bridge=function(t,i){var s=i.prototype.widgetFullName||t;e.fn[t]=function(n){var a="string"==typeof n,o=u.call(arguments,1),r=this;return a?this.each(function(){var i,a=e.data(this,s);return"instance"===n?(r=a,!1):a?e.isFunction(a[n])&&"_"!==n.charAt(0)?(i=a[n].apply(a,o),i!==a&&void 0!==i?(r=i&&i.jquery?r.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+n+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+n+"'")}):(o.length&&(n=e.widget.extend.apply(null,[n].concat(o))),this.each(function(){var t=e.data(this,s);t?(t.option(n||{}),t._init&&t._init()):e.data(this,s,new i(n,this))})),r}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=l++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var s,n,a,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},s=t.split("."),t=s.shift(),s.length){for(n=o[t]=e.widget.extend({},this.options[t]),a=0;s.length-1>a;a++)n[s[a]]=n[s[a]]||{},n=n[s[a]];if(t=s.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=i}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,s){var n,a=this;"boolean"!=typeof t&&(s=i,i=t,t=!1),s?(i=n=e(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),e.each(s,function(s,o){function r(){return t||a.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?a[o]:o).apply(a,arguments):void 0}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var h=s.match(/^([\w:-]*)\s*(.*)$/),l=h[1]+a.eventNamespace,u=h[2];u?n.delegate(u,l,r):i.bind(l,r)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(i).undelegate(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var n,a,o=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(e.isFunction(o)&&o.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,n,a){"string"==typeof n&&(n={effect:n});var o,r=n?n===!0||"number"==typeof n?i:n.effect||i:t;n=n||{},"number"==typeof n&&(n={duration:n}),o=!e.isEmptyObject(n),n.complete=a,n.delay&&s.delay(n.delay),o&&e.effects&&e.effects.effect[r]?s[t](n):r!==t&&s[r]?s[r](n.duration,n.easing,a):s.queue(function(i){e(this)[t](),a&&a.call(s[0]),i()})}}),e.widget;var d=!1;e(document).mouseup(function(){d=!1}),e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!d){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,s=1===t.which,n="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return s&&!n&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),d=!0,!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),d=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),function(){function t(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function i(t,i){return parseInt(e.css(t,i),10)||0}function s(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var n,a,o=Math.max,r=Math.abs,h=Math.round,l=/left|center|right/,u=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==n)return n;var t,i,s=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=s.children()[0];return e("body").append(s),t=a.offsetWidth,s.css("overflow","scroll"),i=a.offsetWidth,t===i&&(i=s[0].clientWidth),s.remove(),n=t-i},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),s=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),n="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,a="scroll"===s||"auto"===s&&t.height<t.element[0].scrollHeight;return{width:a?e.position.scrollbarWidth():0,height:n?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),s=e.isWindow(i[0]),n=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:s,isDocument:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s||n?i.width():i.outerWidth(),height:s||n?i.height():i.outerHeight()}}},e.fn.position=function(n){if(!n||!n.of)return f.apply(this,arguments);n=e.extend({},n);var p,m,g,v,y,b,_=e(n.of),x=e.position.getWithinInfo(n.within),w=e.position.getScrollInfo(x),k=(n.collision||"flip").split(" "),T={};return b=s(_),_[0].preventDefault&&(n.at="left top"),m=b.width,g=b.height,v=b.offset,y=e.extend({},v),e.each(["my","at"],function(){var e,t,i=(n[this]||"").split(" ");1===i.length&&(i=l.test(i[0])?i.concat(["center"]):u.test(i[0])?["center"].concat(i):["center","center"]),i[0]=l.test(i[0])?i[0]:"center",i[1]=u.test(i[1])?i[1]:"center",e=d.exec(i[0]),t=d.exec(i[1]),T[this]=[e?e[0]:0,t?t[0]:0],n[this]=[c.exec(i[0])[0],c.exec(i[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===n.at[0]?y.left+=m:"center"===n.at[0]&&(y.left+=m/2),"bottom"===n.at[1]?y.top+=g:"center"===n.at[1]&&(y.top+=g/2),p=t(T.at,m,g),y.left+=p[0],y.top+=p[1],this.each(function(){var s,l,u=e(this),d=u.outerWidth(),c=u.outerHeight(),f=i(this,"marginLeft"),b=i(this,"marginTop"),D=d+f+i(this,"marginRight")+w.width,S=c+b+i(this,"marginBottom")+w.height,M=e.extend({},y),C=t(T.my,u.outerWidth(),u.outerHeight());"right"===n.my[0]?M.left-=d:"center"===n.my[0]&&(M.left-=d/2),"bottom"===n.my[1]?M.top-=c:"center"===n.my[1]&&(M.top-=c/2),M.left+=C[0],M.top+=C[1],a||(M.left=h(M.left),M.top=h(M.top)),s={marginLeft:f,marginTop:b},e.each(["left","top"],function(t,i){e.ui.position[k[t]]&&e.ui.position[k[t]][i](M,{targetWidth:m,targetHeight:g,elemWidth:d,elemHeight:c,collisionPosition:s,collisionWidth:D,collisionHeight:S,offset:[p[0]+C[0],p[1]+C[1]],my:n.my,at:n.at,within:x,elem:u})}),n.using&&(l=function(e){var t=v.left-M.left,i=t+m-d,s=v.top-M.top,a=s+g-c,h={target:{element:_,left:v.left,top:v.top,width:m,height:g},element:{element:u,left:M.left,top:M.top,width:d,height:c},horizontal:0>i?"left":t>0?"right":"center",vertical:0>a?"top":s>0?"bottom":"middle"};d>m&&m>r(t+i)&&(h.horizontal="center"),c>g&&g>r(s+a)&&(h.vertical="middle"),h.important=o(r(t),r(i))>o(r(s),r(a))?"horizontal":"vertical",n.using.call(this,e,h)}),u.offset(e.extend(M,{using:l}))})},e.ui.position={fit:{left:function(e,t){var i,s=t.within,n=s.isWindow?s.scrollLeft:s.offset.left,a=s.width,r=e.left-t.collisionPosition.marginLeft,h=n-r,l=r+t.collisionWidth-a-n;t.collisionWidth>a?h>0&&0>=l?(i=e.left+h+t.collisionWidth-a-n,e.left+=h-i):e.left=l>0&&0>=h?n:h>l?n+a-t.collisionWidth:n:h>0?e.left+=h:l>0?e.left-=l:e.left=o(e.left-r,e.left)},top:function(e,t){var i,s=t.within,n=s.isWindow?s.scrollTop:s.offset.top,a=t.within.height,r=e.top-t.collisionPosition.marginTop,h=n-r,l=r+t.collisionHeight-a-n;t.collisionHeight>a?h>0&&0>=l?(i=e.top+h+t.collisionHeight-a-n,e.top+=h-i):e.top=l>0&&0>=h?n:h>l?n+a-t.collisionHeight:n:h>0?e.top+=h:l>0?e.top-=l:e.top=o(e.top-r,e.top)}},flip:{left:function(e,t){var i,s,n=t.within,a=n.offset.left+n.scrollLeft,o=n.width,h=n.isWindow?n.scrollLeft:n.offset.left,l=e.left-t.collisionPosition.marginLeft,u=l-h,d=l+t.collisionWidth-o-h,c="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>u?(i=e.left+c+p+f+t.collisionWidth-o-a,(0>i||r(u)>i)&&(e.left+=c+p+f)):d>0&&(s=e.left-t.collisionPosition.marginLeft+c+p+f-h,(s>0||d>r(s))&&(e.left+=c+p+f))},top:function(e,t){var i,s,n=t.within,a=n.offset.top+n.scrollTop,o=n.height,h=n.isWindow?n.scrollTop:n.offset.top,l=e.top-t.collisionPosition.marginTop,u=l-h,d=l+t.collisionHeight-o-h,c="top"===t.my[1],p=c?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>u?(s=e.top+p+f+m+t.collisionHeight-o-a,(0>s||r(u)>s)&&(e.top+=p+f+m)):d>0&&(i=e.top-t.collisionPosition.marginTop+p+f+m-h,(i>0||d>r(i))&&(e.top+=p+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,s,n,o,r=document.getElementsByTagName("body")[0],h=document.createElement("div");t=document.createElement(r?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&e.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in s)t.style[o]=s[o];t.appendChild(h),i=r||document.documentElement,i.insertBefore(t,i.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",n=e(h).offset().left,a=n>10&&11>n,t.innerHTML="",i.removeChild(t)}()}(),e.ui.position,e.widget("ui.accordion",{version:"1.11.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),0>t.active&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(),this._destroyIcons(),e=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&(this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)),void 0)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,s=this.headers.length,n=this.headers.index(t.target),a=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:a=this.headers[(n+1)%s];break;case i.LEFT:case i.UP:a=this.headers[(n-1+s)%s];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:a=this.headers[0];break;case i.END:a=this.headers[s-1]}a&&(e(t.target).attr("tabIndex",-1),e(a).attr("tabIndex",0),a.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var e=this.headers,t=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"),this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide(),t&&(this._off(e.not(this.headers)),this._off(t.not(this.panels)))},_refresh:function(){var t,i=this.options,s=i.heightStyle,n=this.element.parent();this.active=this._findActive(i.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(){var t=e(this),i=t.uniqueId().attr("id"),s=t.next(),n=s.uniqueId().attr("id");t.attr("aria-controls",n),s.attr("aria-labelledby",i)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(i.event),"fill"===s?(t=n.height(),this.element.siblings(":visible").each(function(){var i=e(this),s=i.css("position");"absolute"!==s&&"fixed"!==s&&(t-=i.outerHeight(!0))}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===s&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var i=this.options,s=this.active,n=e(t.currentTarget),a=n[0]===s[0],o=a&&i.collapsible,r=o?e():n.next(),h=s.next(),l={oldHeader:s,oldPanel:h,newHeader:o?e():n,newPanel:r};t.preventDefault(),a&&!i.collapsible||this._trigger("beforeActivate",t,l)===!1||(i.active=o?!1:this.headers.index(n),this.active=a?e():n,this._toggle(l),s.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),a||(n.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),n.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,s=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=s,this.options.animate?this._animate(i,s,t):(s.hide(),i.show(),this._toggleComplete(t)),s.attr({"aria-hidden":"true"}),s.prev().attr({"aria-selected":"false","aria-expanded":"false"}),i.length&&s.length?s.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter(function(){return 0===parseInt(e(this).attr("tabIndex"),10)}).attr("tabIndex",-1),i.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(e,t,i){var s,n,a,o=this,r=0,h=e.css("box-sizing"),l=e.length&&(!t.length||e.index()<t.index()),u=this.options.animate||{},d=l&&u.down||u,c=function(){o._toggleComplete(i)};return"number"==typeof d&&(a=d),"string"==typeof d&&(n=d),n=n||d.easing||u.easing,a=a||d.duration||u.duration,t.length?e.length?(s=e.show().outerHeight(),t.animate(this.hideProps,{duration:a,easing:n,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(this.showProps,{duration:a,easing:n,complete:c,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?"content-box"===h&&(r+=i.now):"content"!==o.options.heightStyle&&(i.now=Math.round(s-t.outerHeight()-r),r=0)}}),void 0):t.animate(this.hideProps,a,n,c):e.animate(this.showProps,a,n,c)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),e.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var i=e(t.target);!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var i=e(t.currentTarget);
i.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){var i,s,n,a,o=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:o=!1,s=this.previousFilter||"",n=String.fromCharCode(t.keyCode),a=!1,clearTimeout(this.filterTimer),n===s?a=!0:n=s+n,i=this._filterMenuItems(n),i=a&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(n=String.fromCharCode(t.keyCode),i=this._filterMenuItems(n)),i.length?(this.focus(t,i),this.previousFilter=n,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}o&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(e):this.select(e))},refresh:function(){var t,i,s=this,n=this.options.icons.submenu,a=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),a.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),i=t.parent(),s=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(s),t.attr("aria-labelledby",i.attr("id"))}),t=a.add(this.element),i=t.find(this.options.items),i.not(".ui-menu-item").each(function(){var t=e(this);s._isDivider(t)&&t.addClass("ui-widget-content ui-menu-divider")}),i.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),i.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},focus:function(e,t){var i,s;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),s=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,s,n,a,o,r;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,n=t.offset().top-this.activeMenu.offset().top-i-s,a=this.activeMenu.scrollTop(),o=this.activeMenu.height(),r=t.outerHeight(),0>n?this.activeMenu.scrollTop(a+n):n+r>o&&this.activeMenu.scrollTop(a+n-o+r))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(t),this.activeMenu=s},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var s;this.active&&(s="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.find(this.options.items)[t]()),this.focus(i,s)},nextPage:function(t){var i,s,n;return this.active?(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),0>i.offset().top-s-n}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())),void 0):(this.next(t),void 0)},previousPage:function(t){var i,s,n;return this.active?(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-s+n>0}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items).first())),void 0):(this.next(t),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)},_filterMenuItems:function(t){var i=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),s=RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return s.test(e.trim(e(this).text()))})}}),e.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,i,s,n=this.element[0].nodeName.toLowerCase(),a="textarea"===n,o="input"===n;this.isMultiLine=a?!0:o?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[a||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return t=!0,s=!0,i=!0,void 0;t=!1,s=!1,i=!1;var a=e.ui.keyCode;switch(n.keyCode){case a.PAGE_UP:t=!0,this._move("previousPage",n);break;case a.PAGE_DOWN:t=!0,this._move("nextPage",n);break;case a.UP:t=!0,this._keyEvent("previous",n);break;case a.DOWN:t=!0,this._keyEvent("next",n);break;case a.ENTER:this.menu.active&&(t=!0,n.preventDefault(),this.menu.select(n));break;case a.TAB:this.menu.active&&this.menu.select(n);break;case a.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(t)return t=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&s.preventDefault(),void 0;if(!i){var n=e.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(e){return s?(s=!1,e.preventDefault(),void 0):(this._searchTimeout(e),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(e),this._change(e),void 0)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(s){s.target===t.element[0]||s.target===i||e.contains(i,s.target)||t.close()})})},menufocus:function(t,i){var s,n;return this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type))?(this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)}),void 0):(n=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:n})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value),s=i.item.attr("aria-label")||n.value,s&&e.trim(s).length&&(this.liveRegion.children().hide(),e("<div>").text(s).appendTo(this.liveRegion)),void 0)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,s=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,s){s(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,n){s.xhr&&s.xhr.abort(),s.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){n(e)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),i=this.menu.element.is(":visible"),s=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;(!t||t&&!i&&!s)&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var s=this;e.each(i,function(e,i){s._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").text(i.label).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),this.menu.blur(),void 0):(this.menu[e](t),void 0):(this.search(null,t),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var s=RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return s.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(i).appendTo(this.liveRegion))}}),e.ui.autocomplete;var c,p="ui-button ui-widget ui-state-default ui-corner-all",f="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",m=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},g=function(t){var i=t.name,s=t.form,n=e([]);return i&&(i=i.replace(/'/g,"\\'"),n=s?e(s).find("[name='"+i+"'][type=radio]"):e("[name='"+i+"'][type=radio]",t.ownerDocument).filter(function(){return!this.form})),n};e.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,m),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,i=this.options,s="checkbox"===this.type||"radio"===this.type,n=s?"":"ui-state-active";null===i.label&&(i.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(p).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){i.disabled||this===c&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){i.disabled||e(this).removeClass(n)}).bind("click"+this.eventNamespace,function(e){i.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),s&&this.element.bind("change"+this.eventNamespace,function(){t.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return i.disabled?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(i.disabled)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var s=t.element[0];g(s).not(s).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return i.disabled?!1:(e(this).addClass("ui-state-active"),c=this,t.document.one("mouseup",function(){c=null}),void 0)}).bind("mouseup"+this.eventNamespace,function(){return i.disabled?!1:(e(this).removeClass("ui-state-active"),void 0)}).bind("keydown"+this.eventNamespace,function(t){return i.disabled?!1:((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"),void 0)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",i.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(p+" ui-state-active "+f).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),t&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active")),void 0):(this._resetButton(),void 0)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?g(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),void 0;var t=this.buttonElement.removeClass(f),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),s=this.options.icons,n=s.primary&&s.secondary,a=[];s.primary||s.secondary?(this.options.text&&a.push("ui-button-text-icon"+(n?"s":s.primary?"-primary":"-secondary")),s.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+s.primary+"'></span>"),s.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+s.secondary+"'></span>"),this.options.text||(a.push(n?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):a.push("ui-button-text-only"),t.addClass(a.join(" "))}}),e.widget("ui.buttonset",{version:"1.11.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction"),i=this.element.find(this.options.items),s=i.filter(":ui-button");i.not(":ui-button").button(),s.button("refresh"),this.buttons=i.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}}),e.ui.button,e.extend(e.ui,{Uidatepicker:{version:"1.11.4"}});var v;e.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return r(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var s,n,a;s=t.nodeName.toLowerCase(),n="div"===s||"span"===s,t.id||(this.uuid+=1,t.id="dp"+this.uuid),a=this._newInst(e(t),n),a.settings=e.extend({},i||{}),"input"===s?this._connectDatepicker(t,a):n&&this._inlineDatepicker(t,a)},_newInst:function(t,i){var s=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:s,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?a(e("<div class='"+this._inlineClass+" ui-Uidatepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var s=e(t);i.append=e([]),i.trigger=e([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,"Uidatepicker",i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var s,n,a,o=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),o&&(i.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[r?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),("focus"===s||"both"===s)&&t.focus(this._showDatepicker),("button"===s||"both"===s)&&(n=this._get(i,"buttonText"),a=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:a,alt:n,title:n}):e("<button type='button'></button>").addClass(this._triggerClass).html(a?e("<img/>").attr({src:a,alt:n,title:n}):n)),t[r?"before":"after"](i.trigger),i.trigger.click(function(){return e.Uidatepicker._UidatepickerShowing&&e.Uidatepicker._lastInput===t[0]?e.Uidatepicker._hideDatepicker():e.Uidatepicker._UidatepickerShowing&&e.Uidatepicker._lastInput!==t[0]?(e.Uidatepicker._hideDatepicker(),e.Uidatepicker._showDatepicker(t[0])):e.Uidatepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,s,n,a=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(i=0,s=0,n=0;e.length>n;n++)e[n].length>i&&(i=e[n].length,s=n);return s},a.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),e.input.attr("size",this._formatDate(e,a).length)}},_inlineDatepicker:function(t,i){var s=e(t);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),e.data(t,"Uidatepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,s,n,a){var o,h,l,u,d,c=this._dialogInst;return c||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),c=this._dialogInst=this._newInst(this._dialogInput,!1),c.settings={},e.data(this._dialogInput[0],"Uidatepicker",c)),r(c.settings,n||{}),i=i&&i.constructor===Date?this._formatDate(c,i):i,this._dialogInput.val(i),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(h=document.documentElement.clientWidth,l=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[h/2-100+u,l/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),c.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"Uidatepicker",c),this},_destroyDatepicker:function(t){var i,s=e(t),n=e.data(t,"Uidatepicker");s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,"Uidatepicker"),"input"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty(),v===n&&(v=null))},_enableDatepicker:function(t){var i,s,n=e(t),a=e.data(t,"Uidatepicker");n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-Uidatepicker-month, select.ui-Uidatepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,s,n=e(t),a=e.data(t,"Uidatepicker");n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-Uidatepicker-month, select.ui-Uidatepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"Uidatepicker")}catch(i){throw"Missing instance data for this Uidatepicker"}},_optionDatepicker:function(t,i,s){var n,a,o,h,l=this._getInst(t);return 2===arguments.length&&"string"==typeof i?"defaults"===i?e.extend({},e.Uidatepicker._defaults):l?"all"===i?e.extend({},l.settings):this._get(l,i):null:(n=i||{},"string"==typeof i&&(n={},n[i]=s),l&&(this._curInst===l&&this._hideDatepicker(),a=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(l,"min"),h=this._getMinMaxDate(l,"max"),r(l.settings,n),null!==o&&void 0!==n.dateFormat&&void 0===n.minDate&&(l.settings.minDate=this._formatDate(l,o)),null!==h&&void 0!==n.dateFormat&&void 0===n.maxDate&&(l.settings.maxDate=this._formatDate(l,h)),"disabled"in n&&(n.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),l),this._autoSize(l),this._setDate(l,a),this._updateAlternate(l),this._updateDatepicker(l)),void 0)},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,s,n,a=e.Uidatepicker._getInst(t.target),o=!0,r=a.dpDiv.is(".ui-Uidatepicker-rtl");if(a._keyEvent=!0,e.Uidatepicker._UidatepickerShowing)switch(t.keyCode){case 9:e.Uidatepicker._hideDatepicker(),o=!1;break;case 13:return n=e("td."+e.Uidatepicker._dayOverClass+":not(."+e.Uidatepicker._currentClass+")",a.dpDiv),n[0]&&e.Uidatepicker._selectDay(t.target,a.selectedMonth,a.selectedYear,n[0]),i=e.Uidatepicker._get(a,"onSelect"),i?(s=e.Uidatepicker._formatDate(a),i.apply(a.input?a.input[0]:null,[s,a])):e.Uidatepicker._hideDatepicker(),!1;case 27:e.Uidatepicker._hideDatepicker();break;case 33:e.Uidatepicker._adjustDate(t.target,t.ctrlKey?-e.Uidatepicker._get(a,"stepBigMonths"):-e.Uidatepicker._get(a,"stepMonths"),"M");break;case 34:e.Uidatepicker._adjustDate(t.target,t.ctrlKey?+e.Uidatepicker._get(a,"stepBigMonths"):+e.Uidatepicker._get(a,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.Uidatepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.Uidatepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.Uidatepicker._adjustDate(t.target,r?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.Uidatepicker._adjustDate(t.target,t.ctrlKey?-e.Uidatepicker._get(a,"stepBigMonths"):-e.Uidatepicker._get(a,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.Uidatepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.Uidatepicker._adjustDate(t.target,r?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.Uidatepicker._adjustDate(t.target,t.ctrlKey?+e.Uidatepicker._get(a,"stepBigMonths"):+e.Uidatepicker._get(a,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.Uidatepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else 36===t.keyCode&&t.ctrlKey?e.Uidatepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,s,n=e.Uidatepicker._getInst(t.target);
return e.Uidatepicker._get(n,"constrainInput")?(i=e.Uidatepicker._possibleChars(e.Uidatepicker._get(n,"dateFormat")),s=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">s||!i||i.indexOf(s)>-1):void 0},_doKeyUp:function(t){var i,s=e.Uidatepicker._getInst(t.target);if(s.input.val()!==s.lastVal)try{i=e.Uidatepicker.parseDate(e.Uidatepicker._get(s,"dateFormat"),s.input?s.input.val():null,e.Uidatepicker._getFormatConfig(s)),i&&(e.Uidatepicker._setDateFromField(s),e.Uidatepicker._updateAlternate(s),e.Uidatepicker._updateDatepicker(s))}catch(n){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.Uidatepicker._isDisabledDatepicker(t)&&e.Uidatepicker._lastInput!==t){var i,n,a,o,h,l,u;i=e.Uidatepicker._getInst(t),e.Uidatepicker._curInst&&e.Uidatepicker._curInst!==i&&(e.Uidatepicker._curInst.dpDiv.stop(!0,!0),i&&e.Uidatepicker._UidatepickerShowing&&e.Uidatepicker._hideDatepicker(e.Uidatepicker._curInst.input[0])),n=e.Uidatepicker._get(i,"beforeShow"),a=n?n.apply(t,[t,i]):{},a!==!1&&(r(i.settings,a),i.lastVal=null,e.Uidatepicker._lastInput=t,e.Uidatepicker._setDateFromField(i),e.Uidatepicker._inDialog&&(t.value=""),e.Uidatepicker._pos||(e.Uidatepicker._pos=e.Uidatepicker._findPos(t),e.Uidatepicker._pos[1]+=t.offsetHeight),o=!1,e(t).parents().each(function(){return o|="fixed"===e(this).css("position"),!o}),h={left:e.Uidatepicker._pos[0],top:e.Uidatepicker._pos[1]},e.Uidatepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.Uidatepicker._updateDatepicker(i),h=e.Uidatepicker._checkOffset(i,h,o),i.dpDiv.css({position:e.Uidatepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:h.left+"px",top:h.top+"px"}),i.inline||(l=e.Uidatepicker._get(i,"showAnim"),u=e.Uidatepicker._get(i,"duration"),i.dpDiv.css("z-index",s(e(t))+1),e.Uidatepicker._UidatepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.Uidatepicker._get(i,"showOptions"),u):i.dpDiv[l||"show"](l?u:null),e.Uidatepicker._shouldFocusInput(i)&&i.input.focus(),e.Uidatepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,v=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var i,s=this._getNumberOfMonths(t),n=s[1],a=17,r=t.dpDiv.find("."+this._dayOverClass+" a");r.length>0&&o.apply(r.get(0)),t.dpDiv.removeClass("ui-Uidatepicker-multi-2 ui-Uidatepicker-multi-3 ui-Uidatepicker-multi-4").width(""),n>1&&t.dpDiv.addClass("ui-Uidatepicker-multi-"+n).css("width",a*n+"em"),t.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-Uidatepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-Uidatepicker-rtl"),t===e.Uidatepicker._curInst&&e.Uidatepicker._UidatepickerShowing&&e.Uidatepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-Uidatepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,s){var n=t.dpDiv.outerWidth(),a=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,r=t.input?t.input.outerHeight():0,h=document.documentElement.clientWidth+(s?0:e(document).scrollLeft()),l=document.documentElement.clientHeight+(s?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?n-o:0,i.left-=s&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=s&&i.top===t.input.offset().top+r?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>h&&h>n?Math.abs(i.left+n-h):0),i.top-=Math.min(i.top,i.top+a>l&&l>a?Math.abs(a+r):0),i},_findPos:function(t){for(var i,s=this._getInst(t),n=this._get(s,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[n?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,s,n,a,o=this._curInst;!o||t&&o!==e.data(t,"Uidatepicker")||this._UidatepickerShowing&&(i=this._get(o,"showAnim"),s=this._get(o,"duration"),n=function(){e.Uidatepicker._tidyDialog(o)},e.effects&&(e.effects.effect[i]||e.effects[i])?o.dpDiv.hide(i,e.Uidatepicker._get(o,"showOptions"),s,n):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,n),i||n(),this._UidatepickerShowing=!1,a=this._get(o,"onClose"),a&&a.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-Uidatepicker-calendar")},_checkExternalClick:function(t){if(e.Uidatepicker._curInst){var i=e(t.target),s=e.Uidatepicker._getInst(i[0]);(i[0].id!==e.Uidatepicker._mainDivId&&0===i.parents("#"+e.Uidatepicker._mainDivId).length&&!i.hasClass(e.Uidatepicker.markerClassName)&&!i.closest("."+e.Uidatepicker._triggerClass).length&&e.Uidatepicker._UidatepickerShowing&&(!e.Uidatepicker._inDialog||!e.blockUI)||i.hasClass(e.Uidatepicker.markerClassName)&&e.Uidatepicker._curInst!==s)&&e.Uidatepicker._hideDatepicker()}},_adjustDate:function(t,i,s){var n=e(t),a=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(a,i+("M"===s?this._get(a,"showCurrentAtPos"):0),s),this._updateDatepicker(a))},_gotoToday:function(t){var i,s=e(t),n=this._getInst(s[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(s)},_selectMonthYear:function(t,i,s){var n=e(t),a=this._getInst(n[0]);a["selected"+("M"===s?"Month":"Year")]=a["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(n)},_selectDay:function(t,i,s,n){var a,o=e(t);e(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(a=this._getInst(o[0]),a.selectedDay=a.currentDay=e("a",n).html(),a.selectedMonth=a.currentMonth=i,a.selectedYear=a.currentYear=s,this._selectDate(t,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var s,n=e(t),a=this._getInst(n[0]);i=null!=i?i:this._formatDate(a),a.input&&a.input.val(i),this._updateAlternate(a),s=this._get(a,"onSelect"),s?s.apply(a.input?a.input[0]:null,[i,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,s,n,a=this._get(t,"altField");a&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),s=this._getDate(t),n=this.formatDate(i,s,this._getFormatConfig(t)),e(a).each(function(){e(this).val(n)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,s){if(null==t||null==i)throw"Invalid arguments";if(i="object"==typeof i?""+i:i+"",""===i)return null;var n,a,o,r,h=0,l=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),d=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,c=(s?s.dayNames:null)||this._defaults.dayNames,p=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,f=(s?s.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,y=-1,b=!1,_=function(e){var i=t.length>n+1&&t.charAt(n+1)===e;return i&&n++,i},x=function(e){var t=_(e),s="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,n="y"===e?s:1,a=RegExp("^\\d{"+n+","+s+"}"),o=i.substring(h).match(a);if(!o)throw"Missing number at position "+h;return h+=o[0].length,parseInt(o[0],10)},w=function(t,s,n){var a=-1,o=e.map(_(t)?n:s,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(o,function(e,t){var s=t[1];return i.substr(h,s.length).toLowerCase()===s.toLowerCase()?(a=t[0],h+=s.length,!1):void 0}),-1!==a)return a+1;throw"Unknown name at position "+h},k=function(){if(i.charAt(h)!==t.charAt(n))throw"Unexpected literal at position "+h;h++};for(n=0;t.length>n;n++)if(b)"'"!==t.charAt(n)||_("'")?k():b=!1;else switch(t.charAt(n)){case"d":v=x("d");break;case"D":w("D",d,c);break;case"o":y=x("o");break;case"m":g=x("m");break;case"M":g=w("M",p,f);break;case"y":m=x("y");break;case"@":r=new Date(x("@")),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"!":r=new Date((x("!")-this._ticksTo1970)/1e4),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"'":_("'")?k():b=!0;break;default:k()}if(i.length>h&&(o=i.substr(h),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=m?0:-100)),y>-1)for(g=1,v=y;;){if(a=this._getDaysInMonth(m,g-1),a>=v)break;g++,v-=a}if(r=this._daylightSavingAdjust(new Date(m,g-1,v)),r.getFullYear()!==m||r.getMonth()+1!==g||r.getDate()!==v)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";var s,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,h=function(t){var i=e.length>s+1&&e.charAt(s+1)===t;return i&&s++,i},l=function(e,t,i){var s=""+t;if(h(e))for(;i>s.length;)s="0"+s;return s},u=function(e,t,i,s){return h(e)?s[t]:i[t]},d="",c=!1;if(t)for(s=0;e.length>s;s++)if(c)"'"!==e.charAt(s)||h("'")?d+=e.charAt(s):c=!1;else switch(e.charAt(s)){case"d":d+=l("d",t.getDate(),2);break;case"D":d+=u("D",t.getDay(),n,a);break;case"o":d+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=l("m",t.getMonth()+1,2);break;case"M":d+=u("M",t.getMonth(),o,r);break;case"y":d+=h("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":h("'")?d+="'":c=!0;break;default:d+=e.charAt(s)}return d},_possibleChars:function(e){var t,i="",s=!1,n=function(i){var s=e.length>t+1&&e.charAt(t+1)===i;return s&&t++,s};for(t=0;e.length>t;t++)if(s)"'"!==e.charAt(t)||n("'")?i+=e.charAt(t):s=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":n("'")?i+="'":s=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),s=e.lastVal=e.input?e.input.val():null,n=this._getDefaultDate(e),a=n,o=this._getFormatConfig(e);try{a=this.parseDate(i,s,o)||n}catch(r){s=t?"":s}e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),e.currentDay=s?a.getDate():0,e.currentMonth=s?a.getMonth():0,e.currentYear=s?a.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,s){var n=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},a=function(i){try{return e.Uidatepicker.parseDate(e.Uidatepicker._get(t,"dateFormat"),i,e.Uidatepicker._getFormatConfig(t))}catch(s){}for(var n=(i.toLowerCase().match(/^c/)?e.Uidatepicker._getDate(t):null)||new Date,a=n.getFullYear(),o=n.getMonth(),r=n.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=h.exec(i);l;){switch(l[2]||"d"){case"d":case"D":r+=parseInt(l[1],10);break;case"w":case"W":r+=7*parseInt(l[1],10);break;case"m":case"M":o+=parseInt(l[1],10),r=Math.min(r,e.Uidatepicker._getDaysInMonth(a,o));break;case"y":case"Y":a+=parseInt(l[1],10),r=Math.min(r,e.Uidatepicker._getDaysInMonth(a,o))}l=h.exec(i)}return new Date(a,o,r)},o=null==i||""===i?s:"string"==typeof i?a(i):"number"==typeof i?isNaN(i)?s:n(i):new Date(i.getTime());return o=o&&"Invalid Date"==""+o?s:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var s=!t,n=e.selectedMonth,a=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),n===e.selectedMonth&&a===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(s?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),s="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.Uidatepicker._adjustDate(s,-i,"M")},next:function(){e.Uidatepicker._adjustDate(s,+i,"M")},hide:function(){e.Uidatepicker._hideDatepicker()},today:function(){e.Uidatepicker._gotoToday(s)},selectDay:function(){return e.Uidatepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.Uidatepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return e.Uidatepicker._selectMonthYear(s,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,s,n,a,o,r,h,l,u,d,c,p,f,m,g,v,y,b,_,x,w,k,T,D,S,M,C,N,A,P,I,H,z,F,E,O,j,W,L=new Date,R=this._daylightSavingAdjust(new Date(L.getFullYear(),L.getMonth(),L.getDate())),Y=this._get(e,"isRTL"),B=this._get(e,"showButtonPanel"),J=this._get(e,"hideIfNoPrevNext"),q=this._get(e,"navigationAsDateFormat"),K=this._getNumberOfMonths(e),V=this._get(e,"showCurrentAtPos"),U=this._get(e,"stepMonths"),Q=1!==K[0]||1!==K[1],G=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),X=this._getMinMaxDate(e,"min"),$=this._getMinMaxDate(e,"max"),Z=e.drawMonth-V,et=e.drawYear;if(0>Z&&(Z+=12,et--),$)for(t=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-K[0]*K[1]+1,$.getDate())),t=X&&X>t?X:t;this._daylightSavingAdjust(new Date(et,Z,1))>t;)Z--,0>Z&&(Z=11,et--);for(e.drawMonth=Z,e.drawYear=et,i=this._get(e,"prevText"),i=q?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z-U,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-Uidatepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>":J?"":"<a class='ui-Uidatepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>",n=this._get(e,"nextText"),n=q?this.formatDate(n,this._daylightSavingAdjust(new Date(et,Z+U,1)),this._getFormatConfig(e)):n,a=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-Uidatepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>":J?"":"<a class='ui-Uidatepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>",o=this._get(e,"currentText"),r=this._get(e,"gotoCurrent")&&e.currentDay?G:R,o=q?this.formatDate(o,r,this._getFormatConfig(e)):o,h=e.inline?"":"<button type='button' class='ui-Uidatepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",l=B?"<div class='ui-Uidatepicker-buttonpane ui-widget-content'>"+(Y?h:"")+(this._isInRange(e,r)?"<button type='button' class='ui-Uidatepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(Y?"":h)+"</div>":"",u=parseInt(this._get(e,"firstDay"),10),u=isNaN(u)?0:u,d=this._get(e,"showWeek"),c=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),_="",w=0;K[0]>w;w++){for(k="",this.maxRows=4,T=0;K[1]>T;T++){if(D=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),S=" ui-corner-all",M="",Q){if(M+="<div class='ui-Uidatepicker-group",K[1]>1)switch(T){case 0:M+=" ui-Uidatepicker-group-first",S=" ui-corner-"+(Y?"right":"left");break;case K[1]-1:M+=" ui-Uidatepicker-group-last",S=" ui-corner-"+(Y?"left":"right");break;default:M+=" ui-Uidatepicker-group-middle",S=""}M+="'>"}for(M+="<div class='ui-Uidatepicker-header ui-widget-header ui-helper-clearfix"+S+"'>"+(/all|left/.test(S)&&0===w?Y?a:s:"")+(/all|right/.test(S)&&0===w?Y?s:a:"")+this._generateMonthYearHeader(e,Z,et,X,$,w>0||T>0,f,m)+"</div><table class='ui-Uidatepicker-calendar'><thead>"+"<tr>",C=d?"<th class='ui-Uidatepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",x=0;7>x;x++)N=(x+u)%7,C+="<th scope='col'"+((x+u+6)%7>=5?" class='ui-Uidatepicker-week-end'":"")+">"+"<span title='"+c[N]+"'>"+p[N]+"</span></th>";for(M+=C+"</tr></thead><tbody>",A=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,A)),P=(this._getFirstDayOfMonth(et,Z)-u+7)%7,I=Math.ceil((P+A)/7),H=Q?this.maxRows>I?this.maxRows:I:I,this.maxRows=H,z=this._daylightSavingAdjust(new Date(et,Z,1-P)),F=0;H>F;F++){for(M+="<tr>",E=d?"<td class='ui-Uidatepicker-week-col'>"+this._get(e,"calculateWeek")(z)+"</td>":"",x=0;7>x;x++)O=g?g.apply(e.input?e.input[0]:null,[z]):[!0,""],j=z.getMonth()!==Z,W=j&&!y||!O[0]||X&&X>z||$&&z>$,E+="<td class='"+((x+u+6)%7>=5?" ui-Uidatepicker-week-end":"")+(j?" ui-Uidatepicker-other-month":"")+(z.getTime()===D.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===z.getTime()&&b.getTime()===D.getTime()?" "+this._dayOverClass:"")+(W?" "+this._unselectableClass+" ui-state-disabled":"")+(j&&!v?"":" "+O[1]+(z.getTime()===G.getTime()?" "+this._currentClass:"")+(z.getTime()===R.getTime()?" ui-Uidatepicker-today":""))+"'"+(j&&!v||!O[2]?"":" title='"+O[2].replace(/'/g,"&#39;")+"'")+(W?"":" data-handler='selectDay' data-event='click' data-month='"+z.getMonth()+"' data-year='"+z.getFullYear()+"'")+">"+(j&&!v?"&#xa0;":W?"<span class='ui-state-default'>"+z.getDate()+"</span>":"<a class='ui-state-default"+(z.getTime()===R.getTime()?" ui-state-highlight":"")+(z.getTime()===G.getTime()?" ui-state-active":"")+(j?" ui-priority-secondary":"")+"' href='#'>"+z.getDate()+"</a>")+"</td>",z.setDate(z.getDate()+1),z=this._daylightSavingAdjust(z);M+=E+"</tr>"}Z++,Z>11&&(Z=0,et++),M+="</tbody></table>"+(Q?"</div>"+(K[0]>0&&T===K[1]-1?"<div class='ui-Uidatepicker-row-break'></div>":""):""),k+=M}_+=k}return _+=l,e._keyEvent=!1,_},_generateMonthYearHeader:function(e,t,i,s,n,a,o,r){var h,l,u,d,c,p,f,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-Uidatepicker-title'>",_="";if(a||!g)_+="<span class='ui-Uidatepicker-month'>"+o[t]+"</span>";else{for(h=s&&s.getFullYear()===i,l=n&&n.getFullYear()===i,_+="<select class='ui-Uidatepicker-month' data-handler='selectMonth' data-event='change'>",u=0;12>u;u++)(!h||u>=s.getMonth())&&(!l||n.getMonth()>=u)&&(_+="<option value='"+u+"'"+(u===t?" selected='selected'":"")+">"+r[u]+"</option>");_+="</select>"}if(y||(b+=_+(!a&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",a||!v)b+="<span class='ui-Uidatepicker-year'>"+i+"</span>";else{for(d=this._get(e,"yearRange").split(":"),c=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?c+parseInt(e,10):parseInt(e,10);return isNaN(t)?c:t},f=p(d[0]),m=Math.max(f,p(d[1]||"")),f=s?Math.max(f,s.getFullYear()):f,m=n?Math.min(m,n.getFullYear()):m,e.yearshtml+="<select class='ui-Uidatepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)e.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),y&&(b+=(!a&&g&&v?"":"&#xa0;")+_),b+="</div>"},_adjustInstDate:function(e,t,i){var s=e.drawYear+("Y"===i?t:0),n=e.drawMonth+("M"===i?t:0),a=Math.min(e.selectedDay,this._getDaysInMonth(s,n))+("D"===i?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(s,n,a)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),n=i&&i>t?i:t;return s&&n>s?s:n},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,s){var n=this._getNumberOfMonths(e),a=this._daylightSavingAdjust(new Date(i,s+(0>t?t:n[0]*n[1]),1));return 0>t&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(e,a)},_isInRange:function(e,t){var i,s,n=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),o=null,r=null,h=this._get(e,"yearRange");return h&&(i=h.split(":"),s=(new Date).getFullYear(),o=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(o+=s),i[1].match(/[+\-].*/)&&(r+=s)),(!n||t.getTime()>=n.getTime())&&(!a||t.getTime()<=a.getTime())&&(!o||t.getFullYear()>=o)&&(!r||r>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,s){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var n=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(s,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),n,this._getFormatConfig(e))}}),e.fn.Uidatepicker=function(t){if(!this.length)return this;e.Uidatepicker.initialized||(e(document).mousedown(e.Uidatepicker._checkExternalClick),e.Uidatepicker.initialized=!0),0===e("#"+e.Uidatepicker._mainDivId).length&&e("body").append(e.Uidatepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.Uidatepicker["_"+t+"Datepicker"].apply(e.Uidatepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.Uidatepicker["_"+t+"Datepicker"].apply(e.Uidatepicker,[this].concat(i)):e.Uidatepicker._attachDatepicker(this,t)}):e.Uidatepicker["_"+t+"Datepicker"].apply(e.Uidatepicker,[this[0]].concat(i))},e.Uidatepicker=new n,e.Uidatepicker.initialized=!1,e.Uidatepicker.uuid=(new Date).getTime(),e.Uidatepicker.version="1.11.4",e.Uidatepicker,e.widget("ui.draggable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(t){var i=this.options;return this._blurActiveElement(t),this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0):!1)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var i=this.document[0];if(this.handleElement.is(t.target))try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()&&e(i.activeElement).blur()}catch(s){}},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",t,s)===!1)return this._mouseUp({}),!1;this.position=s.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,s=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper),n=s?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s&&n[0]===this.element[0]&&this._setPositionRelative(),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options,a=this.document[0];return this.relativeContainer=null,n.containment?"window"===n.containment?(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===n.containment?(this.containment=[0,0,e(a).width()-this.helperProportions.width-this.margins.left,(e(a).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):n.containment.constructor===Array?(this.containment=n.containment,void 0):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=e(n.containment),s=i[0],s&&(t=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i),void 0):(this.containment=null,void 0)
},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,s=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,s,n,a,o=this.options,r=this._isRootNode(this.scrollParent[0]),h=e.pageX,l=e.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(h=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(l=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(h=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(l=i[3]+this.offset.click.top)),o.grid&&(n=o.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,l=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-o.grid[1]:n+o.grid[1]:n,a=o.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,h=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-o.grid[0]:a+o.grid[0]:a),"y"===o.axis&&(h=this.originalPageX),"x"===o.axis&&(l=this.originalPageY)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,i,s){return s=s||this._uiHash(),e.ui.plugin.call(this,t,[i,s,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),s.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,s){var n=e.extend({},i,{item:s.element});s.sortables=[],e(s.options.connectToSortable).each(function(){var i=e(this).sortable("instance");i&&!i.options.disabled&&(s.sortables.push(i),i.refreshPositions(),i._trigger("activate",t,n))})},stop:function(t,i,s){var n=e.extend({},i,{item:s.element});s.cancelHelperRemoval=!1,e.each(s.sortables,function(){var e=this;e.isOver?(e.isOver=0,s.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,n))})},drag:function(t,i,s){e.each(s.sortables,function(){var n=!1,a=this;a.positionAbs=s.positionAbs,a.helperProportions=s.helperProportions,a.offset.click=s.offset.click,a._intersectsWith(a.containerCache)&&(n=!0,e.each(s.sortables,function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,this!==a&&this._intersectsWith(this.containerCache)&&e.contains(a.element[0],this.element[0])&&(n=!1),n})),n?(a.isOver||(a.isOver=1,s._parent=i.helper.parent(),a.currentItem=i.helper.appendTo(a.element).data("ui-sortable-item",!0),a.options._helper=a.options.helper,a.options.helper=function(){return i.helper[0]},t.target=a.currentItem[0],a._mouseCapture(t,!0),a._mouseStart(t,!0,!0),a.offset.click.top=s.offset.click.top,a.offset.click.left=s.offset.click.left,a.offset.parent.left-=s.offset.parent.left-a.offset.parent.left,a.offset.parent.top-=s.offset.parent.top-a.offset.parent.top,s._trigger("toSortable",t),s.dropped=a.element,e.each(s.sortables,function(){this.refreshPositions()}),s.currentItem=s.element,a.fromOutside=s),a.currentItem&&(a._mouseDrag(t),i.position=a.position)):a.isOver&&(a.isOver=0,a.cancelHelperRemoval=!0,a.options._revert=a.options.revert,a.options.revert=!1,a._trigger("out",t,a._uiHash(a)),a._mouseStop(t,!0),a.options.revert=a.options._revert,a.options.helper=a.options._helper,a.placeholder&&a.placeholder.remove(),i.helper.appendTo(s._parent),s._refreshOffsets(t),i.position=s._generatePosition(t,!0),s._trigger("fromSortable",t),s.dropped=!1,e.each(s.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i,s){var n=e("body"),a=s.options;n.css("cursor")&&(a._cursor=n.css("cursor")),n.css("cursor",a.cursor)},stop:function(t,i,s){var n=s.options;n._cursor&&e("body").css("cursor",n._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i,s){var n=e(i.helper),a=s.options;n.css("opacity")&&(a._opacity=n.css("opacity")),n.css("opacity",a.opacity)},stop:function(t,i,s){var n=s.options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,s){var n=s.options,a=!1,o=s.scrollParentNotHidden[0],r=s.document[0];o!==r&&"HTML"!==o.tagName?(n.axis&&"x"===n.axis||(s.overflowOffset.top+o.offsetHeight-t.pageY<n.scrollSensitivity?o.scrollTop=a=o.scrollTop+n.scrollSpeed:t.pageY-s.overflowOffset.top<n.scrollSensitivity&&(o.scrollTop=a=o.scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(s.overflowOffset.left+o.offsetWidth-t.pageX<n.scrollSensitivity?o.scrollLeft=a=o.scrollLeft+n.scrollSpeed:t.pageX-s.overflowOffset.left<n.scrollSensitivity&&(o.scrollLeft=a=o.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(r).scrollTop()<n.scrollSensitivity?a=e(r).scrollTop(e(r).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(r).scrollTop())<n.scrollSensitivity&&(a=e(r).scrollTop(e(r).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(r).scrollLeft()<n.scrollSensitivity?a=e(r).scrollLeft(e(r).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(r).scrollLeft())<n.scrollSensitivity&&(a=e(r).scrollLeft(e(r).scrollLeft()+n.scrollSpeed)))),a!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(s,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i,s){var n=s.options;s.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var t=e(this),i=t.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i,s){var n,a,o,r,h,l,u,d,c,p,f=s.options,m=f.snapTolerance,g=i.offset.left,v=g+s.helperProportions.width,y=i.offset.top,b=y+s.helperProportions.height;for(c=s.snapElements.length-1;c>=0;c--)h=s.snapElements[c].left-s.margins.left,l=h+s.snapElements[c].width,u=s.snapElements[c].top-s.margins.top,d=u+s.snapElements[c].height,h-m>v||g>l+m||u-m>b||y>d+m||!e.contains(s.snapElements[c].item.ownerDocument,s.snapElements[c].item)?(s.snapElements[c].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=!1):("inner"!==f.snapMode&&(n=m>=Math.abs(u-b),a=m>=Math.abs(d-y),o=m>=Math.abs(h-v),r=m>=Math.abs(l-g),n&&(i.position.top=s._convertPositionTo("relative",{top:u-s.helperProportions.height,left:0}).top),a&&(i.position.top=s._convertPositionTo("relative",{top:d,left:0}).top),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h-s.helperProportions.width}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l}).left)),p=n||a||o||r,"outer"!==f.snapMode&&(n=m>=Math.abs(u-y),a=m>=Math.abs(d-b),o=m>=Math.abs(h-g),r=m>=Math.abs(l-v),n&&(i.position.top=s._convertPositionTo("relative",{top:u,left:0}).top),a&&(i.position.top=s._convertPositionTo("relative",{top:d-s.helperProportions.height,left:0}).top),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left)),!s.snapElements[c].snapping&&(n||a||o||r||p)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=n||a||o||r||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,i,s){var n,a=s.options,o=e.makeArray(e(a.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});o.length&&(n=parseInt(e(o[0]).css("zIndex"),10)||0,e(o).each(function(t){e(this).css("zIndex",n+t)}),this.css("zIndex",n+o.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i,s){var n=e(i.helper),a=s.options;n.css("zIndex")&&(a._zIndex=n.css("zIndex")),n.css("zIndex",a.zIndex)},stop:function(t,i,s){var n=s.options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}}),e.ui.draggable,e.widget("ui.resizable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0},_isNumber:function(e){return!isNaN(parseInt(e,10))},_hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return t[s]>0?!0:(t[s]=1,n=t[s]>0,t[s]=0,n)},_create:function(){var t,i,s,n,a,o=this,r=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;t.length>i;i++)s=e.trim(t[i]),a="ui-resizable-"+s,n=e("<div class='ui-resizable-handle "+a+"'></div>"),n.css({zIndex:r.zIndex}),"se"===s&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(n);this._renderAxis=function(t){var i,s,n,a;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=e(this.handles[i]),this._on(this.handles[i],{mousedown:o._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(s=e(this.handles[i],this.element),a=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(n,a),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=n&&n[1]?n[1]:"se")}),r.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(e(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){r.disabled||o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,s,n=!1;for(i in this.handles)s=e(this.handles[i])[0],(s===t.target||e.contains(s,t.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var i,s,n,a=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),a.containment&&(i+=e(a.containment).scrollLeft()||0,s+=e(a.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:i,top:s},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===n?this.axis+"-resize":n),o.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,s,n=this.originalMousePosition,a=this.axis,o=t.pageX-n.left||0,r=t.pageY-n.top||0,h=this._change[a];return this._updatePrevProperties(),h?(i=h.apply(this,[t,o,r]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(t){this.resizing=!1;var i,s,n,a,o,r,h,l=this.options,u=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&this._hasScroll(i[0],"left")?0:u.sizeDiff.height,a=s?0:u.sizeDiff.width,o={width:u.helper.width()-a,height:u.helper.height()-n},r=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,h=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,l.animate||this.element.css(e.extend(o,{top:h,left:r})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!l.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,i,s,n,a,o=this.options;a={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||e)&&(t=a.minHeight*this.aspectRatio,s=a.minWidth/this.aspectRatio,i=a.maxHeight*this.aspectRatio,n=a.maxWidth/this.aspectRatio,t>a.minWidth&&(a.minWidth=t),s>a.minHeight&&(a.minHeight=s),a.maxWidth>i&&(a.maxWidth=i),a.maxHeight>n&&(a.maxHeight=n)),this._vBoundaries=a},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,s=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===s&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===s&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,s=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,n=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,a=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,o=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,r=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,l=/sw|nw|w/.test(i),u=/nw|ne|n/.test(i);return a&&(e.width=t.minWidth),o&&(e.height=t.minHeight),s&&(e.width=t.maxWidth),n&&(e.height=t.maxHeight),a&&l&&(e.left=r-t.minWidth),s&&l&&(e.left=r-t.maxWidth),o&&u&&(e.top=h-t.minHeight),n&&u&&(e.top=h-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,i=[],s=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],n=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];4>t;t++)i[t]=parseInt(s[t],10)||0,i[t]+=parseInt(n[t],10)||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,i=this.helper||this.element;this._proportionallyResizeElements.length>t;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},sw:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,s]))},ne:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},nw:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,s]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).resizable("instance"),s=i.options,n=i._proportionallyResizeElements,a=n.length&&/textarea/i.test(n[0].nodeName),o=a&&i._hasScroll(n[0],"left")?0:i.sizeDiff.height,r=a?0:i.sizeDiff.width,h={width:i.size.width-r,height:i.size.height-o},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(h,u&&l?{top:u,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&e(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,i,s,n,a,o,r,h=e(this).resizable("instance"),l=h.options,u=h.element,d=l.containment,c=d instanceof e?d.get(0):/parent/.test(d)?u.parent().get(0):d;c&&(h.containerElement=e(c),/document/.test(d)||d===document?(h.containerOffset={left:0,top:0},h.containerPosition={left:0,top:0},h.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(c),i=[],e(["Top","Right","Left","Bottom"]).each(function(e,s){i[e]=h._num(t.css("padding"+s))}),h.containerOffset=t.offset(),h.containerPosition=t.position(),h.containerSize={height:t.innerHeight()-i[3],width:t.innerWidth()-i[1]},s=h.containerOffset,n=h.containerSize.height,a=h.containerSize.width,o=h._hasScroll(c,"left")?c.scrollWidth:a,r=h._hasScroll(c)?c.scrollHeight:n,h.parentData={element:c,left:s.left,top:s.top,width:o,height:r}))},resize:function(t){var i,s,n,a,o=e(this).resizable("instance"),r=o.options,h=o.containerOffset,l=o.position,u=o._aspectRatio||t.shiftKey,d={top:0,left:0},c=o.containerElement,p=!0;c[0]!==document&&/static/.test(c.css("position"))&&(d=h),l.left<(o._helper?h.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-h.left:o.position.left-d.left),u&&(o.size.height=o.size.width/o.aspectRatio,p=!1),o.position.left=r.helper?h.left:0),l.top<(o._helper?h.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-h.top:o.position.top),u&&(o.size.width=o.size.height*o.aspectRatio,p=!1),o.position.top=o._helper?h.top:0),n=o.containerElement.get(0)===o.element.parent().get(0),a=/relative|absolute/.test(o.containerElement.css("position")),n&&a?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),i=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-d.left:o.offset.left-h.left)),s=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-d.top:o.offset.top-h.top)),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,u&&(o.size.height=o.size.width/o.aspectRatio,p=!1)),s+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-s,u&&(o.size.width=o.size.height*o.aspectRatio,p=!1)),p||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),i=t.options,s=t.containerOffset,n=t.containerPosition,a=t.containerElement,o=e(t.helper),r=o.offset(),h=o.outerWidth()-t.sizeDiff.width,l=o.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l}),t._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),i=t.options;e(i.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})},resize:function(t,i){var s=e(this).resizable("instance"),n=s.options,a=s.originalSize,o=s.originalPosition,r={height:s.size.height-a.height||0,width:s.size.width-a.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0};e(n.alsoResize).each(function(){var t=e(this),s=e(this).data("ui-resizable-alsoresize"),n={},a=t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(a,function(e,t){var i=(s[t]||0)+(r[t]||0);i&&i>=0&&(n[t]=i||null)}),t.css(n)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),i=t.options,s=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,i=e(this).resizable("instance"),s=i.options,n=i.size,a=i.originalSize,o=i.originalPosition,r=i.axis,h="number"==typeof s.grid?[s.grid,s.grid]:s.grid,l=h[0]||1,u=h[1]||1,d=Math.round((n.width-a.width)/l)*l,c=Math.round((n.height-a.height)/u)*u,p=a.width+d,f=a.height+c,m=s.maxWidth&&p>s.maxWidth,g=s.maxHeight&&f>s.maxHeight,v=s.minWidth&&s.minWidth>p,y=s.minHeight&&s.minHeight>f;s.grid=h,v&&(p+=l),y&&(f+=u),m&&(p-=l),g&&(f-=u),/^(se|s|e)$/.test(r)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.top=o.top-c):/^(sw)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.left=o.left-d):((0>=f-u||0>=p-l)&&(t=i._getPaddingPlusBorderDimensions(this)),f-u>0?(i.size.height=f,i.position.top=o.top-c):(f=u-t.height,i.size.height=f,i.position.top=o.top+a.height-f),p-l>0?(i.size.width=p,i.position.left=o.left-d):(p=l-t.width,i.size.width=p,i.position.left=o.left+a.width-p))}}),e.ui.resizable,e.widget("ui.dialog",{version:"1.11.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i,s=this;if(this._isOpen&&this._trigger("beforeClose",t)!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{i=this.document[0].activeElement,i&&"body"!==i.nodeName.toLowerCase()&&e(i).blur()}catch(n){}this._hide(this.uiDialog,this.options.hide,function(){s._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,i){var s=!1,n=this.uiDialog.siblings(".ui-front:visible").map(function(){return+e(this).css("z-index")}).get(),a=Math.max.apply(null,n);return a>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",a+1),s=!0),s&&!i&&this._trigger("focus",t),s},open:function(){var t=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),void 0):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"),void 0)},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),this.close(t),void 0;
if(t.keyCode===e.ui.keyCode.TAB&&!t.isDefaultPrevented()){var i=this.uiDialog.find(":tabbable"),s=i.filter(":first"),n=i.filter(":last");t.target!==n[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==s[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){n.focus()}),t.preventDefault()):(this._delay(function(){s.focus()}),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?(this.uiDialog.removeClass("ui-dialog-buttons"),void 0):(e.each(i,function(i,s){var n,a;s=e.isFunction(s)?{click:s,text:i}:s,s=e.extend({type:"button"},s),n=s.click,s.click=function(){n.apply(t.element[0],arguments)},a={icons:s.icons,text:s.showText},delete s.icons,delete s.showText,e("<button></button>",s).button(a).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0)},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,n){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",s,t(n))},drag:function(e,s){i._trigger("drag",e,t(s))},stop:function(n,a){var o=a.offset.left-i.document.scrollLeft(),r=a.offset.top-i.document.scrollTop();s.position={my:"left top",at:"left"+(o>=0?"+":"")+o+" "+"top"+(r>=0?"+":"")+r,of:i.window},e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",n,t(a))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,s=this.options,n=s.resizable,a=this.uiDialog.css("position"),o="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:o,start:function(s,n){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",s,t(n))},resize:function(e,s){i._trigger("resize",e,t(s))},stop:function(n,a){var o=i.uiDialog.offset(),r=o.left-i.document.scrollLeft(),h=o.top-i.document.scrollTop();s.height=i.uiDialog.height(),s.width=i.uiDialog.width(),s.position={my:"left top",at:"left"+(r>=0?"+":"")+r+" "+"top"+(h>=0?"+":"")+h,of:i.window},e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",n,t(a))}}).css("position",a)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),i=e.inArray(this,t);-1!==i&&t.splice(i,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var i=this,s=!1,n={};e.each(t,function(e,t){i._setOption(e,t),e in i.sizeRelatedOptions&&(s=!0),e in i.resizableRelatedOptions&&(n[e]=t)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",n)},_setOption:function(e,t){var i,s,n=this.uiDialog;"dialogClass"===e&&n.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(i=n.is(":data(ui-draggable)"),i&&!t&&n.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(s=n.is(":data(ui-resizable)"),s&&!t&&n.resizable("destroy"),s&&"string"==typeof t&&n.resizable("option","handles",t),s||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),e=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),t=Math.max(0,s.minHeight-e),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-e):"none","auto"===s.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-Uidatepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}}),e.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,i=this.options,s=i.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(s)?s:function(e){return e.is(s)},this.proportions=function(){return arguments.length?(t=arguments[0],void 0):t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(i.scope),i.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;e.length>t;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){if("accept"===t)this.accept=e.isFunction(i)?i:function(e){return e.is(i)};else if("scope"===t){var s=e.ui.ddmanager.droppables[this.options.scope];this._splice(s),this._addToManager(i)}this._super(t,i)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var s=i||e.ui.ddmanager.current,n=!1;return s&&(s.currentItem||s.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=e(this).droppable("instance");return i.options.greedy&&!i.options.disabled&&i.options.scope===s.options.scope&&i.accept.call(i.element[0],s.currentItem||s.element)&&e.ui.intersect(s,e.extend(i,{offset:i.element.offset()}),i.options.tolerance,t)?(n=!0,!1):void 0}),n?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(s)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(){function e(e,t,i){return e>=t&&t+i>e}return function(t,i,s,n){if(!i.offset)return!1;var a=(t.positionAbs||t.position.absolute).left+t.margins.left,o=(t.positionAbs||t.position.absolute).top+t.margins.top,r=a+t.helperProportions.width,h=o+t.helperProportions.height,l=i.offset.left,u=i.offset.top,d=l+i.proportions().width,c=u+i.proportions().height;switch(s){case"fit":return a>=l&&d>=r&&o>=u&&c>=h;case"intersect":return a+t.helperProportions.width/2>l&&d>r-t.helperProportions.width/2&&o+t.helperProportions.height/2>u&&c>h-t.helperProportions.height/2;case"pointer":return e(n.pageY,u,i.proportions().height)&&e(n.pageX,l,i.proportions().width);case"touch":return(o>=u&&c>=o||h>=u&&c>=h||u>o&&h>c)&&(a>=l&&d>=a||r>=l&&d>=r||l>a&&r>d);default:return!1}}}(),e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var s,n,a=e.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,r=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(s=0;a.length>s;s++)if(!(a[s].options.disabled||t&&!a[s].accept.call(a[s].element[0],t.currentItem||t.element))){for(n=0;r.length>n;n++)if(r[n]===a[s].element[0]){a[s].proportions().height=0;continue e}a[s].visible="none"!==a[s].element.css("display"),a[s].visible&&("mousedown"===o&&a[s]._activate.call(a[s],i),a[s].offset=a[s].element.offset(),a[s].proportions({width:a[s].element[0].offsetWidth,height:a[s].element[0].offsetHeight}))}},drop:function(t,i){var s=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance,i)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),s},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,n,a,o=e.ui.intersect(t,this,this.options.tolerance,i),r=!o&&this.isover?"isout":o&&!this.isover?"isover":null;r&&(this.options.greedy&&(n=this.options.scope,a=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===n}),a.length&&(s=e(a[0]).droppable("instance"),s.greedyChild="isover"===r)),s&&"isover"===r&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),s&&"isout"===r&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}},e.ui.droppable;var y="ui-effects-",b=e;e.effects={effect:{}},function(e,t){function i(e,t,i){var s=d[t.type]||{};return null==e?i||!t.def?null:t.def:(e=s.floor?~~e:parseFloat(e),isNaN(e)?t.def:s.mod?(e+s.mod)%s.mod:0>e?0:e>s.max?s.max:e)}function s(i){var s=l(),n=s._rgba=[];return i=i.toLowerCase(),f(h,function(e,a){var o,r=a.re.exec(i),h=r&&a.parse(r),l=a.space||"rgba";return h?(o=s[l](h),s[u[l].cache]=o[u[l].cache],n=s._rgba=o._rgba,!1):t}),n.length?("0,0,0,0"===n.join()&&e.extend(n,a.transparent),s):a[i]}function n(e,t,i){return i=(i+1)%1,1>6*i?e+6*(t-e)*i:1>2*i?t:2>3*i?e+6*(t-e)*(2/3-i):e}var a,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,h=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],l=e.Color=function(t,i,s,n){return new e.Color.fn.parse(t,i,s,n)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},c=l.support={},p=e("<p>")[0],f=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",c.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(u,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),l.fn=e.extend(l.prototype,{parse:function(n,o,r,h){if(n===t)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=e(n).css(o),o=t);var d=this,c=e.type(n),p=this._rgba=[];return o!==t&&(n=[n,o,r,h],c="array"),"string"===c?this.parse(s(n)||a._default):"array"===c?(f(u.rgba.props,function(e,t){p[t.idx]=i(n[t.idx],t)}),this):"object"===c?(n instanceof l?f(u,function(e,t){n[t.cache]&&(d[t.cache]=n[t.cache].slice())}):f(u,function(t,s){var a=s.cache;f(s.props,function(e,t){if(!d[a]&&s.to){if("alpha"===e||null==n[e])return;d[a]=s.to(d._rgba)}d[a][t.idx]=i(n[e],t,!0)}),d[a]&&0>e.inArray(null,d[a].slice(0,3))&&(d[a][3]=1,s.from&&(d._rgba=s.from(d[a])))}),this):t},is:function(e){var i=l(e),s=!0,n=this;return f(u,function(e,a){var o,r=i[a.cache];return r&&(o=n[a.cache]||a.to&&a.to(n._rgba)||[],f(a.props,function(e,i){return null!=r[i.idx]?s=r[i.idx]===o[i.idx]:t})),s}),s},_space:function(){var e=[],t=this;return f(u,function(i,s){t[s.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var s=l(e),n=s._space(),a=u[n],o=0===this.alpha()?l("transparent"):this,r=o[a.cache]||a.to(o._rgba),h=r.slice();return s=s[a.cache],f(a.props,function(e,n){var a=n.idx,o=r[a],l=s[a],u=d[n.type]||{};null!==l&&(null===o?h[a]=l:(u.mod&&(l-o>u.mod/2?o+=u.mod:o-l>u.mod/2&&(o-=u.mod)),h[a]=i((l-o)*t+o,n)))}),this[n](h)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),n=l(t)._rgba;return l(e.map(i,function(e,t){return(1-s)*n[t]+s*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),s=i.pop();return t&&i.push(~~(255*s)),"#"+e.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,u.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,s=e[0]/255,n=e[1]/255,a=e[2]/255,o=e[3],r=Math.max(s,n,a),h=Math.min(s,n,a),l=r-h,u=r+h,d=.5*u;return t=h===r?0:s===r?60*(n-a)/l+360:n===r?60*(a-s)/l+120:60*(s-n)/l+240,i=0===l?0:.5>=d?l/u:l/(2-u),[Math.round(t)%360,i,d,null==o?1:o]},u.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],s=e[2],a=e[3],o=.5>=s?s*(1+i):s+i-s*i,r=2*s-o;return[Math.round(255*n(r,o,t+1/3)),Math.round(255*n(r,o,t)),Math.round(255*n(r,o,t-1/3)),a]},f(u,function(s,n){var a=n.props,o=n.cache,h=n.to,u=n.from;l.fn[s]=function(s){if(h&&!this[o]&&(this[o]=h(this._rgba)),s===t)return this[o].slice();var n,r=e.type(s),d="array"===r||"object"===r?s:arguments,c=this[o].slice();return f(a,function(e,t){var s=d["object"===r?e:t.idx];null==s&&(s=c[t.idx]),c[t.idx]=i(s,t)}),u?(n=l(u(c)),n[o]=c,n):l(c)},f(a,function(t,i){l.fn[t]||(l.fn[t]=function(n){var a,o=e.type(n),h="alpha"===t?this._hsla?"hsla":"rgba":s,l=this[h](),u=l[i.idx];return"undefined"===o?u:("function"===o&&(n=n.call(this,u),o=e.type(n)),null==n&&i.empty?this:("string"===o&&(a=r.exec(n),a&&(n=u+parseFloat(a[2])*("+"===a[1]?1:-1))),l[i.idx]=n,this[h](l)))})})}),l.hook=function(t){var i=t.split(" ");f(i,function(t,i){e.cssHooks[i]={set:function(t,n){var a,o,r="";if("transparent"!==n&&("string"!==e.type(n)||(a=s(n)))){if(n=l(a||n),!c.rgba&&1!==n._rgba[3]){for(o="backgroundColor"===i?t.parentNode:t;(""===r||"transparent"===r)&&o&&o.style;)try{r=e.css(o,"backgroundColor"),o=o.parentNode}catch(h){}n=n.blend(r&&"transparent"!==r?r:"_default")}n=n.toRgbaString()}try{t.style[i]=n}catch(h){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=l(t.elem,i),t.end=l(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},l.hook(o),e.cssHooks.borderColor={expand:function(e){var t={};return f(["Top","Right","Bottom","Left"],function(i,s){t["border"+s+"Color"]=e}),t}},a=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(b),function(){function t(t){var i,s,n=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,a={};if(n&&n.length&&n[0]&&n[n[0]])for(s=n.length;s--;)i=n[s],"string"==typeof n[i]&&(a[e.camelCase(i)]=n[i]);else for(i in n)"string"==typeof n[i]&&(a[i]=n[i]);return a}function i(t,i){var s,a,o={};for(s in i)a=i[s],t[s]!==a&&(n[s]||(e.fx.step[s]||!isNaN(parseFloat(a)))&&(o[s]=a));return o}var s=["add","remove","toggle"],n={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(b.style(e.elem,i,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(n,a,o,r){var h=e.speed(a,o,r);return this.queue(function(){var a,o=e(this),r=o.attr("class")||"",l=h.children?o.find("*").addBack():o;l=l.map(function(){var i=e(this);return{el:i,start:t(this)}}),a=function(){e.each(s,function(e,t){n[t]&&o[t+"Class"](n[t])})},a(),l=l.map(function(){return this.end=t(this.el[0]),this.diff=i(this.start,this.end),this}),o.attr("class",r),l=l.map(function(){var t=this,i=e.Deferred(),s=e.extend({},h,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,s),i.promise()}),e.when.apply(e,l.get()).done(function(){a(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),h.complete.call(o[0])})})},e.fn.extend({addClass:function(t){return function(i,s,n,a){return s?e.effects.animateClass.call(this,{add:i},s,n,a):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,s,n,a){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},s,n,a):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(i,s,n,a,o){return"boolean"==typeof s||void 0===s?n?e.effects.animateClass.call(this,s?{add:i}:{remove:i},n,a,o):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},s,n,a)}}(e.fn.toggleClass),switchClass:function(t,i,s,n,a){return e.effects.animateClass.call(this,{add:i,remove:t},s,n,a)}})}(),function(){function t(t,i,s,n){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(n=i,s=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(n=s,s=i,i={}),e.isFunction(s)&&(n=s,s=null),i&&e.extend(t,i),s=s||i.duration,t.duration=e.fx.off?0:"number"==typeof s?s:s in e.fx.speeds?e.fx.speeds[s]:e.fx.speeds._default,t.complete=n||i.complete,t}function i(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.11.4",save:function(e,t){for(var i=0;t.length>i;i++)null!==t[i]&&e.data(y+t[i],e[0].style[t[i]])},restore:function(e,t){var i,s;for(s=0;t.length>s;s++)null!==t[s]&&(i=e.data(y+t[s]),void 0===i&&(i=""),e.css(t[s],i))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,s;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=e[1]/t.width}return{x:s,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},s=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),n={width:t.width(),height:t.height()},a=document.activeElement;try{a.id}catch(o){a=document.body}return t.wrap(s),(t[0]===a||e.contains(t[0],a))&&e(a).focus(),s=t.parent(),"static"===t.css("position")?(s.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,s){i[s]=t.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(n),s.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,s,n){return n=n||{},e.each(i,function(e,i){var a=t.cssUnit(i);a[0]>0&&(n[i]=a[0]*s+a[1])}),n}}),e.fn.extend({effect:function(){function i(t){function i(){e.isFunction(a)&&a.call(n[0]),e.isFunction(t)&&t()}var n=e(this),a=s.complete,r=s.mode;(n.is(":hidden")?"hide"===r:"show"===r)?(n[r](),i()):o.call(n[0],s,i)}var s=t.apply(this,arguments),n=s.mode,a=s.queue,o=e.effects.effect[s.effect];return e.fx.off||!o?n?this[n](s.duration,s.complete):this.each(function(){s.complete&&s.complete.call(this)}):a===!1?this.each(i):this.queue(a||"fx",i)},show:function(e){return function(s){if(i(s))return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="show",this.effect.call(this,n)}}(e.fn.show),hide:function(e){return function(s){if(i(s))return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="hide",this.effect.call(this,n)}}(e.fn.hide),toggle:function(e){return function(s){if(i(s)||"boolean"==typeof s)return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),s=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(s=[parseFloat(i),t])}),s}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;((t=Math.pow(2,--i))-1)/11>e;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?i(2*e)/2:1-i(-2*e+2)/2}})}(),e.effects,e.effects.effect.blind=function(t,i){var s,n,a,o=e(this),r=/up|down|vertical/,h=/up|left|vertical|horizontal/,l=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(o,t.mode||"hide"),d=t.direction||"up",c=r.test(d),p=c?"height":"width",f=c?"top":"left",m=h.test(d),g={},v="show"===u;o.parent().is(".ui-effects-wrapper")?e.effects.save(o.parent(),l):e.effects.save(o,l),o.show(),s=e.effects.createWrapper(o).css({overflow:"hidden"}),n=s[p](),a=parseFloat(s.css(f))||0,g[p]=v?n:0,m||(o.css(c?"bottom":"right",0).css(c?"top":"left","auto").css({position:"absolute"}),g[f]=v?a:n+a),v&&(s.css(p,0),m||s.css(f,a+n)),s.animate(g,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){"hide"===u&&o.hide(),e.effects.restore(o,l),e.effects.removeWrapper(o),i()}})},e.effects.effect.bounce=function(t,i){var s,n,a,o=e(this),r=["position","top","bottom","left","right","height","width"],h=e.effects.setMode(o,t.mode||"effect"),l="hide"===h,u="show"===h,d=t.direction||"up",c=t.distance,p=t.times||5,f=2*p+(u||l?1:0),m=t.duration/f,g=t.easing,v="up"===d||"down"===d?"top":"left",y="up"===d||"left"===d,b=o.queue(),_=b.length;for((u||l)&&r.push("opacity"),e.effects.save(o,r),o.show(),e.effects.createWrapper(o),c||(c=o["top"===v?"outerHeight":"outerWidth"]()/3),u&&(a={opacity:1},a[v]=0,o.css("opacity",0).css(v,y?2*-c:2*c).animate(a,m,g)),l&&(c/=Math.pow(2,p-1)),a={},a[v]=0,s=0;p>s;s++)n={},n[v]=(y?"-=":"+=")+c,o.animate(n,m,g).animate(a,m,g),c=l?2*c:c/2;l&&(n={opacity:0},n[v]=(y?"-=":"+=")+c,o.animate(n,m,g)),o.queue(function(){l&&o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}),_>1&&b.splice.apply(b,[1,0].concat(b.splice(_,f+1))),o.dequeue()},e.effects.effect.clip=function(t,i){var s,n,a,o=e(this),r=["position","top","bottom","left","right","height","width"],h=e.effects.setMode(o,t.mode||"hide"),l="show"===h,u=t.direction||"vertical",d="vertical"===u,c=d?"height":"width",p=d?"top":"left",f={};e.effects.save(o,r),o.show(),s=e.effects.createWrapper(o).css({overflow:"hidden"}),n="IMG"===o[0].tagName?s:o,a=n[c](),l&&(n.css(c,0),n.css(p,a/2)),f[c]=l?a:0,f[p]=l?0:a/2,n.animate(f,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){l||o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}})},e.effects.effect.drop=function(t,i){var s,n=e(this),a=["position","top","bottom","left","right","opacity","height","width"],o=e.effects.setMode(n,t.mode||"hide"),r="show"===o,h=t.direction||"left",l="up"===h||"down"===h?"top":"left",u="up"===h||"left"===h?"pos":"neg",d={opacity:r?1:0};e.effects.save(n,a),n.show(),e.effects.createWrapper(n),s=t.distance||n["top"===l?"outerHeight":"outerWidth"](!0)/2,r&&n.css("opacity",0).css(l,"pos"===u?-s:s),d[l]=(r?"pos"===u?"+=":"-=":"pos"===u?"-=":"+=")+s,n.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}})},e.effects.effect.explode=function(t,i){function s(){b.push(this),b.length===d*c&&n()}function n(){p.css({visibility:"visible"}),e(b).remove(),m||p.hide(),i()}var a,o,r,h,l,u,d=t.pieces?Math.round(Math.sqrt(t.pieces)):3,c=d,p=e(this),f=e.effects.setMode(p,t.mode||"hide"),m="show"===f,g=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/c),y=Math.ceil(p.outerHeight()/d),b=[];for(a=0;d>a;a++)for(h=g.top+a*y,u=a-(d-1)/2,o=0;c>o;o++)r=g.left+o*v,l=o-(c-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*v,top:-a*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:y,left:r+(m?l*v:0),top:h+(m?u*y:0),opacity:m?0:1}).animate({left:r+(m?0:l*v),top:h+(m?0:u*y),opacity:m?1:0},t.duration||500,t.easing,s)},e.effects.effect.fade=function(t,i){var s=e(this),n=e.effects.setMode(s,t.mode||"toggle");s.animate({opacity:n},{queue:!1,duration:t.duration,easing:t.easing,complete:i})},e.effects.effect.fold=function(t,i){var s,n,a=e(this),o=["position","top","bottom","left","right","height","width"],r=e.effects.setMode(a,t.mode||"hide"),h="show"===r,l="hide"===r,u=t.size||15,d=/([0-9]+)%/.exec(u),c=!!t.horizFirst,p=h!==c,f=p?["width","height"]:["height","width"],m=t.duration/2,g={},v={};e.effects.save(a,o),a.show(),s=e.effects.createWrapper(a).css({overflow:"hidden"}),n=p?[s.width(),s.height()]:[s.height(),s.width()],d&&(u=parseInt(d[1],10)/100*n[l?0:1]),h&&s.css(c?{height:0,width:u}:{height:u,width:0}),g[f[0]]=h?n[0]:u,v[f[1]]=h?n[1]:0,s.animate(g,m,t.easing).animate(v,m,t.easing,function(){l&&a.hide(),e.effects.restore(a,o),e.effects.removeWrapper(a),i()})},e.effects.effect.highlight=function(t,i){var s=e(this),n=["backgroundImage","backgroundColor","opacity"],a=e.effects.setMode(s,t.mode||"show"),o={backgroundColor:s.css("backgroundColor")};"hide"===a&&(o.opacity=0),e.effects.save(s,n),s.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&s.hide(),e.effects.restore(s,n),i()}})},e.effects.effect.size=function(t,i){var s,n,a,o=e(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],h=["position","top","bottom","left","right","overflow","opacity"],l=["width","height","overflow"],u=["fontSize"],d=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],c=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(o,t.mode||"effect"),f=t.restore||"effect"!==p,m=t.scale||"both",g=t.origin||["middle","center"],v=o.css("position"),y=f?r:h,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&o.show(),s={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},"toggle"===t.mode&&"show"===p?(o.from=t.to||b,o.to=t.from||s):(o.from=t.from||("show"===p?b:s),o.to=t.to||("hide"===p?b:s)),a={from:{y:o.from.height/s.height,x:o.from.width/s.width},to:{y:o.to.height/s.height,x:o.to.width/s.width}},("box"===m||"both"===m)&&(a.from.y!==a.to.y&&(y=y.concat(d),o.from=e.effects.setTransition(o,d,a.from.y,o.from),o.to=e.effects.setTransition(o,d,a.to.y,o.to)),a.from.x!==a.to.x&&(y=y.concat(c),o.from=e.effects.setTransition(o,c,a.from.x,o.from),o.to=e.effects.setTransition(o,c,a.to.x,o.to))),("content"===m||"both"===m)&&a.from.y!==a.to.y&&(y=y.concat(u).concat(l),o.from=e.effects.setTransition(o,u,a.from.y,o.from),o.to=e.effects.setTransition(o,u,a.to.y,o.to)),e.effects.save(o,y),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),g&&(n=e.effects.getBaseline(g,s),o.from.top=(s.outerHeight-o.outerHeight())*n.y,o.from.left=(s.outerWidth-o.outerWidth())*n.x,o.to.top=(s.outerHeight-o.to.outerHeight)*n.y,o.to.left=(s.outerWidth-o.to.outerWidth)*n.x),o.css(o.from),("content"===m||"both"===m)&&(d=d.concat(["marginTop","marginBottom"]).concat(u),c=c.concat(["marginLeft","marginRight"]),l=r.concat(d).concat(c),o.find("*[width]").each(function(){var i=e(this),s={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};
f&&e.effects.save(i,l),i.from={height:s.height*a.from.y,width:s.width*a.from.x,outerHeight:s.outerHeight*a.from.y,outerWidth:s.outerWidth*a.from.x},i.to={height:s.height*a.to.y,width:s.width*a.to.x,outerHeight:s.height*a.to.y,outerWidth:s.width*a.to.x},a.from.y!==a.to.y&&(i.from=e.effects.setTransition(i,d,a.from.y,i.from),i.to=e.effects.setTransition(i,d,a.to.y,i.to)),a.from.x!==a.to.x&&(i.from=e.effects.setTransition(i,c,a.from.x,i.from),i.to=e.effects.setTransition(i,c,a.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.easing,function(){f&&e.effects.restore(i,l)})})),o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===o.to.opacity&&o.css("opacity",o.from.opacity),"hide"===p&&o.hide(),e.effects.restore(o,y),f||("static"===v?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],function(e,t){o.css(t,function(t,i){var s=parseInt(i,10),n=e?o.to.left:o.to.top;return"auto"===i?n+"px":s+n+"px"})})),e.effects.removeWrapper(o),i()}})},e.effects.effect.scale=function(t,i){var s=e(this),n=e.extend(!0,{},t),a=e.effects.setMode(s,t.mode||"effect"),o=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===a?0:100),r=t.direction||"both",h=t.origin,l={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},u={y:"horizontal"!==r?o/100:1,x:"vertical"!==r?o/100:1};n.effect="size",n.queue=!1,n.complete=i,"effect"!==a&&(n.origin=h||["middle","center"],n.restore=!0),n.from=t.from||("show"===a?{height:0,width:0,outerHeight:0,outerWidth:0}:l),n.to={height:l.height*u.y,width:l.width*u.x,outerHeight:l.outerHeight*u.y,outerWidth:l.outerWidth*u.x},n.fade&&("show"===a&&(n.from.opacity=0,n.to.opacity=1),"hide"===a&&(n.from.opacity=1,n.to.opacity=0)),s.effect(n)},e.effects.effect.puff=function(t,i){var s=e(this),n=e.effects.setMode(s,t.mode||"hide"),a="hide"===n,o=parseInt(t.percent,10)||150,r=o/100,h={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:n,complete:i,percent:a?o:100,from:a?h:{height:h.height*r,width:h.width*r,outerHeight:h.outerHeight*r,outerWidth:h.outerWidth*r}}),s.effect(t)},e.effects.effect.pulsate=function(t,i){var s,n=e(this),a=e.effects.setMode(n,t.mode||"show"),o="show"===a,r="hide"===a,h=o||"hide"===a,l=2*(t.times||5)+(h?1:0),u=t.duration/l,d=0,c=n.queue(),p=c.length;for((o||!n.is(":visible"))&&(n.css("opacity",0).show(),d=1),s=1;l>s;s++)n.animate({opacity:d},u,t.easing),d=1-d;n.animate({opacity:d},u,t.easing),n.queue(function(){r&&n.hide(),i()}),p>1&&c.splice.apply(c,[1,0].concat(c.splice(p,l+1))),n.dequeue()},e.effects.effect.shake=function(t,i){var s,n=e(this),a=["position","top","bottom","left","right","height","width"],o=e.effects.setMode(n,t.mode||"effect"),r=t.direction||"left",h=t.distance||20,l=t.times||3,u=2*l+1,d=Math.round(t.duration/u),c="up"===r||"down"===r?"top":"left",p="up"===r||"left"===r,f={},m={},g={},v=n.queue(),y=v.length;for(e.effects.save(n,a),n.show(),e.effects.createWrapper(n),f[c]=(p?"-=":"+=")+h,m[c]=(p?"+=":"-=")+2*h,g[c]=(p?"-=":"+=")+2*h,n.animate(f,d,t.easing),s=1;l>s;s++)n.animate(m,d,t.easing).animate(g,d,t.easing);n.animate(m,d,t.easing).animate(f,d/2,t.easing).queue(function(){"hide"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}),y>1&&v.splice.apply(v,[1,0].concat(v.splice(y,u+1))),n.dequeue()},e.effects.effect.slide=function(t,i){var s,n=e(this),a=["position","top","bottom","left","right","width","height"],o=e.effects.setMode(n,t.mode||"show"),r="show"===o,h=t.direction||"left",l="up"===h||"down"===h?"top":"left",u="up"===h||"left"===h,d={};e.effects.save(n,a),n.show(),s=t.distance||n["top"===l?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(n).css({overflow:"hidden"}),r&&n.css(l,u?isNaN(s)?"-"+s:-s:s),d[l]=(r?u?"+=":"-=":u?"-=":"+=")+s,n.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}})},e.effects.effect.transfer=function(t,i){var s=e(this),n=e(t.to),a="fixed"===n.css("position"),o=e("body"),r=a?o.scrollTop():0,h=a?o.scrollLeft():0,l=n.offset(),u={top:l.top-r,left:l.left-h,height:n.innerHeight(),width:n.innerWidth()},d=s.offset(),c=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:d.top-r,left:d.left-h,height:s.innerHeight(),width:s.innerWidth(),position:a?"fixed":"absolute"}).animate(u,t.duration,t.easing,function(){c.remove(),i()})},e.widget("ui.progressbar",{version:"1.11.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return void 0===e?this.options.value:(this.options.value=this._constrainedValue(e),this._refreshValue(),void 0)},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}}),e.widget("ui.selectable",e.ui.mouse,{version:"1.11.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(i.options.filter,i.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var i=this,s=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(s.filter,this.element[0]),this._trigger("start",t),e(s.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var s=e.data(this,"selectable-item");s.startselected=!0,t.metaKey||t.ctrlKey||(s.$element.removeClass("ui-selected"),s.selected=!1,s.$element.addClass("ui-unselecting"),s.unselecting=!0,i._trigger("unselecting",t,{unselecting:s.element}))}),e(t.target).parents().addBack().each(function(){var s,n=e.data(this,"selectable-item");return n?(s=!t.metaKey&&!t.ctrlKey||!n.$element.hasClass("ui-selected"),n.$element.removeClass(s?"ui-unselecting":"ui-selected").addClass(s?"ui-selecting":"ui-unselecting"),n.unselecting=!s,n.selecting=s,n.selected=s,s?i._trigger("selecting",t,{selecting:n.element}):i._trigger("unselecting",t,{unselecting:n.element}),!1):void 0}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var i,s=this,n=this.options,a=this.opos[0],o=this.opos[1],r=t.pageX,h=t.pageY;return a>r&&(i=r,r=a,a=i),o>h&&(i=h,h=o,o=i),this.helper.css({left:a,top:o,width:r-a,height:h-o}),this.selectees.each(function(){var i=e.data(this,"selectable-item"),l=!1;i&&i.element!==s.element[0]&&("touch"===n.tolerance?l=!(i.left>r||a>i.right||i.top>h||o>i.bottom):"fit"===n.tolerance&&(l=i.left>a&&r>i.right&&i.top>o&&h>i.bottom),l?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,s._trigger("selecting",t,{selecting:i.element}))):(i.selecting&&((t.metaKey||t.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),s._trigger("unselecting",t,{unselecting:i.element}))),i.selected&&(t.metaKey||t.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,s._trigger("unselecting",t,{unselecting:i.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-unselecting"),s.unselecting=!1,s.startselected=!1,i._trigger("unselected",t,{unselected:s.element})}),e(".ui-selecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-selecting").addClass("ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=!0,i._trigger("selected",t,{selected:s.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),e.widget("ui.selectmenu",{version:"1.11.4",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var e=this.element.uniqueId().attr("id");this.ids={element:e,button:e+"-button",menu:e+"-menu"},this._drawButton(),this._drawMenu(),this.options.disabled&&this.disable()},_drawButton:function(){var t=this;this.label=e("label[for='"+this.ids.element+"']").attr("for",this.ids.button),this._on(this.label,{click:function(e){this.button.focus(),e.preventDefault()}}),this.element.hide(),this.button=e("<span>",{"class":"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element),e("<span>",{"class":"ui-icon "+this.options.icons.button}).prependTo(this.button),this.buttonText=e("<span>",{"class":"ui-selectmenu-text"}).appendTo(this.button),this._setText(this.buttonText,this.element.find("option:selected").text()),this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){t.menuItems||t._refreshMenu()}),this._hoverable(this.button),this._focusable(this.button)},_drawMenu:function(){var t=this;this.menu=e("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=e("<div>",{"class":"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo()),this.menuInstance=this.menu.menu({role:"listbox",select:function(e,i){e.preventDefault(),t._setSelection(),t._select(i.item.data("ui-selectmenu-item"),e)},focus:function(e,i){var s=i.item.data("ui-selectmenu-item");null!=t.focusIndex&&s.index!==t.focusIndex&&(t._trigger("focus",e,{item:s}),t.isOpen||t._select(s,e)),t.focusIndex=s.index,t.button.attr("aria-activedescendant",t.menuItems.eq(s.index).attr("id"))}}).menu("instance"),this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this._setText(this.buttonText,this._getSelectedItem().text()),this.options.width||this._resizeButton()},_refreshMenu:function(){this.menu.empty();var e,t=this.element.find("option");t.length&&(this._parseOptions(t),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup"),e=this._getSelectedItem(),this.menuInstance.focus(null,e),this._setAria(e.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(e){this.options.disabled||(this.menuItems?(this.menu.find(".ui-state-focus").removeClass("ui-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",e))},_position:function(){this.menuWrap.position(e.extend({of:this.button},this.options.position))},close:function(e){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",e))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(t,i){var s=this,n="";e.each(i,function(i,a){a.optgroup!==n&&(e("<li>",{"class":"ui-selectmenu-optgroup ui-menu-divider"+(a.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:a.optgroup}).appendTo(t),n=a.optgroup),s._renderItemData(t,a)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(t,i){var s=e("<li>");return i.disabled&&s.addClass("ui-state-disabled"),this._setText(s,i.label),s.appendTo(t)},_setText:function(e,t){t?e.text(t):e.html("&#160;")},_move:function(e,t){var i,s,n=".ui-menu-item";this.isOpen?i=this.menuItems.eq(this.focusIndex):(i=this.menuItems.eq(this.element[0].selectedIndex),n+=":not(.ui-state-disabled)"),s="first"===e||"last"===e?i["first"===e?"prevAll":"nextAll"](n).eq(-1):i[e+"All"](n).eq(0),s.length&&this.menuInstance.focus(t,s)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(e){this[this.isOpen?"close":"open"](e)},_setSelection:function(){var e;this.range&&(window.getSelection?(e=window.getSelection(),e.removeAllRanges(),e.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(t){this.isOpen&&(e(t.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length||this.close(t))}},_buttonEvents:{mousedown:function(){var e;window.getSelection?(e=window.getSelection(),e.rangeCount&&(this.range=e.getRangeAt(0))):this.range=document.selection.createRange()},click:function(e){this._setSelection(),this._toggle(e)},keydown:function(t){var i=!0;switch(t.keyCode){case e.ui.keyCode.TAB:case e.ui.keyCode.ESCAPE:this.close(t),i=!1;break;case e.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case e.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case e.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case e.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case e.ui.keyCode.LEFT:this._move("prev",t);break;case e.ui.keyCode.RIGHT:this._move("next",t);break;case e.ui.keyCode.HOME:case e.ui.keyCode.PAGE_UP:this._move("first",t);break;case e.ui.keyCode.END:case e.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),i=!1}i&&t.preventDefault()}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex);t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),e)},_select:function(e,t){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index,this._setText(this.buttonText,e.label),this._setAria(e),this._trigger("select",t,{item:e}),e.index!==i&&this._trigger("change",t,{item:e}),this.close(t)},_setAria:function(e){var t=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t}),this.menu.attr("aria-activedescendant",t)},_setOption:function(e,t){"icons"===e&&this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(t.button),this._super(e,t),"appendTo"===e&&this.menuWrap.appendTo(this._appendTo()),"disabled"===e&&(this.menuInstance.option("disabled",t),this.button.toggleClass("ui-state-disabled",t).attr("aria-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)),"width"===e&&this._resizeButton()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen),this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;e||(e=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(e)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(t){var i=[];t.each(function(t,s){var n=e(s),a=n.parent("optgroup");i.push({element:n,index:t,value:n.val(),label:n.text(),optgroup:a.attr("label")||"",disabled:a.prop("disabled")||n.prop("disabled")})}),this.items=i},_destroy:function(){this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.label.attr("for",this.ids.element)}}),e.widget("ui.slider",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,s=this.options,n=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",o=[];for(i=s.values&&s.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),t=n.length;i>t;t++)o.push(a);this.handles=n.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,s,n,a,o,r,h,l,u=this,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(s-u.values(t));(n>i||n===i&&(t===u._lastChangedValue||u.values(t)===d.min))&&(n=i,a=e(this),o=t)}),r=this._start(t,o),r===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,a.addClass("ui-state-active").focus(),h=a.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-h.left-a.width()/2,top:t.pageY-h.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,s,n,a;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/t,s>1&&(s=1),0>s&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),a=this._valueMin()+s*n,this._trimAlignValue(a)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var s,n,a;this.options.values&&this.options.values.length?(s=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>s||1===t&&s>i)&&(i=s),i!==this.values(t)&&(n=this.values(),n[t]=i,a=this._trigger("slide",e,{handle:this.handles[t],value:i,values:n}),s=this.values(t?0:1),a!==!1&&this.values(t,i))):i!==this.value()&&(a=this._trigger("slide",e,{handle:this.handles[t],value:i}),a!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,i){var s,n,a;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),this._change(null,t),void 0;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(s=this.options.values,n=arguments[0],a=0;s.length>a;a+=1)s[a]=this._trimAlignValue(n[a]),this._change(null,a);this._refreshValue()},_setOption:function(t,i){var s,n=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(n=this.options.values.length),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!i),this._super(t,i),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;n>s;s+=1)this._change(null,s);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,s;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(e){if(this._valueMin()>=e)return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,s=e-i;return 2*Math.abs(i)>=t&&(s+=i>0?t:-t),parseFloat(s.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),i=this.options.step,s=Math.floor(+(e-t).toFixed(this._precision())/i)*i;e=s+t,this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,i=t.indexOf(".");return-1===i?0:t.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var t,i,s,n,a,o=this.options.range,r=this.options,h=this,l=this._animateOff?!1:r.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(s){i=100*((h.values(s)-h._valueMin())/(h._valueMax()-h._valueMin())),u["horizontal"===h.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[l?"animate":"css"](u,r.animate),h.options.range===!0&&("horizontal"===h.orientation?(0===s&&h.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:r.animate})):(0===s&&h.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:r.animate}))),t=i}):(s=this.value(),n=this._valueMin(),a=this._valueMax(),i=a!==n?100*((s-n)/(a-n)):0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](u,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(t){var i,s,n,a,o=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),i=this._start(t,o),i===!1))return}switch(a=this.options.step,s=n=this.options.values&&this.options.values.length?this.values(o):this.value(),t.keyCode){case e.ui.keyCode.HOME:n=this._valueMin();break;case e.ui.keyCode.END:n=this._valueMax();break;case e.ui.keyCode.PAGE_UP:n=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(s===this._valueMax())return;n=this._trimAlignValue(s+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(s===this._valueMin())return;n=this._trimAlignValue(s-a)}this._slide(t,o,n)},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}}),e.widget("ui.sortable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return e>=t&&t+i>e},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,i){var s=null,n=!1,a=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,a.widgetName+"-item")===a?(s=e(this),!1):void 0}),e.data(t.target,a.widgetName+"-item")===a&&(s=e(t.target)),s?!this.options.handle||i||(e(this.options.handle,s).find("*").addBack().each(function(){this===t.target&&(n=!0)}),n)?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(t,i,s){var n,a,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(a=this.document.find("body"),this.storedCursor=a.css("cursor"),a.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(a)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",t,this._uiHash(this));
return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,s,n,a,o=this.options,r=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-this.document.scrollTop()<o.scrollSensitivity?r=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<o.scrollSensitivity&&(r=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),t.pageX-this.document.scrollLeft()<o.scrollSensitivity?r=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(r=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],a=this._intersectsWithPointer(s),a&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===a?"next":"prev"]()[0]!==n&&!e.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],n):!0)){if(this.direction=1===a?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var s=this,n=this.placeholder.offset(),a=this.options.axis,o={};a&&"x"!==a||(o.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),a&&"y"!==a||(o.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){s._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&s.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!s.length&&t.key&&s.push(t.key+"="),s.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},i.each(function(){s.push(e(t.item||this).attr(t.attribute||"id")||"")}),s},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,a=e.left,o=a+e.width,r=e.top,h=r+e.height,l=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||s+l>r&&h>s+l,c="y"===this.options.axis||t+u>a&&o>t+u,p=d&&c;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:t+this.helperProportions.width/2>a&&o>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&h>n-this.helperProportions.height/2},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),s=t&&i,n=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return s?this.floating?a&&"right"===a||"down"===n?2:1:n&&("down"===n?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),s=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&i||"left"===n&&!i:s&&("down"===s&&t||"up"===s&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function i(){r.push(this)}var s,n,a,o,r=[],h=[],l=this._connectWith();if(l&&t)for(s=l.length-1;s>=0;s--)for(a=e(l[s],this.document[0]),n=a.length-1;n>=0;n--)o=e.data(a[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&h.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(h.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=h.length-1;s>=0;s--)h[s][0].each(i);return e(r)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;t.length>i;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,s,n,a,o,r,h,l,u=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],c=this._connectWith();if(c&&this.ready)for(i=c.length-1;i>=0;i--)for(n=e(c[i],this.document[0]),s=n.length-1;s>=0;s--)a=e.data(n[s],this.widgetFullName),a&&a!==this&&!a.options.disabled&&(d.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a));for(i=d.length-1;i>=0;i--)for(o=d[i][1],r=d[i][0],s=0,l=r.length;l>s;s++)h=e(r[s]),h.data(this.widgetName+"-item",o),u.push({item:h,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,a;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?e(this.options.toleranceElement,s.item):s.item,t||(s.width=n.outerWidth(),s.height=n.outerHeight()),a=n.offset(),s.left=a.left,s.top=a.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)a=this.containers[i].element.offset(),this.containers[i].containerCache.left=a.left,this.containers[i].containerCache.top=a.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,s=t.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=t.currentItem[0].nodeName.toLowerCase(),n=e("<"+s+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===s?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(n)):"tr"===s?t._createTrPlaceholder(t.currentItem,n):"img"===s&&n.attr("src",t.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(e,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(s.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),s.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,i){var s=this;t.children().each(function(){e("<td>&#160;</td>",s.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(t){var i,s,n,a,o,r,h,l,u,d,c=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!e.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(c&&e.contains(this.containers[i].element[0],c.element[0]))continue;c=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0);if(c)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(n=1e4,a=null,u=c.floating||this._isFloating(this.currentItem),o=u?"left":"top",r=u?"width":"height",d=u?"clientX":"clientY",s=this.items.length-1;s>=0;s--)e.contains(this.containers[p].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(h=this.items[s].item.offset()[o],l=!1,t[d]-h>this.items[s][r]/2&&(l=!0),n>Math.abs(t[d]-h)&&(n=Math.abs(t[d]-h),a=this.items[s],this.direction=l?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1),void 0;a?this._rearrange(t,a,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===n.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===n.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(t=e(n.containment)[0],i=e(n.containment).offset(),s="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var s="absolute"===t?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())*s}},_generatePosition:function(t){var i,s,n=this.options,a=t.pageX,o=t.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1],o=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((a-this.originalPageX)/n.grid[0])*n.grid[0],a=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:r.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:r.scrollLeft())}},_rearrange:function(e,t,i,s){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(e,t){function i(e,t,i){return function(s){i._trigger(e,s,t._uiHash(t))}}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)("auto"===this._storedCSS[s]||"static"===this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)t||n.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(s=0;n.length>s;s++)n[s].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}}),e.widget("ui.spinner",{version:"1.11.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],function(e,s){var n=i.attr(s);void 0!==n&&n.length&&(t[s]=n)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e),void 0)},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function i(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s}))}var s;s=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)===!1?!1:(this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var i=this.options,s=e.ui.keyCode;switch(t.keyCode){case s.UP:return this._repeat(null,1,t),!0;case s.DOWN:return this._repeat(null,-1,t),!0;case s.PAGE_UP:return this._repeat(null,i.page,t),!0;case s.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(e){return this.spinning||this._trigger("start",e)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e){var t,i,s=this.options;return t=null!==s.min?s.min:0,i=e-t,i=Math.round(i/s.step)*s.step,e=t+i,e=parseFloat(e.toFixed(this._precision())),null!==s.max&&e>s.max?s.max:null!==s.min&&s.min>e?s.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,this.element.val(this._format(i)),void 0}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable"))},_setOptions:h(function(e){this._super(e)}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();return null===e?!1:e===this._adjustValue(e)},_value:function(e,t){var i;""!==e&&(i=this._parse(e),null!==i&&(t||(i=this._adjustValue(i)),e=this._format(i))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:h(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:h(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:h(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:h(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?(h(this._value).call(this,e),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),e.widget("ui.tabs",{version:"1.11.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var e=/#.*$/;return function(t){var i,s;t=t.cloneNode(!1),i=t.href.replace(e,""),s=location.href.replace(e,"");try{i=decodeURIComponent(i)}catch(n){}try{s=decodeURIComponent(s)}catch(n){}return t.hash.length>1&&i===s}}(),_create:function(){var t=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible),this._processTabs(),i.active=this._initialActive(),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,s=location.hash.substring(1);return null===t&&(s&&this.tabs.each(function(i,n){return e(n).attr("aria-controls")===s?(t=i,!1):void 0}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===t||-1===t)&&(t=this.tabs.length?0:!1)),t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),-1===t&&(t=i?!1:0)),!i&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),s=this.tabs.index(i),n=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:s++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:n=!1,s--;break;case e.ui.keyCode.END:s=this.anchors.length-1;break;case e.ui.keyCode.HOME:s=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),this._activate(s),void 0;case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),this._activate(s===this.options.active?!1:s),void 0;default:return}t.preventDefault(),clearTimeout(this.activating),s=this._focusNextTab(s,n),t.ctrlKey||t.metaKey||(i.attr("aria-selected","false"),this.tabs.eq(s).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",s)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){function s(){return t>n&&(t=0),0>t&&(t=n),t}for(var n=this.tabs.length-1;-1!==e.inArray(s(),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):"disabled"===e?(this._setupDisabled(t),void 0):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t),void 0)},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this,i=this.tabs,s=this.anchors,n=this.panels;
this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(i,s){var n,a,o,r=e(s).uniqueId().attr("id"),h=e(s).closest("li"),l=h.attr("aria-controls");t._isLocal(s)?(n=s.hash,o=n.substring(1),a=t.element.find(t._sanitizeSelector(n))):(o=h.attr("aria-controls")||e({}).uniqueId()[0].id,n="#"+o,a=t.element.find(n),a.length||(a=t._createPanel(o),a.insertAfter(t.panels[i-1]||t.tablist)),a.attr("aria-live","polite")),a.length&&(t.panels=t.panels.add(a)),l&&h.data("ui-tabs-aria-controls",l),h.attr({"aria-controls":o,"aria-labelledby":r}),a.attr("aria-labelledby",r)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel"),i&&(this._off(i.not(this.tabs)),this._off(s.not(this.anchors)),this._off(n.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,s=0;i=this.tabs[s];s++)t===!0||-1!==e.inArray(s,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,s=this.element.parent();"fill"===t?(i=s.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),s=t.css("position");"absolute"!==s&&"fixed"!==s&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,s=this.active,n=e(t.currentTarget),a=n.closest("li"),o=a[0]===s[0],r=o&&i.collapsible,h=r?e():this._getPanelForTab(a),l=s.length?this._getPanelForTab(s):e(),u={oldTab:s,oldPanel:l,newTab:r?e():a,newPanel:h};t.preventDefault(),a.hasClass("ui-state-disabled")||a.hasClass("ui-tabs-loading")||this.running||o&&!i.collapsible||this._trigger("beforeActivate",t,u)===!1||(i.active=r?!1:this.tabs.index(a),this.active=o?e():a,this.xhr&&this.xhr.abort(),l.length||h.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),h.length&&this.load(this.tabs.index(a),t),this._toggle(t,u))},_toggle:function(t,i){function s(){a.running=!1,a._trigger("activate",t,i)}function n(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&a.options.show?a._show(o,a.options.show,s):(o.show(),s())}var a=this,o=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),n()),r.attr("aria-hidden","true"),i.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),o.length&&r.length?i.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr("aria-hidden","false"),i.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var i,s=this._findActive(t);s[0]!==this.active[0]&&(s.length||(s=this.active),i=s.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tablist.unbind(this.eventNamespace),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var i=this.options.disabled;i!==!1&&(void 0===t?i=!1:(t=this._getIndex(t),i=e.isArray(i)?e.map(i,function(e){return e!==t?e:null}):e.map(this.tabs,function(e,i){return i!==t?i:null})),this._setupDisabled(i))},disable:function(t){var i=this.options.disabled;if(i!==!0){if(void 0===t)i=!0;else{if(t=this._getIndex(t),-1!==e.inArray(t,i))return;i=e.isArray(i)?e.merge([t],i).sort():[t]}this._setupDisabled(i)}},load:function(t,i){t=this._getIndex(t);var s=this,n=this.tabs.eq(t),a=n.find(".ui-tabs-anchor"),o=this._getPanelForTab(n),r={tab:n,panel:o},h=function(e,t){"abort"===t&&s.panels.stop(!1,!0),n.removeClass("ui-tabs-loading"),o.removeAttr("aria-busy"),e===s.xhr&&delete s.xhr};this._isLocal(a[0])||(this.xhr=e.ajax(this._ajaxSettings(a,i,r)),this.xhr&&"canceled"!==this.xhr.statusText&&(n.addClass("ui-tabs-loading"),o.attr("aria-busy","true"),this.xhr.done(function(e,t,n){setTimeout(function(){o.html(e),s._trigger("load",i,r),h(n,t)},1)}).fail(function(e,t){setTimeout(function(){h(e,t)},1)})))},_ajaxSettings:function(t,i,s){var n=this;return{url:t.attr("href"),beforeSend:function(t,a){return n._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:a},s))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}}),e.widget("ui.tooltip",{version:"1.11.4",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(t,i){var s=(t.attr("aria-describedby")||"").split(/\s+/);s.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(s.join(" ")))},_removeDescribedBy:function(t){var i=t.data("ui-tooltip-id"),s=(t.attr("aria-describedby")||"").split(/\s+/),n=e.inArray(i,s);-1!==n&&s.splice(n,1),t.removeData("ui-tooltip-id"),s=e.trim(s.join(" ")),s?t.attr("aria-describedby",s):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable(),this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(t,i){var s=this;return"disabled"===t?(this[i?"_disable":"_enable"](),this.options[t]=i,void 0):(this._super(t,i),"content"===t&&e.each(this.tooltips,function(e,t){s._updateContent(t.element)}),void 0)},_disable:function(){var t=this;e.each(this.tooltips,function(i,s){var n=e.Event("blur");n.target=n.currentTarget=s.element[0],t.close(n,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var i=this,s=e(t?t.target:this.element).closest(this.options.items);s.length&&!s.data("ui-tooltip-id")&&(s.attr("title")&&s.data("ui-tooltip-title",s.attr("title")),s.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&s.parents().each(function(){var t,s=e(this);s.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,i.close(t,!0)),s.attr("title")&&(s.uniqueId(),i.parents[this.id]={element:this,title:s.attr("title")},s.attr("title",""))}),this._registerCloseHandlers(t,s),this._updateContent(s,t))},_updateContent:function(e,t){var i,s=this.options.content,n=this,a=t?t.type:null;return"string"==typeof s?this._open(t,e,s):(i=s.call(e[0],function(i){n._delay(function(){e.data("ui-tooltip-open")&&(t&&(t.type=a),this._open(t,e,i))})}),i&&this._open(t,e,i),void 0)},_open:function(t,i,s){function n(e){l.of=e,o.is(":hidden")||o.position(l)}var a,o,r,h,l=e.extend({},this.options.position);if(s){if(a=this._find(i))return a.tooltip.find(".ui-tooltip-content").html(s),void 0;i.is("[title]")&&(t&&"mouseover"===t.type?i.attr("title",""):i.removeAttr("title")),a=this._tooltip(i),o=a.tooltip,this._addDescribedBy(i,o.attr("id")),o.find(".ui-tooltip-content").html(s),this.liveRegion.children().hide(),s.clone?(h=s.clone(),h.removeAttr("id").find("[id]").removeAttr("id")):h=s,e("<div>").html(h).appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:n}),n(t)):o.position(e.extend({of:i},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.show&&this.options.show.delay&&(r=this.delayedShow=setInterval(function(){o.is(":visible")&&(n(l.of),clearInterval(r))},e.fx.interval)),this._trigger("open",t,{tooltip:o})}},_registerCloseHandlers:function(t,i){var s={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var s=e.Event(t);s.currentTarget=i[0],this.close(s,!0)}}};i[0]!==this.element[0]&&(s.remove=function(){this._removeTooltip(this._find(i).tooltip)}),t&&"mouseover"!==t.type||(s.mouseleave="close"),t&&"focusin"!==t.type||(s.focusout="close"),this._on(!0,i,s)},close:function(t){var i,s=this,n=e(t?t.currentTarget:this.element),a=this._find(n);return a?(i=a.tooltip,a.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&!n.attr("title")&&n.attr("title",n.data("ui-tooltip-title")),this._removeDescribedBy(n),a.hiding=!0,i.stop(!0),this._hide(i,this.options.hide,function(){s._removeTooltip(e(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,i){e(i.element).attr("title",i.title),delete s.parents[t]}),a.closing=!0,this._trigger("close",t,{tooltip:i}),a.hiding||(a.closing=!1)),void 0):(n.removeData("ui-tooltip-open"),void 0)},_tooltip:function(t){var i=e("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),s=i.uniqueId().attr("id");return e("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),this.tooltips[s]={element:t,tooltip:i}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(i,s){var n=e.Event("blur"),a=s.element;n.target=n.currentTarget=a[0],t.close(n,!0),e("#"+i).remove(),a.data("ui-tooltip-title")&&(a.attr("title")||a.attr("title",a.data("ui-tooltip-title")),a.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}})});

!function(e){function t(e,t,n,o){var u=document.createEvent("MouseEvents");return u.initMouseEvent(e,!0,!0,window,0,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,o),n.dispatchEvent(u),u}function n(e){if(1==e.touches.length){var n=e.changedTouches[0],s=e.target;t("mouseover",n,s),t("mousemove",n,s),t("mousedown",n,s).defaultPrevented&&(s.addEventListener("touchmove",o),s.addEventListener("touchend",u))}}function o(e){var n=e.changedTouches[0],o=document.elementFromPoint(n.clientX,n.clientY);o&&(s?o&&s!==o&&(t("mouseover",n,o,s),t("mouseout",n,s,o),s=o):s=o,e.preventDefault(),t("mousemove",n,o))}function u(e){var n=e.changedTouches[0],s=document.elementFromPoint(n.clientX,n.clientY),i=e.target;t("mouseup",n,s),t("mouseout",n,s),i.removeEventListener("touchmove",o),i.removeEventListener("touchend",u)}if("ontouchstart"in window){var s,i=e.ui.mouse.prototype,c=i._mouseInit,r=i._mouseDestroy;i._mouseInit=function(){this.element[0].addEventListener("touchstart",n),c.apply(this,arguments)},i._mouseDestroy=function(){this.element[0].removeEventListener("touchstart",n),r.apply(this,arguments)}}}(jQuery);
!function(a){function b(a,b,c){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var d=a.originalEvent.changedTouches[0],e=document.createEvent("MouseEvents");e.initMouseEvent(b,!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,c),a.target.dispatchEvent(e)}}if(a.support.touch="ontouchend"in document,a.support.touch){var c,d=a.ui.mouse.prototype,e=d._mouseInit,f=!1,g=!1,h=d._mouseDestroy;d._touchStart=function(d){var e=this,h=e.widgetName;if(!c&&!e._touchHandled){var i=e.options.cancel,j=d.originalEvent.changedTouches[0],k=j.target,l="string"==typeof i&&k&&k.nodeName?a(k).closest(i).length:!1;if(!l&&("pqGrid"==h||e._mouseCapture(j))){if(e._touchHandled=c=!0,f){if(k&&k==f.target){var m=f.x-j.pageX,n=f.y-j.pageY,o=Math.sqrt(m*m+n*n);12>=o&&(g=!0,setTimeout(function(){g=!1},200))}}else f={x:j.pageX,y:j.pageY,target:k},setTimeout(function(){f=!1},400);e._touchMoved=!1,b(d,"mouseover"),b(d,"mousemove"),b(d,"mousedown")}}},d._touchMove=function(a){this._touchHandled&&(this._touchMoved=!0,b(a,"mousemove"))},d._touchEnd=function(a){this._touchHandled&&(b(a,"mouseup"),b(a,"mouseout"),this._touchMoved||b(a,"click"),this._touchMoved=!1,this._touchHandled=!1,c=!1,g&&b(a,"dblclick"))},d._mouseInit=function(){var b=this,c=this.eventNamespace,d={};d["touchstart"+c]=a.proxy(b,"_touchStart"),d["touchmove"+c]=a.proxy(b,"_touchMove"),d["touchend"+c]=a.proxy(b,"_touchEnd"),b.element.bind(d),e.call(b)},d._mouseDestroy=function(){var a=this,b=a.element,d=this.eventNamespace;this._touchHandled&&(c=!1,this._touchHandled=!1),b.unbind("touchstart"+d),b.unbind("touchmove"+d),b.unbind("touchend"+d),h.call(a)}}}(jQuery);
!function(e){"function"==typeof define&&define.amd?define(["jquery","jui/core","jui/widget","jui/position"],e):e(jQuery)}(function(e){"use strict";e.support.touch="ontouchend"in document;var t={};t.options=function(){var t=e.ui.keyCode;return{radio:!1,singlePlaceholder:"Select an option",checkbox:!1,displayText:"{0} of {1} selected",maxDisplay:4,maxSelect:0,multiplePlaceholder:"Select options",selectallText:"Select All",closeOnWindowScroll:!0,closeOnWindowResize:!0,itemCls:"pq-select-item ui-corner-all ui-state-default",bootstrap:{on:!1,btn:"btn btn-default",popupCont:"panel panel-default",selectCls:"label label-info",itemCls:"label label-default",closeIcon:"glyphicon glyphicon-remove",searchIcon:"glyphicon glyphicon-search",hoverCls:""},position:{my:"left top",at:"left bottom",collision:"flipfit"},kcOpen:[t.DOWN,t.ENTER,t.UP],deselect:!0,hoverCls:"pq-state-hover",search:!0,searchRule:"contain",_selectCls:"pq-state-select",selectCls:"ui-state-highlight",width:null,maxSelectReach:null,maxSelectExceed:null}}(),t._setButtonWidth=function(){var e=this.element;e.show();var t=this.options,s=t.width?t.width:e[0].offsetWidth;e.hide(),this.$button.width(s)},t._create=function(){var t=this,s=this.options,i=s.bootstrap,l=i.on,o=this.element,n=o.attr("name"),a=o.attr("multiple"),c=e(["<div class='pq-select-button pq-no-capture ",l?i.btn:"ui-state-default ui-widget ui-corner-all","' "," data-name='",n,"' tabindex='0'>",a?"":"<span class='pq-icon "+(l?"caret":"ui-icon ui-icon-triangle-1-s")+"'></span>","<div class='pq-select-text'></div>","</div>"].join(""));l&&(s.selectCls+=" "+i.selectCls,s.itemCls+=" "+i.itemCls),this.$button=c,this.multiple=!!a,this.selector="label.pq-select-option-label.ui-state-enable:visible",this._setButtonWidth(),o.after(c),c.attr("name",n),c.addClass(o.attr("class")),o.addClass("pq-select"),this._extractData(),this._createPopup(),this._createMenu(),c.on({click:function(){if(!s.disabled){var i=e(this).parent(".pq-select-item"),l=parseInt(i.attr("data-id"));return t.select(l,!1),t.setText(),t.focus(),t.triggerChange(),!1}}},".pq-item-close"),c.on({click:function(){return s.disabled?void 0:(t.toggle(),!1)},focus:function(){s.disabled||e(this).addClass("ui-state-hover")},blur:function(){e(this).removeClass("ui-state-hover")},mousedown:function(){s.disabled||e(this).addClass("ui-state-active")},mouseup:function(){s.disabled||e(this).removeClass("ui-state-active")},keydown:function(i){if(!s.disabled){var l=i.keyCode,o=s.kcOpen,n=e.ui.keyCode;-1!==e.inArray(l,o)?t.open():l===n.ESCAPE?t.close():l===n.SPACE&&t.toggle()}}}),this.setText();var h=this.eventNamespace;e(window).on("resize"+h,function(e){t.onWindowResize(e)}),e(window).on("scroll"+h,function(e){t.onWindowScroll(e)})},t.onWindowResize=function(){this.options.closeOnWindowResize&&this.close()},t.onWindowScroll=function(){this.options.closeOnWindowScroll&&this.close()},t.focus=function(){e.support.touch||this.$search.focus()},e.paramquery=e.paramquery||{},e.paramquery.scrollView=function(t){var s=t[0],i=s.offsetTop,l=s.offsetHeight,o=s.offsetParent,n=o.scrollTop,a=o.clientHeight;l+i>a+n?e(o).scrollTop(l+i-a):n>i&&e(o).scrollTop(i)},e.paramquery.pageMove=function(t,s,i){var l,o=t[0].offsetHeight,n=t[0].offsetParent.clientHeight;do{if(!(l=t[i?"nextAll":"prevAll"](s)).length)break;o+=(l=e(l[0]))[0].offsetHeight,t=l}while(n>o);return e.paramquery.scrollView(t),t},t._move=function(t){var s=this.$lastlabelHighlight;if(s&&s.length){var i=s[t?"nextAll":"prevAll"](this.selector);i.length&&(i=e(i[0]),this._highlight(i))}else this._hightlight()},t._onkeydown=function(t){var s=t.keyCode,i=e.ui.keyCode;if(s===i.DOWN||s===i.UP)return this._move(s===i.DOWN),!1;if(s===i.PAGE_DOWN||s===i.PAGE_UP){var l=e.paramquery.pageMove(this.$lastlabelHighlight,this.selector,s===i.PAGE_DOWN);return this._highlight(l),!1}if(s===i.TAB)return this.close(),!1;if(s===i.ESCAPE)this.close();else if(s===i.ENTER&&this.$lastlabelHighlight)return this.$lastlabelHighlight.trigger("label_changed"),!1},t.search=function(e){for(var t=this.data,s="contain"===this.options.searchRule,i=0,l=t.length;l>i;i++){var o=t[i],n=o.text.toUpperCase().indexOf(e);o.searchIndx=null,-1===n?o.hidden=!0:!1===s&&n>0?o.hidden=!0:(o.hidden=!1,o.searchIndx=n)}},t._onkeyupsearch=function(t){var s=e(t.target),i=e.trim(s.val()).toUpperCase(),l=(this.data,t.keyCode),o=e.ui.keyCode,n=[o.DOWN,o.UP,o.ENTER,o.PAGE_DOWN,o.PAGE_UP];-1===e.inArray(l,n)&&(this.search(i),this._createMenu(),this.positionPopup())},t._onChange=function(e,t){var s=this,i=s.options,l=this.multiple,o=i.maxSelect,n=s.selectIndx;if(l){if(t&&o&&n.length>=o)return s._trigger("maxSelectExceed",null,{option:s.$options[e]}),s.focus(),!1}else if(n.length){var a=n[0];if(e===a)return!1;t&&this.select(a,!1)}this.select(e,t),s.setText(),s.setSelectAllState(),l?o&&n.length>=o?!1!==s._trigger("maxSelectReach",null,{option:s.$options[e]})&&s.close():s.focus():s.close(),this.triggerChange()},t.setSelectAllState=function(){var e=this.$popup.find(".pq-select-all input");if(e.length){for(var t=this.data,s=0,i=0,l=0,o=t.length;o>l;l++){var n=t[l],a=n.selected;n.disabled||(s++,a&&i++)}s===i?e.prop("checked",!0):e.prop("checked",!1)}},t.getInstance=function(){return{select:this}},t.select=function(t,s){var i=this,l=i.selectIndx,o=this.options,n=this.data[t],a=e(i.$options[t]),c=i.$popup.find("#pq-option-"+this.uuid+"-"+t),h=c.find("input");if(c[s?"addClass":"removeClass"](o._selectCls+" "+o.selectCls),h.prop("checked",s),n.selected=s,i.multiple){if(s)l.push(t);else{var p=e.inArray(t,l);l.splice(p,1)}a.prop("selected",s)}else s?(l.length&&(this.data[l[0]].selected=!1),l[0]=t,a.prop("selected",s)):(i.selectIndx=[0],this.data[0].selected=!0,e(i.$options[0]).prop("selected",!0))},t.triggerChange=function(){this.element.trigger("change")},t._extractData=function(){var t,s=this.data=[],i=this.element,l=i.find("option,optgroup"),o=!1,n=!1;this.$options=i.find("option");for(var a=0,c=l.length;c>a;a++){var h=l[a],p=e(h);if("optgroup"!=h.nodeName.toLowerCase()){var r=p.prop("selected"),u=p.prop("disabled");!u&&o&&(u=n);var d=p.text();s.push({selected:r,disabled:u,text:d,optgroup:t})}else t=p.attr("label"),o=!0,n=p.prop("disabled")}this.grouping=o},t.refresh=function(){this.search(""),this._setButtonWidth(),this._createPopup(),this._createMenu(),this.setText()},t.refreshData=function(){this._extractData(),this.refresh()},t._createPopup=function(){var t=this,s=(this.data,this.options),i=s.bootstrap,l=i.on,o=t.multiple,n="",a="";o&&s.selectallText&&!s.maxSelect&&(a=["<label class='pq-select-all ui-widget-header ui-corner-all'>","<span class='ui-icon ui-icon-close ",l?i.closeIcon:"","'></span>","<input type='checkbox' >",s.selectallText,"</label>"].join("")),s.search&&(n=["<div class='pq-select-search-div ui-corner-all'>","<span class='ui-icon ui-icon-search ",l?i.searchIcon:"","' />","<div class='pq-select-search-div1'>","<input type='text' class='pq-select-search-input' autocomplete='off' />","</div>","</div>"].join(""));var c=e(["<div class='pq-select-popup-cont ",l?i.popupCont:"","'>","<div class='pq-select-popup ui-widget-content ui-corner-all'>",a,n,"</div><div class='pq-select-shadow-fix'></div></div>"].join(""));c.css({"font-family":this.$button.css("font-family"),"font-size":this.$button.css("font-size")});var h=c.children("div.pq-select-popup");h.on({keydown:function(e){return t._onkeydown(e)}}),h.find(".ui-icon-close").on({click:function(){return t.close(),!1}}),h.on({change:function(){for(var s=!!(t.element,e(this)).prop("checked"),i=t.data,l=t.$options,o=0;o<i.length;o++){var n=i[o];n.disabled||n.selected===s||(n.selected=s,e(l[o]).prop("selected",s))}t._createMenu(),t.setText(),t.focus(),t.triggerChange()}},"label.pq-select-all input"),h.on({mouseenter:function(){t._highlight(e(this))},label_changed:function(){var i=e(this),l=i.attr("id");if(l){var o=!i.hasClass(s._selectCls),n=parseInt(l.split("-")[3]);return t._onChange(n,o)}}},"label.pq-select-option-label.ui-state-enable"),o&&s.checkbox||!o&&s.radio?h.on({click:function(){e(this).closest("label").trigger("label_changed")}},"label.pq-select-option-label.ui-state-enable input"):h.on({click:function(){e(this).trigger("label_changed")}},"label.pq-select-option-label.ui-state-enable"),this.$popupCont&&this.$popupCont.remove(),this.$popupCont=c,this.$popup=h,this.$search=h.find(".pq-select-search-input").on({keyup:function(e){return t._onkeyupsearch(e)}}),e(document.body).append(c),this.setSelectAllState()},t._createMenu=function(){for(var t,s,i=this.data,l=this.uuid,o=this.options,n=o.search?e.trim(this.$search.val()).length:0,a=" "+o._selectCls+" "+o.selectCls+" ",c=this.multiple?o.checkbox?'type="checkbox"':"":o.radio?'type="radio"':"",h=c?"pq-left-input":this.grouping?"pq-left-group":"",p=this.selectIndx=[],r=[],u=0;u<i.length;u++){var d=i[u],f=d.disabled,g=d.selected,v=d.text,b=d.optgroup;if(g&&p.push(u),!d.hidden){s!==b&&(r.push("<div class='pq-select-optgroup'>",b,"</div>"),s=b);var m=g?' checked="checked" ':"",C=g?a:"",x=f?' disabled="disabled" ':"",q=f?"ui-state-disabled":"ui-state-enable";(0!==u||""!==v)&&(n&&(t=d.searchIndx,v=v.substr(0,t)+"<span class='pq-select-search-highlight'>"+v.substr(t,n)+"</span>"+v.substr(t+n,v.length)),r.push("<label class='pq-select-option-label ",C,q,"'",""," id='pq-option-",l,"-",u,"'>",c?"<input "+c+" "+m+x+" >":"","<span class='",h,"'>",v,"</span>","</label>"))}}var _=e(["<div class='pq-select-menu' >",r.join(""),"</div>"].join(""));this.$menu&&this.$menu.remove(),this.$popup.append(_),delete this.$lastlabelHighlight,this.$menu=_,this._highlight()},t._highlight=function(t){var s=this.options.hoverCls;t&&t.length||(t=this.$menu.find("label.pq-select-option-label.ui-state-enable:visible:first")),t.length&&(this.$lastlabelHighlight&&this.$lastlabelHighlight.removeClass(s),t.addClass(s),this.$lastlabelHighlight=t,e.paramquery.scrollView(t))},t._setPopupWidth=function(){var e=this.$button[0].offsetWidth;this.$popupCont.width(e)},t.positionPopup=function(){var t=this.options,s=this.$button,i=e.extend({of:s},t.position),l=this.$popupCont;this._setPopupWidth(),l.position(i)},t.isOpen=function(){return!(!this.$popupCont||"block"!=this.$popupCont.css("display"))},t.open=function(){var t=this,s=this.$popupCont;return this.$menu,this.selectIndx,!this.isOpen()&&(s.show(),this.positionPopup(),this._highlight(),e(document).on("mousedown"+t.eventNamespace,function(s){var i=e(s.target);i.closest(t.$popup).length||i.closest(t.$button).length||t.close()}),void(this.options.search?t.focus():s.attr("tabindex","-1").focus()))},t.setText=function(){var e=this.$button,t=e.find(".pq-select-text"),s=this.element,i=this.options,l=i.deselect,o=this.data,n=i.itemCls,a=i.bootstrap,c=a.on?a.closeIcon:"ui-icon ui-icon-close",h=function(e){return l?["<span class='",n,"' data-id = '",e,"'>","<span class='pq-item-close ",c,"'></span>","<span class='pq-select-item-text'>",o[e].text,"</span>","</span>"].join(""):o[e].text},p=this.selectIndx;if(this.multiple){e.addClass("pq-select-multiple");var r=p.length,u=i.maxDisplay,d=o.length;if(r>0)if(u>=r){for(var f=[],g=0;r>g;g++){var v=p[g];f.push(h(v))}b=f.join(l?"":", ")}else b=(b=(b=i.displayText).replace("{0}",p.length)).replace("{1}",d);else(b=s.attr("data-placeholder"))||(b=i.multiplePlaceholder)}else{var b;e.addClass("pq-select-single"),t.css("maxWidth",e.width()-16),null!=(b=(v=p[0])>=0?o[v].text:"")&&""!==b?b=h(v):(b=s.attr("data-placeholder"))||(b=i.singlePlaceholder)}t.html(b),this.multiple||t.find(".pq-select-item-text").css({maxWidth:e.width()-35}),this.positionPopup()},t.close=function(t){this.isOpen()&&(!1!==(t=t||{}).focus&&this.$button.focus(),this.$popupCont.hide()),e(document).off(this.eventNamespace)},t.toggle=function(){this.isOpen()?this.close():this.open()},t.disable=function(){this.option({disabled:!0})},t.enable=function(){this.option({disabled:!1})},t._destroy=function(){this.$popupCont.remove(),this.$button.remove(),this.element.removeClass("pq-select").show();var t=this.eventNamespace;e(document).off(t),e(window).off(t)},t.destroy=function(){for(var e in this._super(),this)delete this[e]},t._setOption=function(e,t){"disabled"==e&&(!0===t?(this.close(),this.$button.addClass("ui-state-disabled")):!1===t&&this.$button.removeClass("ui-state-disabled")),this._super(e,t)},e.widget("paramquery.pqSelect",t)});
if("function"==typeof require){var jQuery=require("jquery"),pq={},JSZip=require("jszip");module.exports=pq}else var pq=window.pq||{};!function(e){var t=pq.mixin={};t.render={getRenderVal:function(e,t,n){var r=e.column,i=r.exportRender;return(t&&!1!==i||i)&&(r.render||r._render||r.format)?n.renderCell(e):[e.rowData[e.dataIndx],""]}},t.GrpTree={buildCache:function(){for(var e,t,n=this,r=n.that.options,i="groupModel"==n.model,o=i?n.that.pdata:r.dataModel.data,a=n.cache={},l=n.id,s=0,d=o.length;d>s;s++)if(e=o[s],!i||e.pq_gtitle){if(null==(t=e[l]))throw"unknown id of row";a[t]=e}},cascadeInit:function(){if(this.getCascadeInit()){for(var e,t=this,n=[],r=t.cbId,i=t.that,o=i.options[t.model].select,a=i.pdata,l=0,s=a.length;s>l;l++)(e=a[l])[r]?t.isEditable(e)?(n.push(e),delete e[r]):o&&(e.pq_rowselect=!0):null===e[r]&&delete e[r];n.length&&t.checkNodes(n,null,null,!0)}},cascadeNest:function(e){for(var t,n,r,i=this,o=i.cbId,a=i.prop,l=i.childstr,s=e.length,d=0;s>d;d++)(n=e[d])[a]&&(t=!0,i.eachChild(n,i.chkEachChild(o,n[o],a)),delete n[a]),(r=n[l])&&r.length&&i.cascadeNest(r);t&&i.hasParent(n)&&i.eachParent(n,i.chkEachParent(o))},checkAll:function(e,t){e=null==e||e;var n=this.that;return this.checkNodes(n.pdata,e,t,null,!0)},checkNodes:function(e,t,n,r,i){null==t&&(t=!0);for(var o,a,l,s=0,d=e.length,c=[],u={check:t},h=this,f=h.that,p=f.riOffset,g=h.cbId,v=h.prop,m=f.options[h.model],w=!i&&h.isCascade(m),x=r&&m.eventForInit||!r,y=m.select;d>s;s++)o=e[s],this.isEditable(o)&&(a=o.pq_ri,c.push({rowData:o,rowIndx:a,rowIndxPage:a-p}));if(u.rows=c,u.dataIndx=h.colUI.dataIndx,r&&(u.init=r),x&&(l=f._trigger("beforeCheck",n,u)),!1!==l&&(d=(c=u.rows).length)){var C=this.chkRows=[];for(s=0;d>s;s++)o=c[s].rowData,w&&(o[v]=!0),C.push({rd:o,val:t,oldVal:o[g]}),o[g]=t;w&&h.cascadeNest(h.getRoots()),y&&this.selectRows(),w&&(u.getCascadeList=h.getCascadeList(h)),x&&f._trigger("check",n,u),C.length=0}h.setValCBox(),r||f.refresh({header:!1})},chkEachChild:function(e,t,n){return function(r){if(this.isEditable(r)&&(!n||!r[n])){var i=r[e];null!==t&&i!==t&&(this.chkRows.push({rd:r,val:t,oldVal:i}),r[e]=t)}}},chkEachParent:function(e){var t=this.childstr;return function(n){if(this.isEditable(n)){for(var r,i,o,a=n[t],l=0,s=0,d=n[e],c=0,u=a.length;u>c;c++)if(r=a[c],this.isEditable(r)){if(o=r[e])l++;else{if(null===o){i=null;break}s++}if(l&&s){i=null;break}}void 0===i&&(i=!!l),d!==i&&(this.chkRows.push({rd:n,val:i,oldVal:d}),n[e]=i)}}},eachChild:function(e,t){t.call(this,e);for(var n,r=this.childstr,i=e[r]||[],o=0,a=i.length;a>o;o++)(n=i[o])[r]?this.eachChild(n,t):t.call(this,n)},eachParent:function(e,t){for(;e=this.getParent(e);)t.call(this,e)},_flatten:function(e,t,n,r){for(var i,o,a=this,l=e.length,s=a.id,d=a.parentId,c=0,u=a.childstr;l>c;c++)(i=e[c]).pq_level=n,r.push(i),t&&(i[d]=s?t[s]:t),(o=i[u])&&a._flatten(o,i,n+1,r)},flatten:function(e){var t=[];return this._flatten(e,null,0,t),t},getCascadeInit:function(){var e=this._cascadeInit;return this._cascadeInit=!0,e},getNode:function(e){return this.cache[e]},getParent:function(e){var t=e[this.parentId];return this.cache[t]},hasParent:function(e){return null!=e[this.parentId]},getRoots:function(e){for(var t,n=this.that,r=e||n.pdata||[],i=r.length,o=0,a=[];i>o;o++)0!==(t=r[o]).pq_level||t.pq_gsummary||a.push(t);return i&&!a.length&&(a=r),a},setCascadeInit:function(e){this._cascadeInit=e},getCascadeList:function(e){var t=[];return function(){if(!t.length)for(var n=e.chkRows,r=0,i=e.cbId,o=n.length;o>r;r++){var a=n[r],l=a.rd,s=l.pq_ri,d={},c={};d[i]=a.val,c[i]=a.oldVal,t.push({rowIndx:s,rowData:l,newRow:d,oldRow:c})}return t}},getChildren:function(e){return e[this.childstr]},getSummary:function(e){return e.pq_child_sum},isAncestor:function(e,t){for(var n=e;n=this.getParent(n);)if(n==t)return!0},isCascade:function(e){return e.cascade&&e.checkbox&&!e.maxCheck},isEditable:function(e){if(e.pq_gsummary)return!1;var t,n=this.that,r=this.colCB;return!r||!(t=r.editable)||("function"==typeof t?t.call(n,{rowData:e}):t)},isFolder:function(e){return null!=e.pq_close||!!e[this.childstr]},onCheckbox:function(e,t){return function(n,r){t.checkbox&&e.colUI==r.column&&e.checkNodes([r.rowData],r.input.checked,n)}},onCMInit:function(){var e,t,n=this,r=n.that,i=r.columns,o=n.model,a="treeModel"===o,l=r.options[o];l.checkbox&&i&&((t=i[l.cbId]||{dataIndx:l.cbId}).cb={check:!0,uncheck:!1,select:l.select,header:l.checkboxHead,maxCheck:l.maxCheck},e=a?i[l.dataIndx]:r.colModel[0]),n.colCB=t,n.colUI=e,i&&a&&n.setCellRender()},onCustomSortTree:function(e,t){var n=this,r=n.getRoots(t.data);return n.sort(r,t.sort_composite),t.data=n.flatten(r),!1},onRefresh:function(e,t){return function(){if(t.checkbox)for(var e=this.$cont.find(".pq_indeter"),n=e.length;n--;)e[n].indeterminate=!0}},refreshView:function(e){this.that.refreshView({header:!1,source:e})},renderCB:function(e,t,n){if(t.pq_gsummary)return"";var r,i=this.that,o="",a="",l="";return"function"==typeof e&&(e=e.call(i,t)),e?(t[n]&&(o="checked"),this.isEditable(t)||(a="disabled",r="pq_disable"),null===t[n]&&(l="class='pq_indeter'"),["<input type='checkbox' "+l+" "+o+" "+a+"/>",r]):void 0},selectRows:function(){for(var e=0,t=this.chkRows,n=t.length;n>e;e++){var r=t[e],i=r.rd,o=r.val;i.pq_rowselect=o}},sort:function(e,t){var n=this.childstr,r=function(e){return"function"==typeof t?t:t[e]};!function e(t,i){var o,a=t.length,l=0;if(a)for(i&&t.sort(i),i=r(t[0].pq_level+1);a>l;l++)(o=t[l][n])&&e(o,i)}(e,r(0))},copyArray:function(e,t){for(var n=0,r=t.length;r>n;n++)e.push(t[n])},_summaryT:function(e,t,n,r,i,o,a){for(var l,s,d,c,u,h=this,f=h.childstr,p="groupModel"==h.model,g=o.summaryInTitleRow,v=h.that.colIndxs,m=o.showSummary,w=o.titleInFirstCol,x=0,y=e.length,C=0,b={},I={},_=h.id,q=h.parentId,R=p&&a?o.dataIndx[a.pq_level]:"",D=[],M=n.length,T=pq.aggregate;M>C;C++)b[u=n[C]]=[];for(;y>x;x++){if(s=e[x],l=null,t.push(s),d=s[f]){for(l=h._summaryT(d,t,n,r,i,o,s),C=0;M>C;C++)u=n[C],h.copyArray(b[u],l[1][u]);h.copyArray(D,l[2])}if(!p||!s.pq_gtitle){for(C=0;M>C;C++)b[u=n[C]].push(s[u]);D.push(s)}}for(C=0;M>C;C++)u=n[C],c=(c=r[C])[R]||c.type,I[u]=T[c](b[u],i[C],D),g&&a&&(0==v[u]&&w||(a[u]=I[u]));return!a||p&&!m[a.pq_level]||(I.pq_level=a.pq_level,I[q]=a[_],t.push(I),a.pq_child_sum=I,I.pq_hidden=a.pq_close),I.pq_gsummary=!0,[I,b,D]},summaryT:function(){for(var t,n,r,i=this,o=i.that,a=o.options,l=a[i.model],s=i.getRoots(),d=[],c=[],u=[],h=[],f=0,p=o.colModel,g=p.length;g>f;f++)(n=(t=p[f]).summary)&&!e.isEmptyObject(n)&&(u.push(t.dataIndx),h.push(t),c.push(n));r=i._summaryT(s,d,u,c,h,l)[0],l.grandSummary?(r.pq_grandsummary=!0,i.summaryData=a.summaryData=[r]):(i.summaryData||[]).length=0,o.pdata=d}}}(jQuery),function(e){var t=pq.mixin,n=!0;e(function(){var t=e("<input type='checkbox' style='position:fixed;left:-50px;top:-50px;'/>").appendTo(document.body);t[0].indeterminate=!0,t.on("change",function(){n=!1}),t.click(),t.remove()}),t.ChkGrpTree={getCheckedNodes:function(e){var t,n=this.that,r=e?n.getData():n.options.dataModel.data,i=r.length,o=0,a=[],l=this.colCB||{},s=(l.cb||{}).check,d=l.dataIndx;if(null!=d)for(;i>o;o++)(t=r[o])[d]===s&&a.push(t);return a},hasCboxHead:function(){return((this.colCB||{}).cb||{}).header},isHeadChecked:function(){return this.inpVal},onBeforeCheck:function(e,t){if(t.check&&this.colCB){var n=this.colCB,r=n.cb,i=r.select,o=r.maxCheck;if(o&&this.colUI.dataIndx==t.dataIndx){var a=t.rows.slice(0,o),l=a.length,s=n.dataIndx,d=this.getCheckedNodes(!0),c=l+d.length-o;c>0&&d.slice(0,c).forEach(function(e){e[s]=r.uncheck,i&&delete e.pq_rowselect}),t.rows=a}}},onHeaderChange:function(e){!1===this.checkAll(e.target.checked,e)&&this.refreshHeadVal()},onRefreshHeader:function(){var e=this,t=e.that;if(e.hasCboxHead()){if("groupModel"==e.model&&!t.options[e.model].on)return;var r=t.getCellHeader({dataIndx:e.colUI.dataIndx}),i=r.find("input");i.length||(r.find(".pq-title-span").prepend('<input type="checkbox" />'),i=r.find("input")),e.$inp&&i[0]==e.$inp[0]||(e.$inp=i,e.refreshHeadVal(),n&&i.on("click",function(t){null==i.data("pq_value")&&(i[0].checked=!0,i.data("pq_value",!0),e.onHeaderChange(t))}),i.on("change",function(t){e.onHeaderChange(t)}))}},refreshHeadVal:function(){this.$inp&&this.$inp.pqval({val:this.inpVal})},setValCBox:function(){if(this.hasCboxHead()){var e,t,n=this.that,r=n.options,i=this.colCB,o=i.dataIndx,a=n.colIndxs[o],l=i.cb,s=l.all,d="remote"==r.pageModel.type||!s?n.riOffset:0,c=s?r.dataModel.data:n.pdata,u=null,h=0,f=0,p=0;if(c){for(var g=0,v=c.length;v>g;g++)t=g+d,(e=c[g]).pq_gsummary||e.pq_gtitle||!this.isEditable(e,i,t,a,o)||(f++,e[o]===l.check?h++:p++);h==f&&f?u=!0:p==f&&(u=!1),this.inpVal=u,this.refreshHeadVal()}}},unCheckAll:function(){this.checkAll(!1)},unCheckNodes:function(e,t){this.checkNodes(e,!1,t)}}}(jQuery),function(e){var t=e.ui.autocomplete.prototype,n=t._renderMenu,r=t._renderItem;t._renderMenu=function(t,r){n.call(this,t,r);var i=this.options.selectItem;if(i&&i.on){var o=void 0===(o=i.cls)?"ui-state-highlight":o,a=this.element.val();a&&o&&e("a",t).filter(function(){return e(this).text()===a}).addClass(o)}},t._renderItem=function(e,t){var n=r.call(this,e,t),i=this.options.highlightText;if(i&&i.on){var o=this.element.val();if(o){var a=new RegExp("("+o+")","i"),l=t.label;if(a.test(l)){var s=void 0===(s=i.style)?"font-weight:bold;":s,d=void 0===(d=i.cls)?"":d;l=l.replace(a,"<span style='"+s+"' class='"+d+"'>$1</span>"),n.find("a").html(l)}}}return n};var i=e.paramquery=e.paramquery||{},o=function(e,t,n,r){for(var i=t.slice(),o=0,a=i.length,l=[];a>o;o++){var s=i[o],d=s.cb,c=s.one;if(c){if(s._oncerun)continue;s._oncerun=!0}if(!1===d.call(e,n,r)&&(n.preventDefault(),n.stopPropagation()),c&&l.push(o),n.isImmediatePropagationStopped())break}if(a=l.length)for(o=a-1;o>=0;o--)i.splice(l[o],1)};i._trigger=function(t,n,r){var i,a,l=this,s=l.listeners,d=s[t],c=l.options,u=c.allEvents,h=c.bubble,f=l.element,p=c[t];if(r=r||{},(n=e.Event(n)).type=l.widgetName+":"+t,n.target=f[0],a=n.originalEvent)for(i in a)i in n||(n[i]=a[i]);if(u&&"function"==typeof u&&u.call(l,n,r),d&&d.length&&(o(l,d,n,r),n.isImmediatePropagationStopped()))return!n.isDefaultPrevented();if(c.trigger&&(f[h?"trigger":"triggerHandler"](n,r),n.isImmediatePropagationStopped()))return!n.isDefaultPrevented();p&&(!1===p.call(l,n,r)&&(n.preventDefault(),n.stopPropagation()));return(d=s[t+"Done"])&&d.length&&o(l,d,n,r),!n.isDefaultPrevented()};var a=function(e,t,n,r,i){var o=e.listeners[t];o||(o=e.listeners[t]=[]),o[i?"unshift":"push"]({cb:n,one:r})};i.on=function(){var e=arguments;if("boolean"==typeof e[0])var t=e[0],n=e[1],r=e[2],i=e[3];else n=e[0],r=e[1],i=e[2];for(var o=n.split(" "),l=0;l<o.length;l++){var s=o[l];s&&a(this,s,r,i,t)}return this},i.one=function(){for(var e=arguments.length,t=[],n=0;e>n;n++)t[n]=arguments[n];return t[e]=!0,this.on.apply(this,t)};var l=function(e,t,n){if(n){var r=e.listeners[t];if(r){for(var i=[],o=0,a=r.length;a>o;o++){n==r[o].cb&&i.push(o)}if(i.length)for(o=i.length-1;o>=0;o--)r.splice(i[o],1)}}else delete e.listeners[t]};i.off=function(e,t){for(var n=e.split(" "),r=0;r<n.length;r++){var i=n[r];i&&l(this,i,t)}return this};var s={options:{items:".pq-grid-cell.pq-has-tooltip,.pq-grid-cell[title]",position:{my:"center top",at:"center bottom"},content:function(){var t=e(this),n=t.closest(".pq-grid").pqGrid("instance"),r=n.getCellIndices({$td:t}),i=r.rowIndx,o=r.dataIndx,a=n.data({rowIndx:i,dataIndx:o,data:"pq_valid"}).data;if(a){var l=a.icon,s=a.msg;return(""==l?"":"<span class='ui-icon "+l+" pq-tooltip-icon'></span>")+(s=null!=s?s:"")}return t.attr("title")}},_create:function(){this._super();var t=this.element,n=this.eventNamespace;t.on("pqtooltipopen"+n,function(t,n){var r=e(t.target),i=e(t.originalEvent.target);if(i.on("remove.pqtt",function(e){r.pqTooltip("close",e,!0)}),r.is(".pq-grid")){var o,a=r.pqGrid("instance"),l=a.getCellIndices({$td:i}),s=l.rowIndx,d=l.dataIndx;if((o=a.getRowData({rowIndx:s}))&&(o=o.pq_celldata)&&(o=o[d])&&(o=o.pq_valid)){var c=o,u=c.style,h=c.cls;n.tooltip.addClass(h);var f=n.tooltip.attr("style");n.tooltip.attr("style",f+";"+u)}}}),t.on("pqtooltipclose"+n,function(t,n){(e(t.target),e(t.originalEvent.target)).off(".pqtt")})}};e.widget("paramquery.pqTooltip",e.ui.tooltip,s)}(jQuery),function(e){e.paramquery=e.paramquery||{},e.paramquery.onResize=function(t,n){var r=e(t);"static"===r.css("position")&&r.css("position","relative");var i=e('<iframe type="text/html" src="about:blank" class="pq-resize-iframe" style="display:block;width:100%;height:100%;position:absolute;top:0;left:0;z-index:-1;overflow: hidden; pointer-events: none;" />').appendTo(r);i[0].data="about:blank",i.css("opacity","0");for(var o=0;o<r.length;o++){var a=i[o];e(a.contentWindow).on("resize",function(e){n.call(t,e)})}}}(jQuery),function(e){function t(e){return e.charCodeAt(0)-64}var n=e.paramquery,r=Array.prototype;!r.find&&(r.find=function(e,t){for(var n,r=0,i=this.length;i>r;r++)if(n=this[r],e.call(t,n,r,this))return n}),!r.findIndex&&(r.findIndex=function(e,t){for(var n,r=0,i=this.length;i>r;r++)if(n=this[r],e.call(t,n,r,this))return r;return-1}),e.extend(pq,{arrayUnique:function(e,t){var n,r,i,o=[],a=e.length,l={};for(n=0;a>n;n++)r=e[n],1!=l[i=t?r[t]:r]&&(l[i]=1,o.push(r));return o},cap1:function(e){return e&&e.length?e[0].toUpperCase()+e.slice(1):""},elementFromXY:function(t){var n,r=t.clientX,i=t.clientY,o=e(document.elementFromPoint(r,i));return o.closest(".ui-draggable-dragging").length&&((n=o).hide(),o=e(document.elementFromPoint(r,i)),n.show()),o},escapeHtml:function(e){return e.replace(/&/g,"&amp;").replace(/<(\S)/g,"&lt;$1")},escapeXml:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;")},excelToJui:function(){var e={};return function(t){var n=e[t];return n||(n=t.replace(/yy/g,"y").replace(/dddd/g,"DD").replace(/ddd/g,"D").replace(/mmmm/g,"MM").replace(/mmm/g,"M"),e[t]=n),n}}(),excelToNum:function(){var e={};return function(t){var n=e[t];return n||(n=t.replace(/\\/g,""),e[t]=n),n}}(),flatten:function(e,t){var n,r=0,i=e.length;for(t=t||[];i>r;r++)null!=(n=e[r])&&(n.push?pq.flatten(n,t):t.push(n));return t},toRC:function(e){var t=e.match(/([A-Z]+)(\d+)/),n=pq.toNumber(t[1]);return[t[2]-1,n]},formatEx:function(e,t,n,r){return n&&(r=r||pq.getDataType(e),pq.filter.conditions[n][r])?this.format(e,t,r):t},format:function(t,n,r){var i=t.format;if(i&&null!=n){if("function"==typeof i)return i(n);if("date"==(r=r||pq.getDataType(t)))try{var o=new Date(n);o&&!isNaN(o.getTime())&&(n=e.Uidatepicker.formatDate(i,o))}catch(e){}else n=pq.formatNumber(n,i)}return n},deFormat:function(t,n,r){if(n){var i,o,a=t.format;if(a&&(o=pq.getDataType(t),!r||pq.filter.conditions[r][o]))try{"function"==typeof a?n=t.deFormat(n):"date"==o?(i=t.formatRaw||"mm/dd/yy")!=a&&(n=e.Uidatepicker.parseDate(a,n),n=e.Uidatepicker.formatDate(i,n)):n=pq.deFormatNumber(n,a)}catch(e){n=null}}return n},fakeEvent:function(e,t,n){if("timeout"==t){var r,i="keyup change";e.off(i).on(i,function(){clearTimeout(r),r=setTimeout(function(){e.triggerHandler("timeout")},n)})}},getAddress:function(e){var t=e.split(":"),n=this.toRC(t[0]),r=n[0],i=n[1],o=this.toRC(t[1]||t[0]),a=o[0],l=o[1];return{r1:r,c1:i,rc:a-r+1,cc:l-i+1,r2:a,c2:l}},getDataType:function(e){var t,n=e.dataType;return"bool"==n?t="bool":"float"==n||"integer"==n?t="number":"date"==n&&(t="date"),t||"string"},getFn:function(){var e={};return function(t){var n=t;return"string"==typeof t&&((n=e[t])||(n=window,t.split(".").forEach(function(e){n=n[e]}),e[t]=n)),n}}(),isCtrl:function(e){return e.ctrlKey||e.metaKey},isDateFormat:function(){var e={};return function(t){var n=e[t];return null==n&&(n=e[t]=/^[mdy\s-\/,]*$/i.test(t)),n}}(),isEmpty:function(e){for(var t in e)return!1;return!0},isObject:function(e){return"[object Object]"===Object.prototype.toString.call(e)},juiToExcel:function(){var e={};return function(t){var n=e[t];return n||(n=t.replace(/y/g,"yy").replace(/DD/g,"dddd").replace(/D/g,"ddd").replace(/MM/g,"mmmm").replace(/M/g,"mmm"),e[t]=n),n}}(),makePopup:function(t,n,r){var i=(Math.random()+"").replace(".",""),o="mousedown.pq"+i+" keydown.pq"+i,a=function(){l.remove(),e(document).off(o),r&&r()},l=e(t);l.addClass("pq-popup").on("keydown",function(t){t.keyCode==e.ui.keyCode.ESCAPE&&a()}),e(n).one("remove",function(){a()}),e(document).on(o,function(r){var i=e(r.target);t.contains(i[0])||pq.isCtrl(r)||i.closest(".ui-Uidatepicker").length||i.closest(n).length||a()})},moveItem:function(e,t,n,r){return n>r?(t.splice(n,1),t.splice(r++,0,e)):n==r?r++:(t.splice(r,0,e),t.splice(n,1)),r},newLine:function(e){return isNaN(e)&&"string"==typeof e?e.replace(/(\r\n|\r|\n)/g,"<br>"):e},numToExcel:function(){var e={};return function(t){var n=e[t];return n||(n=t.replace(/[^#0,.@]/g,function(e){return"\\"+e}),e[t]=n),n}}(),objectify:function(e){for(var t={},n=e.length;n--;)t[e[n]]=1;return t},unescapeXml:function(){var e={amp:"&",lt:"<",gt:">",quot:'"',apos:"'"};return function(t){return t.replace(/&(amp|lt|gt|quot|apos);/g,function(t,n){return e[n]})}}()}),n.select=function(e){var t,n,r,i=e.attr,o=e.options,a=e.groupIndx,l=e.labelIndx,s=e.valueIndx,d=null!=l&&null!=s,c=null!=a,u=e.prepend,h=e.dataMap,f=function(){for(var e={},t=0;t<h.length;t++){var n=h[t];e[n]=w[n]}return"data-map='"+JSON.stringify(e)+"'"},p=["<select ",i," >"];if(u)for(var g in u)p.push('<option value="',g,'">',u[g],"</option>");if(o&&o.length){for(var v=0,m=o.length;m>v;v++){var w=o[v];if(d){var x=w[s],y=w.pq_disabled?'disabled="disabled" ':"",C=w.pq_selected?'selected="selected" ':"";if(null==x)continue;if(r=h?f():"",c){var b=w.pq_disabled_group?'disabled="disabled" ':"";n!=(t=w[a])&&(null!=n&&p.push("</optgroup>"),p.push('<optgroup label="',t,'" ',b," >"),n=t)}if(l==s)p.push("<option ",C,y,r,">",x,"</option>");else{var I=w[l];p.push("<option ",C,y,r,' value="',x,'">',I,"</option>")}}else if("object"==typeof w)for(var g in w)p.push('<option value="',g,'">',w[g],"</option>");else p.push("<option>",w,"</option>")}c&&p.push("</optgroup>")}return p.push("</select>"),p.join("")},e.fn.pqval=function(e){if(e){if(e.incr){var t=this.data("pq_value");return this.prop("indeterminate",!1),t?(t=!1,this.prop("checked",!1)):!1===t?(t=null,this.prop("indeterminate",!0),this.prop("checked",!1)):(t=!0,this.prop("checked",!0)),this.data("pq_value",t),t}return t=e.val,this.data("pq_value",t),this.prop("indeterminate",!1),null===t?(this.prop("indeterminate",!0),this.prop("checked",!1)):t?this.prop("checked",!0):this.prop("checked",!1),this}return this.data("pq_value")},n.xmlToArray=function(t,n){var r=n.itemParent,i=n.itemNames,o=[];return e(t).find(r).each(function(t,n){var r=e(n),a=[];e(i).each(function(e,t){a.push(r.find(t).text().replace(/\r|\n|\t/g,""))}),o.push(a)}),o},n.xmlToJson=function(t,n){var r=n.itemParent,i=n.itemNames,o=[];return e(t).find(r).each(function(t,n){for(var r=e(n),a={},l=0,s=i.length;s>l;l++){var d=i[l];a[d]=r.find(d).text().replace(/\r|\n|\t/g,"")}o.push(a)}),o},n.tableToArray=function(t){var n=e(t),r=[],i=[],o=n.children("tbody").children("tr"),a=o.length?e(o[0]):e(),l=o.length>1?e(o[1]):e();return a.children("th,td").each(function(t,n){var i=e(n),o=i.html(),a=i.width(),s="left";if(l.length){var d=l.find("td:eq("+t+")").attr("align");s=d||s}var c={title:o,width:a,dataType:"string",align:s,dataIndx:t};r.push(c)}),o.each(function(t,n){if(0!=t){var r=e(n),o=[];r.children("td").each(function(t,n){o.push(e.trim(e(n).html()))}),i.push(o)}}),{data:i,colModel:r}};var i=function(e){return function(t,n){var r,i,o,a;if(t){if(i=t.split(":"),t=n&&i.length>1?i[1]:i[0],r=e[t])return r;o=/^([^#]*|&#[^#]*)?[\,\.#0]*?([\,\s\.]?)([#0]*)([\,\s\.]?)([0]*?)(\s*[^#^0]*|&#[^#]*)?$/,(a=t.match(o))&&a.length&&(r={symbol:a[1]||"",thouSep:a[2],thousand:a[3].length,decSep:a[4],decimal:a[5].length,symbolEnd:a[6]||""},e[t]=r)}return r||{symbol:"",symbolEnd:"",thouSep:",",thousand:3,decSep:".",decimal:2}}}({});n.formatCurrency=function(e,t){var n=parseFloat(e);if(!isNaN(n)){for(var r=0>n,o=i(t,r),a=o.symbol,l=o.symbolEnd,s=o.thousand,d=o.thouSep,c=o.decSep,u=o.decimal,h=(n=n.toFixed(u)).length,f=u+c.length,p=n.substring(0,h-f),g=n.substring(h-f+c.length,h),v=p.match(/\d/g).reverse(),m=[],w=0;w<v.length;w++)w>0&&w%s==0&&m.push(d),m.push(v[w]);return(r?"-":"")+a+(p=(m=m.reverse()).join(""))+c+g+l}},pq.formatNumber=n.formatCurrency,pq.deFormatNumber=function(e,t){var n=i(t,0>e),r=n.symbol,o=n.symbolEnd,a=n.thouSep,l=n.decSep;return a="."===a?"\\.":a,e=e.replace(r,"").replace(o,"").replace(new RegExp(a,"g"),""),l&&(e=1*e.replace(l,".")),e},pq.validation={is:function(e,t){return"string"==e||!e||this["is"+(e=e.substring(0,1).toUpperCase()+e.substring(1,e.length))](t)},isFloat:function(e){var t=parseFloat(e);return!isNaN(t)&&t==e},isInteger:function(e){var t=parseInt(e);return!isNaN(t)&&t==e},isDate:function(e){var t=Date.parse(e);return!isNaN(t)}};var o=[],a={},l=pq.toLetter=function(e){var t=o[e];if(!t){var n=++e%26,r=e/26|0,i=n?String.fromCharCode(64+n):(--r,"Z");t=r?l(r-1)+i:i,o[--e]=t,a[t]=e}return t};pq.toNumber=function(e){var n,r,i,l=a[e];if(null==l){for(n=e.length,l=-1,r=0;n>r;r++)i=n-r-1,l+=t(e[r])*Math.pow(26,i);o[l]=e,a[e]=l}return l},pq.generateData=function(e,t){for(var n=[],r=0;t>r;r++)n[r]=l(r);var i=[];for(r=0;e>r;r++)for(var o=i[r]=[],a=0;t>a;a++)o[a]=n[a]+(r+1);return i}}(jQuery),function(e){pq.validations={minLen:function(e,t,n){return e=n(e),t=n(t),e.length>=t||void 0},nonEmpty:function(e){return null!=e&&""!==e||void 0},maxLen:function(e,t,n){return e=n(e),t=n(t),e.length<=t||void 0},gt:function(e,t,n){return(e=n(e))>(t=n(t))||void 0},gte:function(e,t,n){return(e=n(e))>=(t=n(t))||void 0},lt:function(e,t,n){return e=n(e),(t=n(t))>e||void 0},lte:function(e,t,n){return e=n(e),(t=n(t))>=e||void 0},neq:function(e,t,n){return(e=n(e))!==(t=n(t))||void 0},regexp:function(e,t){return!!new RegExp(t).test(e)||void 0}};var t=e.paramquery;t.cValid=function(e){this.that=e},t.cValid.prototype={_isValidCell:function(e){var t=this.that,n=e.column,r=n.validations;if(!r||!r.length)return{valid:!0};var i,o=e.value,a=n.dataType,l=function(e){return t.getValueFromDataType(e,a,!0)},s=e.rowData;if(!s)throw"rowData required.";for(var d=0;d<r.length;d++){var c=r[d],u=c.on,h=c.type,f=!1,p=c.msg,g=c.value;if(!1!==u){if(i=pq.validations[h])f=null!=o&&i(o,g,l);else if(h){var v={column:n,value:o,rowData:s,msg:p};!1===t.callFn(h,v)?(f=!1,p=v.msg):f=!0}else f=!0;if(!f)return{valid:!1,msg:p,column:n,warn:c.warn,dataIndx:n.dataIndx,validation:c}}}return{valid:!0}},onScrollCell:function(e,t,n,r,i,o){var a,l=this.that,s=l.options.bootstrap;if(e||(a=l.getEditCell())&&a.$cell){var d=e||a.$cell;d.attr("title",t);var c="tooltip",u="open";s.on&&s.tooltip&&(c=s.tooltip,u="show");try{d[c]("destroy")}catch(e){}d[c]({trigger:"manual",position:{my:"left center+5",at:"right center"},content:function(){return(""==n?"":"<span class='ui-icon "+n+" pq-tooltip-icon'></span>")+t},open:function(e,t){var n=t.tooltip;if(r&&n.addClass(r),o){var a=n.attr("style");n.attr("style",a+";"+o)}i&&n.tooltip.css(i)}})[c](u)}},isValidCell:function(t){var n=this,r=this.that,i=t.rowData,o=t.rowIndx,a=t.value,l=t.valueDef,s=t.column,d=t.focusInvalid,c=r.options,u=(c.bootstrap,t.allowInvalid),h=s.dataIndx,f=c.validation,p=c.warning,g=c.editModel,v=g.invalidClass,m=g.warnClass,w=document.activeElement;if(t.checkEditable&&0==r.isEditable({rowIndx:o,rowData:i,column:s,dataIndx:h}))return{valid:!0};var x=this._isValidCell({column:s,value:a,rowData:i}),y=x.valid,C=x.warn,b=x.msg;if(y)r.data({rowData:i,dataIndx:h,data:"pq_valid"})&&(r.removeClass({rowData:i,rowIndx:o,dataIndx:h,cls:m+" "+v}),r.removeData({rowData:i,dataIndx:h,data:"pq_valid"}));else var I=e.extend({},C?p:f,x.validation),_=I.css,q=I.cls,R=I.icon,D=I.style;if(u||C)return y?{valid:!0}:(r.addClass({rowData:i,rowIndx:o,dataIndx:h,cls:C?m:v}),r.data({rowData:i,dataIndx:h,data:{pq_valid:{css:_,icon:R,style:D,msg:b,cls:q}}}),x);if(!y){if(null==o){var M=r.getRowIndx({rowData:i,dataUF:!0});if(null==(o=M.rowIndx)||M.uf)return x.uf=M.uf,x}if(d){var T;if(l){if(e(w).hasClass("pq-editor-focus")){var E=c.editModel.indices;if(E){var k=E.rowIndx,S=E.dataIndx;if(null!=o&&o!=k)throw"incorrect usage of isValid rowIndx: "+o;if(h!=S)throw"incorrect usage of isValid dataIndx: "+h;r.editCell({rowIndx:k,dataIndx:h})}}}else{r.goToPage({rowIndx:o});var P={rowIndx:o,dataIndx:h};P=r.normalize(P);T=r.getCell(P),r.scrollCell(P,function(){n.onScrollCell(T,b,R,q,_,D),r.focus(P)})}this.onScrollCell(T,b,R,q,_,D)}return x}if(l){var A=r.getEditCell();if(A&&A.$cell){var $=A.$cell;$.removeAttr("title");try{$.tooltip("destroy")}catch(e){}}}return{valid:!0}},isValid:function(e){e=e||{};var t=this.that,n=e.allowInvalid,r=e.focusInvalid,i=e.checkEditable;n=null!=n&&n;if(null!=(f=e.dataIndx)){var o=t.columns[f],a=e.rowData||t.getRowData(e),l=e.hasOwnProperty("value"),s=l?e.value:a[f];return(p=this.isValidCell({rowData:a,checkEditable:i,rowIndx:e.rowIndx,value:s,valueDef:l,column:o,allowInvalid:n,focusInvalid:r})).valid||p.warn?{valid:!0}:p}if(null!=e.rowIndx||null!=e.rowIndxPage||null!=e.rowData){a=e.rowData||t.getRowData(e);for(var d=t.colModel,c=[],u=0,h=d.length;h>u;u++){if(!(o=d[u]).hidden){var f,p;s=a[f=o.dataIndx];if(!(p=this.isValidCell({rowData:a,value:s,column:o,rowIndx:e.rowIndx,checkEditable:i,allowInvalid:n,focusInvalid:r})).valid&&!p.warn){if(!n)return p;c.push({rowData:a,dataIndx:f,column:o})}}}return n&&c.length?{cells:c,valid:!1}:{valid:!0}}var g=e.data?e.data:t.options.dataModel.data;c=[];if(!g)return null;for(u=0,h=g.length;h>u;u++){a=g[u];var v=this.isValid({rowData:a,rowIndx:void 0,checkEditable:i,allowInvalid:n,focusInvalid:r}),m=v.cells;if(!1===n){if(!v.valid)return v}else m&&m.length&&(c=c.concat(m))}return n&&c.length?{cells:c,valid:!1}:{valid:!0}}}}(jQuery),function(e){var t={options:{curPage:0,totalPages:0,totalRecords:0,msg:"",rPPOptions:[10,20,30,40,50,100],rPP:20,layout:["first","prev","|","strPage","|","next","last","|","strRpp","|","refresh","|","strDisplay"]},_create:function(){var e=this,t=e.options,n=e.element,r={first:e.initButton(t.strFirstPage,"seek-first","pq-page-first"),"|":"<span class='pq-separator'></span>",next:e.initButton(t.strNextPage,"seek-next","pq-page-next"),prev:e.initButton(t.strPrevPage,"seek-prev","pq-page-prev"),last:e.initButton(t.strLastPage,"seek-end","pq-page-last"),strPage:e.getPageOf(),strRpp:e.getRppOptions(),refresh:e.initButton(t.strRefresh,"refresh","pq-page-refresh"),strDisplay:"<span class='pq-page-display'>"+e.getDisplay()+"</span>"},i=t.layout.map(function(e){return r[e]}).join("");e.listeners={},n.html(i),n.addClass("pq-pager"),e.$first=n.find(".pq-page-first"),e.bindButton(e.$first,function(n){t.curPage>1&&e.onChange(n,1)}),e.$prev=n.find(".pq-page-prev"),e.bindButton(e.$prev,function(n){if(t.curPage>1){var r=t.curPage-1;e.onChange(n,r)}}),e.$next=n.find(".pq-page-next"),e.bindButton(e.$next,function(n){if(t.curPage<t.totalPages){var r=t.curPage+1;e.onChange(n,r)}}),e.$last=n.find(".pq-page-last"),e.bindButton(e.$last,function(n){if(t.curPage!==t.totalPages){var r=t.totalPages;e.onChange(n,r)}}),e.$refresh=n.find(".pq-page-refresh"),e.bindButton(e.$refresh,function(t){return!1!==e._trigger("beforeRefresh",t)&&void e._trigger("refresh",t)}),e.$display=n.find(".pq-page-display"),e.$select=n.find(".pq-page-select").val(t.rPP).on("change",e.onChangeSelect.bind(e)),e.$totalPages=n.find(".pq-page-total"),e.$curPage=n.find(".pq-page-current"),e.bindCurPage(e.$curPage)},_destroy:function(){this.element.empty().removeClass("pq-pager").enableSelection(),this._trigger("destroy")},_setOption:function(e,t){"curPage"!=e&&"totalPages"!=e||(t*=1),this._super(e,t)},_setOptions:function(t){var n,r=!1,i=this.options;for(n in t){var o=t[n],a=typeof o;"string"==a||"number"==a?o!=i[n]&&(this._setOption(n,o),r=!0):"function"==typeof o.splice||e.isPlainObject(o)?JSON.stringify(o)!=JSON.stringify(i[n])&&(this._setOption(n,o),r=!0):o!=i[n]&&(this._setOption(n,o),r=!0)}return r&&this._refresh(),this}};e.widget("paramquery.pqPager",t),pq.pager=function(t,n){var r=e(t).pqPager(n);return r.data("paramqueryPqPager")||r.data("paramquery-pqPager")};var n=e.paramquery,r=n.pqPager;r.regional={},r.defaults=r.prototype.options,e.extend(r.prototype,{bindButton:function(t,n){t.bind("click keydown",function(t){return"keydown"!=t.type||t.keyCode==e.ui.keyCode.ENTER?n.call(this,t):void 0})},bindCurPage:function(t){var n=this,r=this.options;t.bind("keydown",function(t){t.keyCode===e.ui.keyCode.ENTER&&e(this).trigger("change")}).bind("change",function(t){var i=e(this),o=i.val();return isNaN(o)||1>o?(i.val(r.curPage),!1):(o=parseInt(o))!==r.curPage?o>r.totalPages?(i.val(r.curPage),!1):!1===n.onChange(t,o)?(i.val(r.curPage),!1):void 0:void 0})},initButton:function(e,t,n){return"<span class='pq-ui-button ui-widget-header "+n+"' tabindex='0' title='"+e+"'><span class='ui-icon ui-icon-"+t+"'></span></span>"},onChange:function(e,t){var n={curPage:t};return!1!==this._trigger("beforeChange",e,n)&&(this.options.curPage=t,void this._trigger("change",e,n))},onChangeSelect:function(t){var n=e(t.target),r=this,i=1*n.val(),o={rPP:i};return!1===r._trigger("beforeChange",t,o)?(n.val(r.options.rPP),!1):(r.options.rPP=i,void r._trigger("change",t,o))},refresh:function(){this._destroy(),this._create()},_refresh:function(){var e=this,t=e.options,n=t.curPage>=t.totalPages;e.setDisable(e.$next,n),e.setDisable(e.$last,n),n=t.curPage<=1,e.setDisable(e.$first,n),e.setDisable(e.$prev,n),e.$totalPages.text(t.totalPages),e.$curPage.val(t.curPage),e.$select.val(t.rPP),e.$display.html(this.getDisplay()),e._trigger("refreshView")},getDisplay:function(){var e=this.options;if(e.totalRecords>0){var t=e.rPP,n=e.strDisplay||"",r=e.curPage,i=e.totalRecords,o=(r-1)*t,a=r*t;a>i&&(a=i),n=(n=(n=n.replace("{0}",o+1)).replace("{1}",a)).replace("{2}",i)}else n="";return n},getPageOf:function(){var e=this.options;return"<span>"+(e.strPage||"").replace("{0}","<input type='text' value='"+e.curPage+"' tabindex='0' class='pq-page-current ui-corner-all' />").replace("{1}","<span class='pq-page-total'>"+e.totalPages+"</span>")+"</span>"},getRppOptions:function(){var e=this.options,t=e.strRpp||"";if(t){var n,r,i=e.rPPOptions,o=["<select class='ui-corner-all pq-page-select' >"];if(-1!=t.indexOf("{0}")){for(var a=0,l=i.length;l>a;a++)r=i[a],o.push('<option value="',r,'">',r,"</option>");o.push("</select>"),n=o.join(""),t=t.replace("{0}",n)+"</span>"}}return"<span class='pq-page-rppoptions'>"+t+"</span>"},getInstance:function(){return{pager:this}},_trigger:n._trigger,on:n.on,one:n.one,off:n.off,setDisable:function(e,t){e[t?"addClass":"removeClass"]("disabled").css("pointer-events",t?"none":"").attr("tabindex",t?"":"0")}})}(jQuery),function(e){function t(e){return"<span class='btn btn-xs glyphicon glyphicon-"+e+"' ></span>"}function n(e){return"<span class='ui-widget-header pq-ui-button'><span class='ui-icon ui-icon-"+e+"'></span></span>"}var r=function(){};r.prototype={belongs:function(e){return e.target==this.that.element[0]||void 0},setTimer:function(e,t){clearTimeout(this._timeID),this._timeID=setTimeout(function(){e()},t)}};var i=e.paramquery;i.cClass=r;var o={widgetEventPrefix:"pqgrid",_create:function(){var t=this,n=t.options,r=t.element,o=n.dataModel,a=n.bootstrap,l=a.on,s=n.roundCorners&&!l,d=n.ui,c=n.sortModel;if(e(document).triggerHandler("pqGrid:bootup",{instance:this}),t.BS_on=l,n.collapsible||(n.collapsible={on:!1,collapsed:!1}),n.flexHeight&&(n.height="flex"),n.flexWidth&&(n.width="flex"),o.sortIndx){c.on=n.sortable,c.type=o.sorting;var u=[],h=o.sortIndx,f=o.sortDir;if(e.isArray(h)){for(var p=0;p<h.length;p++){var g=f&&f[p]?f[p]:"up";u.push({dataIndx:h[p],dir:g})}c.single=!1}else{g=f||"up";u.push({dataIndx:h,dir:g}),c.single=!0}c.sorter=u}t.iRefresh=new i.cRefresh(t),t.iKeyNav=new i.cKeyNav(t),t.iValid=new i.cValid(t),t.tables=[],t.$tbl=null,t.iCols=new i.cColModel(t),t.iSort=new i.cSort(t),t._initTypeColumns(),r.on("scroll"+t.eventNamespace,function(){this.scrollLeft=0,this.scrollTop=0}).on("mousedown"+t.eventNamespace,t._mouseDown.bind(t));var v=l?a.grid:d.grid,m=l?"":d.header_o,w=l?"":d.bottom,x=l?a.top:d.top;r.empty().attr("role","grid").addClass("pq-grid pq-theme "+v+" "+(s?" ui-corner-all":"")).html(["<div class='pq-grid-top ",x," ",s?" ui-corner-top":"","'>","<div class='pq-grid-title",s?" ui-corner-top":"","'>&nbsp;</div>","</div>","<div class='pq-grid-center-o'>","<div class='pq-tool-panel' style='display:",n.toolPanel.show?"":"none",";'></div>","<div class='pq-grid-center' >","<div class='pq-header-outer ",m,"'></div>","<div class='pq-body-outer' tabindex='0' ></div>","<div class='pq-summary-outer' ></div>","</div>","<div style='clear:both;'></div>","</div>","<div class='pq-grid-bottom ",w," ",s?" ui-corner-bottom":"","'>","<div class='pq-grid-footer'></div>","</div>"].join("")),t.setLocale(),t.$bottom=e(".pq-grid-bottom",r),t.$summary=e(".pq-summary-outer",r),t.$toolPanel=r.find(".pq-tool-panel"),t.$top=e("div.pq-grid-top",r),n.showTop||t.$top.css("display","none"),t.$title=e("div.pq-grid-title",r),n.showTitle||t.$title.css("display","none");var y=t.$grid_center=e(".pq-grid-center",r).on("scroll",function(){this.scrollTop=0});t.addTouch();var C=t.$header=e(".pq-header-outer",y).on("scroll",function(){this.scrollTop=0,this.scrollLeft=0});t.iHeader=new i.cHeader(t,C),t.$footer=e(".pq-grid-footer",r);var b=t.$cont=e(".pq-body-outer",y);t.iRenderB=new pq.cRenderBody(t,{$center:y,$b:b,$sum:t.$summary,header:!0,$h:t.$header}),t._trigger("render",null,{dataModel:t.options.dataModel,colModel:t.colModel}),C.on("contextmenu",".pq-grid-col",function(e){return t.evtBelongs(e)?t._onHeadRightClick(e):void 0}),b.on("click",".pq-grid-cell,.pq-grid-number-cell",function(n){return!0!==e.data(n.target,t.widgetName+".preventClickEvent")&&t.evtBelongs(n)?t._onClickCell(n):void 0}).on("contextmenu",".pq-grid-cell,.pq-grid-number-cell",function(e){return t.evtBelongs(e)?t._onRightClick(e):void 0}).on("dblclick",".pq-grid-cell",function(e){return t.evtBelongs(e)?t._onDblClickCell(e):void 0}),b.on("focusout",function(){t.onblur()}).on("focus",function(e){t.onfocus(e)}).on("mousedown",t._onMouseDown(t)).on("change",t._onChange(t)).on("mouseenter",".pq-grid-cell",t._onCellMouseEnter(t)).on("mouseenter",".pq-grid-row",t._onRowMouseEnter(t)).on("mouseleave",".pq-grid-cell",t._onCellMouseLeave(t)).on("mouseleave",".pq-grid-row",t._onRowMouseLeave(t)).on("keyup",t._onKeyUp(t)),n.selectionModel.native||this.disableSelection(),y.bind("keydown.pq-grid",t._onKeyPressDown(t)),this._refreshTitle(),t.iRows=new i.cRows(t),t.generateLoading(),t._initPager(),t._refreshResizable(),t._refreshDraggable(),t.iResizeColumns=new i.cResizeColumns(t)},addTouch:function(){var t,n,r;"ontouchend"in document&&((r=this.$grid_center[0]).addEventListener("touchstart",function(r){var i=r.target,o=r.changedTouches[0],a=e.Event("mousedown",o);if(e(i).trigger(a),t){if(i&&i==t.target){var l=t.x-o.pageX,s=t.y-o.pageY;12>=Math.sqrt(l*l+s*s)&&(n=t,setTimeout(function(){n=null},500))}}else t={x:o.pageX,y:o.pageY,target:i},setTimeout(function(){t=null},400)},!0),r.addEventListener("touchend",function(t){var r=t.target;n&&r==n.target&&e(r).trigger("dblclick",t)}))},_mouseDown:function(t){var n=this;return e(t.target).closest(".pq-editor-focus").length?(this._blurEditMode=!0,void window.setTimeout(function(){n._blurEditMode=!1},0)):void 0},destroy:function(){for(var t in this._trigger("destroy"),this._super(),e(window).off("resize"+this.eventNamespace),this)delete this[t];this.options=void 0,e.fragments={}},setLocale:function(){var t=this.options,n=t.locale;n&&(e.extend(!0,t,i.pqGrid.regional[n]),e.extend(t.pageModel,i.pqPager.regional[n]))},_setOption:function(e,t){var n,r=this,i=r.options,o=r.pageI,a=function(){i[e]=t},l=r.iRenderB,s=r.iRenderSum,d=r.iRenderHead,c=function(e){return e?"addClass":"removeClass"},u=i.dataModel;if("height"===e)a(),r._refreshResizable();else if("locale"==e||"pageModel"==e)a(),"locale"==e&&r.setLocale(),o&&o.destroy();else if("width"===e)a(),r._refreshResizable();else if("title"==e)a(),r._refreshTitle();else if("roundCorners"==e){a();var h=c(t);r.element[h]("ui-corner-all"),r.$top[h]("ui-corner-top"),r.$bottom[h]("ui-corner-bottom")}else if("freezeCols"==e)t=parseInt(t),!isNaN(t)&&t>=0&&t<=r.colModel.length-2&&a();else if("freezeRows"==e)t=parseInt(t),!isNaN(t)&&t>=0&&a();else if("resizable"==e)a(),r._refreshResizable();else if("draggable"==e)a(),r._refreshDraggable();else if("dataModel"==e)t.data!==u.data&&u.dataUF&&(u.dataUF.length=0),a();else{if("groupModel"==e)throw"use groupOption() to set groupModel options.";if("treeModel"==e)throw"use treeOption() to set treeModel options.";if("colModel"===e||"columnTemplate"==e)a(),r.iCols.init();else if("disabled"===e)r._super(e,t),!0===t?r._disable():r._enable();else if("strLoading"===e)a(),r._refreshLoadingString();else if("showTop"===e)a(),r.$top.css("display",t?"":"none");else if("showTitle"===e)a(),r.$title.css("display",t?"":"none");else if("showToolbar"===e){a(),r._toolbar.widget().css("display",t?"":"none")}else"collapsible"===e?(a(),r._createCollapse()):"showBottom"===e?(a(),r.$bottom.css("display",t?"":"none")):"wrap"==e||"hwrap"==e?("wrap"==e?l.$tbl.add(s.$tbl):d.$tbl)[c(!t)]("pq-no-wrap"):"rowBorders"===e?(a(),h=c(t),n="pq-td-border-top",l.$tbl[h](n),s.$tbl[h](n)):"columnBorders"===e?(a(),h=c(t),n="pq-td-border-right",l.$tbl[h](n),s.$tbl[h](n)):a()}return r}};o.options={cancel:"input,textarea,button,select,option,.pq-no-capture,.ui-resizable-handle",trigger:!1,bootstrap:{on:!1,thead:"table table-striped table-condensed table-bordered",tbody:"table table-condensed",grid:"panel panel-default",top:"",btn:"btn btn-default",groupModel:{icon:["glyphicon-triangle-bottom","glyphicon-triangle-right"]},header_active:"active"},ui:{on:!0,grid:"ui-widget ui-widget-content",top:"ui-widget-header",bottom:"ui-widget-header",header_o:"ui-widget-header",header:"ui-state-default",header_active:""},collapsible:{on:!0,toggle:!0,collapsed:!1,_collapsed:!1,refreshAfterExpand:!0,css:{zIndex:1e3}},colModel:null,columnBorders:!0,dataModel:{data:[],dataUF:[],cache:!1,dataType:"JSON",location:"local",sorting:"local",sortDir:"up",method:"GET"},direction:"",draggable:!1,editable:!0,editModel:{cellBorderWidth:0,pressToEdit:!0,clicksToEdit:2,filterKeys:!0,keyUpDown:!0,reInt:/^([\-]?[1-9][0-9]*|[\-]?[0-9]?)$/,reFloat:/^[\-]?[0-9]*\.?[0-9]*$/,onBlur:"validate",saveKey:e.ui.keyCode.ENTER,onSave:"nextFocus",onTab:"nextFocus",allowInvalid:!1,invalidClass:"pq-cell-red-tr pq-has-tooltip",warnClass:"pq-cell-blue-tr pq-has-tooltip",validate:!0},editor:{select:!1,type:"textbox"},summaryOptions:{number:"avg,max,min,stdev,stdevp,sum",date:"count,max,min",string:"count"},summaryTitle:{avg:"Avg: {0}",count:"Count: {0}",max:"Max: {0}",min:"Min: {0}",stdev:"Stdev: {0}",stdevp:"Stdevp: {0}",sum:"Sum: {0}"},validation:{icon:"ui-icon-alert",cls:"ui-state-error",style:"padding:3px 10px;"},warning:{icon:"ui-icon-info",cls:"",style:"padding:3px 10px;"},freezeCols:0,freezeRows:0,freezeBorders:!0,calcDataIndxFromColIndx:!0,height:400,hoverMode:"null",maxColWidth:2e3,minColWidth:50,minWidth:100,menuUI:{tabs:["hideCols","filter"],buttons:["clear","ok"],gridOptions:{autoRow:!1,copyModel:{render:!0},editable:function(e){return!e.rowData.pq_disabled},fillHandle:"",filterModel:{header:!0,on:!0},hoverMode:"row",hwrap:!1,rowBorders:!1,rowHt:22,rowHtHead:23,scrollModel:{autoFit:!0},showTop:!1,height:300,wrap:!1}},numberCell:{width:30,title:"",resizable:!0,minWidth:30,maxWidth:100,show:!0},pageModel:{curPage:1,totalPages:0,rPP:10,rPPOptions:[10,20,50,100]},resizable:!1,roundCorners:!0,rowBorders:!0,autoRow:!0,scrollModel:{autoFit:!1},selectionModel:{type:"cell",onTab:"nextFocus",row:!0,mode:"block"},showBottom:!0,showHeader:!0,showTitle:!0,showToolbar:!0,showTop:!0,sortable:!0,sql:!1,stripeRows:!0,title:"&nbsp;",treeModel:null,width:"auto",wrap:!0,hwrap:!0},e.widget("paramquery._pqGrid",o);var a=i._pqGrid.prototype;a.refreshCM=function(e,t){e&&(this.options.colModel=e),this.iCols.init(t)},a.evtBelongs=function(t){return e(t.target).closest(".pq-grid")[0]==this.element[0]},a.readCell=function(e,t,n,r,i){return n&&!1===n.isRootCell(r,i,"o")?void 0:e[t.dataIndx]},a.saveCell=function(e,t,n){e[t.dataIndx]=n},a._destroyResizable=function(){var e=this.element,t=e.data();(t.resizable||t.uiResizable||t["ui-resizable"])&&e.resizable("destroy")},a._disable=function(){null==this.$disable&&(this.$disable=e("<div class='pq-grid-disable'></div>").css("opacity",.2).appendTo(this.element))},a._enable=function(){this.$disable&&(this.element[0].removeChild(this.$disable[0]),this.$disable=null)},a._destroy=function(){this.loading&&this.xhr.abort(),this._destroyResizable(),this._destroyDraggable(),this.element.off(this.eventNamespace),e(window).unbind(this.eventNamespace),e(document).unbind(this.eventNamespace),this.element.empty().css("height","").css("width","").removeClass("pq-grid ui-widget ui-widget-content ui-corner-all").removeData()},a.addColumn=function(e){var t=e.columns||[e.column],n=this.options.colModel.concat(t);this.refreshCM(n),this._trigger("addColumn"),!1!==e.refresh&&this.refresh()},a.deleteColumn=function(e){for(var t=e.colList||[{colIndx:e.colIndx}],n=!1!==e.history,r=this.options.colModel,i=t.length-1;i>=0;i--){var o=t[i],a=o.colIndx,l=r.splice(a,1)[0];o.column=l}this.iCols.init(),n&&(this.iHistory.increment(),t.type="delete",this.iHistory.push({colList:t})),this._trigger("deleteColumn",null,{colList:t}),!1!==e.refresh&&this.refreshView()},a._onKeyUp=function(e){return function(t){e.evtBelongs(t)&&e._trigger("keyUp",t,null)}},a.onKeyPressDown=function(t){var n=this;return e(t.target).closest(".pq-header-outer").length?n._trigger("headerKeyDown",t,null):void(!1!==n.iKeyNav.bodyKeyPressDown(t)&&n._trigger("keyDown",t,null))},a._onKeyPressDown=function(e){return function(t){e.evtBelongs(t)&&e.onKeyPressDown(t,e)}},a.collapse=function(e){var t=this,n=this.element,r=this.options.collapsible,i=r.$collapse.children("span"),o=function(){n.css("overflow","hidden"),i.addClass("ui-icon-circle-triangle-s").removeClass("ui-icon-circle-triangle-n"),n.hasClass("ui-resizable")&&n.resizable("destroy"),t._toolbar&&t._toolbar.disable(),r.collapsed=!0,r._collapsed=!0,r.animating=!1,t._trigger("collapse")};return e=e||{},!r._collapsed&&(r.htCapture=n.height(),void(!1===e.animate?(n.height(23),o()):(r.animating=!0,n.animate({height:"23px"},function(){o()}))))},a.expand=function(e){var t=this,n=this.element,r=this.options.collapsible,i=r.htCapture,o=r.$collapse.children("span"),a=function(){n.css("overflow",""),r._collapsed=!1,r.collapsed=!1,t._refreshResizable(),r.refreshAfterExpand&&t.refresh(),o.addClass("ui-icon-circle-triangle-n").removeClass("ui-icon-circle-triangle-s"),t._toolbar&&t._toolbar.enable(),r.animating=!1,t._trigger("expand")};return e=e||{},!1!==r._collapsed&&void(!1===e.animate?(n.height(i),a()):(r.animating=!0,n.animate({height:i},function(){a()})))},a._createCollapse=function(){var r=this,i=this.$top,o=this.options,a=this.BS_on,l=o.collapsible;if(!l.$stripe){var s=e(["<div class='pq-slider-icon pq-no-capture'  >","</div>"].join("")).appendTo(i);l.$stripe=s}l.on?l.$collapse||(l.$collapse=e(a?t("collapse-down"):n("circle-triangle-n")).appendTo(l.$stripe).click(function(e){l.collapsed?r.expand():r.collapse()})):l.$collapse&&(l.$collapse.remove(),delete l.$collapse),l.collapsed&&!l._collapsed?r.collapse({animate:!1}):!l.collapsed&&l._collapsed&&r.expand({animate:!1}),l.toggle?l.$toggle||(l.$toggle=e(a?t("fullscreen"):n("arrow-4-diag")).prependTo(l.$stripe).click(function(e){r.toggle()})):l.$toggle&&(l.$toggle.remove(),delete l.$toggle)},a.toggle=function(){var t=this.options,n=t.collapsible,r=this.element,i=this._maxim,o=i?"min":"max",a=e(document.body);if(!1===this._trigger("beforeToggle",null,{state:o}))return!1;if("min"==o){var l=i.eleObj,s=i.docObj;this.option({height:l.height,width:l.width,maxHeight:l.maxHeight,maxWidth:l.maxWidth}),r[0].style.cssText=l.cssText,a[0].style.cssText=s.cssText,e("html").css({overflow:"visible"}),window.scrollTo(s.scrollLeft,s.scrollTop),this._maxim=null}else{l={height:t.height,width:t.width,cssText:r[0].style.cssText,maxHeight:t.maxHeight,maxWidth:t.maxWidth};this.option({height:"100%",width:"100%",maxHeight:null,maxWidth:null}),r.css(e.extend({position:"fixed",left:0,top:0,margin:0},n.css));s={scrollLeft:e(window).scrollLeft(),scrollTop:e(window).scrollTop(),cssText:a[0].style.cssText};a.css({height:0,width:0,overflow:"hidden",position:"static"}),e("html").css({overflow:"hidden"}),window.scrollTo(0,0),this._maxim={eleObj:l,docObj:s}}this._trigger("toggle",null,{state:o}),this._refreshResizable(),this.refresh(),e(window).trigger("resize",{$grid:r,state:o})},a._mousePQUp=function(t){e(document).unbind("mouseup"+this.eventNamespace,this._mousePQUpDelegate),this._trigger("mousePQUp",t,null)},a._onDblClickCell=function(t){var n=this,r=e(t.currentTarget),i=n.getCellIndices({$td:r});i.$td=r,0!=n._trigger("cellDblClick",t,i)&&(n.options.editModel.clicksToEdit>1&&n.isEditable(i)&&n.editCell(i),i.$tr=r.closest(".pq-grid-row"),n._trigger("rowDblClick",t,i))},a.getValueFromDataType=function(t,n,r){if("="==(t+"")[0])return t;var i;if("date"==n)return i=Date.parse(t),isNaN(i)?void 0:r?i:t;if("integer"==n)i=parseInt(t);else{if("float"!=n)return"bool"==n?null==t?t:0==(i=e.trim(t).toLowerCase()).length?null:"true"==i||"yes"==i||"1"==i||"false"!=i&&"no"!=i&&"0"!=i&&Boolean(i):"object"==n?t:null==t?t:e.trim(t);i=parseFloat(t)}return isNaN(i)||null==i?null==t?t:null:i},a.isValid=function(e){return this.iValid.isValid(e)},a.isValidChange=function(e){e=e||{};var t=this.getChanges(),n=t.addList,r=t.updateList.concat(n);return e.data=r,this.isValid(e)},a.isEditableRow=function(e){var t=this.options.editable;return"function"==typeof t?t.call(this,this.normalize(e)):t},a.isEditableCell=function(e){var t,n,r=e.column;return r||(r=(t=this.normalize(e)).column),null!=(n=r.editable)?"function"==typeof n?(t=t||this.normalize(e),this.callFn(n,t)):n:void 0},a.isEditable=function(e){var t=this.isEditableCell(e);return null==t?this.isEditableRow(e):t},a._onMouseDownCont=function(t){var n,r,i=this;i.blurEditor({blurIfFocus:!0}),i._mousePQUpDelegate=function(e){return i._mousePQUp(e)},e(document).bind("mouseup"+i.eventNamespace,i._mousePQUpDelegate),(n=i.pdata)&&n.length||((r=i.$cont[0]).setAttribute("tabindex",0),r.focus())},a._onMouseDown=function(t){return function(n){if((!n.which||1==n.which)&&t.evtBelongs(n)){var r,i=e(n.target),o=i.closest(".pq-grid-cell,.pq-grid-number-cell");if(o.length&&(n.currentTarget=o[0],t._onMouseDownCell(n)),n.isPropagationStopped())return;if((r=i.closest(".pq-grid-row")).length&&(n.currentTarget=r[0],t._onMouseDownRow(n)),n.isPropagationStopped())return;t._onMouseDownCont(n)}}},a._onMouseDownCell=function(t){var n,r=e(t.currentTarget),i=this.getCellIndices({$td:r});null!=i.rowIndx&&((n=this.iMerge.getRootCellO(i.rowIndx,i.colIndx,!0)).$td=r,this._trigger("cellMouseDown",t,n))},a._onMouseDownRow=function(t){var n=e(t.currentTarget),r=this.getRowIndx({$tr:n});r.$tr=n,this._trigger("rowMouseDown",t,r)},a._onCellMouseEnter=function(t){return function(n){if(t.evtBelongs(n)){var r=e(this),i=t.options,o=t.getCellIndices({$td:r});if(null==o.rowIndx||null==o.colIndx)return;if(!1===t._trigger("cellMouseEnter",n,o))return;return"cell"==i.hoverMode&&t.highlightCell(r),!0}}},a._onChange=function(t){function n(){if(r&&i&&i.target==r.target){var e;for(e in{ctrlKey:0,metaKey:0,shiftKey:0,altKey:0})i[e]=r[e];t._trigger("valChange",i,o),i=r=void 0}}var r,i,o;return t.on("cellClickDone",function(e){r=e.originalEvent,n()}),function(r){if(t.evtBelongs(r)){var a=e(r.target),l=a.closest(".pq-grid-cell");l.length&&(o=t.getCellIndices({$td:l}),(o=t.normalize(o)).input=a[0],i=r,n())}}},a._onRowMouseEnter=function(t){return function(n){if(t.evtBelongs(n)){var r=e(this),i=t.options,o=t.getRowIndx({$tr:r}),a=o.rowIndxPage;if(!1===t._trigger("rowMouseEnter",n,o))return;return"row"==i.hoverMode&&t.highlightRow(a),!0}}},a._onCellMouseLeave=function(t){return function(n){if(t.evtBelongs(n)){var r=e(this);"cell"==t.options.hoverMode&&t.unHighlightCell(r)}}},a._onRowMouseLeave=function(t){return function(n){if(t.evtBelongs(n)){var r=e(this),i=t.getRowIndx({$tr:r}),o=i.rowIndxPage;if(!1===t._trigger("rowMouseLeave",n,{$tr:r,rowIndx:i.rowIndx,rowIndxPage:o}))return;"row"==t.options.hoverMode&&t.unHighlightRow(o)}}},a.enableSelection=function(){this.element.removeClass("pq-disable-select").off("selectstart"+this.eventNamespace)},a.disableSelection=function(){this.element.addClass("pq-disable-select").on("selectstart"+this.eventNamespace,function(t){if(t.target){var n=e(t.target);return!!n.is("input,textarea,select")||(!!n.closest(".pq-native-select").length||void t.preventDefault())}})},a._onClickCell=function(t){var n=this,r=n.options.editModel,i=e(t.currentTarget),o=n.getCellIndices({$td:i}),a=n.normalize(o),l=a.colIndx;a.$td=i,a.evt=t,0!=n._trigger("beforeCellClick",t,a)&&(n._trigger("cellClick",t,a),null==l||0>l||(1==r.clicksToEdit&&n.isEditable(a)&&n.editCell(a),a.$tr=i.closest(".pq-grid-row"),n._trigger("rowClick",t,a)))},a._onHeadRightClick=function(t){var n=e(t.currentTarget),r=this.iRenderB.getCellIndx(n[0]),i=r[0],o=r[1],a=this.headerCells,l={rowIndx:i,colIndx:o,column:(a[i]||a[i-1])[o],$th:n,filterRow:!a[i]};this._trigger("headRightClick",t,l)},a._onRightClick=function(t){var n=e(t.currentTarget),r=this.getCellIndices({$td:n});r.$td=n,0!=this._trigger("cellRightClick",t,r)&&(r.$tr=n.closest(".pq-grid-row"),this._trigger("rowRightClick",t,r))},a.highlightCell=function(e){e.addClass("pq-grid-cell-hover ui-state-hover")},a.unHighlightCell=function(e){e.removeClass("pq-grid-cell-hover ui-state-hover")},a.highlightRow=function(e){if(isNaN(e));else{var t=this.getRow({rowIndxPage:e});t&&t.addClass("pq-grid-row-hover ui-state-hover")}},a.unHighlightRow=function(e){if(isNaN(e));else{var t=this.getRow({rowIndxPage:e});t&&t.removeClass("pq-grid-row-hover ui-state-hover")}},a._getCreateEventData=function(){return{dataModel:this.options.dataModel,data:this.pdata,colModel:this.options.colModel}},a._initPager=function(){var t=this,n=t.options,r=n.pageModel;if(r.type){var i={bootstrap:n.bootstrap,change:function(e,n){t.blurEditor({force:!0});var r=t.options.pageModel;null!=n.curPage&&(r.prevPage=r.curPage,r.curPage=n.curPage),null!=n.rPP&&(r.rPP=n.rPP),"remote"==r.type?t.remoteRequest({callback:function(){t._onDataAvailable({apply:!0,header:!1})}}):t.refreshView({header:!1,source:"pager"})},refresh:function(e){t.refreshDataAndView()}};i=e.extend(i,r),t.pageI=pq.pager(r.appendTo?r.appendTo:this.$footer,i).on("destroy",function(){delete t.pageI})}},a.generateLoading=function(){this.$loading&&this.$loading.remove(),this.$loading=e("<div class='pq-loading'></div>").appendTo(this.element),e(["<div class='pq-loading-bg'></div><div class='pq-loading-mask ui-state-highlight'><div>",this.options.strLoading,"...</div></div>"].join("")).appendTo(this.$loading),this.$loading.find("div.pq-loading-bg").css("opacity",.2)},a._refreshLoadingString=function(){this.$loading.find("div.pq-loading-mask").children("div").html(this.options.strLoading)},a.showLoading=function(){null==this.showLoadingCounter&&(this.showLoadingCounter=0),this.showLoadingCounter++,this.$loading.show()},a.hideLoading=function(){this.showLoadingCounter>0&&this.showLoadingCounter--,this.showLoadingCounter||this.$loading.hide()},a.getTotalRows=function(){var e=this.options,t=e.dataModel,n=t.data||[],r=t.dataUF||[],i=e.pageModel;return"remote"==i.location?i.totalRecords:n.length+r.length},a.refreshDataFromDataModel=function(e){e=e||{};var t,n,r,i,o=this,a=o.options,l=a.dataModel,s=a.pageModel,d=l.data,c=s.type,u=o._queueATriggers;for(var h in u){var f=u[h];delete u[h],o._trigger(h,f.evt,f.ui)}if(o._trigger("beforeRefreshData",null,{}),"local"==c)r=s.totalRecords=d.length,s.totalPages=n=Math.ceil(r/s.rPP),s.curPage>n&&(s.curPage=n),n&&!s.curPage&&(s.curPage=1),t=(t=(s.curPage-1)*s.rPP)>=0?t:0,(p=s.curPage*s.rPP)>d.length&&(p=d.length),o.pdata=d.slice(t,p),i=t;else if("remote"==c){var p;s.totalPages=n=Math.ceil(s.totalRecords/s.rPP),s.curPage>n&&(s.curPage=n),n&&!s.curPage&&(s.curPage=1),(p=s.rPP)>d.length&&(p=d.length),o.pdata=d.slice(0,p),i=s.rPP*(s.curPage-1)}else a.backwardCompat?o.pdata=d.slice(0):o.pdata=d;o.riOffset=i>=0?i:0,o._trigger("dataReady",null,{source:e.source}),o._trigger("dataReadyAfter",null,{source:e.source})},a.getQueryStringCRUD=function(){return""},a.remoteRequest=function(t){this.loading&&this.xhr.abort(),t=t||{};var n=this,r="",i="",o=this.options,a=!1,l=this.colModel,s=o.dataModel,d=o.sortModel,c=o.filterModel,u=o.pageModel;if("function"==typeof s.getUrl){var h={colModel:l,dataModel:s,sortModel:d,groupModel:o.groupModel,pageModel:u,filterModel:c},f=s.getUrl.call(this,h);f&&f.url&&(r=f.url),f&&f.data&&(i=f.data)}else if("string"==typeof s.url){r=s.url;var p,g={},v={},m={};if("remote"==d.type){t.initBySort||this.sort({initByRemote:!0});var w=this.iSort.getQueryStringSort();w&&(g={pq_sort:w})}"remote"==u.type&&(m={pq_curpage:u.curPage,pq_rpp:u.rPP}),"local"!=c.type&&((p=this.iFilterData.getQueryStringFilter())&&(a=!0,v={pq_filter:p}));var x=s.postData,y=s.postDataOnce;x&&"function"==typeof x&&(x=x.call(this,{colModel:l,dataModel:s})),i=e.extend({pq_datatype:s.dataType},v,m,g,x,y)}r&&(this.loading=!0,this.showLoading(),this.xhr=e.ajax({url:r,dataType:s.dataType,async:null==s.async||s.async,cache:s.cache,contentType:s.contentType,type:s.method,data:i,beforeSend:function(e,t){return"function"==typeof s.beforeSend?s.beforeSend.call(n,e,t):void 0},success:function(e,r,i){n.onRemoteSuccess(e,r,i,a,t)},error:function(e,t,r){if(n.hideLoading(),n.loading=!1,"function"==typeof s.error)s.error.call(n,e,t,r);else if("abort"!=r)throw"Error : "+r}}))},a.onRemoteSuccess=function(e,t,n,r,i){var o,a=this,l=a.options,s=a.colModel,d=l.pageModel,c=l.dataModel;o="function"==typeof c.getData?c.getData.call(a,e,t,n):e,c.data=o.data,"remote"==d.type&&(null!=o.curPage&&(d.curPage=o.curPage),null!=o.totalRecords&&(d.totalRecords=o.totalRecords)),a.hideLoading(),a.loading=!1,a._trigger("load",null,{dataModel:c,colModel:s}),r&&(a._queueATriggers.filter={ui:{}}),i.callback&&i.callback()},a._refreshTitle=function(){this.$title.html(this.options.title)},a._destroyDraggable=function(){var e=this.element,t=e.parent(".pq-wrapper");t.length&&t.data("draggable")&&(t.draggable("destroy"),this.$title.removeClass("pq-draggable pq-no-capture"),e.unwrap(".pq-wrapper"))},a._refreshDraggable=function(){var e=this.options,t=this.element,n=this.$title;e.draggable?(n.addClass("pq-draggable pq-no-capture"),t.parent(".pq-wrapper").length||t.wrap("<div class='pq-wrapper' />"),t.parent(".pq-wrapper").draggable({handle:n})):this._destroyDraggable()},a._refreshResizable=function(){var t=this,n=this.element,r=this.options,i=(r.width+"").indexOf("%")>-1,o=(r.height+"").indexOf("%")>-1,a="auto"==r.width,l="flex"==r.width,s="flex"==r.height;if(!r.resizable||(s||o)&&(l||i||a))this._destroyResizable();else{var d="e,s,se";s||o?d="e":(l||i||a)&&(d="s");var c=!0;if(n.hasClass("ui-resizable"))d==n.resizable("option","handles")?c=!1:this._destroyResizable();c&&n.resizable({helper:"ui-state-default",handles:d,minWidth:r.minWidth,minHeight:r.minHeight?r.minHeight:100,delay:0,start:function(t,n){e(n.helper).css({opacity:.5,background:"#ccc",border:"1px solid steelblue"})},resize:function(e,t){},stop:function(n,i){var o=t.element,a=o[0],l=r.width,s=r.height,d=(l+"").indexOf("%")>-1,c=(s+"").indexOf("%")>-1,u="auto"==l,h="flex"==l,f="flex"==s,p=!1;a.style.width=a.offsetWidth+3+"px",a.style.height=a.offsetHeight+3+"px",c||f||(p=!0,r.height=a.offsetHeight),d||u||h||(p=!0,r.width=a.offsetWidth),t.refresh({soft:!0}),o.css("position","relative"),p&&e(window).trigger("resize")}})}},a.refresh=function(e){this.iRefresh.refresh(e)},a.refreshView=function(e){null!=this.options.editModel.indices&&this.blurEditor({force:!0}),this.refreshDataFromDataModel(e),this.refresh(e)},a._refreshPager=function(){var e=this,t=e.options,n=t.pageModel,r=!!n.type,i=n.rPP,o=n.totalRecords;r?(e.pageI||e._initPager(),e.pageI.option(n),o>i?e.$bottom.css("display",""):t.showBottom||e.$bottom.css("display","none")):(e.pageI&&e.pageI.destroy(),t.showBottom?e.$bottom.css("display",""):e.$bottom.css("display","none"))},a.getInstance=function(){return{grid:this}},a.refreshDataAndView=function(e){var t=this.options.dataModel;if(this.pdata=[],"remote"==t.location){var n=this;this.remoteRequest({callback:function(){n._onDataAvailable(e)}})}else this._onDataAvailable(e)},a.getColIndx=function(e){var t,n,r=e.dataIndx,i=e.column;if(i)n=!0;else{if(void 0===r)throw"dataIndx / column NA";!0}var o=this.colModel,a=o.length;if(n){for(var l=0;a>l;l++)if(o[l]==i)return l}else if(null!=(t=this.colIndxs[r]))return t;return-1},a.getColumn=function(e){var t=e.dataIndx;if(null==t)throw"dataIndx N/A";return this.columns[t]||this.iGroup.getColsPrimary()[t]},a._generateCellRowOutline=function(){var t=this.options.editModel;if(!this.$div_focus){var n=this.element;t.inline&&(n=this.getCell(t.indices)).css("padding",0).empty(),this.$div_focus=e(["<div class='pq-editor-outer'>","<div class='pq-editor-inner'>","</div>","</div>"].join("")).appendTo(n);var r=e.extend({all:!0},t.indices),i=this.getCell(r);i.css("height",i[0].offsetHeight),i.empty(),this.refreshEditorPos()}},a.refreshEditorPos=function(){},a._removeEditOutline=function(t){if(this.$div_focus){var n=this.$div_focus.find(".pq-editor-focus");if(function(e){e.hasClass("hasDatepicker")&&e.Uidatepicker("hide").Uidatepicker("destroy")}(n),n[0]==document.activeElement){var r=this._blurEditMode;this._blurEditMode=!0,n.blur(),this._blurEditMode=r}this.$div_focus.remove(),delete this.$div_focus;var i=this.options.editModel,o=e.extend({},i.indices);i.indices=null,o.rowData=void 0,this.refreshCell(o)}},a.scrollX=function(e,t){var n=this;return n.iRenderB.scrollX(e,function(){t&&t.call(n)})},a.scrollY=function(e,t){var n=this;return n.iRenderB.scrollY(e,function(){t&&t.call(n)})},a.scrollXY=function(e,t,n){var r=this;return r.iRenderB.scrollXY(e,t,function(){n&&n.call(r)})},a.scrollRow=function(e,t){var n=this;n.iRenderB.scrollRow(n.normalize(e).rowIndxPage,function(){t&&t.call(n)})},a.scrollColumn=function(e,t){var n=this;n.iRenderB.scrollColumn(n.normalize(e).colIndx,function(){t&&t.call(n)})},a.scrollCell=function(e,t){var n=this,r=n.normalize(e);n.iRenderB.scrollCell(r.rowIndxPage,r.colIndx,function(){t&&t.call(n),n._trigger("scrollCell")})},a.blurEditor=function(e){if(this.$div_focus){var t=this.$div_focus.find(".pq-editor-focus");if(!e||!e.blurIfFocus)return t.triggerHandler("blur",e);document.activeElement==t[0]&&t.blur()}},a.Selection=function(){return this.iSelection},a.goToPage=function(e){var t=this.options.pageModel;if("local"==t.type||"remote"==t.type){var n=e.rowIndx,r=t.rPP,i=null==e.page?Math.ceil((n+1)/r):e.page;i!=t.curPage&&(t.curPage=i,"local"==t.type?this.refreshView():this.refreshDataAndView())}},a.setSelection=function(e,t){if(null==e)return this.iSelection.removeAll(),this.iRows.removeAll({all:!0}),!0;var n=this,r=n.pdata,i=function(){null!=a&&!1!==e.focus&&n.focus({rowIndxPage:a,colIndx:null==l?n.getFirstVisibleCI():l}),t&&t.call(n)};r&&r.length||i();var o=(e=this.normalize(e)).rowIndx,a=e.rowIndxPage,l=e.colIndx;(null==o||0>o||0>l||l>=this.colModel.length)&&i(),this.goToPage(e),a=o-this.riOffset,n.scrollRow({rowIndxPage:a},function(){null==l?(n.iRows.add({rowIndx:o}),i()):n.scrollColumn({colIndx:l},function(){n.Range({r1:o,c1:l}).select(),i()})})},a.getColModel=function(){return this.colModel},a.getCMPrimary=function(){return this.iGroup.getCMPrimary()},a.getOCMPrimary=function(){return this.iGroup.getOCMPrimary()},a.saveEditCell=function(t){var n=this.options,r=n.editModel;if(!r.indices)return null;var i,o=e.extend({},r.indices),a=t?t.evt:null,l=this.riOffset,s=o.colIndx,d=o.rowIndxPage,c=d+l,u=this.colModel[s],h=u.dataIndx,f=this.pdata[d],p=n.dataModel;if(null==f)return null;if(null!=d){var g=this.getEditCellData();if(e.isPlainObject(g))for(var v in i={},g)i[v]=f[v];else i=this.readCell(f,u);"<br>"==g&&(g=""),null==i&&""===g&&(g=null);var m={rowIndx:c,rowIndxPage:d,dataIndx:h,column:u,newVal:g,value:g,oldVal:i,rowData:f,dataModel:p};if(!1===this._trigger("cellBeforeSave",a,m))return!1;var w={};return e.isPlainObject(g)?w=g:w[h]=g,!1!==this.updateRow({row:w,rowIndx:c,silent:!0,source:"edit",checkEditable:!1})&&(this._trigger("cellSave",a,m),!0)}},a._addInvalid=function(e){},a._digestNewRow=function(e,t,n,r,i,o,a,l,s){var d,c,u,h=this,f=h.getValueFromDataType,p=h.columns,g=h.colIndxs;for(d in e)if(c=p[d],u=g[d],c){if(o&&!1===h.isEditable({rowIndx:n,rowData:r,colIndx:u,column:c})){delete e[d],t&&delete t[d];continue}var v=c.dataType,m=f(e[d],v),w=void 0!==(w=t?t[d]:void 0)?f(w,v):void 0;if(e[d]=m,a&&c.validations)if("edit"==s&&!1===l){if(0==(x=this.isValid({focusInvalid:!0,dataIndx:d,rowIndx:n,value:m})).valid&&!x.warn)return!1}else{var x,y="add"==i?e:r;!1===(x=this.iValid.isValidCell({column:c,rowData:y,allowInvalid:l,value:m})).valid&&(!1!==l||x.warn||delete e[d])}if("update"==i&&m===w){delete e[d],delete t[d];continue}}return"update"!=i||(!pq.isEmpty(e)||void 0)},a._digestData=function(e){if(e.rowList)throw"not supported";if(D=e.addList=e.addList||[],e.updateList=e.updateList||[],e.deleteList=e.deleteList||[],D.length&&D[0].rowData)throw"rd in addList";if(!1===this._trigger("beforeValidate",null,e))return!1;var t,n,r,i,o=this,a=o.options,l=a.editModel,s=a.dataModel,d=s.data,c=a.colModel,u=a.pageModel,h=a.historyModel,f=c.map(function(e){return e.dataIndx}),p=null==e.validate?l.validate:e.validate,g="remote"==u.type,v=null==e.allowInvalid?l.allowInvalid:e.allowInvalid,m=a.trackModel,w=null==(w=e.track)?null==a.track?m.on:a.track:w,x=null==e.history?h.on:e.history,y=this.iHistory,C=this.iUCData,b=null==e.checkEditable||e.checkEditable,I=null==e.checkEditableAdd?b:e.checkEditableAdd,_=e.source,q=o.iRefresh,R=this.riOffset,D=e.addList,M=e.updateList,T=e.deleteList,E=[],k=[];for(!d&&(d=s.data=[]),r=0,i=M.length;i>r;r++){var S,P=(O=M[r]).newRow,A=O.rowData,$=O.checkEditable,H=O.rowIndx;if(null==$&&($=b),!(F=O.oldRow))throw"oldRow required while update";if(!1===(S=this._digestNewRow(P,F,H,A,"update",$,p,v,_)))return!1;S&&k.push(O)}for(r=0,i=D.length;i>r;r++){var F,O;P=(O=D[r]).newRow,$=O.checkEditable,H=O.rowIndx;if(null==$&&($=I),f.forEach(function(e){P[e]=P[e]}),!1===(S=this._digestNewRow(P,F,H,A,"add",$,p,v,_)))return!1;S&&E.push(O)}return D=e.addList=E,M=e.updateList=k,t=D.length,n=T.length,t||M.length||n?(x&&(y.increment(),y.push(e)),o._digestUpdate(M,C,w),n&&(o._digestDelete(T,C,w,d,u,g,R),q.addRowIndx()),t&&(o._digestAdd(D,C,w,d,u,g,R),q.addRowIndx()),o._trigger("change",null,e),!0):"edit"==_&&null},a._digestUpdate=function(e,t,n){for(var r,i=0,o=e.length,a=this.columns,l=this.saveCell;o>i;i++){var s=e[i],d=s.newRow,c=s.rowData;for(r in n&&t.update({rowData:c,row:d,refresh:!1}),d)l(c,a[r],d[r])}},a._digestAdd=function(e,t,n,r,i,o,a){var l,s=0,d=e.length;for(e.sort(function(e,t){return e.rowIndx-t.rowIndx});d>s;s++){var c=e[s],u=c.newRow,h=c.rowIndx;n&&t.add({rowData:u}),null==h?r.push(u):(l=o?h-a:h,r.splice(l,0,u)),c.rowData=u,o&&i.totalRecords++}},a._digestDelete=function(e,t,n,r,i,o,a){for(var l=0,s=e.length;s>l;l++){var d=(f=e[l]).rowData,c=this.getRowIndx({rowData:d,dataUF:!0}),u=c.uf,h=c.rowIndx;f.uf=u,f.rowIndx=h}for(e.sort(function(e,t){return t.rowIndx-e.rowIndx}),l=0;s>l;l++){var f;d=(f=e[l]).rowData,u=f.uf,h=f.rowIndx;n&&t.delete({rowIndx:h,rowData:d});var p=o?h-a:h;if(u)DM.dataUF.splice(h,1);else{var g=r.splice(p,1);g&&g.length&&o&&i.totalRecords--}}},a.refreshColumn=function(e){var t=this,n=t.normalize(e),r=t.iRenderB;n.skip=!0,r.eachV(function(e,r){n.rowIndxPage=r,t.refreshCell(n)}),t._trigger("refreshColumn",null,n)},a.refreshCell=function(e){var t=this.normalize(e),n=this._focusEle,r=t.rowIndxPage,i=t.colIndx;this.iRenderB.refreshCell(r,i,t.rowData,t.column)&&(n&&n.rowIndxPage==r&&this.focus(),t.skip||this._trigger("refreshCell",null,t))},a.refreshHeaderCell=function(e){var t=this.normalize(e),n=this.headerCells,r=n.length-1,i=n[r];this.iRenderHead.refreshCell(r,t.colIndx,i,t.column)},a.refreshRow=function(e){if(this.pdata){var t,n=this,r=n.normalize(e),i=r.rowIndx,o=r.rowIndxPage,a=r.rowData;return a?(n.iRenderB.refreshRow(o),n.refresh({soft:!0}),(t=n._focusEle)&&t.rowIndxPage==o&&n.focus(),n._trigger("refreshRow",null,{rowData:a,rowIndx:i,rowIndxPage:o}),!0):null}},a.quitEditMode=function(e){if(!this._quitEditMode){var t=!1,n=!1,r=!1,i=this.options.editModel,o=i.indices,a=void 0;this._quitEditMode=!0,e&&(t=e.old,n=e.silent,r=e.fireOnly,a=e.evt),o&&(n||t||this._trigger("editorEnd",a,o),r||(this._removeEditOutline(e),i.indices=null)),this._quitEditMode=null}},a.getViewPortRowsIndx=function(){return{beginIndx:this.initV,endIndx:this.finalV}},a.getViewPortIndx=function(){var e=this.iRenderB;return{initV:e.initV,finalV:e.finalV,initH:e.initH,finalH:e.finalH}},a.getRIOffset=function(){return this.riOffset},a.getEditCell=function(){var e=this.options.editModel;if(e.indices){var t=this.getCell(e.indices),n=this.$div_focus.children(".pq-editor-inner"),r=n.find(".pq-editor-focus");return{$td:t,$cell:n,$editor:r}}return{}},a.editCell=function(e){var t,n,r=this,i=r.normalize(e),o=r.iMerge,a=i.rowIndx,l=i.colIndx;return(!o.ismergedCell(a,l)||(t=o.getRootCellO(a,l)).rowIndx==i.rowIndx&&t.colIndx==i.colIndx)&&void r.scrollCell(i,function(){return(n=r.getCell(i))&&n.length?r._editCell(i):void 0})},a.getFirstEditableColIndx=function(e){if(null==e.rowIndx)throw"rowIndx NA";for(var t=this.colModel,n=0;n<t.length;n++)if(!t[n].hidden&&(e.colIndx=n,this.isEditable(e)))return n;return-1},a.editFirstCellInRow=function(e){var t=this.normalize(e).rowIndx,n=this.getFirstEditableColIndx({rowIndx:t});-1!=n&&this.editCell({rowIndx:t,colIndx:n})},a._editCell=function(t){var n=this.normalize(t),r=this,o=n.evt,a=n.rowIndxPage,l=n.colIndx,s=r.pdata;if(!s||a>=s.length)return!1;r=this;var d,c=this.options,u=c.editModel,h=s[a],f=n.rowIndx,p=this.colModel[l],g=p.dataIndx,v=r.readCell(h,p),m={rowIndx:f,rowIndxPage:a,cellData:v,rowData:h,dataIndx:g,colIndx:l,column:p},w=this,x=typeof(d=p.editor);if(void 0===(d="function"==x||"string"==x?w.callFn(d,m):d)&&"function"==typeof c.geditor&&(d=c.geditor.call(w,m)),!1!==d){d&&d.getData&&(u._getData=d.getData);var y=c.editor,C=d?e.extend({},y,d):y,b=!1;if(u.indices){var I=u.indices;if(I.rowIndxPage==a&&I.colIndx==l)return this.refreshEditorPos(),(j=this.$div_focus.find(".pq-editor-focus"))[0].focus(),document.activeElement!=j[0]&&window.setTimeout(function(){j.focus()},0),!1;if(!1===this.blurEditor({evt:o}))return!1;this.quitEditMode({evt:o})}u.indices={rowIndxPage:a,rowIndx:f,colIndx:l,column:p,dataIndx:g},this._generateCellRowOutline();var _=this.$div_focus.children(".pq-editor-inner");_.addClass("pq-align-"+(p.align||"left")),m.$cell=_;var q,R,D,M=C.type,T=null==n.select?C.select:n.select,E=C.init,k=C.valueIndx,S=C.dataMap,P=(P=C.mapIndices)||{},A="pq-editor-focus "+(R="function"==typeof(R=C.cls||"")?R.call(w,m):R),$=A+" pq-cell-editor ",H="function"==typeof(H=C.attr||"")?H.call(w,m):H,F=(D="function"==typeof(D=C.style||"")?D.call(w,m):D)?"style='"+D+"'":"",O=F,N=F;if(m.cls=A,m.attr=H,"function"==typeof M&&((q=M.call(w,m))&&(M=q)),y._type=M,"checkbox"==M){var L=C.subtype;q="<input "+(v?"checked='checked'":"")+" class='"+$+"' "+H+" "+N+" type=checkbox name='"+g+"' />",_.html(q);var V=_.children("input");"triple"==L&&(V.pqval({val:v}),_.click(function(t){e(this).children("input").pqval({incr:!0})}))}else if("textarea"==M||"select"==M||"textbox"==M){if("textarea"==M)q="<textarea class='"+$+"' "+H+" "+O+" name='"+g+"' ></textarea>";else if("select"==M){var U=C.options||[];U.constructor!==Array&&(U=r.callFn(U,m));var B=[H," class='",$,"' ",O," name='",g,"'"].join("");q=i.select({options:U,attr:B,prepend:C.prepend,labelIndx:C.labelIndx,valueIndx:k,groupIndx:C.groupIndx,dataMap:S})}else q="<input class='"+$+"' "+H+" "+O+" type=text name='"+g+"' />";e(q).appendTo(_).val("select"==M&&null!=k&&(P[k]||this.columns[k])?P[k]?h[P[k]]:h[k]:v)}else M&&"contenteditable"!=M||(q="<div contenteditable='true' tabindx='0' "+F+" "+H+" class='"+$+"'></div>",_.html(q),_.children().html(v),b=!0);E&&(m.$editor=_.children(".pq-editor-focus"),this.callFn(E,m));var j=_.children(".pq-editor-focus"),z=u.filterKeys,W=p.editModel;W&&void 0!==W.filterKeys&&(z=W.filterKeys);var G={$cell:_,$editor:j,$td:r.getCell(u.indices),dataIndx:g,column:p,colIndx:l,rowIndx:f,rowIndxPage:a,rowData:h};if(u.indices=G,j.data({FK:z}).on("click",function(t){e(this).focus(),r._trigger("editorClick",null,G)}).on("keydown",function(e){r.iKeyNav.keyDownInEdit(e)}).on("keypress",function(e){return r.iKeyNav.keyPressInEdit(e,{FK:z})}).on("keyup",function(e){return r.iKeyNav.keyUpInEdit(e,{FK:z})}).on("blur",function(t,n){var i=r.options.editModel,o=i.onBlur,a="save"==o,l="validate"==o,s=i.cancelBlurCls,d=!!n&&n.force;if(!r._quitEditMode&&!r._blurEditMode&&i.indices){var c=e(t.target);if(!d){if(!1===r._trigger("editorBlur",t,G))return;if(!o)return;if(s&&c.hasClass(s))return;if(c.hasClass("hasDatepicker")){if(c.Uidatepicker("widget").is(":visible"))return!1}else if(c.hasClass("ui-autocomplete-input")){if(c.autocomplete("widget").is(":visible"))return}else if(c.hasClass("ui-multiselect")){if(e(".ui-multiselect-menu").is(":visible")||e(document.activeElement).closest(".ui-multiselect-menu").length)return}else if(c.hasClass("pq-select-button")&&(e(".pq-select-menu").is(":visible")||e(document.activeElement).closest(".pq-select-menu").length))return}r._blurEditMode=!0;var u=d||a||!l;if(!r.saveEditCell({evt:t,silent:u})&&!d&&l)return r._deleteBlurEditMode(),!1;r.quitEditMode({evt:t}),r._deleteBlurEditMode()}}).on("focus",function(e){r._trigger("editorFocus",e,G)}),r._trigger("editorBegin",o,G),j.focus(),window.setTimeout(function(){!1===e(document.activeElement).hasClass("pq-editor-focus")&&(r.element?r.element.find(".pq-editor-focus"):e()).focus()}),T)if(b)try{var K=j[0],Q=document.createRange();Q.selectNodeContents(K);var X=window.getSelection();X.removeAllRanges(),X.addRange(Q)}catch(e){}else j.select()}},a._deleteBlurEditMode=function(e){var t=this;e=e||{};t._blurEditMode&&(e.timer?window.setTimeout(function(){delete t._blurEditMode},0):delete t._blurEditMode)},a.getRow=function(e){var t=this.normalize(e).rowIndxPage;return this.iRenderB.get$Row(t)},a.getCell=function(t){t.vci>=0&&(t.colIndx=this.iCols.getci(t.vci));var n=this.normalize(t),r=n.rowIndxPage,i=n.colIndx,o=this.iRenderB.getCell(r,i);return e(o)},a.getCellHeader=function(t){t.vci>=0&&(t.colIndx=this.iCols.getci(t.vci));var n=this.normalize(t),r=n.colIndx,i=n.ri,o=i>=0?i:this.headerCells.length-1,a=this.iRenderHead.getCell(o,r);return e(a)},a.getCellFilter=function(e){return e.ri=this.headerCells.length,this.getCellHeader(e)},a.getEditorIndices=function(){var t=this.options.editModel.indices;return t?e.extend({},t):null},a.getEditCellData=function(){var t=this.options,n=t.editModel,r=n.indices;if(!r)return null;var i,o=r.colIndx,a=r.rowIndxPage,l=r.rowIndx,s=this.colModel[o],d=s.editor,c=t.editor,u=d?e.extend({},c,d):c,h=u.valueIndx,f=u.labelIndx,p=(p=u.mapIndices)||{},g=s.dataIndx,v=this.$div_focus.children(".pq-editor-inner"),m=n._getData||u.getData;if(n._getData=void 0,m)i=this.callFn(m,{$cell:v,rowData:r.rowData,dataIndx:g,rowIndx:l,rowIndxPage:a,column:s,colIndx:o});else{var w=c._type;if("checkbox"==w){var x=v.children();i="triple"==u.subtype?x.pqval():!!x.is(":checked")}else if("contenteditable"==w)i=v.children().html();else{var y;if((y=v.find('*[name="'+g+'"]'))&&y.length)if("select"==w&&null!=h)if(p[h]||this.columns[h]){(i={})[p[h]?p[h]:h]=y.val(),i[p[f]?p[f]:f]=y.find("option:selected").text();var C=u.dataMap;if(C){var b=y.find("option:selected").data("map");if(b)for(var I=0;I<C.length;I++){var _=C[I];i[p[_]?p[_]:_]=b[_]}}}else i=y.val();else i=y.val();else(y=v.find(".pq-editor-focus"))&&y.length&&(i=y.val())}}return i},a.getCellIndices=function(e){var t,n=e.$td;return null==n||0==n.length||n.closest(".pq-grid")[0]!=this.element[0]?{}:(t=this.iRenderB.getCellIndx(n[0]))?this.iMerge.getRootCellO(t[0]+this.riOffset,t[1],!0):{}},a.getRowsByClass=function(e){var t=this.options,n=t.dataModel,r="remote"==t.pageModel.type,i=this.riOffset,o=n.data,a=[];if(null==o)return a;for(var l=0,s=o.length;s>l;l++){var d=o[l];if(d.pq_rowcls&&(e.rowData=d,this.hasClass(e))){var c={rowData:d},u=r?l+i:l,h=u-i;c.rowIndx=u,c.rowIndxPage=h,a.push(c)}}return a},a.getCellsByClass=function(e){var t=this.options,n=t.dataModel,r="remote"==t.pageModel.type,i=this.riOffset,o=n.data,a=[];if(null==o)return a;for(var l=0,s=o.length;s>l;l++){var d=o[l],c=r?l+i:l,u=d.pq_cellcls;if(u)for(var h in u){var f={rowData:d,rowIndx:c,dataIndx:h,cls:e.cls};if(this.hasClass(f)){var p=this.normalize(f);a.push(p)}}}return a},a.data=function(t){var n=t.dataIndx,r=t.colIndx,i=(n=null!=r?this.colModel[r].dataIndx:n,t.data),o=null==i||"string"==typeof i,a=t.rowData||this.getRowData(t);if(!a)return{data:null};if(null==n){var l=a.pq_rowdata;if(o)return null!=l&&(c=null==i?l:l[i]),{data:c};var s=e.extend(!0,a.pq_rowdata,i);a.pq_rowdata=s}else{var d=a.pq_celldata;if(o){var c;if(null!=d){var u=d[n];c=null==i||null==u?u:u[i]}return{data:c}}d||(a.pq_celldata={});s=e.extend(!0,a.pq_celldata[n],i);a.pq_celldata[n]=s}},a.attr=function(t){var n=t.rowIndx,r=t.dataIndx,i=t.colIndx,o=(r=null!=i?this.colModel[i].dataIndx:r,t.attr),a=null==o||"string"==typeof o,l=this.riOffset,s=t.refresh,d=t.rowData||this.getRowData(t);if(!d)return{attr:null};if(a||!1===s||null!=n||(n=this.getRowIndx({rowData:d}).rowIndx),null==r){var c=d.pq_rowattr;if(a)return null!=c&&(g=null==o?c:c[o]),{attr:g};var u=e.extend(!0,d.pq_rowattr,o);if(d.pq_rowattr=u,!1!==s&&null!=n){var h=this.getRow({rowIndxPage:n-l});if(h){var f=this.stringifyAttr(u);h.attr(f)}}}else{var p=d.pq_cellattr;if(a){var g;if(null!=p){var v=p[r];g=null==o||null==v?v:v[o]}return{attr:g}}p||(d.pq_cellattr={});u=e.extend(!0,d.pq_cellattr[r],o);if(d.pq_cellattr[r]=u,!1!==s&&null!=n){var m=this.getCell({rowIndxPage:n-l,dataIndx:r});if(m){f=this.stringifyAttr(u);m.attr(f)}}}},a.stringifyAttr=function(e){var t={};for(var n in e){var r=e[n];if(r)if("title"==n)r=r.replace(/\"/g,"&quot;"),t[n]=r;else if("style"==n&&"object"==typeof r){var i,o=[];for(var a in r)(i=r[a])&&o.push(a+":"+i);(r=o.join(";")+(o.length?";":""))&&(t[n]=r)}else"object"==typeof r&&(r=JSON.stringify(r)),t[n]=r}return t},a.removeData=function(t){var n,r=t.dataIndx,i=t.colIndx,o=(r=null!=i?this.colModel[i].dataIndx:r,"string"==typeof(n=null==(n=t.data)?[]:n)?n.split(" "):n),a=o.length,l=t.rowData||this.getRowData(t);if(l)if(null==r){var s=l.pq_rowdata;if(s){if(a)for(var d=0;a>d;d++){delete s[o[d]]}a&&!e.isEmptyObject(s)||delete l.pq_rowdata}}else{var c=l.pq_celldata;if(c&&c[r]){var u=c[r];if(a)for(d=0;a>d;d++){delete u[o[d]]}a&&!e.isEmptyObject(u)||delete c[r]}}},a.removeAttr=function(t){var n,r=t.rowIndx,i=t.dataIndx,o=t.colIndx,a=(i=null!=o?this.colModel[o].dataIndx:i,"string"==typeof(n=null==(n=t.attr)?[]:n)?n.split(" "):n),l=a.length,s=r-this.riOffset,d=t.refresh,c=t.rowData||this.getRowData(t);if(c)if(!1!==d&&null==r&&(r=this.getRowIndx({rowData:c}).rowIndx),null==i){var u=c.pq_rowattr;if(u){if(l)for(var h=0;l>h;h++){delete u[f=a[h]]}else for(var f in u)a.push(f);l&&!e.isEmptyObject(u)||delete c.pq_rowattr}if(!1!==d&&null!=r&&a.length){n=a.join(" ");var p=this.getRow({rowIndxPage:s});p&&p.removeAttr(n)}}else{var g=c.pq_cellattr;if(g&&g[i]){var v=g[i];if(l)for(h=0;l>h;h++){delete v[f=a[h]]}else for(var f in v)a.push(f);l&&!e.isEmptyObject(v)||delete g[i]}if(!1!==d&&null!=r&&a.length){n=a.join(" ");var m=this.getCell({rowIndxPage:s,dataIndx:i});m&&m.removeAttr(n)}}},a.normalize=function(e,t){var n,r,i,o={};for(i in e)o[i]=e[i];var a=o.rowIndx,l=o.rowIndxPage,s=o.dataIndx,d=o.colIndx;return null==l&&null==a||(n=this.riOffset,a=null==a?1*l+n:a,l=null==l?1*a-n:l,o.rowIndx=a,o.rowIndxPage=l,o.rowData=o.rowData||t&&t[a]||this.getRowData(o)),null==d&&null==s||(r=this.colModel,s=null==s?r[d]?r[d].dataIndx:void 0:s,d=null==d?this.colIndxs[s]:d,o.column=r[d],o.colIndx=d,o.dataIndx=s),o},a.normalizeList=function(e){var t=this,n=t.get_p_data();return e.map(function(e){return t.normalize(e,n)})},a.addClass=function(e){var t,n=this.normalize(e),r=n.rowIndxPage,i=n.dataIndx,o=pq.arrayUnique,a=n.cls,l=n.refresh,s=n.rowData;if(s)if(!1!==l&&null==r&&(r=this.getRowIndx({rowData:s}).rowIndxPage),null==i){var d=s.pq_rowcls;if(t=o((t=d?d+" "+a:a).split(/\s+/)).join(" "),s.pq_rowcls=t,!1!==l&&null!=r&&this.SelectRow().inViewRow(r)){var c=this.getRow({rowIndxPage:r});c&&c.addClass(a)}}else{var u=[];"function"!=typeof i.push?u.push(i):u=i;var h=s.pq_cellcls;h||(h=s.pq_cellcls={});for(var f=0,p=u.length;p>f;f++){var g=h[i=u[f]];if(t=o((t=g?g+" "+a:a).split(/\s+/)).join(" "),h[i]=t,!1!==l&&null!=r&&this.SelectRow().inViewRow(r)){var v=this.getCell({rowIndxPage:r,dataIndx:i});v&&v.addClass(a)}}}},a.removeClass=function(e){var t=this.normalize(e),n=t.rowIndx,r=t.rowData,i=t.dataIndx,o=t.cls,a=t.refresh;if(r){var l=r.pq_cellcls,s=r.pq_rowcls;if(!1!==a&&null==n&&(n=this.getRowIndx({rowData:r}).rowIndx),null==i){if(s&&(r.pq_rowcls=this._removeClass(s,o),null!=n&&!1!==a)){var d=this.getRow({rowIndx:n});d&&d.removeClass(o)}}else if(l){var c=[];"function"!=typeof i.push?c.push(i):c=i;for(var u=0,h=c.length;h>u;u++){var f=l[i=c[u]];if(f&&(r.pq_cellcls[i]=this._removeClass(f,o),null!=n&&!1!==a)){var p=this.getCell({rowIndx:n,dataIndx:i});p&&p.removeClass(o)}}}}},a.hasClass=function(e){var t,n=e.dataIndx,r=e.cls,i=this.getRowData(e),o=new RegExp("\\b"+r+"\\b");if(i){if(null==n)return!(!(t=i.pq_rowcls)||!o.test(t));var a=i.pq_cellcls;return!!(a&&a[n]&&o.test(a[n]))}return null},a._removeClass=function(e,t){if(e&&t){for(var n=e.split(/\s+/),r=t.split(/\s+/),i=[],o=0,a=n.length;a>o;o++){for(var l=n[o],s=!1,d=0,c=r.length;c>d;d++){if(l===r[d]){s=!0;break}}s||i.push(l)}return i.length>1?i.join(" "):1===i.length?i[0]:null}},a.getRowIndx=function(e){var t,n,r=e.$tr,i=e.rowData,o=this.riOffset;if(i){if(null!=(n=i.pq_ri))return{rowData:i,rowIndx:n,rowIndxPage:n-o};var a=this.get_p_data(),l=!1,s=e.dataUF?this.options.dataModel.dataUF:null,d=!1;if(a)for(var c=0,u=a.length;u>c;c++)if(a[c]==i){d=!0;break}if(!d&&s){l=!0;for(c=0,u=s.length;u>c;c++)if(s[c]==i){d=!0;break}}return d?(t=c-o,{rowIndxPage:l?void 0:t,uf:l,rowIndx:c,rowData:i}):{}}return null==r||0==r.length?{}:null==(t=this.iRenderB.getRowIndx(r[0])[0])?{}:{rowIndxPage:t,rowIndx:t+o}},a.search=function(e){for(var t=this.options,n=e.row,r=e.first,i=t.dataModel,o=t.pageModel.type,a=[],l=this.riOffset,s="remote"==o,d=i.data,c=0,u=d.length;u>c;c++){var h=d[c],f=!0;for(var p in n)n[p]!==h[p]&&(f=!1);if(f){var g=s?c+l:c,v=this.normalize({rowIndx:g});if(a.push(v),r)break}}return a},a.getFirstVisibleRIP=function(e){for(var t=this.pdata,n=e?this.iRenderB.initV:0,r=t.length;r>n;n++)if(!t[n].pq_hidden)return n},a.getLastVisibleRIP=function(){for(var e=this.pdata,t=e.length-1;t>=0;t--)if(!e[t].pq_hidden)return t;return null},a.getFirstVisibleCI=function(e){return this.iCols.getFirstVisibleCI()},a.getLastVisibleCI=function(){return this.iCols.getLastVisibleCI()},a.getNextVisibleCI=function(e){return this.iCols.getNextVisibleCI(e)},a.getPrevVisibleCI=function(e){return this.iCols.getPrevVisibleCI(e)},a.calcWidthCols=function(e,t,n){var r=0,i=this.options.numberCell,o=this.colModel;if(-1==e&&(i.show&&(r+=n?1*i.width:i.outerWidth),e=0),n)for(var a=e;t>a;a++){if((l=o[a])&&!l.hidden){if(!l._width)throw"assert failed";r+=l._width+0}}else for(a=e;t>a;a++){var l;(l=o[a])&&!l.hidden&&(r+=l.outerWidth)}return r}}(jQuery),function(e){(e.paramquery.cKeyNav=function(e){this.that=e}).prototype={bodyKeyPressDown:function(t){var n,r=this,i=r.that,o=i.riOffset,a=i.options,l=a.formulasModel,s=i.iMerge,d=i._focusEle,c=i.colModel,u=a.selectionModel,h=a.editModel,f=document.activeElement,p=pq.isCtrl(t),g=e.ui.keyCode,v=t.keyCode;if(h.indices)i.$div_focus.find(".pq-cell-focus").focus();else{if((n=e(t.target)).hasClass("pq-grid-cell"))d=i.getCellIndices({$td:n});else if("pq-grid-excel"!=f.id&&"pq-body-outer"!=f.className)return;if(v==g.SPACE&&n[0]==i.$cont[0])return!1;var m,w,x=i.normalize(d),y=x.rowIndxPage,C=x.rowIndx,b=x.colIndx,I=i.pdata,_=x,q=!0;if(null!=C&&null!=b&&null!=x.rowData){if(s.ismergedCell(C,b)&&(y=(x=_=s.getRootCellO(C,b)).rowIndxPage,C=x.rowIndx,b=x.colIndx,v!=g.PAGE_UP&&v!=g.PAGE_DOWN&&v!=g.HOME&&v!=g.END||(m=s.getData(C,b,"proxy_cell"))&&(I[w=m.rowIndx-o].pq_hidden||(C=(y=w)+o)),c[b].hidden&&(b=i.getNextVisibleCI(b))),0==i._trigger("beforeCellKeyDown",t,_))return!1;if(i._trigger("cellKeyDown",t,_),v==g.LEFT||v==g.RIGHT||v==g.UP||v==g.DOWN||u.onTab&&v==g.TAB){var R=null;v==g.LEFT||v==g.TAB&&t.shiftKey?R=this.incrIndx(y,b,!1):v==g.RIGHT||v==g.TAB&&!t.shiftKey?R=this.incrIndx(y,b,!0):v==g.UP?R=this.incrRowIndx(y,b,!1):v==g.DOWN&&(R=this.incrRowIndx(y,b,!0)),R&&(C=R.rowIndxPage+o,this.select({rowIndx:C,colIndx:R.colIndx,evt:t}))}else if(v==g.PAGE_DOWN||v==g.PAGE_UP){var D=v==g.PAGE_UP?"pageUp":"pageDown";i.iRenderB[D](y,function(e){C=e+o,r.select({rowIndx:C,colIndx:b,evt:t})})}else if(v==g.HOME)p?C=i.getFirstVisibleRIP()+o:b=i.getFirstVisibleCI(),this.select({rowIndx:C,colIndx:b,evt:t});else if(v==g.END)p?C=i.getLastVisibleRIP()+o:b=i.getLastVisibleCI(),this.select({rowIndx:C,colIndx:b,evt:t});else if(v==g.ENTER){var M=i.getCell(_);if(M&&M.length>0)if(i.isEditable(_))i.editCell(_);else{var T=M.find("button");T.length&&e(T[0]).click()}}else if(p&&"65"==v){var E=i.iSelection;"row"==u.type&&"single"!=u.mode?i.iRows.toggleAll({all:u.all}):"cell"==u.type&&"single"!=u.mode&&E.selectAll({type:"cell",all:u.all})}else h.pressToEdit&&(this.isEditKey(v)||l.on&&187==v)&&!p?46==v?i.clear():(y=_.rowIndxPage,b=_.colIndx,(M=i.getCell(_))&&M.length&&i.isEditable(_)&&i.editCell({rowIndxPage:y,colIndx:b,select:!0}),q=!1):q=!1;q&&t.preventDefault()}}},getPrevVisibleRIP:function(e){for(var t=this.that.pdata,n=e-1;n>=0;n--)if(!t[n].pq_hidden)return n;return e},setDataMergeCell:function(e,t){var n,r=this.that.iMerge;r.ismergedCell(e,t)&&(n=r.getRootCellO(e,t),r.setData(n.rowIndx,n.colIndx,{proxy_cell:{rowIndx:e,colIndx:t}}))},getValText:function(t){var n=t[0].nodeName.toLowerCase(),r="text";return-1!=e.inArray(n,["input","textarea","select"])&&(r="val"),r},getNextVisibleRIP:function(e){for(var t=this.that.pdata,n=e+1,r=t.length;r>n;n++)if(!t[n].pq_hidden)return n;return e},incrEditIndx:function(e,t,n){var r,i=this.that,o=i.colModel,a=o.length,l=i.iMerge,s=i.riOffset,d=i[n?"getLastVisibleRIP":"getFirstVisibleRIP"]();do{var c,u=e+s;if(l.ismergedCell(u,t)){c=l.getRootCell(u,t);var h=l.getData(u,t,"proxy_edit_cell");h&&(e=(u=h.rowIndx)-s),t=n?t+c.o_cc:t-1}else t=n?t+1:t-1;if(n&&t>=a||!n&&0>t){if(e==d)return null;e=this[n?"getNextVisibleRIP":"getPrevVisibleRIP"](e),t=n?0:a-1}u=e+s,l.ismergedCell(u,t)&&(c=l.getRootCellO(u,t),l.setData(c.rowIndx,c.colIndx,{proxy_edit_cell:{rowIndx:u,colIndx:t}}),u=c.rowIndx,t=c.colIndx),r=o[t];var f=i.isEditable({rowIndx:u,colIndx:t}),p="function"==typeof(p=r.editor)?p.call(i,i.normalize({rowIndx:u,colIndx:t})):p;e=u-s}while(r&&(r.hidden||0==f||!1===p));return{rowIndxPage:e,colIndx:t}},incrIndx:function(e,t,n){var r,i,o,a,l,s=this.that,d=s.iMerge,c=s.pdata,u=s.riOffset,h=s[n?"getLastVisibleRIP":"getFirstVisibleRIP"](),f=s[n?"getLastVisibleCI":"getFirstVisibleCI"](),p=s.colModel,g=p.length;if(null==t)return e==h?null:{rowIndxPage:e=this[n?"getNextVisibleRIP":"getPrevVisibleRIP"](e)};if(t==f)return{rowIndxPage:e,colIndx:t};do{o=e+u,d.ismergedCell(o,t)&&(r=d.getRootCell(o,t),!l&&(i=d.getData(r.o_ri,r.o_ci,"proxy_cell"))&&(c[a=i.rowIndx-u].pq_hidden||(e=a)),c[e].pq_hidden&&(e=d.getRootCellV(o,t).rowIndxPage),!l&&n&&(t=r.o_ci+(r.o_cc?r.o_cc-1:0))),n?g-1>t&&t++:t>0&&t--,l=p[t]}while(l&&l.hidden);return{rowIndxPage:e,colIndx:t}},incrRowIndx:function(e,t,n){var r,i,o=this.that,a=o.riOffset,l=e+a,s=o.iMerge;return s.ismergedCell(l,t)&&(r=s.getRootCell(l,t),i=s.getData(r.o_ri,r.o_ci,"proxy_cell"),n&&(e=r.o_ri-a+r.o_rc-1),t=i?i.colIndx:r.v_ci),{rowIndxPage:e=this[n?"getNextVisibleRIP":"getPrevVisibleRIP"](e),colIndx:t}},isEditKey:function(e){return e>=32&&127>=e||189==e||190==e},keyDownInEdit:function(t){var n=this.that,r=n.options,i=r.editModel.indices;if(i){var o=e(t.target),a=e.ui.keyCode,l=r.editModel,s=(p=e.extend({},i)).rowIndxPage,d=p.colIndx,c=p.column.editModel,u=c?e.extend({},l,c):l,h=this.getValText(o);if(o.data("oldVal",o[h]()),0==n._trigger("editorKeyDown",t,p))return!1;if(t.keyCode==a.TAB||t.keyCode==u.saveKey){var f=t.keyCode==a.TAB?u.onTab:u.onSave,p={rowIndxPage:s,colIndx:d,incr:!!f,edit:"nextEdit"==f};return this.saveAndMove(p,t)}if(t.keyCode==a.ESCAPE)return n.quitEditMode({evt:t}),n.focus({rowIndxPage:s,colIndx:d}),t.preventDefault(),!1;if(t.keyCode==a.PAGE_UP||t.keyCode==a.PAGE_DOWN)return t.preventDefault(),!1;if(u.keyUpDown&&!t.altKey){if(t.keyCode==a.DOWN)return p=this.incrRowIndx(s,d,!0),this.saveAndMove(p,t);if(t.keyCode==a.UP)return p=this.incrRowIndx(s,d,!1),this.saveAndMove(p,t)}}},keyPressInEdit:function(t,n){var r=this.that,i=r.options.editModel.indices,o=(n||{}).FK,a=i.column,l=e.ui.keyCode,s=["BACKSPACE","LEFT","RIGHT","UP","DOWN","DELETE","HOME","END"].map(function(e){return l[e]}),d=a.dataType;if(e.inArray(t.keyCode,s)>=0)return!0;if(!1===r._trigger("editorKeyPress",t,e.extend({},i)))return!1;if(o&&("float"==d||"integer"==d)){var c=i.$editor.val(),u="float"==d?"0123456789.-=":"0123456789-=",h=t.charCode||t.keyCode,f=String.fromCharCode(h);if("="!==c[0]&&f&&-1==u.indexOf(f))return!1}return!0},keyUpInEdit:function(t,n){var r=this.that,i=r.options,o=(n||{}).FK,a=i.editModel,l=a.indices;r._trigger("editorKeyUp",t,e.extend({},l));var s=l.column.dataType;if(o&&("float"==s||"integer"==s)){var d=e(t.target),c="integer"==s?a.reInt:a.reFloat,u=this.getValText(d),h=d.data("oldVal"),f=d[u]();if(0==c.test(f)&&"="!==f[0])if(c.test(h))d[u](h);else{var p="float"==s?parseFloat(h):parseInt(h);isNaN(p)?d[u](0):d[u](p)}}},saveAndMove:function(e,t){if(null==e)return t.preventDefault(),!1;var n,r,i=this,o=i.that,a=e.rowIndxPage,l=e.colIndx;return o._blurEditMode=!0,!1!==o.saveEditCell({evt:t})&&o.pdata?(o.quitEditMode(t),e.incr&&(r=i[e.edit?"incrEditIndx":"incrIndx"](a,l,!t.shiftKey),a=r?r.rowIndxPage:a,l=r?r.colIndx:l),o.scrollCell({rowIndxPage:a,colIndx:l},function(){n=a+o.riOffset,i.select({rowIndx:n,colIndx:l,evt:t}),e.edit&&o._editCell({rowIndxPage:a,colIndx:l})}),o._deleteBlurEditMode({timer:!0,msg:"saveAndMove"}),t.preventDefault(),!1):(o.pdata||o.quitEditMode(t),o._deleteBlurEditMode({timer:!0,msg:"saveAndMove saveEditCell"}),t.preventDefault(),!1)},select:function(t){var n=this.that,r=t.rowIndx,i=t.colIndx,o=r-n.riOffset,a=t.evt,l=(this.setDataMergeCell(r,i),n.options),s=n.iSelection,d=l.selectionModel,c=d.type,u="row"==c,h="cell"==c;n.scrollCell({rowIndx:r,colIndx:i},function(){var t=s.address();if(a.shiftKey&&a.keyCode!==e.ui.keyCode.TAB&&d.type&&"single"!=d.mode&&(t.length||u))if(u)n.iRows.extend({rowIndx:r,evt:a});else{var l=t[t.length-1],c=l.firstR,f=l.firstC,p=!1;"column"==l.type?(l.c1=f,l.c2=i,l.r1=l.r2=l.type=void 0):(t={_type:"block",r1:c,r2:r,c1:f,c2:i,firstR:c,firstC:f},p=!0),n.Range(t,p).select()}else u||h&&n.Range({r1:r,c1:i,firstR:r,firstC:i}).select();n.focus({rowIndxPage:o,colIndx:i})})}}}(jQuery),function(e){(e.paramquery.cGenerateView=function(e){}).prototype={autoFitCols:function(){var e=this.that,t=e.colModel,n=t.length,r=this.dims,i=e.calcWidthCols(-1,n,!0),o=this.getSBWd(),a=r.wdCenter-o;if(i!==a){for(var l,s=i-a,d=[],c=0;n>c;c++){var u=(p=t[c])._percent,h=(p.resizable,p._resized);if(!p.hidden&&!u&&!h)0>s?(v=p._maxWidth-p._width)&&d.push({availWd:-1*v,colIndx:c}):(v=p._width-p._minWidth)&&d.push({availWd:v,colIndx:c});h&&(l=p,delete p._resized)}d.sort(function(e,t){return e.availWd>t.availWd?1:e.availWd<t.availWd?-1:0});c=0;for(var f=d.length;f>c;c++){var p,g=d[c],v=g.availWd,m=g.colIndx,w=Math.round(s/(f-c)),x=(p=t[m])._width;Math.abs(v)>Math.abs(w)?(y=x-w,s-=w):(y=x-v,s-=v),p.width=p._width=y}var y;if(0!=s&&l)(y=l._width-s)>l._maxWidth?y=l._maxWidth:y<l._minWidth&&(y=l._minWidth),l.width=l._width=y}},computeOuterWidths:function(){for(var e=this.that,t=e.options.numberCell,n=e.colModel,r=n.length,i=0;r>i;i++){var o=n[i];o.outerWidth=o._width+0}t.show&&(t.outerWidth=t.width)},numericVal:function(e,t){var n;return n=(e+"").indexOf("%")>-1?parseInt(e)*t/100:parseInt(e),Math.round(n)},refreshColumnWidths:function(e){e=e||{};var t=this.that,n=t.options,r=n.numberCell,i="flex"===n.width,o=t.colModel,a=this.autoFit,l=this.dims.wdCenter,s=o.length,d=n.minColWidth,c=n.maxColWidth,u=0;r.show&&(r.width<r.minWidth&&(r.width=r.minWidth),u=r.outerWidth=r.width);var h=i?null:l-0-u,f=(d=Math.floor(this.numericVal(d,h)),c=Math.ceil(this.numericVal(c,h)),0);if(!i&&5>h||isNaN(h)){if(n.debug)throw"availWidth N/A"}else{delete t.percentColumn;for(var p=0;s>p;p++){var g=o[p];if(!g.hidden){var v=g.width,m=(v+"").indexOf("%")>-1||null,w=g.minWidth,x=g.maxWidth;if((w=w?this.numericVal(w,h):d)>(x=x?this.numericVal(x,h):c)&&(x=w),null!=v){var y,C=0;!i&&m?(t.percentColumn=!0,g.resizable=!1,g._percent=!0,(f+=(y=this.numericVal(v,h)-0)-(C=Math.floor(y)))>=1&&(C+=1,f-=1)):v&&(C=1*v),w>C?C=w:C>x&&(C=x),g._width=C}else g._width=w;m||(g.width=g._width),g._minWidth=w,g._maxWidth=i?1e3:x}}!1===i&&!1!==e.refreshWidth&&a&&this.autoFitCols(),this.computeOuterWidths()}},format:function(){var t=e.Uidatepicker,n=pq.formatNumber;return function(e,r){if("function"==typeof r)return r(e);if(pq.isDateFormat(r)){if(e==parseInt(e))return pq.formulas.TEXT(e,pq.juiToExcel(r));if(isNaN(Date.parse(e)))return;return t.formatDate(r,new Date(e))}return e==parseFloat(e)?n(e,r):void 0}}(),renderCell:function(e){var t,n,r,i,o=this.that,a=e.attr||[],l=e.style||[],s=e.Export,d=o.options,c=e.cls||[],u=e.rowData,h=e.column,f=h.dataType,p=e.colIndx,g=h.dataIndx,v=d.freezeCols,m=d.columnBorders;if(u){s||(h.align&&c.push("pq-align-"+h.align),p==v-1&&m&&c.push("pq-last-frozen-col"),h.cls&&c.push(h.cls));var w,x,y="string"==typeof(y=u[g])&&"html"!=f?pq.escapeHtml(y):y,C=h.format||(x=u.pq_format)&&(x=x[g]),b=C?this.format(y,C,f):y;if(e.dataIndx=g,e.cellData=y,e.formatVal=b,(i=h.render)&&((w=o.callFn(i,e))&&"string"!=typeof w&&((t=w.attr)&&a.push(t),(r=w.cls)&&c.push(r),(n=w.style)&&l.push(n),w=w.text)),null==w&&(i=h._render)&&(w=i.call(o,e)),w&&"string"!=typeof w&&((t=w.attr)&&a.push(t),(r=w.cls)&&c.push(r),(n=w.style)&&l.push(n),w=w.text),null==w&&(w=b||y),s)return[w,n];var I=u.pq_cellcls;if(I){var _=I[g];_&&c.push(_)}var q=u.pq_cellattr;if(q){var R=q[g];if(R){var D=o.stringifyAttr(R);for(var M in D){var T=D[M];"style"==M?l.push(T):a.push(M+'="'+T+'"')}}}return l=l.length?" style='"+l.join("")+"' ":"",""!==w&&null!=w||(w="&nbsp;"),w=pq.newLine(w),["<div class='",c.join(" "),"' ",a.join(" "),l," >",w,"</div>"].join("")}}}}(jQuery),function(e){var t=e.paramquery,n=t._pqGrid.prototype;n.getHeadCell=function(e){var t,n,r,i=this.iRenderHead.getCellIndx(e[0]),o=i[0],a=i[1];return null!=a&&null!=o&&((n=this.headerCells[o])&&(n=n[a]),n&&(r=n.colModel)),r&&r.length&&(t=!0),{col:n||this.colModel[a],ci:a,ri:o,isParent:t}},n.flex=function(e){this.iResizeColumns.flex(e)},t.cHeader=function(e,t){},t.cHeader.prototype={onBeforeRefreshH:function(t,n){return function(){var r=document.activeElement,i=r?r.className:"",o=t.focusUI,a=e(r);o&&(o.nofocus=-1==i.indexOf("pq-grid-col-leaf")||!a.closest(n.element).length)}},onRefreshH:function(e){return function(t){e.setTimer(function(){e.that.options&&e.focus()},100)}},colCollapse:function(e,t){var n=this.that,r={column:e},i=e.collapsible;!1!==n._trigger("beforeColumnCollapse",t,r)&&(i.on=!i.on,!1!==n._trigger("columnCollapse",t,r)&&n.refresh({colModel:!0}))},onHeaderClick:function(t){var n,r,i,o,a=this.that,l=a.iDragColumns;if(a._trigger("headerClick",t),!l||"stop"==l.status){if((o=e(t.target)).is("input,label"))return!0;if((n=o.closest(".pq-grid-col")).length)if(r=(i=a.getHeadCell(n)).col,o.hasClass("pq-col-collapse"))this.colCollapse(r,t);else if(!i.isParent)return this.onHeaderCellClick(r,i.ci,t)}},getTitle:function(e,t){var n=e.title;return"function"==typeof n?n.call(this.that,{column:e,colIndx:t,dataIndx:e.dataIndx}):n},createHeaderCell:function(e,t,n,r,i,o){var a,l=this.that.options,s=this.getSortSpaceSpans(l.sortModel),d=n.collapsible,c=n.halign||n.align,u=n.cls,h=n.colModel,f=this.hasMenuH(l,n),p=null!=(p=this.getTitle(n,t))?p:n.dataIndx;return n.pq_title=p,c&&i.push("pq-align-"+c),u&&i.push(u),i.push(n.clsHead),f&&i.push("pq-has-menu"),h&&h.length?d&&(i.push("pq-collapsible-th"),a=["<span class='pq-col-collapse pq-icon-hover ui-icon ui-icon-",d.on?"plus":"minus","'></span>"].join("")):i.push("pq-grid-col-leaf"),["<div ","pq-col-indx="+t," ","pq-row-indx="+e," ",""," ",r," "," class='",i.join(" "),"' style='",o.join(""),"' >","<div class='pq-td-div'>",a,"<span class='pq-title-span'>",p,"</span>",s,"</div>",f?"<span class='pq-menu-icon'></span>":"","</div>"].join("")},getSortSpaceSpans:function(e){var t=e.space?" pq-space":"";return["<span class='pq-col-sort-icon",t,"'></span>",e.number?"<span class='pq-col-sort-count"+t+"'></span>":""].join("")},hasMenuH:function(e,t){var n=t.colModel;if(n&&n.length)return!1;var r=e.menuIcon,i=t.menuIcon;return r&&!1!==i||!1!==r&&i},onHeaderCellClick:function(t,n,r){var i=this.that,o=i.options,a=o.sortModel,l=t.dataIndx;if(!1!==i._trigger("headerCellClick",r,{column:t,colIndx:n,dataIndx:l}))if(o.selectionModel.column&&-1==r.target.className.indexOf("pq-td-div")){var s={c1:n,firstC:n},d=i.iSelection.address();if(r.shiftKey){var c=d.length;if(c&&"column"==d[c-1].type){var u=d[c-1];u.c1=u.firstC,u.c2=n,u.r1=u.r2=u.type=void 0}s=d}i.Range(s,!1).select(),i.focus({rowIndxPage:i.getFirstVisibleRIP(!0),colIndx:n})}else if(a.on&&(a.wholeCell||e(r.target).hasClass("pq-title-span"))){if(0==t.sortable)return;i.sort({sorter:[{dataIndx:l,sortIndx:t.sortIndx}],addon:!0,skipCustomSort:pq.isCtrl(r),tempMultiple:a.multiKey&&r[a.multiKey],evt:r})}},refreshHeaderSortIcons:function(){var t=this.that,n=t.options,r=n.bootstrap,i=n.ui,o=t.headerCells.length-1;if(t.$header){var a=t.iSort.getSorter(),l=a.length,s=!1;t.options.sortModel.number&&l>1&&(s=!0);for(var d=0;l>d;d++){var c=a[d],u=c.dataIndx,h=t.getColIndx({dataIndx:u}),f=c.dir;if(h>=0){var p=r.on?r.header_active:i.header_active+" pq-col-sort-"+("up"==f?"asc":"desc"),g=r.on?" glyphicon glyphicon-arrow-"+f:"ui-icon ui-icon-triangle-1-"+("up"==f?"n":"s"),v=e(t.iRenderHead.getCell(o,h));v.addClass(p),v.find(".pq-col-sort-icon").addClass(g),s&&v.find(".pq-col-sort-count").html(d+1)}}}}},t.cResizeColumns=function(t){this.that=t;var n=this;t.$header.mouse(),t.$header.on({mousedown:function(t){if(!t.pq_composed){var r=e(t.target);n.setDraggables(t),t.pq_composed=!0;var i=e.Event("mousedown",t);r.trigger(i)}},dblclick:function(e){n.doubleClick(e)}},".pq-grid-col-resize-handle");var r=t.options.flex;r.on&&r.one&&t.one("ready",function(){n.flex()})},t.cResizeColumns.prototype={doubleClick:function(t){var n=this.that.options,r=n.flex,i=e(t.target),o=parseInt(i.attr("pq-col-indx"));isNaN(o)||r.on&&this.flex(r.all&&!n.scrollModel.autoFit?null:o)},flex:function(e){this.that.iRenderB.flex(e)},setDraggables:function(t){var n,r,i=e(t.target),o=this;i.draggable({axis:"x",helper:function(t,n){var r=e(t.target),i=parseInt(r.attr("pq-col-indx"));return o._setDragLimits(i),o._getDragHelper(t,n),r},start:function(e,t){n=e.clientX,r=parseInt(o.$cl[0].style.left)},drag:function(e,t){var i=e.clientX-n;o.$cl[0].style.left=r+i+"px"},stop:function(e,t){return o.resizeStop(e,t,n)}})},_getDragHelper:function(t){var n=this.that,r=1*n.options.freezeCols,i=e(t.target),o=n.$grid_center,a=n.iRenderHead,l=1*i.attr("pq-col-indx"),s=r>l?0:a.scrollX(),d=o.outerHeight(),c=a.getLeft(l)-s,u=a.getLeft(l+1)-s,h="style='height:"+d+"px;left:";this.$clleft=e("<div class='pq-grid-drag-bar' "+h+c+"px;'></div>").appendTo(o),this.$cl=e("<div class='pq-grid-drag-bar' "+h+u+"px;'></div>").appendTo(o)},_setDragLimits:function(t){if(!(0>t)){var n=this.that,r=n.iRenderHead,i=n.colModel[t],o=r.getLeft(t)+i._minWidth,a=o+i._maxWidth-i._minWidth,l=e(r._resizeDiv(t));l.draggable("instance")&&l.draggable("option","containment",[o,0,a,0])}},resizeStop:function(t,n,r){var i=this.that,o=i.colModel,a=i.options.numberCell;this.$clleft.remove(),this.$cl.remove();var l,s=t.clientX-r,d=1*e(n.helper).attr("pq-col-indx");if(-1==d){l=null;var c=(u=parseInt(a.width))+s;a.width=c}else{l=o[d];var u;c=(u=parseInt(l.width))+s;l.width=c,l._resized=!0}i._trigger("columnResize",t,{colIndx:d,column:l,dataIndx:l?l.dataIndx:null,oldWidth:u,newWidth:l?l.width:a.width}),i.refresh({soft:!0})}},t.cDragColumns=function(t){var n=this;n.that=t,n.$drag_helper=null;var r=t.options.dragColumns,i=r.topIcon,o=r.bottomIcon;n.status="stop",n.$arrowTop=e("<div class='pq-arrow-down ui-icon "+i+"'></div>").appendTo(t.element),n.$arrowBottom=e("<div class='pq-arrow-up ui-icon "+o+"' ></div>").appendTo(t.element),n.hideArrows(),r&&r.enabled&&t.$header.on("mousedown",".pq-grid-col",n.onColMouseDown(n,t))},t.cDragColumns.prototype={onColMouseDown:function(t,n){return function(r){var i,o,a,l,s=e(this);if(!r.pq_composed){if(e(r.target).is("input,select,textarea"))return;if(a=(o=(i=n.getHeadCell(s)).col)?o.parent:null,!o||o.nodrag||o._nodrag||a&&1==a.colSpan)return;t.setDraggable(r,o,i)&&(r.pq_composed=!0,l=e.Event("mousedown",r),e(r.target).trigger(l))}}},showFeedback:function(e,t){var n=this.that,r=e[0],i=r.offsetParent.offsetParent,o=n.$grid_center[0].offsetTop,a=r.offsetLeft-i.offsetParent.scrollLeft+(t?0:r.offsetWidth)-8,l=o+r.offsetTop-16,s=o+n.$header[0].offsetHeight;this.$arrowTop.css({left:a,top:l,display:""}),this.$arrowBottom.css({left:a,top:s,display:""})},showArrows:function(){this.$arrowTop.show(),this.$arrowBottom.show()},hideArrows:function(){this.$arrowTop.hide(),this.$arrowBottom.hide()},updateDragHelper:function(e){var t=this.that.options.dragColumns,n=t.acceptIcon,r=t.rejectIcon,i=this.$drag_helper;i&&(e?(i.children("span.pq-drag-icon").addClass(n).removeClass(r),i.removeClass("ui-state-error")):(i.children("span.pq-drag-icon").removeClass(n).addClass(r),i.addClass("ui-state-error")))},onStart:function(e,t,n,r){return function(i){return!1!==t._trigger("columnDrag",i.originalEvent,{column:n})&&void e.setDroppables(r)}},onDrag:function(t,n){return function(r,i){t.status="drag";var o=e(".pq-drop-hover",n.$header);o.length>0?(t.showArrows(),t.updateDragHelper(!0),o.width()/2>r.clientX-o.offset().left+e(document).scrollLeft()?(t.leftDrop=!0,t.showFeedback(o,!0)):(t.leftDrop=!1,t.showFeedback(o,!1))):(t.hideArrows(),e(".pq-drop-hover",n.$top).length?t.updateDragHelper(!0):t.updateDragHelper())}},dragHelper:function(t,n,r){var i=n.options.dragColumns.rejectIcon;return function(){t.status="helper",n.$header.find(".pq-grid-col-resize-handle").hide();var o=e("<div class='pq-col-drag-helper ui-widget-content ui-corner-all panel panel-default' ><span class='pq-drag-icon ui-icon "+i+" glyphicon glyphicon-remove'></span>"+r.pq_title+"</div>");return t.$drag_helper=o,o[0]}},_columnIndexOf:function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]==t)return n;return-1},setDraggable:function(t,n,r){var i=e(t.currentTarget),o=this,a=o.that;return i.hasClass("ui-draggable")?void 0:(i.draggable({distance:10,cursorAt:{top:-18,left:-10},zIndex:"1050",appendTo:a.element,revert:"invalid",helper:o.dragHelper(o,a,n),start:o.onStart(o,a,n,r),drag:o.onDrag(o,a),stop:function(){a.element&&(o.status="stop",a.$header.find(".pq-grid-col-resize-handle").show(),o.hideArrows())}}),!0)},setDroppables:function(t){var n,r,i,o,a,l,s,d=this.that,c=t.col,u=t.ri,h=t.o_ci,f=h+c.o_colspan,p={hoverClass:"pq-drop-hover ui-state-highlight",accept:".pq-grid-col",tolerance:"pointer",drop:this.onDrop()},g=d.$header.find(":not(.pq-grid-header-search-row)>.pq-grid-col");for(s=g.length;s--;)l=(a=e(g[s])).hasClass("ui-droppable"),o=(n=d.getHeadCell(a)).col,r=n.ri,i=n.ci,o==c||o.nodrop||o._nodrop||r>u&&i>=h&&f>i?l&&a.droppable("destroy"):l||a.droppable(p)},onDrop:function(){var t=this,n=this.that;return function(r,i){if(!t.dropPending){var o=1*i.draggable.attr("pq-col-indx"),a=1*i.draggable.attr("pq-row-indx"),l=e(this),s=1*l.attr("pq-col-indx"),d=1*l.attr("pq-row-indx"),c=t.leftDrop;if(!1!==n._trigger("beforeColumnOrder",null,{colIndxDrag:o,colIndxDrop:s,left:c})){var u=t.moveColumn(o,s,c,a,d);t.dropPending=!0,window.setTimeout(function(){n.iCols.init(),!1!==n._trigger("columnOrder",null,{dataIndx:u.dataIndx,column:u,oldcolIndx:o,colIndx:n.getColIndx({column:u})})&&n.refresh(),t.dropPending=!1})}}}},getRowIndx:function(e,t,n){for(;n&&e[n][t]==e[n-1][t];)n--;return n},moveColumn:function(e,t,n,r,i){var o=this.that,a=this,l=o.options.colModel,s=o.headerCells,d=o.depth-1,c=(r=null==r?a.getRowIndx(s,e,d):r,i=null==i?a.getRowIndx(s,t,d):i,s[r][e]),u=s[i][t],h=r?s[r-1][e].colModel:l,f=i?s[i-1][t].colModel:l,p=a._columnIndexOf(h,c),g=n?1:0,v=h.splice(p,1)[0],m=a._columnIndexOf(f,u)+1-g;return f.splice(m,0,v),v}}}(jQuery),function(e){var t=e.paramquery;t.cHeaderSearch=function(e){},t.cHeaderSearch.prototype={_bindFocus:function(){function t(t){var i=e(t.target).closest(".pq-grid-hd-search-field").attr("name");if(n.scrollColumn({dataIndx:i})){var o=n.getColIndx({dataIndx:i});r.get$Ele(o,i).focus()}}for(var n=this.that,r=this,i=n.$header.find(".pq-grid-header-search-row"),o=0;o<i.length;o++)e(i[o]).on("focusin",t)},_input:function(e,t,n,r,i,o){return["<input ",' value="',t=pq.formatEx(e,t,o),"\" name='",e.dataIndx,"' type=text style='",r,"' class='",n,"' ",i," />"].join("")},_onKeyDown:function(t,n,r){var i,o=this,a=this.that;if(t.keyCode!==e.ui.keyCode.TAB)return!0;var l,s=o.getCellIndx(r.closest(".pq-grid-col")[0])[1],d=a.colModel,c=t.shiftKey;if("textbox2"==((u=d[s]).filterUI||{}).type&&(a.scrollColumn({colIndx:s}),(i=o.getCellEd(s)[1])[0]==r[0]?c||(l=i[1]):c&&(l=i[0]),l))return l.focus(),t.preventDefault(),!1;for(;c?s--:s++,!(0>s||s>=d.length);){var u,h=(u=d[s]).filter;if(!u.hidden&&h){a.scrollColumn({colIndx:s},function(){var n=o.getCellEd(s)[1];return"textbox2"==(u.filterUI||{}).type&&(n=e(c?n[1]:n[0])),n?(n.focus(),t.preventDefault(),!1):void 0});break}}},_textarea:function(e,t,n,r,i){return["<textarea name='",e,"' style='"+r+"' class='"+n+"' "+i+" >",t,"</textarea>"].join("")},bindListener:function(t,n,r,i){var o=this.that,a=i.filter,l=pq.filter.getVal(a),s=l[0],d=l[1];pq.fakeEvent(t,n,o.options.filterModel.timeout),t.off(n).on(n,function(n){var a,l,c=i.filterUI,u=c.type,h=c.condition;return"checkbox"==u?a=t.pqval({incr:!0}):"textbox2"==u?(a=e(t[0]).val(),l=e(t[1]).val()):a=t.val(),a=""===a?void 0:pq.deFormat(i,a,h),l=""===l?void 0:pq.deFormat(i,l,h),s!==a||d!==l?(s=a,d=l,(r=pq.getFn(r)).call(o,n,{column:i,dataIndx:i.dataIndx,value:a,value2:l})):void 0})},betweenTmpl:function(e,t){return["<div class='pq-from-div'>",e,"</div>","<span class='pq-from-to-center'>-</span>","<div class='pq-to-div'>",t,"</div>"].join("")},createListener:function(e){var t={},n=this.that;return t[e]=function(e,t){var r=t.column;n.filter({rules:[{dataIndx:r.filterIndx||t.dataIndx,condition:r.filter.condition,value:t.value,value2:t.value2}]})},t},getCellEd:function(t){var n=this.data.length-1,r=e(this.getCell(n,t)),i=r.find(".pq-grid-hd-search-field");return[r,i]},onCreateHeader:function(){var e=this;e.that.options.filterModel.header&&e.eachH(function(t){t.filter&&e.postRenderCell(t)})},onHeaderKeyDown:function(t,n){var r=e(t.originalEvent.target);return!r.hasClass("pq-grid-hd-search-field")||this._onKeyDown(t,n,r)},postRenderCell:function(t){var n=t.dataIndx,r=t.filterUI||{},i=t.filter,o=this,a=o.that,l=a.colIndxs[n],s=this.getCellEd(l),d=s[0],c=s[1];if(0!=c.length){var u=r.type,h={button:"click",select:"change",checkbox:"change",textbox:"timeout",textbox2:"timeout"},f=pq.filter.getVal(i)[0];"checkbox"==u?c.pqval({val:f}):"select"==u&&(f=f||[],e.isArray(f)||(f=[f]),t.format&&(f=f.slice(0,25).map(function(e){return pq.format(t,e)})),c.val(f.join(", ")));var p=r.init,g=i.listener,v=i.listeners||[g||h[u]];p&&p.find(function(e){return a.callFn(e,{dataIndx:n,column:t,filter:i,filterUI:r,$cell:d,$editor:c})});for(var m=0;m<v.length;m++){var w=v[m],x=typeof w,y={};for(var C in"string"==x?w=o.createListener(w):"function"==x&&(y[h[u]]=w,w=y),w)o.bindListener(c,C,w[C],t)}}},getControlStr:function(e){var t=this.that,n=e.dataIndx,r=e.filter,i=" ui-corner-all",o=pq.filter.getVal(r),a=o[0],l=o[1],s=o[2],d={column:e,dataIndx:n,condition:s,indx:0},c=e.filterUI=pq.filter.getFilterUI(d,t),u=c.type,h="";"textbox2"==u&&(l=null!=l?l:"");var f="pq-grid-hd-search-field "+(c.cls||""),p=c.style||"",g=c.attr||"";if(u&&u.indexOf("textbox")>=0)a=a||"",f=f+" pq-search-txt"+i,h="textbox2"==u?this.betweenTmpl(this._input(e,a,f+" pq-from",p,g,s),this._input(e,l,f+" pq-to",p,g,s)):this._input(e,a,f,p,g,s);else if("select"===u){h="<input type='text' "+["name='",n,"' class='",f+=i,"' style='",p,"' ",g].join("")+" ><span style='position:absolute;right:0;top:3px;' class='ui-icon ui-icon-arrowthick-1-s'></span>"}else if("checkbox"==u){h=["<input ",null==a||0==a?"":"checked=checked"," name='",n,"' type=checkbox class='"+f+"' style='"+p+"' "+g+"/>"].join("")}else"string"==typeof u&&(h=u);return h},renderFilterCell:function(e,t,n){var r,i,o=this,a=o.that.options.filterModel,l=e.cls,s=e.halign||e.align;return s&&n.push("pq-align-"+s),l&&n.push(l),n.push(e.clsHead),e.filter&&((i=o.getControlStr(e))&&n.push("pq-col-"+t)),(r=o.hasMenu(a,e))&&n.push("pq-has-menu"),["<div class='pq-td-div' style='overflow:hidden;'>","",i,"</div>",r?"<span class='pq-filter-icon'></span>":""].join("")},hasMenu:function(e,t){var n=e.menuIcon,r=(t.filter||{}).menuIcon;return n&&!1!==r||!1!==n&&r}}}(jQuery),function(e){var t=e.paramquery.cRefresh=function(t){var n=this;n.vrows=[],n.that=t,t.on("dataReadyDone",function(){n.addRowIndx(!0)}),e(window).on("resize"+t.eventNamespace+" orientationchange"+t.eventNamespace,n.onWindowResize.bind(n))};e.extend(t,{Z:function(){return(window.outerWidth-8)/window.innerWidth},cssZ:function(){return document.body.style.zoom},isFullScreen:function(){return document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen||window.innerHeight==screen.height},isSB:function(){return e(document).height()>e(window).height()}}),e(function(){var n=t.Z,r=t.cssZ,i=n(),o=r();t.isZoom=function(){var e=n(),t=r();return i!=e||o!=t?(i=e,o=t,!0):void 0};var a=t.isSB,l=a();e.paramquery.onResize(document.body,function(){var t=a();t!=l&&(l=t,e(window).trigger("resize",{SB:!0}))})}),e(window).on("resize",function(){t.isZoom&&(t.ISZOOM=t.isZoom())}),t.prototype={addRowIndx:function(e){for(var t,n=this.that,r=n.options.dataModel.dataUF,i=n.get_p_data(),o=i.length;o--;)(t=i[o])&&(t.pq_ri=o);if(e)for(o=r.length;o--;)delete r[o].pq_ri},setGridAndCenterHeightForFlex:function(){var e=this.that;e.element.height(""),e.$grid_center.height(""),e.dims.htGrid=e.element.height()},setGridWidthForFlex:function(){var e=this.that,t=e.options,n=this.maxWidthPixel,r=e.element,i=e.$toolPanel[0].offsetWidth+e.iRenderB.getFlexWidth();t.maxWidth&&i>=this.maxWidthPixel&&(i=n),e._trigger("contWd"),r.width(i+"px"),e.dims.wdGrid=i},_calcOffset:function(e){var t=/(-|\+)([0-9]+)/.exec(e);return t&&3===t.length?parseInt(t[1]+t[2]):0},setMax:function(e){var t=this.that,n=t.element,r=t.options[e];r?(r==parseInt(r)&&(r+="px"),n.css(e,r)):n.css(e,"")},refreshGridWidthAndHeight:function(){var t,n,r=this.that,i=r.options,o=r.dims,a=(i.width+"").indexOf("%")>-1,l=(i.height+"").indexOf("%")>-1,s=(i.maxHeight+"").indexOf("%")>-1,d="flex"==i.height,c=s&&d,u=(i.maxWidth+"").indexOf("%")>-1,h="flex"==i.width,f=u&&h,p=r.element;if(a||l||c||f){var g,v,m=p.parent();if(!m.length)return;m[0]==document.body||"fixed"==p.css("position")?(g=e(window).width(),v=window.innerHeight||e(window).height()):(g=m.width(),v=m.height());var w=this._calcOffset,x=a?w(i.width):0,y=l?w(i.height):0;f?t=parseInt(i.maxWidth)*g/100:a&&(t=parseInt(i.width)*g/100+x),c?n=parseInt(i.maxHeight)*v/100:l&&(n=parseInt(i.height)*v/100+y)}t||(h&&i.maxWidth?u||(t=i.maxWidth):a||(t=i.width)),i.maxWidth&&(this.maxWidthPixel=t),n||(d&&i.maxHeight?s||(n=i.maxHeight):l||(n=i.height)),parseFloat(t)==t?(t=t<i.minWidth?i.minWidth:t,p.css("width",t)):"auto"===t&&p.width(t),parseFloat(n)==n&&(n=n<i.minHeight?i.minHeight:n,p.css("height",n)),o.wdGrid=Math.round(p.width()),o.htGrid=Math.round(p.height())},isReactiveDims:function(){var e=this.that.options,t=e.width,n=e.height,r=e.maxWidth,i=e.maxHeight,o=function(e){return-1!=(e+"").indexOf("%")},a=o(t),l="auto"===t,s=o(n),d=o(r),c=o(i);return a||l||s||d||c},getParentDims:function(){var t,n,r=this.that.element,i=r.parent();return i.length?(i[0]==document.body||"fixed"==r.css("position")?(n=window.innerHeight||e(window).height(),t=e(window).width()):(n=i.height(),t=i.width()),[t,n]):[]},onWindowResize:function(n,r){var i,o,a,l,s,d=this,c=d.that,u=c.dims||{},h=u.htParent,f=u.wdParent,p=c.options,g=c.element;if(!t.isFullScreen()&&!(e.support.touch&&p.editModel.indices&&e(document.activeElement).is(".pq-editor-focus")||r&&(s=r.$grid,s&&(s==g||0==g.closest(s).length))))return l=d.isReactiveDims(),t.ISZOOM?d.setResizeTimer(function(){d.refresh({soft:!0})}):void(l&&d.setResizeTimer(function(){if(a=d.getParentDims(),o=a[0],(i=a[1])==h&&o==f){if(parseInt(g.width())==parseInt(u.wdGrid))return}else u.htParent=i,u.wdParent=o;d.refresh({soft:!0})}))},setResizeTimer:function(e){var t=this,n=t.that;clearTimeout(t._autoResizeTimeout),t._autoResizeTimeout=window.setTimeout(function(){n.element&&(e?e():t.refreshAfterResize())},n.options.autoSizeInterval||100)},refresh:function(e){e=e||{};var t,n=this,r=n.that,i=null==e.header||e.header,o=e.pager,a=!e.soft,l=r.element,s=r.$toolPanel,d=r.dims=r.dims||{htCenter:0,htHead:0,htSum:0,htBody:0,wdCenter:0,htTblSum:0};if(e.colModel&&r.refreshCM(),l[0].offsetWidth){s.css("height","1px"),e.toolbar&&r.refreshToolbar(),(t=r.options).collapsible._collapsed=!1,n.setMax("maxHeight"),n.setMax("maxWidth"),n.refreshGridWidthAndHeight(),a&&!1!==o&&r._refreshPager(),d.htCenter=n.setCenterHeight(),d.wdCenter=d.wdGrid-s[0].offsetWidth,r.iRenderB.init({header:i,soft:e.soft,source:e.source}),"flex"==t.height&&n.setGridAndCenterHeightForFlex(),"flex"==t.width&&n.setGridWidthForFlex();var c=this.getParentDims();d.wdParent=c[0],d.htParent=c[1],a&&r._createCollapse(),t.dataModel.postDataOnce=void 0,r._trigger("refreshFull")}else l.addClass("pq-pending-refresh")},setCenterHeight:function(){var e,t=this.that,n=t.$top,r=t.options;return("flex"!==r.height||r.maxHeight)&&(e=(e=t.dims.htGrid-(r.showTop?n[0].offsetHeight+parseInt(n.css("marginTop")):0)-t.$bottom[0].offsetHeight+1)>=0?e:"",t.$grid_center.height(e)),e}},e(function(){})}(jQuery),function(e){(e.paramquery.cCheckBoxColumn=function(t,n){var r,i,o=this;o.that=t,o.options=t.options,n.cbId?(i=o.colUI=n,r=o.colCB=t.columns[n.cbId]):r=i=o.colCB=o.colUI=n;var a=r.cb=e.extend({},{all:!1,header:!1,select:!1,check:!0,uncheck:!1},r.cb),l=r.dataIndx;i._render=o.cellRender(r,i),t.on("dataAvailable",function(){t.one("dataReady",function(){return o.oneDataReady()})}).on("dataReady",o.onDataReady.bind(o)).on("valChange",o.onCheckBoxChange(o)).on("cellKeyDown",o.onCellKeyDown.bind(o)).on("refreshHeader",o.onRefreshHeader.bind(o)).on("change",o.onChange(o,t,l,a.check,a.uncheck)),a.select&&t.on("rowSelect",o.onRowSelect(o,t)).on("beforeRowSelectDone",o.onBeforeRowSelect(o,t,l,a.check,a.uncheck)),t.on("beforeCheck",o.onBeforeCheck.bind(o))}).prototype=e.extend({cellRender:function(e,t){var n=this;return function(r){var i,o,a,l=r.rowData,s=e.dataIndx,d=e.cb,c=t.renderLabel,u=t.useLabel;if(!(l.pq_gtitle||l.pq_gsummary||r.Export))return i=d.check===l[s]?"checked":"",o=n.isEditable(l,e,r.rowIndx,r.colIndx,s)?"":"disabled",c&&(a=c.call(this,r)),null==a&&(a=e==t?"":r.formatVal||r.cellData),[u?" <label style='width:100%;'>":"","<input type='checkbox' ",i," ",o," />",a,u?"</label>":""].join("")}},checkAll:function(e,t){e=null==e||e;var n=this.that,r=this.colCB.cb.all?n.options.dataModel.data:n.pdata;return this.checkNodes(r,e,t)},checkNodes:function(e,t,n){if(e.length){null==t&&(t=!0);var r=this,i=r.that,o=r.colUI.dataIndx,a=r.colCB,l=a.cb,s=t?l.check:l.uncheck,d=a.dataIndx,c=e[0],u=c.pq_ri,h=function(){return i.refreshCell({rowIndx:u,dataIndx:o}),!1},f=e.map(function(e){var t={},n={};return t[d]=e[d],n[d]=s,{rowIndx:e.pq_ri,rowData:e,oldRow:t,newRow:n}}),p={rowIndx:u,rowData:c,dataIndx:o,check:t,rows:f},g={source:"checkbox"};return!1===i._trigger("beforeCheck",n,p)?h():(g.updateList=p.rows,g.history=g.track=!l.select&&null,!1===i._digestData(g)?h():void(l.maxCheck||1!=g.updateList.length?i.refresh({header:!1}):i.refreshRow({rowIndx:u})))}},isEditable:function(e,t,n,r,i){var o={rowIndx:n,rowData:e,column:t,colIndx:r,dataIndx:i};return this.that.isEditable(o)},onBeforeRowSelect:function(e,t,n,r,i){return function(o,a){if("checkbox"!=a.source){var l=function(o){for(var a,l,s,d=o.length,c=t.columns[n],u=t.colIndxs[n];d--;)a=(s=o[d]).rowIndx,l=s.rowData,e.isEditable(l,c,a,u,n)?l[n]=l.pq_rowselect?i:r:o.splice(d,1)};l(a.addList),l(a.deleteList)}}},onCellKeyDown:function(t,n){if(n.dataIndx==this.colUI.dataIndx&&(13==t.keyCode||32==t.keyCode))return e(t.originalEvent.target).find("input").click(),!1},onChange:function(e,t,n,r,i){return function(i,o){var a=[],l=[],s=e.colUI.dataIndx,d=function(e,n){e.length&&t._trigger("check",i,{rows:e,dataIndx:s,rowIndx:e[0].rowIndx,rowData:e[0].rowData,check:n})},c=function(e){e.forEach(function(e){var t=e.newRow,i=e.oldRow;t.hasOwnProperty(n)&&(t[n]===r?a.push(e):i&&i[n]===r&&l.push(e))})};e.setValCBox(),c(o.addList),c(o.updateList),e.colCB.cb.select&&t.SelectRow().update({addList:a,deleteList:l,source:"checkbox"}),d(a,!0),d(l,!1)}},onCheckBoxChange:function(e){return function(t,n){return n.dataIndx==e.colUI.dataIndx?e.checkNodes([n.rowData],n.input.checked,t):void 0}},onDataReady:function(){this.setValCBox()},oneDataReady:function(){var e,t=this.that.get_p_data(),n=0,r=t.length,i=this.colCB,o=i.cb,a=i.dataIndx;if(null!=a&&t&&o.select)for(;r>n;n++)(e=t[n])&&(e[a]===o.check?e.pq_rowselect=!0:e.pq_rowselect&&(e[a]=o.check))},onRowSelect:function(e,t){return function(n,r){"checkbox"!=r.source&&(r.addList.length||r.deleteList.length)&&(e.setValCBox(),t.refresh({header:!1}))}}},pq.mixin.ChkGrpTree)}(jQuery),function(e){function t(e,t,n){for(var r=0,i=e.length;i>r;r++){for(var o,a=e[r],l={},s=0,d=t.length;d>s;s++)l[o=t[s]]=a[o];n.push(l)}}var n,r=e.paramquery,i={};i.options={stateColKeys:{width:1,filter:["crules","mode"],hidden:1},stateKeys:{height:1,width:1,freezeRows:1,freezeCols:1,groupModel:["dataIndx","collapsed","grandSummary"],pageModel:["curPage","rPP"],sortModel:["sorter"]},detailModel:{cache:!0,offset:100,expandIcon:"ui-icon-triangle-1-se glyphicon glyphicon-minus",collapseIcon:"ui-icon-triangle-1-e glyphicon glyphicon-plus",height:180},dragColumns:{enabled:!0,acceptIcon:"ui-icon-check glyphicon-ok",rejectIcon:"ui-icon-closethick glyphicon-remove",topIcon:"ui-icon-circle-arrow-s glyphicon glyphicon-circle-arrow-down",bottomIcon:"ui-icon-circle-arrow-n glyphicon glyphicon-circle-arrow-up"},flex:{on:!0,one:!1,all:!0},track:null,mergeModel:{flex:!1},realFocus:!0,sortModel:{on:!0,type:"local",multiKey:"shiftKey",number:!0,single:!0,cancel:!0,sorter:[],useCache:!0,ignoreCase:!1},filterModel:{on:!0,newDI:[],type:"local",mode:"AND",header:!1,timeout:400}},i._create=function(){var e=this,t=e.options;e.listeners={},e._queueATriggers={},e.iHistory=new r.cHistory(e),e.iGroup=new r.cGroup(e),e.iMerge=new r.cMerge(e),e.iFilterData=new r.cFilterData(e),e.iSelection=new pq.Selection(e),e.iHeaderSearch=new r.cHeaderSearch(e),e.iUCData=new r.cUCData(e),e.iMouseSelection=new r.cMouseSelection(e),e._super(),new r.cFormula(e),e.iDragColumns=new r.cDragColumns(e),e.refreshToolbar(),"remote"===t.dataModel.location&&e.refresh(),e.on("dataAvailable",function(){e.one("refreshDone",function(){e._trigger("ready"),setTimeout(function(){e.element&&e._trigger("complete")},0)})}),e.__init(),e.refreshDataAndView({header:!0})},i.__init=function(){n||(n=e(["  ","</div>"].join("")).appendTo(document.body))},e.widget("paramquery.pqGrid",r._pqGrid,i),e.widget.extend=function(){var t,n,r=Array.prototype.shift,i=e.isPlainObject,o=e.isArray,a=e.widget.extend,l=r.apply(arguments);"boolean"==typeof l&&(t=l,l=r.apply(arguments));var s,d,c,u=arguments,h=0,f=u.length;for(null==t&&(t=f>1);f>h;h++)for(d in s=u[h])void 0!==(c=s[d])&&(n=!(h>0),i(c)?(l[d]=l[d]||{},a(n,l[d],c)):o(c)?l[d]=t&&n?c.slice():c:l[d]=c);return l},pq.grid=function(t,n){var r=e(t).pqGrid(n);return r.data("paramqueryPqGrid")||r.data("paramquery-pqGrid")},pq.grid.render={},r.pqGrid.regional={};var o=r.pqGrid.prototype;r.pqGrid.defaults=o.options,o.focus=function(t){var n,r,i,o,a,l,s,d,c=t||{},u=this,h=u.options,f=c.$td,p=document.activeElement,g=u.$cont,v=g[0],m=c.rowIndxPage,w=c.colIndx;if(f)null!=m&&null!=w||(m=(i=this.getCellIndices({$td:f})).rowIndxPage,w=i.colIndx);else{if(null==m||null==w){if(r=this._focusEle,p&&p!=document.body&&"pq-grid-excel"!=p.id&&"pq-body-outer"!=p.className)return void(o=!0);r?(m=r.rowIndxPage,w=r.colIndx):o=!0}null!=m&&(s=u.iMerge,l=m+u.riOffset,s.ismergedCell(l,w)&&(m=(d=s.getRootCellO(l,w)).rowIndxPage,w=d.colIndx),f=u.getCell({rowIndxPage:m,colIndx:w}))}null!=m&&null!=w&&(f[0]&&this.iRenderB.inViewport(m,w,f[0])?(p!=document.body&&e(p).blur(),g.find(".pq-focus").removeAttr("tabindex").removeClass("pq-focus"),g.removeAttr("tabindex"),r=this._focusEle=this._focusEle||{},f&&(n=f[0])&&f.hasClass("pq-grid-cell")&&!n.edited?(r.$ele&&r.$ele.length&&r.$ele[0].removeAttribute("tabindex"),r.$ele=f,r.rowIndxPage=m,r.colIndx=w,n.setAttribute("tabindex","-1"),o||(f.addClass("pq-focus"),n.focus())):(a=h.dataModel.data)&&a.length||v.setAttribute("tabindex",0)):((r=this._focusEle)&&g.find(".pq-focus").removeClass("pq-focus"),f&&(f.addClass("pq-focus"),this._focusEle={$ele:f,rowIndxPage:m,colIndx:w}),document.activeElement!=v&&(g.attr("tabindex",0),v.focus())))},o.onfocus=function(e){var t=this._focusEle;t&&this.getCell(t).addClass("pq-focus")},o.onblur=function(){var e=this._focusEle;if(e){var t=(e.rowIndxPage,e.colIndx,document.activeElement);this.$cont.find(".pq-focus").removeClass("pq-focus"),t&&t!=document.body&&"pq-grid-excel"!=t.id&&"pq-body-outer"!=t.className&&(this._focusEle={})}},o.callFn=function(e,t){return pq.getFn(e).call(this,t)},o.rowExpand=function(e){this.iHierarchy.rowExpand(e)},o.rowInvalidate=function(e){this.iHierarchy.rowInvalidate(e)},o.rowCollapse=function(e){this.iHierarchy.rowCollapse(e)},o._saveState=function(t,n,r){var i,o,a,l;for(i in r)(o=r[i])&&(a=t[i],e.isArray(o)?null!=a&&(l=n[i]=e.isPlainObject(n[i])?n[i]:{},o.forEach(function(e){l[e]=a[e]})):n[i]=a)},o.saveState=function(e){e=e||{};for(var t,n,r,i=this,o=i.element,a=i.options,l=a.stateColKeys,s=a.stateKeys,d=i.colModel,c=[],u=0,h=d.length,f=o[0].id;h>u;u++)n={dataIndx:(t=d[u]).dataIndx},i._saveState(t,n,l),c[u]=n;return r={colModel:c,datestamp:Date.now()},i._saveState(a,r,s),!1!==e.stringify&&(r=JSON.stringify(r),!1!==e.save&&"undefined"!=typeof Storage&&localStorage.setItem("pq-grid"+(f||""),r)),r},o.getState=function(){return"undefined"!=typeof Storage?localStorage.getItem("pq-grid"+(this.element[0].id||"")):void 0},o.loadState=function(t){t=t||{};var n,r=this,i=e.widget.extend,o=t.state||r.getState();if(!o)return!1;"string"==typeof o&&(o=JSON.parse(o));for(var a,l,s,d=o.colModel,c=[],u=[],h=r.options,f=h.stateColKeys,p=r.depth>1,g=p?r.colModel:h.colModel,v=0,m=d.length;m>v;v++)c[s=(a=d[v]).dataIndx]=a,u[s]=v;for(p||g.sort(function(e,t){return u[e.dataIndx]-u[t.dataIndx]}),v=0,m=g.length;m>v;v++)(a=c[s=(l=g[v]).dataIndx])&&r._saveState(a,l,f);return r.iCols.init(),i(h.sortModel,o.sortModel),i(h.pageModel,o.pageModel),r.Group().option(o.groupModel,!1),n={freezeRows:o.freezeRows,freezeCols:o.freezeCols},isNaN(1*h.height)||isNaN(1*o.height)||(n.height=o.height),isNaN(1*h.width)||isNaN(1*o.width)||(n.width=o.width),r.option(n),!1!==t.refresh&&r.refreshDataAndView(),!0},o.refreshToolbar=function(){var t,n=this,r=n.options,i=r.toolbar;if(n._toolbar&&(t=n._toolbar).destroy(),i){var o=(o=i.cls)||"",a=(a=i.style)||"",l=(l=i.attr)||"",s=i.items,d=e("<div class='"+o+"' style='"+a+"' "+l+" ></div>");t?t.widget().replaceWith(d):n.$top.append(d),t=pq.toolbar(d,{items:s,gridInstance:n,bootstrap:r.bootstrap}),r.showToolbar||d.css("display","none"),n._toolbar=t}},o.isLeftOrRight=function(e){return e>(this.options,this.freezeCols)?"right":"left"},o.ovCreateHeader=function(e){this.options.filterModel.header&&this.iHeaderSearch.createDOM(e)},o.filter=function(e){return this.iFilterData.filter(e)},o.Checkbox=function(e){return this.iCheckBox[e]},o._initTypeColumns=function(){for(var e=this.colModel,t=0,n=e.length,i=this.iCheckBox={};n>t;t++){var o=e[t],a=o.type;"checkbox"==a||"checkBoxSelection"==a?(o.type="checkbox",i[o.dataIndx]=new r.cCheckBoxColumn(this,o)):"detail"==a&&(o.dataIndx="pq_detail",this.iHierarchy=new r.cHierarchy(this,o))}},o.refreshHeader=function(){this.iRenderHead.refreshHS()},o.refreshHeaderFilter=function(e){var t=this.normalize(e),n=t.colIndx,r=t.column,i=this.iRenderHead,o=i.rows-1;this.options.filterModel.header&&(i.refreshCell(o,n,{},r),i.postRenderCell(r,n,o))},o._refreshHeaderSortIcons=function(){this.iHeader.refreshHeaderSortIcons()},o.pageData=function(){return this.pdata},o.getData=function(e){var n=(e=e||{}).dataIndx,r=n?n.length:0,i=e.data,o=!r,a=this.columns,l=this.options.dataModel,s=l.dataPrimary||l.data||[],d=l.dataUF||[],c=[];if(!r)return d.length?s.concat(d):s;i?t(i,n,c):(t(s,n,c),t(d,n,c));for(var u=[],h=n.reduce(function(e,t){var n=a[t];return n&&e.push({dataIndx:t,dir:"up",dataType:n.dataType,sortType:n.sortType}),e},[]),f={},p=0,g=c.length;g>p;p++){var v=c[p],m=JSON.stringify(v);f[m]||(u.push(v),f[m]=1)}return this.iSort._sortLocalData(h,u,o)},o.getPlainOptions=function(t,n){var r=t[0];if(e.isPlainObject(r)){var i=Object.keys(r);i[0]!==n&&1==i.length&&(t=t.map(function(e){var t,r={};for(t in e)r[n]=t,r.pq_label=e[t];return r}))}else t=t.map(function(e){var t={};return t[n]=e,t});return t},o.getDataCascade=function(e,t,n){var r,i,o=this,a=o.options.filterModel,l=a.newDI.slice(),s=t?[t,e]:[e],d=l.indexOf(e);return"AND"==a.mode&&l.length&&"remote"!=a.type&&(d>=0&&l.splice(d,l.length),l.length&&(r=l.map(function(e){var t=o.getColumn({dataIndx:e}).filter;return{dataIndx:e,crules:t.crules||[t],mode:t.mode}}),i=o.filter({data:o.getData(),mode:"AND",rules:r}))),s=s.concat(n||[]),o.getData({data:i,dataIndx:s})},o.removeNullOptions=function(e,t,n){var r;return null==n?e.filter(function(e){var n=e[t];return null!=n&&""!==n||(r?void 0:(r=!0,e[t]="",!0))}):e.filter(function(e){var n=e[t];return null!=n&&""!==n})},o.get_p_data=function(){var e,t,n,r,i=this.options,o=i.pageModel,a=o.type,l=i.dataModel.data,s=this.pdata,d=[];return a?(t=o.rPP,n=this.riOffset,!s.length&&l.length&&(s=l.slice(n,n+t)),d=(e="remote"==a)?new Array(n):l.slice(0,n),r=e?[]:l.slice(n+t),d.concat(s,r)):s.length?s:l},o._onDataAvailable=function(e){e=e||{},this.pdata=[];var t=this.options,n=!e.data,r=e.source,i=e.sort,o=[],a=t.filterModel,l=t.dataModel,s=t.sortModel;return!1!==n&&!1!==e.trigger&&this._trigger("dataAvailable",e.evt,{source:r}),o=a&&a.on&&"local"==a.type?this.iFilterData.filterLocalData(e).data:l.data,"local"==s.type&&!1!==i&&(n?this.sort({refresh:!1}):o=this.iSort.sortLocalData(o,!0)),!1===n?o:void this.refreshView(e)},o.reset=function(t){var n,r,i=this,o=(t=t||{}).sort,a=i.options,l=!1!==t.refresh,s=e.extend,d=t.filter,c=t.group;(o||d||c)&&(o&&(n=!0===o?{sorter:[]}:o,s(a.sortModel,n)),d&&!l&&this.iFilterData.clearFilters(i.colModel),c&&(r=!0===c?{dataIndx:[]}:c,i.groupOption(r,!1)),l&&(d?(i.filter({oper:"replace",rules:[]}),i.refreshHeader()):o?i.sort():i.refreshView()))},o._trigger=r._trigger,o.on=r.on,o.one=r.one,o.off=r.off,o.pager=function(){var e;return this.pageI=this.pageI||((e=this.widget().find(".pq-pager")).length?e.pqPager("instance"):null),this.pageI},o.toolbar=function(){return this._toolbar.element},o.Columns=function(){return this.iCols}}(jQuery),function(e){var t=e.paramquery;t.cColModel=function(e){this.that=e,this.vciArr,this.ciArr,this.init()},t.cColModel.prototype={alter:function(e){var t=this.that;e.call(t),t.refreshCM(),t.refresh()},assignRowSpan:function(){for(var e,t,n,r,i=this.that,o=i.colModel.length,a=i.headerCells,l=i.depth,s=0;o>s;s++)for(t=0;l>t;t++)if(e=a[t][s],!(s>0&&e==a[t][s-1]||t>0&&e==a[t-1][s])){for(r=1,n=t+1;l>n;n++)e==a[n][s]&&r++;e.rowSpan=r}return a},autoGenColumns:function(){var t=this.that.options,n=t.columnTemplate||{},r=n.dataType,i=n.title,o=n.width,a=t.dataModel.data,l=pq.validation,s=[];if(a&&a.length){var d=a[0];e.each(d,function(e,t){var n="string";l.isInteger(t)?n=t+"".indexOf(".")>-1?"float":"integer":l.isDate(t)?n="date":l.isFloat(t)&&(n="float"),s.push({dataType:r||n,dataIndx:e,title:i||e,width:o||100})})}t.colModel=s},cacheIndices:function(){for(var e,t=this.that,n="JSON"==this.getDataType(),r={},i={},o={},a=t.colModel,l=0,s=a.length,d=0,c=this.vciArr=[],u=this.ciArr=[];s>l;l++){var h=a[l],f=h.dataIndx;null==f&&("pq_detail"==(f="detail"==h.type?"pq_detail":n?"dataIndx_"+l:l)&&(h.dataType="object"),h.dataIndx=f),r[f]=h,i[f]=l,h.validations&&(o[f]=o),h.hidden||(u[d]=l,c[l]=d,d++),h.align||(!(e=h.dataType)||"integer"!=e&&"float"!=e||(h.align="right"))}t.columns=r,t.colIndxs=i,t.validations=o},collapse:function(e){var t,n,r,i=e.collapsible,o=i.on||!1,a=e.colModel||[],l=a.length,s=l,d=0,c=i.last,u=c?l-1:0;if(l){for(;s--;)t=a[s],null===c?(r=t.showifOpen===o)&&d++:r=u!==s&&o,t.hidden=r,r||!(n=t.colModel)||t.collapsible||this.each(function(e){e.hidden=r},n);d==l&&this.each(function(e){e.hidden=!1},[a[0]])}},each:function(e,t){var n=this.that;(t||n.options.colModel).forEach(function(t){e.call(n,t),t.colModel&&this.each(e,t.colModel)},this)},extend:function(t,n){for(var r,i,o=e.extend,a=t.length;a--;){var l=t[a];for(r in n)void 0===l[r]&&(i=n[r],l[r]=i&&"object"==typeof i?o(!0,{},i):i)}},find:function(e,t){for(var n,r,i=this.that,o=t||i.options.colModel,a=0,l=o.length;l>a;a++){if(n=o[a],e.call(i,n))return n;if(n.colModel&&(r=this.find(e,n.colModel)))return r}},getHeaderCells:function(){for(var e=this.that,t=e.options.colModel,n=e.colModel.length,r=e.depth,i=[],o=0;r>o;o++){i[o]=[];for(var a=0,l=0,s=0;n>s;s++){var d;if(0==o)d=t[a];else{var c=i[o-1][s],u=c.colModel;if(u&&0!=u.length){for(var h=s-c.leftPos,f=0,p=0,g=0;g<u.length;g++)if((f+=u[g].childCount>0?u[g].childCount:1)>h){p=g;break}d=u[p]}else d=c}var v=d.childCount?d.childCount:1;s==l?(d.leftPos=s,i[o][s]=d,l+=v,t[a+1]&&a++):i[o][s]=i[o][s-1]}}return e.headerCells=i,i},getDataType:function(){var e=this.colModel;if(e&&e[0])return"string"==typeof e[0].dataIndx?"JSON":"ARRAY"},getci:function(e){return this.ciArr[e]},getvci:function(e){return this.vciArr[e]},getNextVisibleCI:function(e){for(var t=this.vciArr,n=this.that.colModel.length;n>e;e++)if(null!=t[e])return e},getPrevVisibleCI:function(e){var t=this.vciArr;for(this.that.colModel.length;e>=0;e--)if(null!=t[e])return e},getFirstVisibleCI:function(){return this.ciArr[0]},getLastVisibleCI:function(){var e=this.ciArr;return e[e.length-1]},getVisibleTotal:function(){return this.ciArr.length},init:function(e){var t,n,r=this,i=r.that,o=i.options,a=o.columnTemplate,l=o.colModel;l||(r.autoGenColumns(),l=o.colModel),t=r.nestedCols(l),i.depth=t.depth,(n=i.colModel=t.colModel).length,a&&r.extend(n,a),r.getHeaderCells(),r.assignRowSpan(),r.cacheIndices(),i._trigger("CMInit",null,e)},nestedCols:function(e,t,n,r){var i=e.length,o=[];null==t&&(t=1);for(var a=t,l=0,s=0,d=0,c=0;i>c;c++){var u,h=e[c],f=h.colModel;r&&(h.parent=r),!0===n&&(h.hidden=n),f&&f.length?(h.collapsible&&this.collapse(h),u=this.nestedCols(f,t+1,h.hidden,h),o=o.concat(u.colModel),u.colSpan>0?(u.depth>a&&(a=u.depth),h.colSpan=u.colSpan,l+=u.colSpan):h.colSpan=0,d+=u.o_colspan,h.o_colspan=u.o_colspan,h.childCount=u.childCount,s+=u.childCount):(h.hidden?h.colSpan=0:(h.colSpan=1,l++),d++,h.o_colspan=1,h.childCount=0,s++,o.push(h))}return{depth:a,colModel:o,colSpan:l,width:0,childCount:s,o_colspan:d}},reduce:function(e,t){var n=this.that,r=[];return(t||n.options.colModel).forEach(function(t,i){var o,a,l=e.call(n,t,i);l&&((a=l.colModel)&&a.length?(o=this.reduce(e,a)).length&&(l.colModel=o,r.push(l)):r.push(l))},this),r},hide:function(e){var t=this.that,n=t.columns;e.diShow=e.diShow||[],e.diHide=e.diHide||[],!1!==t._trigger("beforeHideCols",null,e)&&(e.diShow=e.diShow.filter(function(e){var t=n[e];return t.hidden?(delete t.hidden,!0):void 0}),e.diHide=e.diHide.filter(function(e){var t=n[e];return t.hidden?void 0:(t.hidden=!0,!0)}),t.refresh({colModel:!0}),t._trigger("hideCols",null,e))}}}(jQuery),function(e){function t(t,n){var r=this,i=t.options;r.that=t,r.type="detail",r.refreshComplete=!0,r.rowHtDetail=i.detailModel.height,t.on("cellClick",r.toggle.bind(r)).on("cellKeyDown",function(t,n){return t.keyCode==e.ui.keyCode.ENTER?r.toggle(t,n):void 0}).on("beforeViewEmpty",r.onBeforeViewEmpty.bind(r)).on("autoRowHeight",r.onAutoRowHeight.bind(r)).one("render",function(){t.iRenderB.removeView=r.removeView(r,t),t.iRenderB.renderView=r.renderView(r,t)}).one("destroy",r.onDestroy.bind(r)),n._render=r.renderCell.bind(r)}e.extend(e.paramquery.pqGrid.prototype,{parent:function(){return this._parent},child:function(e){return((this.normalize(e).rowData||{}).pq_detail||{}).child}}),e.paramquery.cHierarchy=t,t.prototype={detachCells:function(e){e.children().detach(),e.remove()},getCls:function(){return"pq-detail-cont-"+this.that.uuid},getId:function(e){return"pq-detail-"+e+"-"+this.that.uuid},getRip:function(e){return 1*e.id.split("-")[2]},onAutoRowHeight:function(){var t=this,n=this.that.iRenderB;n.$ele.find("."+t.getCls()).each(function(r,i){var o=t.getRip(i),a=n.getHeightCell(o);e(i).css("top",a)})},onBeforeViewEmpty:function(e,t){var n=t.rowIndxPage,r=this.that.iRenderB,i=t.region,o=n>=0?"#"+this.getId(n):"."+this.getCls(),a=n>=0?r.$ele.find(o):r["$c"+i].find(o);this.detachCells(a)},onDestroy:function(){(this.that.getData()||[]).forEach(function(e){e.child&&e.child.remove()})},onResize:function(e,t){var n,r=[];t.resize(function(){r.push(t[0]),clearTimeout(n),n=setTimeout(function(){var t=e.that.pdata,n=[];r.forEach(function(r){if(document.body.contains(r)){var i=e.getRip(r),o=r.offsetHeight,a=t[i],l=a.pq_detail.height||e.rowHtDetail;l!=o&&(a.pq_detail.height=o,n.push([i,o-l]))}}),r=[],n.length&&(e.that._trigger("onResizeHierarchy"),e.softRefresh(n))},150)})},removeView:function(t,n){var r=n.iRenderB.removeView;return function(n,i,o){var a,l,s,d=r.apply(this,arguments),c=t.getCls(),u=this.getCellRegion(n,o);for(a=n;i>=a;a++)(l=this.getRow(a,u))&&1==l.children.length&&(1==(s=e(l).children("."+c)).length&&(t.detachCells(s),l.parentNode.removeChild(l)));return d}},renderView:function(t,n){var r=n.iRenderB.renderView;return function(i,o,a,l){var s,d,c=r.apply(this,arguments),u=n.iRenderB,h=t.getCls()+" pq-detail",f=n.options,p=f.freezeRows,g=f.detailModel.init,v=this.data;if(t.refreshComplete){for(t.refreshComplete=!1,s=i;o>=s;s++)if((d=v[s])&&!d.pq_hidden){var m=d.pq_detail=d.pq_detail||{},w=m.show,x=m.child;if(!w)continue;x||"function"==typeof g&&(x=g.call(n,{rowData:d}),m.child=x);var y=x.parent(),C=u.getHeightCell(s),b="position:absolute;left:0;top:"+C+"px;padding:5px;width:100%;overflow:hidden;padding-left:"+(n.dims.wdContLeft+5)+"px;";if(y.length){if(!document.body.contains(y[0]))throw"incorrectly detached detail";y.css({top:C})}else y=e("<div role='gridcell' id='"+t.getId(s)+"' class='"+h+"' style='"+b+"'></div>").append(x),e(u.getRow(s,p>s?"tr":"right")).append(y),t.onResize(t,y);for(var I,_,q=y.find(".pq-grid"),R=0,D=q.length;D>R;R++)(_=(I=e(q[R])).pqGrid("instance"))._parent=n,I.hasClass("pq-pending-refresh")&&I.is(":visible")&&(I.removeClass("pq-pending-refresh"),_.refresh())}return t.refreshComplete=!0,c}}},renderCell:function(e){var t=this.that.options.detailModel,n=e.cellData,r=e.rowData;return r.pq_gsummary||r.pq_gtitle?"":"<div class='ui-icon "+(n&&n.show?t.expandIcon:t.collapseIcon)+"'></div>"},rowExpand:function(e){var t,n=this.that,r=n.normalize(e),i=n.options,o=r.rowData,a=r.rowIndxPage,l=i.detailModel,s="pq_detail";if(o){if(!1===n._trigger("beforeRowExpand",null,r))return;(t=o[s]=o[s]||{}).show=!0,l.cache||this.rowInvalidate(r),this.softRefresh([[a,t.height||this.rowHtDetail]],r)}},rowInvalidate:function(e){var t=this.that.getRowData(e),n="pq_detail",r=t[n],i=r?r.child:null;i&&(i.remove(),t[n].child=null)},rowCollapse:function(e){var t=this.that,n=t.options,r=t.normalize(e),i=r.rowData,o=r.rowIndxPage,a=n.detailModel,l=i?i.pq_detail:null;if(l&&l.show){if(r.close=!0,!1===t._trigger("beforeRowExpand",null,r))return;a.cache||this.rowInvalidate(r),l.show=!1,this.softRefresh([[o,-(l.height||this.rowHtDetail)]],r)}},softRefresh:function(e,t){var n=this.that,r=n.iRenderB;r.initRowHtArrDetailSuper(e),r.setPanes(),r.setCellDims(!0),t&&n.refreshRow(t),r.refresh()},toggle:function(e,t){var n=this.that,r=t.column,i=t.rowData,o=t.rowIndx,a=this.type;i.pq_gtitle||i.pq_gsummary||r&&r.type===a&&n[(i.pq_detail=i.pq_detail||{}).show?"rowCollapse":"rowExpand"]({rowIndx:o})}}}(jQuery),function(e){var t=function(e){var t=this;t.that=e,t.class="pq-grid-overlay",t.ranges=[],e.on("assignTblDims",t.onRefresh(t,e))};e.paramquery.cCells=t,t.prototype={addBlock:function(e,t){if(e&&this.addUnique(this.ranges,e)){var n=this.that,r=e.r1,i=e.c1,o=e.r2,a=e.c2,l=this.serialize(r,i,o,a),s=l+" "+e.type,d=l+" pq-number-overlay",c=l+" pq-head-overlay",u=n.iRenderB,h=function(e,t){return u.getCellCont(e,t)},f=this.shiftRC(r,i,o,a);if(f){r=f[0],i=f[1],o=f[2],a=f[3];var p,g,v,m,w,x,y,C,b,I,_=h(r,i),q=h(o,a);if(w=(f=u.getCellXY(r,i))[0]-1,x=f[1]-1,y=(f=u.getCellCoords(o,a))[2],b=(C=f[3])-x,I=y-w,_==q?this.addLayer(w,x,b,I,s,_):(p=h(r,a),g=h(o,i),v=_[0].offsetWidth,m=_[0].offsetHeight,g==_?(this.addLayer(w,x,b,v-w,s,_,"border-right:0;"),this.addLayer(0,x,b,y,s,q,"border-left:0;")):_==p?(this.addLayer(w,x,m-x,I,s,_,"border-bottom:0;"),this.addLayer(w,0,C,I,s,q,"border-top:0;")):(this.addLayer(w,x,m-x,v-w,s,_,"border-right:0;border-bottom:0"),this.addLayer(0,x,m-x,y,s,p,"border-left:0;border-bottom:0"),this.addLayer(w,0,C,v-w,s,g,"border-right:0;border-top:0"),this.addLayer(0,0,C,y,s,q,"border-left:0;border-top:0"))),I=n.options.numberCell.outerWidth||0,this.addLayer(0,x,b,I,d,u.$clt,""),this.addLayer(0,x,b,I,d,u.$cleft,""),0!=n.options.showHeader){w=(f=(u=n.iRenderHead).getCellXY(0,i))[0],x=f[1],y=(f=u.getCellCoords(n.headerCells.length-1,a))[2],b=(C=f[3])-x,I=y-w;var R=u.$cright;this.addLayer(w,x,b,I,c,R,""),R=u.$cleft,this.addLayer(w,x,b,I,c,R,"")}}}},addLayer:function(t,n,r,i,o,a,l){var s="left:"+t+"px;top:"+n+"px;height:"+r+"px;width:"+i+"px;"+(l||"");e("<svg class='"+this.class+" "+o+"' style='"+s+"'></svg>").appendTo(a)},addUnique:function(e,t){return e.filter(function(e){return t.r1==e.r1&&t.c1==e.c1&&t.r2==e.r2&&t.c2==e.c2})[0]?void 0:(e.push(t),!0)},getLastVisibleFrozenCI:function(){for(var e=this.that,t=e.colModel,n=e.options.freezeCols-1;n>=0;n--)if(!t[n].hidden)return n},getLastVisibleFrozenRIP:function(){for(var e=this.that,t=e.get_p_data(),n=e.riOffset,r=e.options.freezeRows+n-1;r>=n;r--)if(!t[r].pq_hidden)return r-n},getSelection:function(){var e=this.that,t=e.get_p_data(),n=e.colModel,r=[];return this.ranges.forEach(function(e){var i,o,a,l=e.r1,s=e.r2,d=e.c1,c=e.c2;for(o=l;s>=o;o++)for(i=t[o],a=d;c>=a;a++)r.push({dataIndx:n[a].dataIndx,colIndx:a,rowIndx:o,rowData:i})}),r},isSelected:function(e){var t=this.that.normalize(e),n=t.rowIndx,r=t.colIndx;return null==r||null==n?null:!!this.ranges.find(function(e){var t=e.r1,i=e.r2,o=e.c1,a=e.c2;return n>=t&&i>=n&&r>=o&&a>=r||void 0})},onRefresh:function(e,t){var n;return function(){clearTimeout(n),n=setTimeout(function(){t.element&&(e.removeAll(),t.Selection().address().forEach(function(t){e.addBlock(t)}))},50)}},removeAll:function(){var e=this.that,t=e.$cont,n=e.$header;t&&(t.children().children().children("svg").remove(),n.children().children().children("svg").remove()),this.ranges=[]},removeBlock:function(e){if(e){var t,n=e.r1,r=e.c1,i=e.r2,o=e.c2,a=this.that,l=this.ranges.findIndex(function(e){return n==e.r1&&r==e.c1&&i==e.r2&&o==e.c2});l>=0&&(this.ranges.splice(l,1),t="."+this.class+"."+this.serialize(n,r,i,o),a.$cont.find(t).remove(),a.$header.find(t).remove())}},serialize:function(e,t,n,r){return"r1"+e+"c1"+t+"r2"+n+"c2"+r},shiftRC:function(e,t,n,r){var i,o=this.that,a=o.iMerge,l=o.options,s=o.pdata.length,d=l.freezeRows,c=o.riOffset;return n-=c,(e=d>(e-=c)?Math.max(e,Math.min(0,n)):e)>=s||0>n?void 0:(n=Math.min(n,s-1),e+=c,n+=c,a.ismergedCell(e,t)&&(e=(i=a.getRootCell(e,t)).o_ri,t=i.o_ci),a.ismergedCell(n,r)&&(n=(i=a.getRootCell(n,r)).o_ri+i.o_rc-1,r=i.o_ci+i.o_cc-1),e-=c,n-=c,[e=Math.max(e,0),t,n=Math.min(n,s-1),r=Math.min(r,o.colModel.length-1)])}}}(jQuery),function(e){function t(e){e.shiftKey&&"pqGrid:mousePQUp"!=e.type||(this._trigger("selectEnd",null,{selection:this.Selection()}),this.off("mousePQUp",t),this.off("keyUp",t))}e.paramquery.pqGrid.prototype.Range=function(e,t){return new pq.Range(this,e,"range",t)},pq.extend=function(e,t,n){var r=function(){};r.prototype=e.prototype;var i=t.prototype=new r,o=e.prototype;for(var a in n){var l=o[a],s=n[a];i[a]=l?function(e,t){return function(){var n,r=this._super;return this._super=function(){return e.apply(this,arguments)},n=t.apply(this,arguments),this._super=r,n}}(l,s):s}i.constructor=t,i._base=e,i._bp=function(e){var t=arguments;return Array.prototype.shift.call(t),o[e].apply(this,t)}};var n=pq.Range=function(e,t,r,i){if(null==e)throw"invalid param";return this.that=e,this._areas=[],this instanceof n==0?new n(e,t,r,i):(this._type=r||"range",void this.init(t,i))};n.prototype=e.extend({add:function(e){this.init(e)},address:function(){return this._areas},addressLast:function(){var e=this.address();return e[e.length-1]},clear:function(){return this.copy({copy:!1,cut:!0,source:"clear"})},clearOther:function(e){var t,n=this._normal(e,!0),r=this.address();for(t=r.length-1;t>=0;t--){var i=r[t];i.r1==n.r1&&i.c1==n.c1&&i.r2==n.r2&&i.c2==n.c2||r.splice(t,1)}},newLine:function(e){return'"'+e.replace(/"/g,'""')+'"'},_copyArea:function(e,t,n,r,i,o,a,l,s,d,c){var u,h,f,p,g,v,m,w,x=this.that,y=x.readCell,C=this.getRenderVal,b=x.iMerge,I=[],_=x.riOffset,q=x.iRenderB;for(g=n;r>=g;g++)w=(m=i[g]).dataType,I[g]=!w||"string"==w||"html"==w;for(p=e;t>=p;p++){var R=[],D=l[p],M={},T={},E={rowIndx:p,rowIndxPage:p-_,rowData:D,Export:!0,exportClip:!0};for(g=n;r>=g;g++)v=(m=i[g]).dataIndx,!1!==m.copy&&(u=D[v],d&&((h=y(D,m,b,p,g))===u&&(E.colIndx=g,E.column=m,E.dataIndx=v,h=C(E,c,q)[0],I[g]&&/(\r|\n)/.test(h)&&(h=this.newLine(h))),R.push(h)),s&&void 0!==u&&(M[v]=void 0,T[v]=u));s&&a.push({rowIndx:p,rowData:D,oldRow:T,newRow:M}),f=R.join("\t"),R=[],o.push(f||" ")}},copy:function(e){e=e||{};var t,n,r,i,o,a=this.that,l=e.dest,s=!!e.cut,d=null==e.copy||e.copy,c=e.source||(s?"cut":"copy"),u=e.history,h=e.allowInvalid,f=[],p=[],g=a.get_p_data(),v=a.colModel,m=e.render,w=this.address();if(u=null==u||u,h=null==h||h,m=null==m?a.options.copyModel.render:m,w.length){if(w.forEach(function(e){t=e.type,n=e.r1,r=e.c1,i="cell"===t?n:e.r2,o="cell"===t?r:e.c2,this._copyArea(n,i,r,o,v,p,f,g,s,d,m)},this),d){var x=p.join("\n");if(e.clip){var y=e.clip;y.val(x),y.select()}else a._setGlobalStr(x)}if(l)a.paste({dest:l,rowList:f,history:u,allowInvalid:h});else if(s){!1!==a._digestData({updateList:f,source:c,history:u,allowInvalid:h})&&a.refresh({source:"cut",header:!1})}}},_countArea:function(e){var t=e,n=e.type,r=t.r1,i=t.c1,o=t.r2,a=t.c2;return"cell"===n?1:"row"===n?0:(o-r+1)*(a-i+1)},count:function(){for(var e="range"===this._type,t=this.address(),n=0,r=t.length,i=0;r>i;i++)n+=e?this._countArea(t[i]):1;return n},cut:function(e){return(e=e||{}).cut=!0,this.copy(e)},getIndx:function(e){return null==e?this._areas.length-1:e},getValue:function(){var e,t,n,r,i,o,a,l,s,d,c=this.address(),u=[],h=this.that;if(c.length){for(r=(e=c[0]).r1,i=e.c1,o=e.r2,a=e.c2,d=h.get_p_data(),l=r;o>=l;l++)for(t=d[l],s=i;a>=s;s++)n=t[h.colModel[s].dataIndx],u.push(n);return u}},hide:function(e){e=e||{};var t,n=this.that,r=n.colModel,i=n.get_p_data();this._areas.forEach(function(e){var n=e.type,o=e.r1,a=e.r2,l=e.c1,s=e.c2;if("column"===n)for(t=l;s>=t;t++)r[t].hidden=!0;else if("row"===n)for(t=o;a>=t;t++)i[t].pq_hidden=!0}),!1!==e.refresh&&n.refreshView()},indexOf:function(e){for(var t,n=(e=this._normal(e)).r1,r=e.c1,i=e.r2,o=e.c2,a=this.address(),l=0,s=a.length;s>l;l++)if("row"!==(t=a[l]).type&&n>=t.r1&&i<=t.r2&&r>=t.c1&&o<=t.c2)return l;return-1},index:function(e){for(var t,n=(e=this._normal(e)).type,r=e.r1,i=e.c1,o=e.r2,a=e.c2,l=this.address(),s=0,d=l.length;d>s;s++)if(n===(t=l[s]).type&&r===t.r1&&o===t.r2&&i===t.c1&&a===t.c2)return s;return-1},init:function(e,t){if(t=!1!==t,e)if("function"==typeof e.push)for(var n=0,r=e.length;r>n;n++)this.init(e[n],t);else{var i=this._normal(e,t),o=this._areas=this._areas||[];i&&o.push(i)}},merge:function(e){e=e||{};var t,n,r=this.that,i=r.options.mergeCells,o=this._areas[0];o&&(t=o.r2-o.r1+1,n=o.c2-o.c1+1,(t>1||n>1)&&(o.rc=t,o.cc=n,i.push(o),!1!==e.refresh&&r.refreshView()))},replace:function(e,t){var n=this._normal(e),r=this._areas,i=this.getIndx(t);r.splice(i,1,n)},remove:function(e){var t=this._areas,n=this.indexOf(e);n>=0&&t.splice(n,1)},resize:function(e,t){var n=this._normal(e),r=this._areas[this.getIndx(t)];return["r1","c1","r2","c2","rc","cc","type"].forEach(function(e){r[e]=n[e]}),this},rows:function(e){var t=this.that,n=[],r=this.addressLast();if(r)for(var i=r.r1,o=r.c1,a=r.r2,l=r.c2,s=r.type,d=null==e?a:i+e,c=null==e?i:i+e;d>=c;c++)n.push({r1:c,c1:o,r2:c,c2:l,type:s});return pq.Range(t,n,"row")},_normal:function(e,t){if(e.type)return e;var n;if("function"==typeof e.push){n=[];for(var r=0,i=e.length;i>r;r++){var o=this._normal(e[r],t);o&&n.push(o)}return n}var a,l,s,d,c=this.that,u=c.get_p_data().length-1,h=c.colModel.length-1,f=(f=e.r1)>u?u:f,p=(p=e.c1)>h?h:p,g=e.rc,v=e.cc;return g=(s=(s=g?f+g-1:e.r2)>u?u:s)-f+1,v=(d=(d=v?p+v-1:e.c2)>h?h:d)-p+1,0>h||0>u?null:(f>s&&(a=f,f=s,s=a),p>d&&(a=p,p=d,d=a),null!=f||null!=p?(null==f?(f=0,s=u,d=null==d?p:d,l="column"):null==p?(e._type,p=0,s=null==s?f:s,d=h,l=e._type||"row"):null==s||f==s&&p==d?(l="cell",s=f,d=p):l="block",t&&(f=(n=c.iMerge.inflateRange(f,p,s,d))[0],p=n[1],s=n[2],d=n[3]),e.r1=f,e.c1=p,e.r2=s,e.c2=d,e.rc=g,e.cc=v,e.type=e.type||l,e):void 0)},select:function(){var e=this.that.iSelection,t=this._areas;return t.length&&(e.removeAll({trigger:!1}),t.forEach(function(t){e.add(t,!1)}),e.trigger()),this},unhide:function(e){e=e||{};var t,n=this.that,r=n.colModel,i=n.get_p_data();this._areas.forEach(function(e){var n=e.type,o=e.r1,a=e.r2,l=e.c1,s=e.c2;if("column"===n)for(t=l;s>=t;t++)r[t].hidden=!1;else if("row"===n)for(t=o;a>=t;t++)i[t].pq_hidden=!1}),!1!==e.refresh&&n.refreshView()},unmerge:function(e){e=e||{};var t=this.that,n=t.options.mergeCells,r=this._areas[0];if(r){for(var i=0;i<n.length;i++){var o=n[i];if(o.r1===r.r1&&o.c1===r.c1){n.splice(i,1);break}}!1!==e.refresh&&t.refreshView()}},value:function(e){var t,n,r,i,o,a=0,l=this.that,s=l.colModel,d=[],c=this.address();if(void 0===e)return this.getValue();for(var u=0;u<c.length;u++){n=(t=c[u]).r1,r=t.c1,i=t.r2,o=t.c2;for(var h=n;i>=h;h++){for(var f=l.normalize({rowIndx:h}),p=f.rowData,g=f.rowIndx,v={},m={},w=r;o>=w;w++){var x=s[w].dataIndx;m[x]=e[a++],v[x]=p[x]}d.push({rowData:p,rowIndx:g,newRow:m,oldRow:v})}}return d.length&&(l._digestData({updateList:d,source:"range"}),l.refresh({header:!1})),this}},pq.mixin.render);var r=pq.Selection=function(t,n){if(null==t)throw"invalid param";return this instanceof r==0?new r(t,n):(this._areas=[],this.that=t,this.iCells=new e.paramquery.cCells(t),void this._base(t,n))};pq.extend(n,r,{add:function(e,t){var n=this._normal(e,!0),r=this.iCells;this.indexOf(n)>=0||(r.addBlock(n),this._super(n),!1!==t&&this.trigger())},clearOther:function(e){var t=this.iCells,n=this._normal(e,!0);this.address().forEach(function(e){e.r1==n.r1&&e.c1==n.c1&&e.r2==n.r2&&e.c2==n.c2||t.removeBlock(e)}),this._super(n),this.trigger()},getSelection:function(){return this.iCells.getSelection()},isSelected:function(e){return this.iCells.isSelected(e)},removeAll:function(e){e=e||{},this._areas.length&&(this.iCells.removeAll(),this._areas=[],!1!==e.trigger&&this.trigger())},resizeOrReplace:function(e,t){this.resize(e,t)||this.replace(e,t)},replace:function(e,t){var n=this.iCells,r=this._normal(e),i=this._areas,o=this.getIndx(t),a=i[o];n.removeBlock(a),n.addBlock(r),this._super(r,o),this.trigger()},resize:function(e,t){var n=this._normal(e,!0),r=n.r1,i=n.c1,o=n.r2,a=n.c2,l=this._areas||[];if(!l.length)return!1;var s=l[this.getIndx(t)],d=s.r1,c=s.c1,u=s.r2,h=s.c2;return!!(d===r&&c===i&&(d===r&&h===a)&&(u===o&&c===i)&&(u===o&&h===a))||void 0},selectAll:function(e){var t,n=(e=e||{}).type,r=this.that,i=r.colModel,o=e.all,a=o?0:r.riOffset,l=o?r.get_p_data().length:r.pdata.length,s=i.length-1,d=a+l-1;return"row"===n?(t={r1:a,r2:d},r.Range(t).select()):((t={r1:a,c1:0}).r2=d,t.c2=s,r.Range(t).select()),this},trigger:function(){var e=this.that;e._trigger("selectChange",null,{selection:this}),e.off("mousePQUp",t),e.off("keyUp",t),e.on("mousePQUp",t),e.on("keyUp",t)}})}(jQuery),function(e){var t=e.paramquery;e.widget("paramquery.pqToolbar",{options:{items:[],gridInstance:null,events:{button:"click",select:"change",checkbox:"change",textbox:"change",file:"change"}},_create:function(){var n,r=this.options,i=r.gridInstance,o=r.events,a=r.bootstrap,l=a.on,s=i.colModel,d=i.options.filterModel.timeout,c=r.items,u=this.element,h=0,f=c.length;for(u.addClass("pq-toolbar");f>h;h++){var p,g,v,m,w=c[h],x=w.type,y=w.value,C=w.icon,b=w.options||{},I=w.label,_=(_=(m=w.listener)?[m]:w.listeners)||[function(){}],q=w.cls,R=q||"",D=(R=(R=l&&"button"==x?a.btn+" "+R:R)?"class='"+R+"'":"",w.style),M=D?"style='"+D+"'":"",T=w.attr,E=T||"",k=I?"<label "+M+">"+I:"",S=I?"</label>":"",P=(P=I&&"button"!=x&&"file"!=x?[R,E]:[R,E,M]).join(" ");if(w.options=b,"textbox"==x)g=e([k,"<input type='text' "+P+">",S].join(""));else if("textarea"==x)g=e([k,"<textarea "+P+"></textarea>",S].join(""));else if("select"==x)"function"==typeof b&&(b=b.call(i,{colModel:s})),b=b||[],p=t.select({options:b,attr:P,prepend:w.prepend,groupIndx:w.groupIndx,valueIndx:w.valueIndx,labelIndx:w.labelIndx}),g=e([k,p,S].join(""));else if("file"==x)g=e(["<label class='btn btn-default' "+P+">",I||"File","<input type='file' style='display:none;'>","</label>"].join(""));else if("checkbox"==x)g=e([I?"<label "+M+">":"","<input type='checkbox' ",y?"checked='checked' ":"",P,">",I?I+"</label>":""].join(""));else if("separator"==x)g=e("<span class='pq-separator' "+[E,M].join(" ")+"></span>");else if("button"==x){var A="";l&&(A=C?"<span class='glyphicon "+C+"'></span>":""),g=e("<button type='button' "+P+">"+A+I+"</button>"),e.extend(b,{label:I||!1,icon:C,icons:{primary:l?"":C}}),g.button(b)}else"string"==typeof x?g=e(x):"function"==typeof x&&(p=x.call(i,{colModel:s,cls:R}),g=e(p));g.appendTo(u),v=this.getInner(g,I,x),"checkbox"!==x&&void 0!==y&&v.val(y);for(var $=0,H=_.length;H>$;$++){m=_[$];var F={};for(n in"function"==typeof m?F[o[x]]=m:F=m,F)pq.fakeEvent(v,n,d),v.on(n,this._onEvent(i,F[n],w))}}}}),e.extend(t.pqToolbar.prototype,{getInner:function(t,n,r){var i=t[0];return"LABEL"==i.nodeName.toUpperCase()?e(i.children[0]):t},refresh:function(){this.element.empty(),this._create()},_onEvent:function(t,n,r){return function(i){"checkbox"==r.type?r.value=e(i.target).prop("checked"):r.value=e(i.target).val(),n.call(t,i)}},_destroy:function(){this.element.empty().removeClass("pq-toolbar").enableSelection()},_disable:function(){null==this.$disable&&(this.$disable=e("<div class='pq-grid-disable'></div>").css("opacity",.2).appendTo(this.element))},_enable:function(){this.$disable&&(this.element[0].removeChild(this.$disable[0]),this.$disable=null)},_setOption:function(e,t){"disabled"==e&&(1==t?this._disable():this._enable())}}),pq.toolbar=function(t,n){var r=e(t).pqToolbar(n);return r.data("paramqueryPqToolbar")||r.data("paramquery-pqToolbar")}}(jQuery),function(e){var t=e.paramquery,n=t.pqGrid.prototype;n.options.trackModel={on:!1,dirtyClass:"pq-cell-dirty"},t.cUCData=function(e){this.that=e,this.udata=[],this.ddata=[],this.adata=[],this.options=e.options,e.on("dataAvailable",this.onDA(this))},t.cUCData.prototype={add:function(e){for(var t=this.that,n=this.adata,r=this.ddata,i=e.rowData,o=this.options.trackModel.dirtyClass,a=t.getRecId({rowData:i}),l=0,s=n.length;s>l;l++){var d=n[l];if(null!=a&&d.recId==a)throw"primary key violation";if(d.rowData==i)throw"same data can't be added twice."}for(l=0,s=r.length;s>l;l++)if(i==r[l].rowData)return void r.splice(l,1);var c=[];for(var u in i)c.push(u);t.removeClass({rowData:i,dataIndx:c,cls:o});e={recId:a,rowData:i};n.push(e)},commit:function(e){var t=this.that;if(null==e)this.commitAddAll(),this.commitUpdateAll(),this.commitDeleteAll();else{var n=e.history,r=[],i=t.options.dataModel.recIndx,o=e.type,a=e.rows;n=null!=n&&n,"add"==o?a?r=this.commitAdd(a,i):this.commitAddAll():"update"==o?a?this.commitUpdate(a,i):this.commitUpdateAll():"delete"==o&&(a?this.commitDelete(a,i):this.commitDeleteAll()),r.length&&(t._digestData({source:"commit",checkEditable:!1,track:!1,history:n,updateList:r}),t.refreshView({header:!1}))}},commitAdd:function(t,n){var r,i,o,a,l,s,d=this.that,c=d.colModel,u=c.length,h=this.adata,f=e.inArray,p=h.length,g=d.getValueFromDataType,v=[],m=t.length,w=[];for(i=0;m>i;i++)for(l=t[i],r=0;p>r;r++)if(s=!0,-1==f(a=h[r].rowData,w)){for(o=0;u>o;o++){var x=c[o],y=x.dataType,C=x.dataIndx;if(!x.hidden&&C!=n)if(g(a[C],y)!==g(l[C],y)){s=!1;break}}if(s){var b={},I={};b[n]=l[n],I[n]=a[n],v.push({rowData:a,oldRow:I,newRow:b}),w.push(a);break}}var _=[];for(r=0;p>r;r++)-1==f(a=h[r].rowData,w)&&_.push(h[r]);return this.adata=_,v},commitDelete:function(e,t){for(var n,r,i,o,a=this.ddata,l=a.length,s=this.udata;l--&&(r=(n=a[l].rowData)[t],i=e.length);)for(;i--;)if(r==e[i][t]){for(e.splice(i,1),a.splice(l,1),o=s.length;o--;)s[o].rowData==n&&s.splice(o,1);break}},commitUpdate:function(t,n){var r,i,o=this.that,a=this.options.trackModel.dirtyClass,l=this.udata,s=l.length,d=t.length,c=[];for(r=0;s>r;r++){var u=l[r],h=u.rowData,f=u.oldRow;if(-1==e.inArray(h,c))for(i=0;d>i;i++){var p=t[i];if(h[n]==p[n])for(var g in c.push(h),f)o.removeClass({rowData:h,dataIndx:g,cls:a})}}var v=[];for(r=0;s>r;r++)h=l[r].rowData,-1==e.inArray(h,c)&&v.push(l[r]);this.udata=v},commitAddAll:function(){this.adata=[]},commitDeleteAll:function(){for(var e,t=this.ddata,n=this.udata,r=n.length,i=t.length,o=0;r>0&&i>o;o++){for(e=t[o].rowData;r--;)n[r].rowData==e&&n.splice(r,1);r=n.length}t.length=0},commitUpdateAll:function(){for(var e=this.that,t=this.options.trackModel.dirtyClass,n=this.udata,r=0,i=n.length;i>r;r++){var o=n[r],a=o.oldRow,l=o.rowData;for(var s in a)e.removeClass({rowData:l,dataIndx:s,cls:t})}this.udata=[]},delete:function(e){for(var t=this.that,n=e.rowIndx,r=e.rowIndxPage,i=t.riOffset,o=(n=null==n?r+i:n,r=null==r?n-i:r,"remote"==t.options.pageModel.type?r:n),a=this.adata,l=this.ddata,s=t.getRowData(e),d=0,c=a.length;c>d;d++)if(a[d].rowData==s)return void a.splice(d,1);l.push({indx:o,rowData:s,rowIndx:n})},getChangesValue:function(t){t=t||{};for(var n=this.that,r=t.all,i=this.udata,o=this.adata,a=this.ddata,l=[],s=[],d=[],c=[],u=[],h=[],f=0,p=a.length;p>f;f++){var g=(x=a[f]).rowData,v={};for(var m in u.push(g),g)0!=m.indexOf("pq_")&&(v[m]=g[m]);h.push(v)}for(f=0,p=i.length;p>f;f++){var w=(x=i[f]).oldRow;g=x.rowData;if(-1==e.inArray(g,u)&&-1==e.inArray(g,l)){v={};if(!1!==r)for(var m in g)0!=m.indexOf("pq_")&&(v[m]=g[m]);else{for(var m in w)v[m]=g[m];v[n.options.dataModel.recIndx]=x.recId}l.push(g),s.push(v),d.push(w)}}for(f=0,p=o.length;p>f;f++){var x;g=(x=o[f]).rowData,v={};for(var m in g)0!=m.indexOf("pq_")&&(v[m]=g[m]);c.push(v)}return{updateList:s,addList:c,deleteList:h,oldList:d}},getChanges:function(){for(var t=(this.that,this.udata),n=this.adata,r=this.ddata,i=e.inArray,o=[],a=[],l=[],s=[],d=0,c=r.length;c>d;d++){var u=(f=r[d]).rowData;s.push(u)}for(d=0,c=t.length;c>d;d++){var h=(f=t[d]).oldRow;-1==i(u=f.rowData,s)&&-1==i(u,o)&&(o.push(u),a.push(h))}for(d=0,c=n.length;c>d;d++){var f;u=(f=n[d]).rowData;l.push(u)}return{updateList:o,addList:l,deleteList:s,oldList:a}},getChangesRaw:function(){var e=(this.that,this.udata),t=this.adata,n=this.ddata,r={updateList:[],addList:[],deleteList:[]};return r.updateList=e,r.addList=t,r.deleteList=n,r},isDirty:function(e){var t=this.that,n=this.udata,r=this.adata,i=this.ddata,o=!1,a=t.getRowData(e);if(a)for(var l=0;l<n.length;l++){if(a==n[l].rowData){o=!0;break}}else(n.length||r.length||i.length)&&(o=!0);return o},onDA:function(e){return function(t,n){"filter"!=n.source&&(e.udata=[],e.ddata=[],e.adata=[])}},rollbackAdd:function(e,t){for(var n=this.adata,r=[],i=(e.type,0),o=n.length;o>i;i++){var a=n[i].rowData;r.push({type:"delete",rowData:a})}return this.adata=[],r},rollbackDelete:function(e,t){for(var n=this.ddata,r=[],i=(e.type,n.length-1);i>=0;i--){var o=n[i],a=(o.indx,o.rowIndx),l=o.rowData;r.push({type:"add",rowIndx:a,newRow:l})}return this.ddata=[],r},rollbackUpdate:function(e,t){for(var n=this.that,r=this.options.trackModel.dirtyClass,i=this.udata,o=[],a=0,l=i.length;l>a;a++){var s=i[a],d=s.recId,c=s.rowData,u={},h=s.oldRow;if(null!=d){var f=[];for(var p in h)u[p]=c[p],f.push(p);n.removeClass({rowData:c,dataIndx:f,cls:r,refresh:!1}),o.push({type:"update",rowData:c,newRow:h,oldRow:u})}}return this.udata=[],o},rollback:function(e){var t=this.that,n=t.options.dataModel,r=t.options.pageModel,i=!e||null==e.refresh||e.refresh,o=e&&null!=e.type?e.type:null,a=[],l=[],s=[],d=n.data;null!=o&&"update"!=o||(l=this.rollbackUpdate(r,d)),null!=o&&"delete"!=o||(a=this.rollbackDelete(r,d)),null!=o&&"add"!=o||(s=this.rollbackAdd(r,d)),t._digestData({history:!1,allowInvalid:!0,checkEditable:!1,source:"rollback",track:!1,addList:a,updateList:l,deleteList:s}),i&&t.refreshView({header:!1})},update:function(t){var n=this.that,r=this.options.trackModel.dirtyClass,i=t.rowData||n.getRowData(t),o=n.getRecId({rowData:i}),a=t.dataIndx,l=t.refresh,s=n.columns,d=n.getValueFromDataType,c=t.row,u=this.udata,h=u.slice(0),f=!1;if(null!=o){for(var p=0,g=u.length;g>p;p++){var v=u[p],m=v.oldRow;if(v.rowData==i){for(var a in f=!0,c){var w=s[a].dataType,x=d(x=c[a],w),y=d(y=m[a],w);if(m.hasOwnProperty(a)&&y===x){var C={rowData:i,dataIndx:a,refresh:l,cls:r};n.removeClass(C),delete m[a]}else{C={rowData:i,dataIndx:a,refresh:l,cls:r};n.addClass(C),m.hasOwnProperty(a)||(m[a]=i[a])}}e.isEmptyObject(m)&&h.splice(p,1);break}}if(!f){m={};for(var a in c){m[a]=i[a];C={rowData:i,dataIndx:a,refresh:l,cls:r};n.addClass(C)}C={rowData:i,recId:o,oldRow:m};h.push(C)}this.udata=h}}},n.getChanges=function(e){if(this.blurEditor({force:!0}),e){var t=e.format;if(t){if("byVal"==t)return this.iUCData.getChangesValue(e);if("raw"==t)return this.iUCData.getChangesRaw()}}return this.iUCData.getChanges()},n.rollback=function(e){this.blurEditor({force:!0}),this.iUCData.rollback(e)},n.isDirty=function(e){return this.iUCData.isDirty(e)},n.commit=function(e){this.iUCData.commit(e)},n.updateRow=function(e){var t,n=this,r=e.rowList||[{rowIndx:e.rowIndx,newRow:e.newRow||e.row,rowData:e.rowData,rowIndxPage:e.rowIndxPage}],i=[];if(n.normalizeList(r).forEach(function(e){var t,n=e.newRow,r=e.rowData,o=e.oldRow={};if(r){for(t in n)o[t]=r[t];i.push(e)}}),i.length){var o={source:e.source||"update",history:e.history,checkEditable:e.checkEditable,track:e.track,allowInvalid:e.allowInvalid,updateList:i};if(!1===this._digestData(o))return!1;!1!==e.refresh&&((t=(i=o.updateList).length)>1?n.refresh({header:!1}):1==t&&n.refreshRow({rowIndx:i[0].rowIndx}))}},n.getRecId=function(e){var t=this.options.dataModel;e.dataIndx=t.recIndx;var n=this.getCellData(e);return null==n?null:n},n.getCellData=function(e){var t=e.rowData||this.getRowData(e),n=e.dataIndx;return t?t[n]:null},n.getRowData=function(e){if(!e)return null;var t,n=e.rowData;if(null!=n)return n;if(null==(t=e.recId)){var r=null!=(r=e.rowIndx)?r:e.rowIndxPage+this.riOffset;return d=this.get_p_data()[r]}for(var i=this.options.dataModel,o=i.recIndx,a=i.data,l=0,s=a.length;s>l;l++){var d;if((d=a[l])[o]==t)return d}return null},n.addNodes=function(e,t){t=null==t?this.options.dataModel.data.length:t,this._digestData({addList:e.map(function(e){return{rowIndx:t++,newRow:e}}),source:"addNodes"}),this.refreshView()},n.deleteNodes=function(e){this._digestData({deleteList:e.map(function(e){return{rowData:e}}),source:"deleteNodes"}),this.refreshView()},n.moveNodes=function(e,t){var n=this,r=n.options,i=n.riOffset,o=r.dataModel.data;t=null==t?o.length:t,n._trigger("beforeMoveNode"),e.forEach(function(e){t=pq.moveItem(e,o,o.indexOf(e),t)}),o!=n.pdata&&(n.pdata=o.slice(i,r.pageModel.rPP+i)),n._trigger("moveNode",null,{args:arguments}),n.refresh()},n.deleteRow=function(e){var t=this.normalizeList(e.rowList||[{rowIndx:e.rowIndx,rowIndxPage:e.rowIndxPage,rowData:e.rowData}]);return!!t.length&&(this._digestData({source:e.source||"delete",history:e.history,track:e.track,deleteList:t}),void(!1!==e.refresh&&this.refreshView({header:!1})))},n.addRow=function(e){var t,n,r=this.riOffset,i=this.options.dataModel,o=i.data=i.data||[];return e.rowData&&(e.newRow=e.rowData),null!=e.rowIndxPage&&(e.rowIndx=e.rowIndxPage+r),!(!(n=e.rowList||[{rowIndx:e.rowIndx,newRow:e.newRow}]).length||!1===this._digestData({source:e.source||"add",history:e.history,track:e.track,checkEditable:e.checkEditable,addList:n}))&&(!1!==e.refresh&&this.refreshView({header:!1}),null==(t=n[0].rowIndx)?o.length-1:t)}}(jQuery),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return setTimeout(e,10)},window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)},function(e){function t(e){var t=this;t.that=e,e.on("mousePQUp",t.onMousePQUp.bind(t)).on("cellClick",t.onCellClick.bind(t)).on("cellMouseDown",t.onCellMouseDown.bind(t)).on("cellMouseEnter",t.onCellMouseEnter.bind(t)).on("refresh refreshRow",t.onRefresh.bind(t))}var n=e.paramquery;n.cMouseSelection=t,t.prototype=e.extend({onCellMouseDown:function(e,t){if(!e.isDefaultPrevented()){var n=this.that,r=t.rowIndx,i=n.iSelection,o=t.colIndx,a=n.options.selectionModel,l=a.type,s=a.mode,d=i.addressLast();if("cell"!==l)return void n.focus(t);if(null!=o){if(-1==o){if(!a.row)return;o=void 0}if(e.shiftKey&&"single"!==s&&d&&null!=d.firstR){var c=d.firstR,u=d.firstC;i.resizeOrReplace({r1:c,c1:u,r2:r,c2:o,firstR:c,firstC:u})}else pq.isCtrl(e)&&"single"!==s?(this.mousedown={r1:r,c1:o},n.Selection().add({r1:r,c1:o,firstR:r,firstC:o})):(this.mousedown={r1:r,c1:o},i.clearOther({r1:r,c1:o}),i.resizeOrReplace({r1:r,c1:o,firstR:r,firstC:o}));return n.focus(t),!0}}},onCellMouseEnter:function(e,t){var n=this.that,r=n.options.selectionModel,i=r.type,o=this.mousedown,a=r.mode;if(o&&"single"!==a){if("cell"===i){var l=o.r1,s=o.c1,d=t.rowIndx,c=t.colIndx,u=n.Selection();n.scrollCell({rowIndx:d,colIndx:c}),u.resizeOrReplace({r1:l,c1:s,r2:d,c2:c})}n.focus(t)}},onCellClick:function(e,t){var n,r=this.that,i=r.options.selectionModel,o="single"==i.mode,a=i.toggle,l=r.iRows;if("row"==i.type){if(!i.row&&-1==t.colIndx)return;n=l.isSelected(t),o&&!n||a||!pq.isCtrl(e)?!o&&e.shiftKey?l.extend(t):!o||n&&a?(t.isFirst=!0,l[a?"toggle":"replace"](t)):n||l.replace(t):(t.isFirst=!0,l.toggle(t))}},onMousePQUp:function(){this.mousedown=null},onRefresh:function(){var e=this.that;this.setTimer(function(){e.element&&e.focus()},300)}},new n.cClass)}(jQuery),function(e){var t=null,n=!1,r="pq-grid-excel",i=e.paramquery,o=i.pqGrid.prototype;e.extend(o.options,{copyModel:{on:!0,render:!1,header:!0,zIndex:1e4},cutModel:{on:!0},pasteModel:{on:!0,compare:"byVal",select:!0,validate:!0,allowInvalid:!0,type:"replace"}}),e.extend(o,{_setGlobalStr:function(e){a.clip=e},canPaste:function(){return!!i.cExcel.clip},clearPaste:function(){i.cExcel.clip=""},copy:function(){return this.iSelection.copy()},cut:function(){return this.iSelection.copy({cut:!0,source:"cut"})},paste:function(e){(t=new a(this)).paste(e),t=null},clear:function(){var e=this.iSelection;e.address().length?e.clear():this.iRows.toRange().clear()}});var a=i.cExcel=function(e,t){this.that=e};a.clip="",a.prototype={createClipBoard:function(){var t=this.that,n=e("#pq-grid-excel-div"),i=t.options.copyModel,o=e("#"+r);0==o.length&&(n=e("<div id='pq-grid-excel-div'  style='position:fixed;top:20px;left:20px;height:1px;width:1px;overflow:hidden;z-index:"+i.zIndex+";'/>").appendTo(document.body),(o=e("<textarea id='"+r+"' autocomplete='off' spellcheck='false' style='overflow:hidden;height:10000px;width:10000px;opacity:0' />").appendTo(n)).css({opacity:0}).on("keyup",function(e){pq.isCtrl(e)&&t.element&&t._trigger("keyUp",e)})),o.on("focusin",function(e){e.stopPropagation()}),o.select()},destroyClipBoard:function(){this.clearClipBoard();var t=this.that,n=e(window).scrollTop(),r=e(window).scrollLeft();t.focus();var i=e(window).scrollTop(),o=e(window).scrollLeft();n==i&&r==o||window.scrollTo(r,n)},clearClipBoard:function(){e("#"+r).val("")},copy:function(e){var t=this.that,n=t.iSelection;return n.address().length?n.copy(e):void t.iRows.toRange().copy(e)},getRows:function(e){return(e=(e=e.replace(/\n$/,"")).replace(/(^|\t|\n)"(?=[^\t]*?[\r\n])([^"]|"")*"(?=$|\t|\n)/g,function(e){return e.replace(/(\r\n|\n)/g,"\r").replace(/^(\t|\n)?"/,"$1").replace(/"$/,"").replace(/""/g,'"')})).split("\n")},paste:function(t){t=t||{};var n=this.that,r=t.dest,i=t.clip,o=t.text||(i?i.length?i.val():"":a.clip),l=this.getRows(o),s=l.length,d=n.colModel,c=n.options,u=n.readCell,h=c.pasteModel,f="row",p=!1,g=d.length;if(h.on&&0!=o.length&&0!=s){for(var v=0;s>v;v++)l[v]=l[v].split("\t");var m,w,x,y,C,b,I=h.type,_=(r?n.Range(r):n.Selection()).address(),q=(_.length?_:n.iRows.toRange().address())[0],R={rows:l,areas:[q]};if(!1===n._trigger("beforePaste",null,R))return!1;q&&n.getRowData({rowIndx:q.r1})?(f="row"==q.type?"row":"cell",m=q.r1,x=q.r2,w=q.c1,y=q.c2):(f="cell",m=0,x=0,w=0,y=0),"replace"==I?(C=m,b=s>x-m+1?"extend":"repeat"):"append"==I?(C=x+1,b="extend"):"prepend"==I&&(C=m,b="extend");var D,M,T,E="extend"==b?s:x-m+1,k=0,S=[],P=[],A=0;for(v=0;E>v;v++){var $=l[k],H=v+C,F="replace"==I?n.getRowData({rowIndx:H}):null,O=F?{}:null,N={};void 0===$&&"repeat"===b&&($=l[k=0]),k++;var L=$,V=L.length;if(!M)if("cell"==f){if(M="extend"==(D=V>y-w+1?"extend":"repeat")?V:y-w+1,isNaN(M))throw"lenH NaN. assert failed.";M+w>g&&(M=g-w)}else M=g,w=0;var U=0,B=0,j=0;for(T=M,B=0;T>B;B++){U>=V&&(U=0);var z=d[B+w],W=L[U],G=z.dataIndx;!1!==z.copy?(U++,N[G]=W,O&&(O[G]=u(F,z))):(j++,"extend"==D&&g>T+w&&T++)}0==e.isEmptyObject(N)&&(null==F?(p=!0,S.push({newRow:N,rowIndx:H})):P.push({newRow:N,rowIndx:H,rowData:F,oldRow:O}),A++)}var K={addList:S,updateList:P,source:"paste",allowInvalid:h.allowInvalid,validate:h.validate};n._digestData(K),n[p?"refreshView":"refresh"]({header:!1}),h.select&&n.Range({r1:C,c1:w,r2:C+A-1,c2:"extend"==D?w+M-1+j:y}).select(),n._trigger("paste",null,R)}}},e(document).unbind(".pqExcel").bind("keydown.pqExcel",function(i){if(pq.isCtrl(i)){var o=e(i.target);if(!o.hasClass("pq-grid-cell")&&!o.is("#"+r)&&!o.hasClass("pq-body-outer"))return;var s,d=o.closest(".pq-grid");if(t||o.length&&d.length){if(!t){try{if((s=d.pqGrid("instance")).options.selectionModel.native)return!0}catch(e){return!0}(t=new a(s,o)).createClipBoard()}if("67"==i.keyCode||"99"==i.keyCode)t.copy({clip:e("#"+r)});else if("88"==i.keyCode)t.copy({cut:!0,clip:e("#"+r)});else if("86"==i.keyCode||"118"==i.keyCode)n=!0,t.clearClipBoard(),window.setTimeout(function(){t&&(t.paste({clip:e("#"+r)}),t.destroyClipBoard(),t=null),n=!1},3);else{var c=e("#"+r);if(c.length)document.activeElement==c[0]&&t.that.onKeyPressDown(i)}}}else{var u=i.keyCode,h=e.ui.keyCode;if(u==h.UP||u==h.DOWN||u==h.LEFT||u==h.RIGHT||u==h.PAGE_UP||u==h.PAGE_DOWN){if(l)return!1;((o=e(i.target)).hasClass("pq-grid-row")||o.hasClass("pq-grid-cell"))&&(l=!0)}}}).bind("keyup.pqExcel",function(r){var i=r.keyCode;if(n||!t||pq.isCtrl(r)||-1==e.inArray(i,[17,91,93,224])||(t.destroyClipBoard(),t=null),l){var o=e(r.target);o.hasClass("pq-grid-row")||o.hasClass("pq-grid-cell")||(l=!1)}});var l=!1}(jQuery),function(e){var t=e.paramquery,n=t.pqGrid.prototype.options;n.historyModel=n.historyModel||{on:!0,checkEditable:!0,checkEditableAdd:!1,allowInvalid:!0},(t.cHistory=function(e){var t=this;this.that=e,this.options=e.options,this.records=[],this.counter=0,this.id=0,e.on("keyDown",function(e,n){return t.onKeyDown(e,n)}).on("dataAvailable",function(e,n){"filter"!=n.source&&t.reset()})}).prototype={onKeyDown:function(e,t){var n="90",r="89",i=pq.isCtrl(e);return i&&e.keyCode==n?(this.undo(),!1):i&&e.keyCode==r?(this.redo(),!1):void 0},resetUndo:function(){if(0==this.counter)return!1;this.counter=0,this.that._trigger("history",null,{type:"resetUndo",num_undo:0,num_redo:this.records.length-this.counter,canUndo:!1,canRedo:!0})},reset:function(){if(0==this.counter&&0==this.records.length)return!1;this.records=[],this.counter=0,this.id=0,this.that._trigger("history",null,{num_undo:0,num_redo:0,type:"reset",canUndo:!1,canRedo:!1})},increment:function(){var e=this.records,t=e.length;if(t){var n=e[t-1].id;this.id=n+1}else this.id=0},push:function(t){var n=this.canRedo(),r=this.records,i=this.counter;r.length>i&&r.splice(i,r.length-i),r[i]=e.extend({id:this.id},t),this.counter++;var o,a,l=this.that;1==this.counter&&(o=!0),n&&this.counter==r.length&&(a=!1),l._trigger("history",null,{type:"add",canUndo:o,canRedo:a,num_undo:this.counter,num_redo:0})},canUndo:function(){return this.counter>0},canRedo:function(){return this.counter<this.records.length},processCol:function(e,t){var n=this.that;if(e.length){var r="add"==e.type;n[(r=t?r:!r)?"addColumn":"deleteColumn"]({colList:e,history:!1})}},undo:function(){var e=this.canRedo(),t=this.that,n=this.options.historyModel,r=this.records;if(!(this.counter>0))return!1;this.counter--;var i,o,a=r[this.counter],l=a.colList||[],s=(a.id,a.updateList.map(function(e){return{rowIndx:t.getRowIndx({rowData:e.rowData}).rowIndx,rowData:e.rowData,oldRow:e.newRow,newRow:e.oldRow}})),d=a.addList.map(function(e){return{rowData:e.newRow}}),c=a.deleteList.map(function(e){return{newRow:e.rowData,rowIndx:e.rowIndx}});return l.length?this.processCol(l):(t._digestData({history:!1,source:"undo",checkEditable:n.checkEditable,checkEditableAdd:n.checkEditableAdd,allowInvalid:n.allowInvalid,addList:c,updateList:s,deleteList:d}),t[c.length||d.length?"refreshView":"refresh"]({source:"undo",header:!1})),!1===e&&(i=!0),0==this.counter&&(o=!1),t._trigger("history",null,{canUndo:o,canRedo:i,type:"undo",num_undo:this.counter,num_redo:this.records.length-this.counter}),!0},redo:function(){var e=this.canUndo(),t=this.that,n=this.options.historyModel,r=this.counter,i=this.records;if(r==i.length)return!1;var o,a,l=i[r],s=l.colList||[],d=(l.id,l.updateList.map(function(e){return{rowIndx:t.getRowIndx({rowData:e.rowData}).rowIndx,rowData:e.rowData,newRow:e.newRow,oldRow:e.oldRow}})),c=l.deleteList.map(function(e){return{rowData:e.rowData}}),u=l.addList.map(function(e){return{newRow:e.newRow,rowIndx:e.rowIndx}});return s.length?this.processCol(s,!0):(t._digestData({history:!1,source:"redo",checkEditable:n.checkEditable,checkEditableAdd:n.checkEditableAdd,allowInvalid:n.allowInvalid,addList:u,updateList:d,deleteList:c}),t[u.length||c.length?"refreshView":"refresh"]({source:"redo",header:!1})),this.counter<i.length&&this.counter++,0==e&&(o=!0),this.counter==this.records.length&&(a=!1),t._trigger("history",null,{canUndo:o,canRedo:a,type:"redo",num_undo:this.counter,num_redo:this.records.length-this.counter}),!0}};var r=t.pqGrid.prototype;r.history=function(e){var t=e.method;return this.iHistory[t](e)},r.History=function(){return this.iHistory}}(jQuery),function(e){var t=e.paramquery;pq.filter={dpBeforeShow:function(t,n,r){return function(){var i,o,a=t.getDataCascade(n);a.length&&(i=""==a[0][n]?a[1][n]:a[0][n],o=a[a.length-1][n]),e(this).Uidatepicker("option","defaultDate",new Date(1==r?o:i))}},Uidatepicker:function(t){var n=t.column,r=n.dataIndx,i=this,o=t.filterUI,a=t.$editor,l=n.dataType,s={dateFormat:o.format||n.format,changeYear:!0,changeMonth:!0};return"date"==l?(a.each(function(t,n){var a=e.extend({},s,1==t&&o.dpOptions2||o.dpOptions);a.defaultDate||(a.beforeShow=a.beforeShow||pq.filter.dpBeforeShow(i,r,t)),e(n).Uidatepicker(a)}),!0):void 0},filterFnEq:function(t,n){var r=(t.column||{}).dataType;return"date"==r?this.filterFnTD(t,n):"bool"==r?{type:"checkbox"}:e.extend({maxCheck:1},this.filterFnSelect(t,n))},filterFnSelect:function(e,t){var n=e.column.dataIndx,r=e.indx;return{type:"select",style:"padding-right:16px;cursor:default;",attr:"readonly",valueIndx:n,labelIndx:n,options:this.options,init:0==r?this.rangeInit.bind(t):function(){}}},filterFnT:function(){return{type:"textbox",attr:"autocomplete='off'"}},filterFnTD:function(){return{type:"textbox",attr:"autocomplete='off'",init:pq.filter.Uidatepicker}},getVal:function(e){var t=(e.crules||[])[0]||{};return[t.value,t.value2,t.condition]},setVal:function(e,t){var n=e.crules=e.crules||[];return n[0]=n[0]||{},n[0].value=t,t}},e.extend(pq.filter,{conditions:{begin:{string:1,numberList:1,dateList:1,filterFn:pq.filter.filterFnT},between:{stringList:1,date:1,number:1,filter:{attr:"autocomplete='off'",type:"textbox2",init:pq.filter.Uidatepicker}},contain:{string:1,numberList:1,dateList:1,filterFn:pq.filter.filterFnT},equal:{string:1,bool:1,date:1,number:1,filterFn:pq.filter.filterFnEq},empty:{string:1,bool:1,date:1,number:1,nr:1},end:{string:1,numberList:1,dateList:1,filterFn:pq.filter.filterFnT},great:{stringList:1,number:1,date:1,filterFn:pq.filter.filterFnTD},gte:{stringList:1,number:1,date:1,filterFn:pq.filter.filterFnTD},less:{stringList:1,number:1,date:1,filterFn:pq.filter.filterFnTD},lte:{stringList:1,number:1,date:1,filterFn:pq.filter.filterFnTD},notbegin:{string:1,numberList:1,dateList:1,filterFn:pq.filter.filterFnT},notcontain:{string:1,numberList:1,dateList:1,filterFn:pq.filter.filterFnT},notequal:{string:1,date:1,number:1,bool:1,filterFn:pq.filter.filterFnEq},notempty:{string:1,bool:1,date:1,number:1,nr:1},notend:{string:1,numberList:1,dateList:1,filterFn:pq.filter.filterFnT},range:{cascade:1,string:1,number:1,date:1,bool:1,filterFn:pq.filter.filterFnSelect},regexp:{string:1,numberList:1,dateList:1,filterFn:pq.filter.filterFnT}},getConditionsCol:function(e,t){var n=t.conditionList||function(t){var n=t.getConditionsDT(pq.getDataType(e));return n.sort(),n}(this),r=t.conditionExclude,i={};return r&&(r.forEach(function(e){i[e]=1}),n=n.filter(function(e){return!i[e]})),n},getConditionsDT:function(e){var t,n,r,i=[],o=this.conditions;for(t in o)r=(n=o[t])[e+"List"],(n[e]&&0!==r||r)&&i.push(t);return i},getFilterUI:function(t,n){var r=t.column,i=r.filterFn,o=(0===t.indx?r.filter:{})||{},a=this.conditions[t.condition]||{},l=a.filterFn,s=a.filter||{};delete o.type,i=i&&i.call(n,t)||{},l=l&&l.call(this,t,n)||{};var d=e.extend({},s,l,o,i);return d.condition=t.condition,d.init=[],d.options=[],[i,o,l,s].forEach(function(e){e.init&&d.init.push(e.init),e.options&&d.options.push(e.options)}),d},options:function(e){var t=e.column,n=e.filterUI,r=n.groupIndx,i=t.dataIndx;return this.getDataCascade(i,r,n.diExtra)},getOptions:function(e,t,n){for(var r,i,o=t.options,a=e.dataIndx,l={column:e,dataIndx:a,filterUI:t,condition:t.condition},s=0,d=o.length;d>s;s++)if((r=o[s])&&(i="function"==typeof r?r.call(n,l):r))return i=n.getPlainOptions(i,a),n.removeNullOptions(i,t.dataIndx||a,t.groupIndx);return[]},rangeInit:function(t){var n=this,r=t.column,i=t.$editor,o=t.headMenu,a=t.filterUI;o||i.parent().off("click keydown").on("click keydown",function(o){if("keydown"!=o.type||o.keyCode==e.ui.keyCode.DOWN){var l=n.uuid+"_"+r.dataIndx;if(!e("#"+l).length){var s=new pq.cFilterMenu.select(n,r),d=e("<div id='"+l+"' style='width:270px;' class='pq-theme'><div></div></div>").appendTo(document.body),c=d.children();pq.makePopup(d[0],i),s.create(c,a),d.position({my:"left top",at:"left bottom",of:t.$editor})}}})},getType:function(e,t){var n=this.conditions[e]||{},r=n.filterFn;return(n.filter||{}).type||(r?r.call(this,{condition:e,column:t}):{}).type}});var n=function(e){var t=this;t.that=e,e.on("load",t.onLoad.bind(t)).on("filter clearFilter",t.onFilterChange.bind(t))};t.cFilterData=n;var r=n.conditions={equal:function(e,t){return e==t||void 0},notequal:function(e,t){return!r.equal(e,t)},contain:function(e,t){return-1!=(e+"").indexOf(t)||void 0},notcontain:function(e,t){return!r.contain(e,t)},empty:function(e){return 0==e.length||void 0},notempty:function(e){return!r.empty(e)},begin:function(e,t){return 0==(e+"").indexOf(t)||void 0},notbegin:function(e,t){return!r.begin(e,t)},end:function(e,t){var n=(e+="").lastIndexOf(t+="");return-1!=n&&n+t.length==e.length||void 0},notend:function(e,t){return!r.end(e,t)},regexp:function(e,t){return t.test(e)?(t.lastIndex=0,!0):void 0},great:function(e,t){return e>t||void 0},gte:function(e,t){return e>=t||void 0},between:function(e,t,n){return e>=t&&n>=e||void 0},range:function(t,n){return-1!=e.inArray(t,n)||void 0},less:function(e,t){return t>e||void 0},lte:function(e,t){return t>=e||void 0}};n.convert=function(e,t){return null==e||""===e?"":("string"==t?e=(e+"").trim().toUpperCase():"date"==t?e=Date.parse(e):"number"==t?1*e==e&&(e*=1):"bool"==t&&(e=String(e).toLowerCase()),e)},n.convertEx=function(e,t,n,r){var i=pq.getDataType({dataType:t}),o=pq.filter.conditions[n];return o[i]?this.convert(e,i):o.string?(r&&(e=pq.format(r,e)),"regexp"==n?e:this.convert(e,"string")):o.number?this.convert(e,"number"):void 0},n.prototype={addMissingConditions:function(e){var t=this.that;e.forEach(function(e){var n=t.getColumn({dataIndx:e.dataIndx}).filter||{};e.condition=void 0===e.condition?pq.filter.getVal(n)[2]:e.condition})},clearFilters:function(e){e.forEach(function(e){var t=e.filter,n=pq.filter.conditions;t&&(t.crules||[]).forEach(function(e){(n[e.condition]||{}).nr&&(e.condition=void 0),e.value=e.value2=void 0})})},compatibilityCheck:function(e){var t,n=e.data,r="Incorrect filter parameters. Please check upgrade guide";if(n)if(t=n[0]){if(t.hasOwnProperty("dataIndx")&&t.hasOwnProperty("value"))throw r}else if(!e.rules)throw r},copyRuleToColumn:function(e,t,n){var r=t.filter=t.filter||{},i=e.crules||[],o=i[0],a=o?o.condition:e.condition,l=o?o.value:e.value,s=o?o.value2:e.value2;"remove"==n?(r.on=!1,r.crules=a?[{condition:a,value:"range"==a?[]:void 0}]:void 0):(r.on=!0,r.mode=e.mode,r.crules=o?i:[{condition:a,value:l,value2:s}])},filter:function(e){e=e||{},this.compatibilityCheck(e);var t,n,r=this.that,i=r.options,o=!1,a=e.data,l=e.rules=e.rules||(e.rule?[e.rule]:[]),s=!a,d=i.dataModel,c=i.filterModel,u=e.mode||c.mode,h=e.oper,f="replace"==h,p=s?r.colModel:this.getCMFromRules(l),g=0,v=l.length;if("remove"!=h&&this.addMissingConditions(l),s){if(!1===r._trigger("beforeFilter",null,e))return;for(null!=e.header&&(o=e.header),f&&this.clearFilters(p);v>g;g++)t=l[g],n=r.getColumn({dataIndx:t.dataIndx}),this.copyRuleToColumn(t,n,h)}else for(;v>g;g++)t=l[g],n=p[g],this.copyRuleToColumn(t,n);var m={header:o,CM:p,data:a,rules:l,mode:u};return"remote"!=d.location||"local"==c.type?(m.source="filter",m.trigger=!1,r._onDataAvailable(m)):void r.remoteRequest({apply:s,CM:p,callback:function(){return r._onDataAvailable(m)}})},filterLocalData:function(e){e=e||{};var t,n,r=this.that,i=e.data,o=!i,a=o?r.colModel:e.CM,l=this.getRulesFromCM({CM:a,apply:o}),s=r.options,d=s.dataModel,c=r.iSort,u=i||d.data,h=d.dataUF=d.dataUF||[],f=[],p=[],g=s.filterModel,v=e.mode||g.mode;if(o)if(h.length){n=!0;for(var m=0,w=h.length;w>m;m++)u.push(h[m]);h=d.dataUF=[]}else{if(!l.length)return{data:u,dataUF:h};c.saveOrder()}if(g.on&&v&&l&&l.length){if(u.length)if(t={filters:l,mode:v,data:u},!1===r._trigger("customFilter",null,t))f=t.dataTmp,p=t.dataUF;else for(m=0,w=u.length;w>m;m++){var x=u[m];this.isMatchRow(x,l,v)?f.push(x):p.push(x)}u=f,h=p,0==c.readSorter().length&&(u=c.sortLocalData(u)),o&&(d.data=u,d.dataUF=h)}else n&&o&&(t={data:u},!1===r._trigger("clearFilter",null,t)&&(u=t.data),0==c.readSorter().length&&(u=c.sortLocalData(u)),d.data=u,r._queueATriggers.filter={ui:{type:"local"}});return o&&(r._queueATriggers.filter={ui:{type:"local",rules:l}}),{data:u,dataUF:h}},_getRulesFromCM:function(t,r,i,o,a,l,s){if("between"===i)""===o||null==o?o=s(a,l,i="lte"):""===a||null==a?o=s(o,l,i="gte"):(o=s(o,l,i),a=s(a,l,i));else if("regexp"===i){if("remote"==t)o=o.toString();else if("string"==typeof o)try{var d=r.modifiers||"gi";o=new RegExp(o,d)}catch(e){o=/.*/}}else if("range"===i||e.isArray(o)){if(null==o)return;if("function"==typeof o.push){if(0===o.length)return;for(var c=0,u=(o=o.slice()).length;u>c;c++)o[c]=s(o[c],l,i)}}else i&&(o=s(o,l,i),null!=a&&(a=s(a,l,i)));return[o,a,"remote"==t?"":((r.conditions||{})[i]||{}).compare||pq.filter.conditions[i].compare||n.conditions[i],i]},getRulesFromCM:function(e){var n=e.CM;if(!n)throw"CM N/A";for(var r=this,i=n.length,o=0,a=e.location,l="remote"===a,s=[],d=t.cFilterData,c=function(e,t,n){return l?(e=null==e?"":e).toString():d.convertEx(e,t,n)};i>o;o++){var u=n[o],h=u.filter;if(h){var f,p,g,v,m,w,x=u.dataIndx,y=u.dataType,C=h.crules||[h],b=[];y=y&&"stringi"!=y&&"function"!=typeof y?y:"string",C.forEach(function(e){v=e.condition,p=e.value,g=e.value2,v&&r.isCorrect(v,p,g)&&(w=r._getRulesFromCM(a,h,v,p,g,y,c))&&(p=w[0],g=w[1],m=w[2],b.push({condition:w[3],value:p,value2:g,cbFn:m}))}),b.length&&(f={dataIndx:x,dataType:y},l&&1==b.length?(f.value=b[0].value,f.value2=b[0].value2,f.condition=b[0].condition):(f.crules=b,f.mode=h.mode,l||(f.column=u)),s.push(f))}}return(e.apply||l)&&this.sortRulesAndFMIndx(s),s},getCMFromRules:function(e){var t=this.that;return e.map(function(e){var n=t.getColumn({dataIndx:e.dataIndx});return JSON.parse(JSON.stringify(n,function(e,t){return"parent"!=e?t:void 0}))})},getQueryStringFilter:function(){var e,t=this.that,n=t.options,r=n.stringify,i=n.filterModel,o=i.mode,a=t.colModel,l=i.newDI||[],s=this.getRulesFromCM({CM:a,location:"remote"}),d="";return i&&i.on&&s&&(s.length?(e={mode:o,data:s},d=!1===r?e:JSON.stringify(e)):(d="",l.length&&t._trigger("clearFilter"))),d},isCorrect:function(e,t,n){var r=pq.filter.conditions[e];if(r)return!!(null!=t&&""!==t||null!=n&&""!==n||r.nr);throw"filter condition NA"},isMatchCell:function(e,t){for(var r,i,o,a,l,s,d=e.dataIndx,c=e.column,u=e.dataType,h=e.mode,f=[],p=e.crules,g=p.length,v=t[d],m=0;g>m;m++)o=(l=p[m]).condition,r=l.value,i=l.value2,a=l.cbFn,o&&(s="regexp"===o?null==v?"":v:n.convertEx(v,u,o,c),f.push(!!a(s,r,i)));if(g=f.length,"AND"===h){for(m=0;g>m;m++)if(!f[m])return!1;return!0}for(m=0;g>m;m++)if(f[m])return!0;return!1},isMatchRow:function(e,t,n){var r,i,o=0,a=t.length,l="AND"==n,s=!l;if(0==a)return!0;for(;a>o;o++){if(r=t[o],(i=this.isMatchCell(r,e))&&(r.found=!0),s&&i)return!0;if(l&&!i)return!1}return l},onFilterChange:function(){var e=this.that,t=e.options,n=e.columns,r=t.filterModel,i="remote"==r.type,o=r.oldDI||[],a=!t.dataModel.data.length,l="pq-col-filtered",s=i||a,d=(r.rules||[]).reduce(function(e,t){return(t.found||s)&&e.push(t.dataIndx),e},[]);o.forEach(function(t){var r=e.getCellHeader({dataIndx:t}),i=n[t];r.length&&(r.removeClass(l),e.getCellFilter({dataIndx:t}).removeClass(l)),i.clsHead=(i.clsHead||"").split(" ").filter(function(e){return e!==l}).join(" ")}),d.forEach(function(t){var r=e.getCellHeader({dataIndx:t}),i=n[t];r.length&&(r.addClass(l),e.getCellFilter({dataIndx:t}).addClass(l)),i.clsHead=(i.clsHead||"")+" "+l}),r.oldDI=r.newDI=d},onLoad:function(){var e=this.that.options.dataModel.dataUF;e&&(e.length=0)},sortRulesAndFMIndx:function(e){var t=this.that.options.filterModel,n=t.newDI;e.sort(function(e,t){var r=e.dataIndx,i=t.dataIndx,o=n.indexOf(r),a=n.indexOf(i);return o>=0&&a>=0?o-a:o>=0?-1:a>=0?1:0}),t.rules=e}}}(jQuery),function(e){var t=e.paramquery,n=t.cSort=function(e){var t=this;t.that=e,t.sorters=[],t.tmpPrefix="pq_tmp_",t.cancel=!1};t.pqGrid.prototype.sort=function(e){if((e=e||{}).data)return this.iSort._sortLocalData(e.sorter,e.data);var t=this,n=this.options,r=n.dataModel,i=r.data,o=n.sortModel.type;if(i&&i.length||"local"!=o){var a,l=n.editModel,s=this.iSort,d=s.getSorter(),c=e.evt,u=null==e.single?s.readSingle():e.single,h=s.readCancel();if(e.sorter?e.addon?(e.single=u,e.cancel=h,a=s.addon(e)):a=e.sorter:a=s.readSorter(),a.length||d.length){l.indices&&t.blurEditor({force:!0});var f={dataIndx:a.length?a[0].dataIndx:null,oldSorter:d,sorter:a,source:e.source,single:u};if(!1===t._trigger("beforeSort",c,f))return void s.cancelSort();s.resumeSort(),"local"==o&&s.saveOrder(),s.setSorter(a),s.setSingle(u),s.writeSorter(a),s.writeSingle(u),"local"==o?(r.data=s.sortLocalData(i,!e.skipCustomSort),this._queueATriggers.sort={evt:c,ui:f},!1!==e.refresh&&this.refreshView()):"remote"==o&&(this._queueATriggers.sort={evt:c,ui:f},e.initByRemote||this.remoteRequest({initBySort:!0,callback:function(){t._onDataAvailable()}}))}}},n.prototype={addon:function(t){var n=(t=t||{}).sorter[0],r=n.dataIndx,i=n.dir,o=t.single,a=t.cancel,l=this.readSorter(),s=l[0];if(null==o)throw"sort single N/A";if(null!=r)if(o&&!t.tempMultiple)if((s=(l=l.length?[l[0]]:[])[0])&&s.dataIndx==n.dataIndx){var d=s.dir,c="up"===d?"down":a&&"down"===d?"":"up";""===c?l.length--:s.dir=c}else c=i||"up",l[0]=e.extend({},n,{dir:c});else{var u=this.inSorters(l,r);u>-1?"up"==(d=l[u].dir)?l[u].dir="down":a&&"down"==d?l.splice(u,1):1==l.length?l[u].dir="up":l.splice(u,1):l.push(e.extend({},n,{dir:"up"}))}return l},cancelSort:function(){this.cancel=!0},resumeSort:function(){this.cancel=!1},readSorter:function(){var e=this.that,t=e.columns,n=(e.options.sortModel.sorter||[]).filter(function(e){return!!t[e.dataIndx]});return pq.arrayUnique(n,"dataIndx")},setSingle:function(e){this.single=e},getSingle:function(){return this.single},readSingle:function(){return this.that.options.sortModel.single},setCancel:function(e){this.cancel=e},readCancel:function(){return this.that.options.sortModel.cancel},saveOrder:function(e){var t,n=this.that;if(!(n.options.dataModel.dataUF||[]).length&&!this.getSorter().length)for(var r=0,i=(e=n.get_p_data()).length;i>r;r++)(t=e[r])&&(t.pq_order=r)},getCancel:function(){return this.cancel},getQueryStringSort:function(){if(this.cancel)return"";var e=this.that,t=this.sorters,n=e.options.stringify;return t.length?!1===n?t:JSON.stringify(t):""},getSorter:function(){return this.sorters},setSorter:function(e){this.sorters=e.slice(0)},inSorters:function(e,t){for(var n=0;n<e.length;n++)if(e[n].dataIndx==t)return n;return-1},sortLocalData:function(e,t){var n=this.sorters;return n.length||e.length&&null!=e[0].pq_order&&(n=[{dataIndx:"pq_order",dir:"up",dataType:"integer"}]),this._sortLocalData(n,e,t)},compileSorter:function(e,t){var n=this,i=n.that,o=i.columns,a=i.options,l=[],s=[],d=[],c=n.tmpPrefix,u=a.sortModel,h=u.useCache,f=u.ignoreCase,p=e.length;t=t||a.dataModel.data;for(var g=0;p>g;g++){var v=e[g],m=v.sortIndx||v.dataIndx,w=o[m]||{},x="up"==(v.dir=v.dir||"up")?1:-1,y=w.sortType,C=(y=pq.getFn(y),"string"==(C=w.dataType||v.dataType||"string")&&f?"stringi":C),b=h&&"date"==C,I=b?c+m:m;s[g]=I,d[g]=x,l[g]=y?function(e,t){return function(n,r,i,o){return t(n,r,i,o,e)}}(y,r.sort_sortType):"integer"==C?r.sort_number:"float"==C?r.sort_number:"function"==typeof C?function(e,t){return function(n,r,i,o){return t(n,r,i,o,e)}}(C,r.sort_dataType):"date"==C?r["sort_date"+(b?"_fast":"")]:"bool"==C?r.sort_bool:"stringi"==C?r.sort_locale:r.sort_string,b&&n.addCache(t,C,m,I)}return n._composite(l,s,d,p)},_composite:function(e,t,n,r){return function(i,o){for(var a=0,l=0;r>l&&0==(a=e[l](i,o,t[l],n[l]));l++);return a}},_sortLocalData:function(e,t,n){if(!t)return[];if(!t.length||!e||!e.length)return t;var r=this,i=r.that,o=i.options.sortModel,a=r.compileSorter(e,t),l={sort_composite:a,data:t,sorter:e};return n&&!1===i._trigger("customSort",null,l)?t=l.data:t.sort(a),o.useCache&&r.removeCache(e,t)(),t},addCache:function(e,t,n,i){for(var o=r["get_"+t],a=e.length;a--;){var l=e[a];l[i]=o(l[n])}},removeCache:function(e,t){var n=this.tmpPrefix;return function(){for(var r=e.length;r--;){var i=e[r],o=n+i.dataIndx,a=t.length;if(a&&t[0].hasOwnProperty(o))for(;a--;)delete t[a][o]}}},writeCancel:function(e){this.that.options.sortModel.cancel=e},writeSingle:function(e){this.that.options.sortModel.single=e},writeSorter:function(e){this.that.options.sortModel.sorter=e}};var r={get_date:function(e){var t;return e?isNaN(t=Date.parse(e))?0:t:0},sort_number:function(e,t,n,r){var i=e[n],o=t[n];return((i=i?1*i:0)-(o=o?1*o:0))*r},sort_date:function(e,t,n,r){var i=e[n],o=t[n];return((i=i?Date.parse(i):0)-(o=o?Date.parse(o):0))*r},sort_date_fast:function(e,t,n,r){return(e[n]-t[n])*r},sort_dataType:function(e,t,n,r,i){return i(e[n],t[n])*r},sort_sortType:function(e,t,n,r,i){return i(e,t,n)*r},sort_string:function(e,t,n,r){var i=e[n]||"",o=t[n]||"",a=0;return i>o?a=1:o>i&&(a=-1),a*r},sort_locale:function(e,t,n,r){var i=e[n]||"",o=t[n]||"";return i.localeCompare(o)*r},sort_bool:function(e,t,n,r){var i=e[n],o=t[n],a=0;return i&&!o||!1===i&&null==o?a=1:(o&&!i||!1===o&&null==i)&&(a=-1),a*r}};pq.sortObj=r}(jQuery),function(e){function t(e,t,n){var r=0,i=t,o=e.length;for(n=n>o?o:n;n>i;i++)!0!==e[i].pq_hidden&&r++;return r}function n(e){this.that=e,this.mc=null;var t=this;e.on("dataReady columnOrder groupShowHide",function(n,r){e.options.mergeCells&&"pager"!==r.source&&t.init()})}e.paramquery.pqGrid.prototype.calcVisibleRows=t,e.paramquery.cMerge=n,n.prototype={calcVisibleColumns:function(e,t,n){var r=0,i=e.length;for(n=n>i?i:n;n>t;t++)!0!==e[t].hidden&&r++;return r},findNextVisibleColumn:function(e,t,n){for(var r,i=t;t+n>i;i++){if(!(r=e[i]))return-1;if(!r.hidden)return i}},findNextVisibleRow:function(e,t,n){for(var r,i=t;t+n>i;i++){if(!(r=e[i]))return-1;if(!r.pq_hidden)return i}},getData:function(e,t,n){var r,i=this.mc;if(i[e]&&(r=i[e][t])){var o=r.data;return o?o[n]:null}},inflateRange:function(e,t,n,r){var i=this.that,o=!1,a=i.options,l=a.groupModel.on?i.riOffset+i.pdata.length-1:a.dataModel.data.length-1,s=i.colModel.length-1,d=this.mc2;if(!d)return[e,t,n,r];e:for(var c=0,u=d.length;u>c;c++){var h=d[c],f=h.r1,p=h.c1,g=(g=f+h.rc-1)>l?l:g,v=(v=p+h.cc-1)>s?s:v;if((e>f&&g>=e||n>=f&&g>n)&&v>=t&&r>=p||(t>p&&v>=t||r>=p&&v>r)&&g>=e&&n>=f){o=!0,e=e>f?f:e,t=t>p?p:t,n=g>n?g:n,r=v>r?v:r;break e}}return o?this.inflateRange(e,t,n,r):[e,t,n,r]},init:function(){for(var e=this.that,n=this.findNextVisibleColumn,r=this.findNextVisibleRow,i=this.calcVisibleColumns,o=e.colModel,a=e.options.mergeCells||[],l=e.get_p_data(),s=[],d=[],c=0,u=a.length;u>c;c++){var h,f,p=a[c],g=p.r1,v=g,m=l[g],w=p.c1,x=w,y=o[w],C=p.rc,b=p.cc;if(y&&m&&(y.hidden&&(x=n(o,w,b)),h=i(o,w,w+b),m.pq_hidden&&(v=r(l,g,C)),!(1>(f=t(l,g,g+C))||1>h))){s.push({r1:g,c1:w,rc:C,cc:b}),d[v]=d[v]||[],d[v][x]={show:!0,rowspan:f,colspan:h,o_rowspan:C,o_colspan:b,style:p.style,cls:p.cls,attr:p.attr,r1:g,c1:w,v_r1:v,v_c1:x};for(var I={show:!1,r1:g,c1:w,v_r1:v,v_c1:x},_=g;g+C>_;_++){d[_]=d[_]||[];for(var q=w;w+b>q;q++)_==v&&q==x||(d[_][q]=I)}}}e._mergeCells=d.length>0,this.mc=d,this.mc2=s},ismergedCell:function(e,t){var n,r=this.mc;if(r&&r[e]&&(n=r[e][t])){var i=n.v_r1,o=n.v_c1;return e!=i||t!=o||{o_ri:n.r1,o_ci:n.c1,v_rc:n.rowspan,v_cc:n.colspan,o_rc:n.o_rowspan,o_cc:n.o_colspan}}return!1},isRootCell:function(e,t,n){var r,i=this.mc;if(i&&i[e]&&(r=i[e][t])){if("o"==n)return e==r.r1&&t==r.c1;var o=r.v_r1,a=r.v_c1;if(o==e&&a==t){var l=i[o][a];return{rowspan:l.rowspan,colspan:l.colspan}}}},removeData:function(e,t,n){var r,i=(this.that,this.mc);if(i&&i[e]&&(r=i[e][t])){var o=r.data;o&&(o[n]=null)}},getRootCell:function(e,t){var n,r,i,o=this.mc;return o&&o[e]&&(i=o[e][t])?(n=i.v_r1,r=i.v_c1,{o_ri:(i=o[n][r]).r1,o_ci:i.c1,v_ri:n,v_ci:r,v_rc:i.rowspan,v_cc:i.colspan,o_rc:i.o_rowspan,o_cc:i.o_colspan}):void 0},getRootCellO:function(e,t,n,r){var i,o="o"==(r=r||"o"),a=this.getRootCell(e,t);return a?(i={rowIndx:a[o?"o_ri":"v_ri"],colIndx:a[o?"o_ci":"v_ci"]},this.that.normalize(i)):(n&&(i={rowIndx:e,colIndx:t}),i?this.that.normalize(i):null)},getRootCellV:function(e,t,n){return this.getRootCellO(e,t,n,"v")},getClsStyle:function(e,t){return this.mc[e][t]},getMergeCells:function(e,t,n){for(var r,i,o,a=this.that,l=a.options.mergeCells,s=a.riOffset,d=s+n,c=[],u=l?l.length:0,h=0;u>h;h++)i=(r=l[h]).r1,o=r.c1,(!t||i>=s&&d>i)&&(t&&(i-=s),i+=e,c.push({r1:i,c1:o,r2:i+r.rc-1,c2:o+r.cc-1}));return c},setData:function(e,t,n){var r,i=this.mc;i[e]&&(r=i[e][t])&&(r.data=n)}}}(jQuery),function(e){function t(e,t,n,r){e.push("<li data-option='",n,"' class='pq-menu-item'>","<label>","<input type='checkbox' ",t[n]?"checked":"","/>",r["strGroup_"+n],"</label></li>")}var n=e.paramquery;n.pqGrid.defaults.groupModel={agg:{},cascade:!0,cbId:"pq_group_cb",collapsed:[],dataIndx:[],fixCols:!0,groupCols:[],header:!0,headerMenu:!0,icon:["ui-icon-triangle-1-se","ui-icon-triangle-1-e"],id:"pq_gid",parentId:"parentId",childstr:"children",menuItems:["merge","fixCols","grandSummary"],on:!1,refreshOnChange:!0,pivotColsTotal:"after",separator:"_",source:"checkboxGroup",showSummary:[],summaryInTitleRow:"collapsed",summaryEdit:!0,title:[],titleDefault:"{0} ({1})"},pq.aggregate={sum:function(e){for(var t,n=0,r=e.length;r--;)null!=(t=e[r])&&(n+=t-0);return n},avg:function(e,t){try{var n=pq.formulas.AVERAGE(e)}catch(e){n=e}return isNaN(n)?null:n},flatten:function(e){return e.filter(function(e){return null!=e})},max:function(e,t){var n,r=t.dataType;return(e=this.flatten(e)).length?("float"==r||"integer"==r?n=Math.max.apply(Math,e):"date"==r?(e.sort(function(e,t){return e=Date.parse(e),(t=Date.parse(t))-e}),n=e[0]):(e.sort(),n=e[e.length-1]),n):void 0},min:function(e,t){var n,r,i,o,a=t.dataType;if((e=this.flatten(e)).length){if("integer"==a||"float"==a)n=Math.min.apply(Math,e);else if("date"==a){for(o=e.length,r=[];o--;)i=e[o],r.push({dateO:i,dateP:Date.parse(i)});r.sort(function(e,t){return e.dateP-t.dateP}),n=r.length?r[0].dateO:void 0}else e.sort(),n=e[0];return n}},count:function(e){return this.flatten(e).length},stdev:function(e){try{var t=pq.formulas.STDEV(e)}catch(e){t=e}return isNaN(t)?null:t},stdevp:function(e){try{var t=pq.formulas.STDEVP(e)}catch(e){t=e}return isNaN(t)?null:t}};var r=n.cGroup=function(e){var t=this,n=e.options.groupModel;t.model="groupModel",t.cbId=n.cbId,t.childstr=n.childstr,t.id=n.id,t.parentId=n.parentId,t.cache=[],t.prop="pq_group_prop",t.that=e,n.on&&t.init()};r.beforeTrigger=function(e,t){return function(n){return!1===t._trigger("beforeGroupExpand",e,n)}},r.onGroupItemClick=function(t){return function(n){var r=e(n.target),i=e(this).data("indx");r.hasClass("pq-group-remove")?t.removeGroup(i):t.toggleLevel(i,n)}},r.prototype=e.extend({},pq.mixin.ChkGrpTree,pq.mixin.GrpTree,{addGroup:function(e,t){var n=this,r=n.that.options.groupModel.dataIndx||[],i=pq.objectify(r),o=r.slice();null==e||i[e]||(null==t?o.push(e):o.splice(t,0,e),n.option({dataIndx:o},"","",function(){n.triggerChange()}))},createHeader:function(){for(var t=this,n=t.that,i=t.$header,o=n.options,a=o.bootstrap,l=n.columns,s=a.on,d=o.groupModel,c=d.dataIndx,u=c.length;u--;)null==l[c[u]]&&c.splice(u,1);if(u=c.length,d.header&&d.on){if(i?i.empty():(i=t.$header=e("<div class='pq-group-header ui-helper-clearfix' ></div>").appendTo(n.$top)).on("click",".pq-group-item",r.onGroupItemClick(t)),u){for(var h=[],f=0;u>f;f++){var p=c[f],g=l[p],v=d.collapsed,m=s?a.groupModel.icon:d.icon,w=v[f]?m[1]:m[0];h.push("<div tabindex='0' class='pq-group-item' data-indx='",p,"' >","<span class='",t.toggleIcon,w,"' ></span>",g.pq_title||("string"==typeof g.title?g.title:p),"<span class='",t.groupRemoveIcon,"' ></span></div>")}i[0].innerHTML=h.join("")}t.initHeader(o,d)}else i&&(i.remove(),t.$header=null)},collapse:function(e){this.expand(e,!0)},collapseAll:function(e){this.expandAll(e,!0)},collapseTo:function(e){this.expandTo(e,!0)},concat:function(){var e=this.parentId,t=this.id,n=this.childstr;return function(r,i,o){var a=o[t];return i.forEach(function(t){t[e]=a,r.push(t)}),o[n]=i,r}},editorSummary:function(t,n){var r=this;return function(t){var i=t.rowData;if(i.pq_gsummary||i.pq_gtitle){var o,a=pq.aggregate,l=t.column,s=l.summary,d=s?s.edit:null,c=e.inArray,u=l.dataType,h=[""];if(c(t.dataIndx,n.dataIndx)>-1)return!1;if(!n.summaryEdit&&!d||!1===d)return!1;for(var f in o=r.getAggOptions(u),a)c(f,o)>-1&&h.push(f);return 1!=h.length&&{type:"select",prepend:n.prepend,options:n.options||h,valueIndx:n.valueIndx,labelIndx:n.labelIndx,init:n.init||r.editorInit,getData:n.getData||r.editorGetData}}}},editorInit:function(e){var t,n=e.column.summary,r=this.options.groupModel.dataIndx;n||(n=e.column.summary={}),t=n[r[e.rowData.pq_level]]||n.type,e.$cell.find("select").val(t)},editorGetData:function(e){var t=e.column,n=this.options.groupModel.dataIndx[e.rowData.pq_level],r=t.dataType,i=t.summary,o=e.$cell.find("select").val();return i[i[n]?n:"type"]=o,this.one("beforeValidate",function(e,n){n.allowInvalid=!0,n.track=!1,n.history=!1,t.dataType="string",this.one(!0,"change",function(e,n){t.dataType=r})}),o},expandTo:function(e,t){for(var n,r=this.that,i=!!t,o=e.split(","),a=o.length,l=this.childstr,s=this.getRoots(r.pdata),d=0;a>d&&(n=s[o[d]]);)i||(n.pq_close=i),s=n[l],d++;n&&(n.pq_close=i,!1!==r._trigger("group",null,{node:n,close:i})&&this.softRefresh())},expandAll:function(e,t){e=e||0,t=!!t,!1!==this.trigger({all:!0,close:t,level:e})&&(this.that.pdata.forEach(function(n){n.pq_level>=e&&(n.pq_close=t)}),this.createHeader(),this.softRefresh())},expand:function(e,t){e=e||0,!1!==this.trigger({close:!!t,level:e})&&(this.that.pdata.forEach(function(n){n.pq_level==e&&(n.pq_close=t)}),this.createHeader(),this.softRefresh())},firstCol:function(){return this.that.colModel[this.that.getFirstVisibleCI()]},flattenG:function(e,t,n,r){var i=this,o=n.dataIndx,a=n.titleInFirstCol,l=i.id,s=i.parentId,d=i.childstr,c=n.separator,u=a?i.firstCol().dataIndx:null,h=i.concat(),f=o.length,p=[];return function r(i,g,v,m){if(!f)return i;var w=g||0,x=(v=v||{})[d],y=o[w],C=n.collapsed[w];return(n.showSummary[w],t(i,y,e[y])).forEach(function(e){var t,n=e[1],i=e[0],o=(m?m+c:"")+i,g=n.length;p.length,(t={pq_gtitle:!0,pq_level:w,pq_close:C,pq_items:g})[l]=o,t[s]=v[l],t[d]=[],t[y]=i,a&&(t[u]=i),p.push(t),x&&x.push(t),f>w+1?r(n,w+1,t,o):p=h(p,n,t)}),p}},getAggOptions:function(e){return"integer"==e||"float"==e?e="number":"date"!==e&&(e="string"),this.that.options.summaryOptions[e].split(",")},getVal:function(t){var n=e.trim;return function(e,r,i){var o=e[r],a=i.groupChange;return a?(a=pq.getFn(a))(o):(o=n(o),t?o.toUpperCase():o)}},getSumCols:function(){return this._sumCols},getSumDIs:function(){return this._sumDIs},group:function(e){return function(t,n,r){var i={},o=[];return t.forEach(function(t){t.pq_hidden=void 0;var a=e(t,n,r),l=i[a];null==l&&(i[a]=l=o.length,o[l]=[a,[]]),o[l][1].push(t)}),o}},groupData:function(){var e=this,t=e.that,n=t.options.groupModel,r=e.getVal(n.ignoreCase),i=n.dataIndx,o=t.pdata,a=t.columns,l=(e.setSumCols(i),function(){});t.pdata=e.flattenG(a,e.group(r),n,l)(o),e.summaryT()},hideRows:function(e,t,n,r){for(var i,o=this.that.pdata,a=e,l=o.length;l>a;a++)if((i=o[a]).pq_gsummary)n||r?i.pq_level>=t&&(i.pq_hidden=!0):i.pq_level>t&&(i.pq_hidden=!0);else if(i.pq_gtitle){if(i.pq_level<=t)break;i.pq_hidden=!0}else i.pq_hidden=!0},init:function(){var e,t,n,r,i,o=this;o.onCMInit(),o._init||(o.mc=[],o.summaryData=[],t=(e=(i=o.that).options).groupModel,r=(n=e.bootstrap.on)?"glyphicon ":"ui-icon ",o.groupRemoveIcon="pq-group-remove "+r+(n?"glyphicon-remove":"ui-icon-close"),o.toggleIcon="pq-group-toggle "+r,i.on("cellClick",o.onCellClick(o)).on("cellKeyDown",o.onCellKeyDown(o,t)).on(!0,"cellMouseDown",o.onCellMouseDown()).on("change",o.onChange(o,t)).on("dataReady",o.onDataReady(o,i)).on("beforeFilterDone",function(){o.saveState()}).on("columnDragDone",o.onColumnDrag(o)).on("columnOrder",o.onColumnOrder(o,t)).on("customSort",o.onCustomSort.bind(o)).on("valChange",o.onCheckbox(o,t)).on("refresh refreshRow",o.onRefresh(o,t)).on("refreshHeader",o.onRefreshHeader.bind(o)),t.titleInFirstCol&&i.on("CMInit",o.onCMInit.bind(o)),i.on("beforeCheck",o.onBeforeCheck.bind(o)),o.setCascadeInit(!0),o._init=!0)},initHeadSortable:function(){var e=this,t=e.that,n=e.$header,r=t.options;n.sortable({axis:"x",distance:3,tolerance:"pointer",cancel:".pq-group-menu",stop:e.onSortable(e,r)})},initHeadDroppable:function(){var e=this,t=e.that,n=e.$header;n&&(n.droppable({accept:function(n){var r=1*n.attr("pq-col-indx");if(!isNaN(r)&&t.colModel[r])return e.acceptDrop},tolerance:"pointer",hoverClass:"pq-drop-hover",drop:e.onDrop(t,e)}),e.acceptDrop=!0)},initHeader:function(e,t){var n=this;if(n.$header){var r=n.$header,i=r.find(".pq-group-item");r.data("uiSortable")||n.initHeadSortable(),i.length||r.append("<span class='pq-group-placeholder'>"+e.strGroup_header+"</span>"),t.headerMenu&&n.initHeaderMenu()}},initHeaderMenu:function(){for(var n,r=this,i=r.that,o=i.BS_on,a=i.options,l=r.$header,s=["<ul class='pq-group-menu'><li>",o?"<span class='glyphicon glyphicon-chevron-left'></span>":"","<ul>"],d=a.groupModel,c=d.menuItems,u=0,h=c.length;h>u;u++)t(s,d,c[u],a);s.push("</ul></li></ul>"),(n=e(s.join("")).appendTo(l)).menu({icons:{submenu:"ui-icon-carat-1-w"},position:{my:"right top",at:"left top"}}),n.change(function(t){if("INPUT"==t.target.nodeName){var n=e(t.target).closest("li").data("option"),i={};i[n]=!a.groupModel[n],r.option(i)}})},isOn:function(){var e=this.that.options.groupModel;return e.on&&(e.dataIndx||[]).length},getRC:function(e){var t=1,n=this;return(e[n.childstr]||[]).forEach(function(e){t+=n.getRC(e)}),t+(e.pq_child_sum?1:0)},initmerge:function(){var e,t=this,n=t.that,r=n.options,i=r.groupModel,o=i.merge,a=i.summaryInTitleRow,l=i.titleInFirstCol,s=n.colModel.length,d=[],c=i.dataIndx,u=(c.length,n.pdata||[]);i.on&&(o?c.forEach(function(n,r){u.forEach(function(n){n.pq_gtitle&&r==n.pq_level&&(e=t.getRC(n),d.push({r1:n.pq_ri,rc:e,c1:r,cc:1}))})}):c.length&&u.forEach(function(e){e.pq_gtitle&&(a&&(e.pq_close||"collapsed"!==a)||d.push({r1:e.pq_ri,rc:1,c1:l?0:e.pq_level,cc:s}))})),d.length?(t.mc=r.mergeCells=d,n.iMerge.init()):this.mc.length&&(t.mc.length=0,n.iMerge.init())},initcollapsed:function(){var e,t,n,r,i=this.that,o=i.options.groupModel,a=o.merge,l=o.summaryInTitleRow,s=this.cacheClose,d=i.pdata,c=this.id;if(d)for(var u=0,h=d.length;h>u;u++)(e=d[u]).pq_gtitle&&(n=e.pq_level,r=null,s&&(null!=(t=s[e[c]])&&(delete s[e[c]],r=e.pq_close=t)),null==r&&(r=e.pq_close),r?this.hideRows(u+1,n,a,l):a&&(e.pq_hidden=!0))},updateItems:function(e){var t,n,r=this,i=0,o=r.childstr;return(e||r.that.pdata).forEach(function(e){e.pq_gtitle&&(t=e[o],(n=t.length)&&t[0][o]?e.pq_items=r.updateItems(t):e.pq_items=n,i+=e.pq_items)}),i},removeEmptyParent:function(e){var t=this,n=t.that.pdata,r=t.childstr;if(!e[r].length){var i=t.getParent(e),o=i?i[r]:n,a=o.indexOf(e);o.splice(a,1),i&&t.removeEmptyParent(i)}},addNodes:function(e,t,n){this.moveNodes(e,t,n,!0)},deleteNodes:function(e){this.moveNodes(e,null,null,null,!0)},moveNodes:function(e,t,n,r,i){var o,a,l,s=this,d=s.that,c=s.childstr,u="pq_hidden",h=d.options,f=h.groupModel,p=f.dataIndx,g=(s.id,h.dataModel.data),v=s.parentId,m=0,w=e.length;if(t){var x=t[c],y=x.length,C=x[0],b=(n=null==n||n>=y?y:n,g.indexOf(C)+n);if(C.pq_gtitle)throw"incorrect nodes"}if(e=e.slice(0),w){for(d._trigger("beforeMoveNode");w>m;m++)l=e[m],r?t[c].splice(n++,0,l):(a=(o=s.getParent(l))[c].indexOf(l),i?o[c].splice(a,1):o==t?n=pq.moveItem(l,t[c],a,n):(t[c].splice(n++,0,l),o[c].splice(a,1))),C&&(p.forEach(function(e){l[e]=C[e]}),l[v]=C[v],l[u]=C[u]),r?g.splice(b++,0,l):(a=g.indexOf(l),i?g.splice(a,1):b=pq.moveItem(l,g,a,b),s.removeEmptyParent(o));s.updateItems(),s.summaryT(),s.isCascade(f)&&(s.cascadeInit(),s.setValCBox()),d.iRefresh.addRowIndx(),s.initmerge(),d._trigger((r?"add":i?"delete":"move")+"Node",null,{args:arguments}),d.refresh({header:!1})}},onCellClick:function(t){return function(n,r){if(r.rowData.pq_gtitle&&e(n.originalEvent.target).hasClass("pq-group-icon"))if(pq.isCtrl(n)){var i=r.rowData;t[i.pq_close?"expand":"collapse"](i.pq_level)}else t.toggleRow(r.rowIndxPage,n)}},onCellMouseDown:function(){return function(t,n){n.rowData.pq_gtitle&&e(t.originalEvent.target).hasClass("pq-group-icon")&&t.preventDefault()}},onCellKeyDown:function(t,n){return function(r,i){return i.rowData.pq_gtitle&&e.inArray(i.dataIndx,n.dataIndx)>=0&&r.keyCode==e.ui.keyCode.ENTER?(t.toggleRow(i.rowIndxPage,r),!1):void 0}},onChange:function(e,t){return function(n,r){t.source==r.source||"checkbox"==r.source||(e.summaryT(),e.that.refresh())}},onColumnDrag:function(e){return function(t,n){var r=n.column,i=r.colModel;i&&i.length||!1===r.groupable||r.denyGroup?e.acceptDrop=!1:e.initHeadDroppable()}},onCustomSort:function(e,t){var n=this,r=n.that,i=r.options.groupModel,o=i.dataIndx,a=t.sorter,l=(a[0]||{}).dataIndx,s=r.columns[l],d=o.indexOf(l),c=r.colIndxs[l];if(o.length&&1==a.length){if(d>=0&&s.groupChange)return;if("pq_order"==l||(s.summary||{}).type)return n._delaySort(t);var u=o.map(function(e){return{dataIndx:e,dir:a[0].dir}}).concat(a);return u=pq.arrayUnique(u,"dataIndx"),n._delaySort(t,function(e){i.titleInFirstCol&&0===c?t.sort_composite=u.map(function(t){return r.iSort.compileSorter([t],e)}):t.sort_composite=u.map(function(t){return t.dataIndx==l?r.iSort.compileSorter([t],e):void 0})})}},_delaySort:function(e,t){var n=this,r=n.that,i=r.pdata;return i&&i.length?(r.one("skipGroup",function(){return t&&t(i),e.data=i,n.onCustomSortTree({},e),r.pdata=e.data,n.summaryRestore(),!1}),!1):void 0},summaryRestore:function(){var e=this,t=e.childstr;e.that.pdata=function e(n,r){var i=[];return n.forEach(function(n){i.push(n),e(n[t]||[],n).forEach(function(e){i.push(e)})}),r&&r.pq_child_sum&&i.push(r.pq_child_sum),i}(e.getRoots())},onDrop:function(e,t){return function(n,r){var i=1*r.draggable.attr("pq-col-indx"),o=e.colModel[i].dataIndx;t.addGroup(o),t.acceptDrop=!1}},onSortable:function(t,n){return function(){var r,i,o,a=[],l=n.groupModel.dataIndx;e(this).find(".pq-group-item").each(function(t,n){i=e(n),o=i.data("indx"),l[t]!==o&&(r=!0),a.push(o)}),r&&t.option({dataIndx:a},"","",function(){t.triggerChange()})}},onDataReady:function(e,t){return function(){var n=t.options.groupModel,r=n.dataIndx.length;n.on&&(r||n.grandSummary?(!1!==t._trigger("skipGroup")&&(e.groupData(),e.buildCache()),t.iRefresh.addRowIndx(),e.refreshColumns(),r&&(e.initcollapsed(),e.initmerge(),e.isCascade(n)&&e.cascadeInit())):e.refreshColumns(),e.setValCBox()),e.createHeader()}},onColumnOrder:function(e,t){return function(){return t.titleInFirstCol?(e.that.refreshView(),!1):void e.initmerge()}},option:function(t,n,r,i){var o=t.dataIndx,a=this,l=a.that,s=o?o.length:0,d=l.options.groupModel,c={source:r,oldGM:e.extend({},d),ui:t},u=d.dataIndx;0!=l._trigger("beforeGroupOption",null,c)&&(t.agg&&a.updateAgg(t.agg,d.agg),d.on&&u.length&&(!1===t.on||0===s)&&a.showRows(),e.extend(d,t),i&&i(),a.init(),a.setOption(),l._trigger("groupOption",null,c),!1!==n&&l.refreshView())},showRows:function(){this.that.options.dataModel.data.forEach(function(e){e.pq_hidden&&(e.pq_hidden=void 0)})},renderBodyCell:function(e,t){var n,r=this,i=t.checkbox,o=t.dataIndx.length-(r.isPivot()?1:0),a=t.titleInFirstCol,l=a?t.indent:0,s=l*o,d="";return o&&(s+=l),function(e){var o,l,c=e.rowData,u=e.column,h=u.renderLabel;return e.Export?void 0:(o=(o=h&&h.call(r.that,e))||e.formatVal||e.cellData,i&&a&&((n=r.renderCB(i,c,t.cbId))&&(d=n[0])),{text:((l=d&&(u.useLabel||t.useLabel))?"<label style='width:100%;'>":"")+d+(null==o?"":o)+(l?"</label>":""),style:"text-indent:"+s+"px;"})}},renderCell:function(e,t){var n=this.renderTitle(e,t),r=this.that,i=t.dataIndx,o=(pq.objectify(this.isPivot()?i.slice(0,i.length-1):i),this.renderBodyCell(e,t)),a=this.renderSummary(e);return function(e,i){e._render=e._renderG=function(e){var l=e.rowData,s=l.pq_gtitle;return i&&s?n(e):s||l.pq_gsummary?a(e):t.titleInFirstCol&&e.colIndx===r.getFirstVisibleCI()?o(e):void 0}}},renderSummary:function(e){var t=this.that,n=e.groupModel.dataIndx;return function(r){var i,o,a,l=r.rowData,s=r.column,d=s.summary;return d&&(o=d[n[l.pq_level]]||d.type)?"function"==typeof(a=e.summaryTitle[o])?a.call(t,r):(null==(i=r.formatVal)&&(i=null==(i=r.cellData)?"":i),"number"!=typeof i||s.format||parseInt(i)===i||(i=i.toFixed(2)),a?a.replace("{0}",i):i):void 0}},updateformatVal:function(e,t,n){var r=e.dataIndx[n],i=this.that.columns[r];i.format&&i!=t.column&&(t.formatVal=pq.format(i,t.cellData))},renderTitle:function(e,t){var n,r,i=this,o=i.that,a=t.checkbox,l=e.bootstrap,s=["pq-group-title-cell"],d=t.titleInFirstCol,c=t.indent,u=l.on,h=u?l.groupModel.icon:t.icon,f=u?["glyphicon "+h[0],"glyphicon "+h[1]]:["ui-icon "+h[0],"ui-icon "+h[1]];return function(e){var l,u,h,p,g=e.rowData,v=e.column,m=v.useLabel;return null!=e.cellData?(l=g.pq_close,u=g.pq_level,h=t.title,i.updateformatVal(t,e,u),h=null==(h="function"==typeof(h=v.renderLabel||h[u]||t.titleDefault)?h.call(o,e):h.replace("{0}",e.formatVal||e.cellData).replace("{1}",g.pq_items))?e.formatVal||e.cellData:h,p="pq-group-icon "+f[l?1:0],e.Export?h:(a&&d&&i.isCascade(t)&&((n=i.renderCB(a,g,t.cbId))&&(r=n[0],n[1]&&s.push(n[1]))),{text:[(m=r&&(null!=m?m:t.useLabel))?"<label style='width:100%;'>":"","<span class='",p,"'></span>",r,h,m?"</label>":""].join(""),cls:s.join(" "),style:"text-align:left;text-indent:"+c*u+"px;"})):void 0}},triggerChange:function(){this.that._trigger("groupChange")},removeGroup:function(e){var t=this;t.option({dataIndx:t.that.options.groupModel.dataIndx.filter(function(t){return t!=e})},"","",function(){t.triggerChange()})},refreshColumns:function(){for(var e,t,n,r=this.that,i=r.options,o=i.groupModel,a=o.on,l=o.fixCols,s=this.renderCell(i,o),d=o.dataIndx,c=d.length,u=r.colModel,h=u.length;h--;)(e=u[h])._renderG&&(delete e._render,delete e._renderG),e._nodrag&&(delete e._nodrag,delete e._nodrop),a&&(t=e.summary)&&t.type&&s(e);if(i.geditor=a?this.editorSummary(i,o):void 0,a)if(o.titleInFirstCol)s(e=this.firstCol(),!0);else for(h=c-1;h>=0;h--)s(e=r.getColumn({dataIndx:d[h]}),!0);if(l&&a)for(h=0;c>h;h++)(e=u[n=r.getColIndx({dataIndx:d[h]})])._nodrag=e._nodrop=!0,n!=h&&(r.iDragColumns.moveColumn(n,h,!0),r.refreshCM(null,{group:!0}))},saveState:function(e){var t=this.that,n=this.cacheClose=this.cacheClose||{},r=this.id,i=t.options.groupModel;i.on&&i.dataIndx.length&&(t.pdata.forEach(function(e){e.pq_gtitle&&(n[e[r]]=e.pq_close)}),e&&this.refreshView("group"))},setSumCols:function(e){var t=[],n=[];return e=pq.objectify(e),this.that.colModel.forEach(function(r){var i,o=r.summary;o&&o.type&&(i=r.dataIndx,e[i]||(t.push(r),n.push(i)))}),this._sumCols=t,this._sumDIs=n,[t,n]},setOption:function(){var e=this;e._init&&(e.refreshColumns(),e.summaryData.length=0,e.initmerge())},softRefresh:function(){var e=this,t=e.that;e.pdata=null,t.pdata.forEach(function(e){delete e.pq_hidden}),e.initcollapsed(),e.initmerge(),t.refresh({header:!1})},toggleLevel:function(t,n){var r=this.that.options.groupModel,i=r.collapsed,o=e.inArray(t,r.dataIndx),a=pq.isCtrl(n)?"All":"";this[(i[o]?"expand":"collapse")+a](o)},trigger:function(e){var t,n,i,o=e.evt,a=e.rd,l=e.level,s=e.all,d=e.close,c=this.that,u=c.options.groupModel,h=u.dataIndx,f=u.collapsed,p=r.beforeTrigger(o,c),g={};if(a){if(n=a[h[t=a.pq_level]],p(g={level:t,close:d=!a.pq_close,group:n}))return!1;a.pq_close=d}else if(s){if(p(g={all:!0,close:d,level:l}))return!1;for(i=l;i<h.length;i++)f[i]=d}else if(null!=l){if(p(g={level:l,close:d}))return!1;f[l]=d}return c._trigger("group",null,g)},toggleRow:function(e,t){var n=this.that.pdata[e];!1!==this.trigger({evt:t,rd:n})&&this.softRefresh()}}),n.pqGrid.prototype.Group=function(e){var t=this.iGroup;return null==e?t:void t.expandTo(e.indx)}}(jQuery),function(e){var t=e.paramquery,n=t.pqGrid.prototype,r=n.options;e(document).on("pqGrid:bootup",function(e,t){var n=t.instance;n.iDrag=new i(n)});var i=t.cDrag=function(e){var t=this,n=e.options,r=n.dragModel;r.on&&(t.that=e,n.postRenderInterval=n.postRenderInterval||-1,t.model=r,t.ns=".pq-drag",e.on("CMInit",t.onCMInit.bind(t)).on("create",t.onCreate.bind(t)))};n.Drag=function(){return this.iDrag},r.dragModel={afterDrop:function(){},beforeDrop:function(e,t){var n=this.Drag().getUI().nodes,r=this,i=this.Tree(),o=this.Group();i.isOn()?r=i:o.isOn()&&(r=o),r.deleteNodes(n)},diDrag:-1,dragNodes:function(e){return[e]},contentHelper:function(e,t){var n=t[0],r=t.length;return e.map(function(e){return n[e]}).join(", ")+(r>1?" ( "+t.length+" )":"")},clsHandle:"pq-drag-handle",clsDnD:"pq-dnd",iconAccept:"ui-icon ui-icon-check",iconReject:"ui-icon ui-icon-cancel",tmplDragN:"<span class='ui-icon ui-icon-grip-dotted-vertical pq-drag-handle' style='cursor:move;position:absolute;left:2px;top:4px;'>&nbsp;</span>",tmplDrag:"<span class='ui-icon ui-icon-grip-dotted-vertical pq-drag-handle' style='cursor:move;vertical-align:text-bottom;touch-action:none;float:left;'>&nbsp;</span>",cssHelper:{opacity:.7,position:"absolute",height:25,width:200,overflow:"hidden",background:"#fff",border:"1px solid",boxShadow:"4px 4px 2px #aaaaaa",zIndex:1001},tmplHelper:"<div class='pq-border-0 pq-grid-cell' style='pointer-events: none;'><span class='pq-icon' style='vertical-align:text-bottom;margin:0 5px;'></span><span></span></div>"},i.prototype={addIcon:function(e){var t="pq-icon";this.$helper.find("."+t).attr("class","").addClass(t+" "+e)},addAcceptIcon:function(){this.addIcon(this.model.iconAccept)},addRejectIcon:function(){this.addIcon(this.model.iconReject)},getHelper:function(t){var n=this,r=n.that,i=n.model,o=e(t.target).closest(".pq-grid-cell,.pq-grid-number-cell"),a=n.cellObj=r.getCellIndices({$td:o}),l=(o[0],i.diHelper||[i.diDrag]),s=a.rowData,d=a.nodes=i.dragNodes.call(r,s,t),c=i.contentHelper.call(r,l,d),u=n.$helper=e(i.tmplHelper);return u.find("span:eq(1)").html(c),n.addRejectIcon(),u.addClass("pq-theme pq-drag-helper").css(i.cssHelper).data("Drag",n),u[0]},getUI:function(){return this.cellObj},grid:function(){return this.that},isSingle:function(){return 1==this.getData().length},onCMInit:function(){var t=this.that,n=this.model,r=n.tmplDragN,i=n.isDraggable;(t.columns[n.diDrag]||t.options.numberCell).postRender=function(n){i&&!i.call(t,n)||e(n.cell).prepend(r)}},onCreate:function(){var t=this,n=t.model,r=-1==n.diDrag;t.that.on(!0,"cellMouseDown",t.onCellMouseDown.bind(t)),t.ele=t.that.$cont.children(":first").addClass(n.clsDnD+(r?" pq-drag-number":"")).draggable(e.extend({cursorAt:{left:2,top:20},containment:"document",appendTo:"body"},n.options,{handle:"."+n.clsHandle,helper:t.getHelper.bind(t),revert:t.revert.bind(t)}))},onDrop:function(e,t,n){this.model[e].call(this.that,t,n)},revert:function(t){t||this.$helper.hide("explode",function(){e(this).remove()})},onCellMouseDown:function(t){var n=this.model;e(t.originalEvent.target).closest("."+n.clsHandle+",.pq-grid-number-cell").length&&t.preventDefault()},over:function(e,t){this.addAcceptIcon()},out:function(e,t){this.addRejectIcon()}}}(jQuery),function(e){var t=e.paramquery,n=t.pqGrid.prototype,r=n.options;e(document).on("pqGrid:bootup",function(e,t){var n=t.instance;n.iDrop=new i(n)}),n.Drop=function(){return this.iDrop},r.dropModel={accept:".pq-dnd",drop:function(e,t){var n=t.helper.data("Drag"),r=this,i=r.Group(),o=r.Tree(),a=t.rowData,l=t.ratioY()<=.5,s=t.rowIndx+(l?0:1),d=function(e){var t;e.isFolder(a)?(t=a,l||(c=0)):(t=e.getParent(a),c=e.getChildren(t).indexOf(a)+(l?0:1)),h?e.moveNodes(f,t,c):e.addNodes(f,t,c)};if(n){var c,u=n.getUI(),h=n.grid()==r,f=u.nodes;i.isOn()?d(i):o.isOn()?d(o):h?r.moveNodes(f,s):r.addNodes(f,s)}}};var i=t.cDrop=function(e){var t=this,n=e.options.dropModel;t.model=n,n.on&&(t.that=e,t.ns=".pq-drop",e.on("create",t.onCreate.bind(t)))};i.prototype={addUI:function(t,n,r){var i=this;t.$cell=r,t.ratioY=function(){return i.ratioY(n,r)},e.extend(t,i.that.getCellIndices({$td:r}))},callFn:function(e,t,n){var r=this.model[e];return r?r.call(this.that,t,n):void 0},feedback:function(e,t){if(t.length){var n=this,r=n.getCellY(t),i=r[0],o=n.that.$cont,a=n.ratioY(e,t),l=o.offset().left,s=r[1];n.$feedback=n.$feedback||n.newF(),n.$feedback.css({top:.5>=a?i-1:s-1,left:l,width:o[0].clientWidth,zIndex:1e4}),o.css("cursor","copy")}},getCell:function(e){return e.closest(".pq-grid-cell,.pq-grid-number-cell")},getCellY:function(e){var t=e.offset().top;return[t,t+e[0].offsetHeight]},getDrag:function(e){return e.helper.data("Drag")},isOn:function(){return this.model.on},isOver:function(){},newF:function(){return e("<svg class='pq-border-0' style='box-sizing: border-box;position:absolute;border-width:2px;border-style:solid;pointer-events:none;height:0;'></svg>").appendTo(document.body)},onCreate:function(){var t=this;t.that.$cont.droppable(e.extend({tolerance:"pointer"},t.model.options,{accept:t.model.accept,over:t.onOver.bind(t),out:t.onOut.bind(t),drop:t.onDrop.bind(t)}))},onOver:function(e,t){var n=this,r=n.Drag=n.getDrag(t);t.draggable.on("drag.pq",n.onDrag.bind(n)),r&&r.over(e,t),n.isOver=function(){return!0},n.callFn("over",e,t)},onOut:function(e,t){t.draggable.off("drag.pq"),this.removeFeedback();var n=this.getDrag(t);n&&n.out(e,t),this.isOver=function(){},this.callFn("out",e,t)},onDrag:function(e,t){var n=this,r=pq.elementFromXY(e),i=n.getCell(r),o=n.Drag;(i.length||n.that.$cont[0].contains(r[0]))&&(n.addUI(t,e,i),t.rowData&&(n.denyDrop=!1===n.callFn("isDroppable",e,t),n.denyDrop?(o&&o.out(),n.removeFeedback()):(o&&o.over(),n.feedback(e,i))))},onDropX:function(e,t){var n=this.that,r=t.draggable,i=t.helper.data("Drag"),o=function(o){if(i&&i.grid()!=n)i.onDrop(o,e,t);else try{r.draggable("instance").options[o].call(r[0],e,t)}catch(e){}};o("beforeDrop"),this.callFn("drop",e,t),o("afterDrop")},onDrop:function(e,t){var n,r=this,i=pq.elementFromXY(e);r.onOut(e,t),r.denyDrop||((n=r.getCell(i)).length||r.that.$cont[0].contains(i[0]))&&(r.addUI(t,e,n),r.onDropX(e,t))},onMouseout:function(){this.removeFeedback()},onMouseup:function(){var t=this;t.removeFeedback(),e(document).off(t.ns),t.that.$cont.off(t.ns)},ratioY:function(e,t){if(t.length){var n=e.pageY,r=this.getCellY(t),i=r[0];return(n-i)/(r[1]-i)}},removeFeedback:function(){var e=this;e.$feedback&&(e.$feedback.remove(),e.$feedback=null),e.that.$cont.css("cursor","")}}}(jQuery),function(e){var t=e.paramquery;t.pqGrid.defaults.contextMenu={init:function(e,t){if(t.$td){var n={r1:t.rowIndx,c1:t.colIndx,rc:1,cc:1},r=this.Selection();-1==r.indexOf(n)&&(r.removeAll(),this.Range(n).select()),this.focus(t)}}},e(document).on("pqGrid:bootup",function(e,t){var r=t.instance;r.iContext=new n(r)});var n=t.cContext=function(e){var t=this,n=t.model=e.options.contextMenu;t.that=e,t.ns=".pq-cmenu",e.on("cellRightClick "+(n.head?"headRightClick":""),t.onContext.bind(t)).on("destroy",t.removeMenu.bind(t))};n.prototype={get$Item:function(t){return e(t.target).closest(".pq-cmenu-item")},getItem:function(e){return this.get$Item(e).data("item")},onContextDoc:function(e){this.getItem(e)||this.removeMenu()},onclickDoc:function(e){var t,n=this.getItem(e);n?(t=n.action)&&(!1!==t.call(this.that,e,this.ui,n)&&this.removeMenu()):this.removeMenu()},removeMenu:function(){this.$menu&&(this.$menu.remove(),delete this.$menu,e(document.body).off(this.ns))},removeSubMenu:function(e,t){var n="subMenu";t[n]&&(t[n].remove(),delete t[n])},onMouseOver:function(e){var t,n=this,r=n.getItem(e),i="subMenu",o=n.get$Item(e),a=(r||{}).subItems;o.siblings().each(n.removeSubMenu),a&&a.length&&!o[0][i]&&((t=n.createMenu(a)).position({my:"left top",at:"right top",of:o,collision:"flipfit"}),o[0][i]=t)},onRemove:function(t){return function(){e(this).find(".pq-cmenu-item").each(t.removeSubMenu)}},getItemHtml:function(e,t){if("separator"==e)return"<tr class='pq-cmenu-item'><td colspan=4 class='pq-bg-0' style='height:2px;'></td></td>";var n=e.style,r=e.tooltip,i=n?'style="'+n+'"':"",o=r?'title="'+r+'"':"";return"<tr class='pq-cmenu-item "+(e.disabled?"pq_disabled":"")+" "+(e.cls||"")+"' indx="+t+"><td><span class='"+(e.icon||"")+"' /></td><td "+i+" "+o+">"+e.name+"</td><td>"+(e.shortcut||"")+"</td><td><span class='"+(e.subItems?"pq-submenu ui-icon ui-icon-carat-1-e":"")+"' /></td></tr>"},createMenu:function(t){t=t.filter(function(e){return null!=e});var n,r=this,i="";return t.forEach(function(e,t){i+=r.getItemHtml(e,t)}),(n=e("<div class='pq-cmenu pq-theme pq-popup'><table>"+i+"</table></div>").appendTo(document.body)).find(".pq-cmenu-item").each(function(n,r){e(r).data("item",t[n])}),n.on("mouseover",r.onMouseOver.bind(r)).on("remove",r.onRemove(r)),n},onContext:function(e,t){return this.model.on?this.showMenu(e,t):void 0},showMenu:function(t,n){var r=this,i=r.model,o=r.that,a=r.$menu,l=i.items,s="function"==typeof l?l.call(o,t,n):l;return a&&r.removeMenu(),s&&s.length?(i.init.call(o,t,n),r.ui=n,(a=r.$menu=r.createMenu(s)).css({position:"absolute",left:t.pageX,top:t.pageY}),e(document.body).on("click"+r.ns,r.onclickDoc.bind(r)).on("contextmenu"+r.ns,r.onContextDoc.bind(r)),!1):void 0}}}(jQuery),function(e){e(document).on("pqGrid:bootup",function(e,t){var r=t.instance;r.iAnim=new n(r)});var t=e.paramquery,n=t.cAnim=function(e){var t=this,n=t.model=e.options.animModel;t.grid=e,n.on&&e.on(n.events,t.onBefore.bind(t))},r=t.pqGrid.prototype,i=r.options;r.Anim=function(){return this.iAnim},i.animModel={duration:290,events:"beforeSortDone beforeFilterDone beforeRowExpandDone beforeGroupExpandDone beforeMoveNode beforeAutoRowHeight beforeValidateDone beforeTreeExpandDone onResizeHierarchy",eventsH:"beforeHideColsDone beforeColumnCollapseDone beforeColumnOrderDone beforeFlex columnResize"},n.prototype={cleanUp:function(){(this.data||[]).forEach(function(e){e.pq_top=e.pq_hideOld=void 0}),this.data=this.render=null},isActive:function(){return this._active},onBefore:function(e,t){if(!e.isDefaultPrevented()&&!this.data){var n,r=this,i=r.grid,o=i.iRenderB,a=r.data=o.data,l=r.render=[];try{r.htTbl=o.dims.htTbl,o.eachV(function(e,t){n=o.get$Row(t),e.pq_render=1,l.push([e,n.clone(),n.map(function(e,t){return t.parentNode})])}),a.forEach(function(e,t){e.pq_top=o.getTop(t),e.pq_hideOld=e.pq_hidden}),i.one("refresh",r.oneRefresh.bind(r)),setTimeout(function(){r.cleanUp()})}catch(e){r.data=null}}},oneRefresh:function(){if(this.data){var t,n=this,r=n.grid.iRenderB,i=n.model.duration,o=e([r.$tbl_left[0],r.$tbl_right[0]]),a=n.htTbl,l=r.dims.htTbl;n._active=!0,a>l&&o.css("height",a),setTimeout(function(){o.css("height",r.dims.htTbl),n._active=!1},i),r.eachV(function(e,n){delete e.pq_render;var o,a,l=r.getTop(n),s=e.pq_top;(s!=l||e.pq_hideOld)&&(t=r.get$Row(n),null==s||e.pq_hideOld?(o={opacity:0},a={opacity:1}):(o={top:s},a={top:l}),t.css(o).animate(a,i))}),n.render.forEach(n.removeRows.bind(n)),n.cleanUp()}},removeRows:function(t){var n,r=t[0],i=r.pq_ri,o=this.model.duration,a={opacity:1,top:r.pq_top};if(r.pq_render){if(delete r.pq_render,(n=t[1].each(function(n,r){e(r).removeAttr("id").appendTo(t[2][n]).children().removeAttr("id")})).css(a),null==i||r.pq_hidden)a={opacity:0};else try{a={top:this.grid.iRenderB.getTop(i)}}catch(e){a={opacity:0}}n.animate(a,o,function(){this.parentNode&&this.parentNode.removeChild(this)})}}}}(jQuery),function(e){e(document).on("pqGrid:bootup",function(e,t){var r=t.instance;r.iAnimH=new n(r)});var t=e.paramquery,n=t.cAnimH=function(e){var t=this,n=t.model=e.options.animModel;t.grid=e,n.on&&e.on(n.eventsH,t.onBeforeCol.bind(t))};t.pqGrid.prototype.AnimH=function(){return this.iAnimH},n.prototype={cleanUp:function(){(this.data||[]).forEach(function(e){e.pq_left=e.pq_hideOld=void 0}),this.data=this.render=null},get$Col:function(){var e=this.grid,t=e.iRenderB,n=e.iRenderHead,r=e.iRenderSum,i=t.getAllCells(),o=n.getAllCells(),a=r.getAllCells();return function(e){return t.get$Col(e,i).add(n.get$Col(e,o)).add(r.get$Col(e,a))}},onBeforeCol:function(e){if(!e.isDefaultPrevented()&&!this.data){var t,n=this,r=n.grid,i=n.data=r.getColModel(),o=n.get$Col(),a=r.iRenderB,l=n.render=[];i.forEach(function(e,t){e.pq_hideOld=e.hidden,e.pq_left=a.getLeft(t)}),a.eachH(function(e,n){t=o(n),e.pq_render=1,l.push([e,t.clone(),t.map(function(e,t){return t.parentNode.id})])}),r.one("softRefresh refresh",n.oneRefreshCol.bind(n))}},oneRefreshCol:function(){if(this.data){var e,t=this,n=t.grid.iRenderB,r=t.model.duration,i=t.get$Col();n.eachH(function(t,o){delete t.pq_render;var a=n.getLeft(o),l=t.pq_left;(l!=a||t.pq_hideOld)&&(e=i(o),null==l?e.css("opacity",0).animate({opacity:1},r):t.pq_hideOld?e.css({opacity:0,left:l}).animate({opacity:1,left:a},r):e.css("left",l).animate({left:a},r))}),t.render.forEach(t.removeCols.bind(t)),t.cleanUp()}},removeCols:function(t){var n,r,i=t[0],o=this.model.duration,a=this.grid,l=a.iRenderB,s=a.colIndxs[i.dataIndx];i.pq_render&&(delete i.pq_render,n=t[1].each(function(n,r){e(r).removeAttr("id").appendTo(document.getElementById(t[2][n]))}),null==s||i.hidden?(n.css("opacity",1),r={opacity:0}):r={left:l.getLeft(s)},n.animate(r,o,function(){this.parentNode&&this.parentNode.removeChild(this)}))}}}(jQuery),function(e){var t=e.paramquery;e(document).on("pqGrid:bootup",function(e,t){var r=t.instance;r.iFillHandle=new n(r)}),t.pqGrid.defaults.fillHandle="all",t.pqGrid.defaults.autofill=!0;var n=t.cFillHandle=function(e){var t=this;t.$wrap,t.locked,t.sel,t.that=e,e.on("selectChange",t.onSelectChange(t)).on("selectEnd",t.onSelectEnd(t)).on("assignTblDims",t.onRefresh(t)).on("keyDown",t.onKeyDown.bind(t))};n.prototype={create:function(){var t=this;if(!t.locked){t.remove();var n=t.that;if(1===(r=n.Selection().address()).length){var r,i=(r=r[0]).r2,o=r.c2,a=n.iMerge.getRootCellO(i,o,!0),l=n.getCell(a);if(l.length&&!1!==n._trigger("beforeFillHandle",null,a)){var s=l[0],d=s.parentNode.parentNode,c=d.parentNode,u=10,h=s.offsetLeft+s.offsetWidth-5,f=s.parentNode.offsetTop+s.offsetHeight-5,p=(h=Math.min(h+u,d.offsetWidth)-u,f=Math.min(f+u,d.offsetHeight)-u,e("<div class='pq-fill-handle'></div>").appendTo(c));p.css({position:"absolute",top:f,left:h,height:u,width:u,background:"#333",cursor:"crosshair",border:"2px solid #fff",zIndex:1}),t.$wrap=p,t.setDraggable(),t.setDoubleClickable()}}}},onSelectChange:function(e){return function(){e.remove()}},onSelectEnd:function(e){return function(){this.options.fillHandle&&e.create()}},onRefresh:function(e){var t;return function(){this.options.fillHandle?(clearTimeout(t),t=setTimeout(function(){e.that.element&&e.create()},50)):e.remove()}},remove:function(){var e=this.$wrap;e&&e.remove()},setDoubleClickable:function(){var e=this,t=e.$wrap;t&&t.on("dblclick",e.onDblClick(e.that,e))},setDraggable:function(){var e=this,t=e.$wrap,n=e.that.$cont;t&&t.draggable({helper:function(){return"<div style='height:10px;width:10px;cursor:crosshair;'></div>"},appendTo:n,start:function(){e.onStart()},drag:function(t){e.onDrag(t)},stop:function(){e.onStop()}})},patternDate:function(e){var t=this;return function(n){var r=new Date(e);return r.setDate(r.getDate()+(n-1)),t.formatDate(r)}},formatDate:function(e){return e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()},patternDate2:function(e,t){var n,r=new Date(e),i=new Date(t),o=this,a=i.getDate()-r.getDate(),l=i.getMonth()-r.getMonth(),s=i.getFullYear()-r.getFullYear();return!l&&!s||!a&&!l||!s&&!a?function(t){var n=new Date(e);return a?n.setDate(n.getDate()+a*(t-1)):l?n.setMonth(n.getMonth()+l*(t-1)):n.setFullYear(n.getFullYear()+s*(t-1)),o.formatDate(n)}:(r=Date.parse(r),n=Date.parse(i)-r,function(e){var t=new Date(r+n*(e-1));return o.formatDate(t)})},getDT:function(e){for(var t,n,r,i=e.length,o=0;i>o;o++){if(t=e[o],parseFloat(t)==t?r="number":pq.validation.isDate(t)&&(r="date"),n&&n!=r)return"string";n=r}return r},pattern:function(e){var t=this.getDT(e);if("string"==t||!t)return!1;var n,r,i,o=e.length;return 2===o?"date"===t?this.patternDate2(e[0],e[1]):(n=e[1]-e[0],r=e[0]-n,function(e){return n*e+r}):3===o&&(n=(e[2]-2*e[1]+e[0])/2,r=e[1]-e[0]-3*n,i=e[0]-n-r,function(e){return n*e*e+r*e+i})},autofillVal:function(e,t,n,r){var i,o,a,l,s,d=this.that,c=e.r1,u=e.c1,h=e.r2,f=e.c2,p=t.r1,g=t.c1,v=t.r2,m=t.c2,w=[];if(r){for((l={r1:c,r2:h}).c1=u>g?g:f+1,l.c2=u>g?u-1:m,s=g-u,o=g;m>=o;o++)if(s++,u>o||o>f)for(i=0,a=c;h>=a;a++)w.push(n[i](s,o)),i++}else for((l={c1:u,c2:f}).r1=c>p?p:h+1,l.r2=c>p?c-1:v,s=p-c,o=p;v>=o;o++)if(s++,c>o||o>h)for(i=0,a=u;f>=a;a++)w.push(n[i](s,o)),i++;return d.Range(l).value(w),!0},autofill:function(e,t){var n,r,i,o,a,l,s,d,c=this.that,u=c.colModel,h=c.get_p_data(),f=[],p=e.r1,g=e.c1,v=e.r2,m=e.c2,w=t.c1!=g||t.c2!=m;if(w){for(a=p;v>=a;a++){if(s={sel:{r:a,c:g},x:!0},c._trigger("autofillSeries",null,s),!(d=s.series))return;f.push(d)}return this.autofillVal(e,t,f,w)}for(l=g;m>=l;l++){for(r=(n=u[l]).dataType,o=n.dataIndx,i=[],a=p;v>=a;a++)i.push(h[a][o]);if(s={cells:i,sel:{r1:p,c:l,r2:v,r:p}},c._trigger("autofillSeries",null,s),!(d=s.series||this.pattern(i,r)))return;f.push(d)}return this.autofillVal(e,t,f)},onKeyDown:function(t){if(!this.oldAF&&pq.isCtrl(t)){var n=this,r=n.that.options;n.oldAF=r.autofill,r.autofill=!1,e(document.body).one("keyup",function(){r.autofill=n.oldAF,delete n.oldAF})}},onStop:function(){var e=this,t=e.that,n=t.options.autofill,r=e.sel,i=t.Selection().address()[0];r.r1==i.r1&&r.c1==i.c1&&r.r2==i.r2&&r.c2==i.c2||n&&e.autofill(r,i)||t.Range(r).copy({dest:i}),e.locked=!1},onStart:function(){this.locked=!0,this.sel=this.that.Selection().address()[0]},onDrag:function(t){var n=this.that,r=n.options.fillHandle,i="all"==r,o=i||"horizontal"==r,a=i||"vertical"==r,l=t.clientX-10,s=t.clientY,d=document.elementFromPoint(l,s),c=e(d).closest(".pq-grid-cell");if(c.length){var u=n.getCellIndices({$td:c}),h=this.sel,f=h.r1,p=h.c1,g=h.r2,v=h.c2,m={r1:f,c1:p,r2:g,c2:v},w=function(e,t){m[e]=t,n.Range(m).select()},x=u.rowIndx,y=u.colIndx;i&&g>=x&&x>=f||o&&!a?y>v?w("c2",y):p>y&&w("c1",y):a&&(x>g?w("r2",x):f>x&&w("r1",x))}},onDblClick:function(e,t){return function(){var n=e.options,r=n.fillHandle;if("all"==r||"vertical"==r){for(var i,o=e.Selection().address()[0],a=o.c2,l=o.r2+1,s=n.dataModel.data,d=e.getColModel()[a].dataIndx;i=s[l];){if(null!=i[d]&&""!==i[d]){l--;break}l++}t.onStart(),e.Range({r1:o.r1,c1:o.c1,r2:l,c2:a}).select(),t.onStop()}}}}}(jQuery),function(e){e(document).on("pqGrid:bootup",function(e,n){new t(n.instance)});var t=e.paramquery.cScroll=function(e){var t=this;t.that=e,t.ns=".pqgrid-csroll",e.on("create",t.onCreate.bind(t))};t.prototype={onCreate:function(){var t=this,n=t.that,r=n.iDrop&&n.iDrop.isOn();e(r?document:n.$cont).on("mousedown",t.onMouseDown.bind(t))},onMouseDown:function(t){var n=this,r=n.that,i=e(t.target),o=n.$draggable=i.closest(".ui-draggable"),a=n.ns;(o.length||i.closest(r.$cont).length)&&e(document).on("mousemove"+a,n[o.length?"onMouseMove":"process"].bind(n)).on("mouseup"+a,n.onMouseUp.bind(n))},onMouseMove:function(e){(this.capture||pq.elementFromXY(e).closest(this.that.$cont).length&&this.that.iDrop.isOver())&&(this.capture=!0,this.process(e))},onMouseUp:function(){e(document).off(this.ns),this.capture=!1},process:function(e){var t=this,n=t.that.$cont,r=n[0].offsetHeight,i=n[0].offsetWidth,o=n.offset(),a=o.top,l=o.left,s=a+r,d=l+i,c=e.pageY,u=e.pageX,h=c-s,f=u-d,p=a-c,g=l-u;u>l&&d>u&&(h>0||p>0)?h>0?t.scrollV(h,!0):p>0&&t.scrollV(p):c>a&&s>c&&(f>0?t.scrollH(f,!0):g>0&&t.scrollH(g))},scrollH:function(e,t){this.scroll(e,t,!0)},scrollV:function(e,t){this.scroll(e,t)},scroll:function(e,t,n){var r=this.that.iRenderB,i=r.getContRight()[0],o=i[n?"scrollWidth":"scrollHeight"],a=i[n?"scrollLeft":"scrollTop"],l=1e3>o?1:1+(o-1e3)/o;e=Math.pow(e,l);var s=a+(t?e:-e);r[n?"scrollX":"scrollY"](s)}}}(jQuery),function(e){var t=jQuery.paramquery;t.cFormula=function(e){var t=this;t.that=e,t.oldF=[],e.one("ready",function(){e.on("CMInit",t.onCMInit(t))}).on("dataAvailable",function(){t.onDA()}).on(!0,"change",function(e,n){t.onChange(n)})},t.cFormula.prototype={onCMInit:function(e){return function(t,n){e.isFormulaChange(e.oldF,e.formulas())&&e.calcMainData()}},callRow:function(e,t,n){var r=this.that,i=0;if(e)for(i=0;n>i;i++){var o=t[i],a=o[0],l=o[1];e[a.dataIndx]=l.call(r,e,a)}},onDA:function(){this.calcMainData()},isFormulaChange:function(e,t){var n=!1,r=0,i=e.length;if(i==t.length){for(;i>r;r++)if(e[r][1]!=t[r][1]){n=!0;break}}else n=!0;return n},calcMainData:function(){var e=this.formulaSave(),t=this.that,n=e.length;if(n){for(var r=t.options.dataModel.data,i=r.length;i--;)this.callRow(r[i],e,n);t._trigger("formulaComputed")}},onChange:function(e){var t=this.formulas(),n=t.length,r=this,i=function(e){r.callRow(e.rowData,t,n)};n&&(e.addList.forEach(i),e.updateList.forEach(i))},formulas:function(){var e,t,n=this.that,r=[];return(n.options.formulas||[]).forEach(function(i){(e=n.getColumn({dataIndx:i[0]}))&&((t=i[1])&&r.push([e,t]))}),r},formulaSave:function(){var e=this.formulas();return this.oldF=e,e}}}(),function(e){var t=e.paramquery;t.pqGrid.defaults.treeModel={cbId:"pq_tree_cb",source:"checkboxTree",childstr:"children",iconCollapse:["ui-icon-triangle-1-se","ui-icon-triangle-1-e"],iconFolder:["ui-icon-folder-open","ui-icon-folder-collapsed"],iconFile:"ui-icon-document",id:"id",indent:18,parentId:"parentId",refreshOnChange:!0},t.pqGrid.prototype.Tree=function(){return this.iTree},e(document).on("pqGrid:bootup",function(e,t){var r=t.instance;r.iTree=new n(r)});var n=t.cTree=function(e){this.model="treeModel",this.that=e,this.fns={},this.init(),this.cache={},this.di_prev,this.chkRows=[]};n.prototype=e.extend({},pq.mixin.ChkGrpTree,pq.mixin.GrpTree,{addNodes:function(e,t,n){var r,i,o,a,l=this,s=l.that,d=s.options.dataModel.data,c=l.parentId,u=l.childstr,h=l.id,f={},p=[],g=0,v=l.cache,m=function(e){if(v[e])throw"duplicate id";f[e]=1},w=[];if(t?(i=t[h],r=d.indexOf(t)+(null==n?(t[u]||[]).length:n)+1):r=d.length,e.forEach(function(e){var t=e[h];if(!f[t]&&(p.push(e),m(t),null!=i&&(e[c]=i),e[u])){var n=l.getChildrenAll(e);n.forEach(function(e){m(e[h])}),l.copyArray(p,n)}}),o=p.length){for(;o>g;g++)a=p[g],w.push({newRow:a,rowIndx:r++});s._digestData({addList:w,checkEditable:!1,source:"addNodes"}),l.refreshView()}},collapseAll:function(e){this[e?"expandNodes":"collapseNodes"](this.that.options.dataModel.data)},collapseNodes:function(e,t,n){for(var r,i,o=0,a=this.that,l=e.length,s=[],d=!n;l>o;o++)r=e[o],this.isFolder(r)&&this.isCollapsed(r)!==d&&s.push(r);if(s.length&&(i={close:d,nodes:s},!1!==a._trigger("beforeTreeExpand",t,i))){for(l=s.length,o=0;l>o;o++)(r=s[o]).pq_close=d;a._trigger("treeExpand",t,i),this.setCascadeInit(!1),this.refreshView()}},deleteNodes:function(e){var t,n,r=this,i=r.that,o=0,a={},l=r.id,s=[];if(e){for(t=e.length;t>o;o++)n=e[o],r.eachChild(n,function(e){var t=e[l];a[t]||(a[t]=1,s.push({rowData:e}))});i._digestData({deleteList:s,source:"deleteNodes"}),r.refreshView()}},expandAll:function(){this.collapseAll(!0)},expandNodes:function(e,t){this.collapseNodes(e,t,!0)},expandTo:function(e){var t=[];do{e.pq_close&&t.push(e)}while(e=this.getParent(e));this.expandNodes(t)},exportCell:function(e,t){for(var n="",r=0;t>r;r++)n+="- ";return n+(null==e?"":e)},filter:function(e,t,n,r,i,o){for(var a,l,s,d,c=this.childstr,u=0,h=e.length;h>u;u++)l=!1,(d=(a=e[u])[c])&&((l=this.filter(d,t,n,r,i,o))&&(s=!0,i.push(a))),l||(n.isMatchRow(a,t,r)?(s=!0,i.push(a)):o.push(a));return s},getFormat:function(){for(var e,t,n=this,r=n.that.options.dataModel.data,i=0,o=r.length,a=n.parentId,l=n.childstr;o>i&&null==(e=r[i])[a];i++)if((t=e[l])&&t.length)return n.getParent(t[0])==e?"flat":"nested";return"flat"},getChildrenAll:function(e,t){for(var n,r=this.childstr,i=e[r]||[],o=i.length,a=0,l=t||[];o>a;a++)n=i[a],l.push(n),n[r]&&this.getChildrenAll(n,l);return l},getLevel:function(e){return e.pq_level},_groupById:function(e,t,n,r,i){for(var o,a=this.childstr,l=0,s=n.length;s>l;l++){var d=n[l],c=d[t];d.pq_level=i,e.push(d),(o=r[c])?(d[a]=o,this._groupById(e,t,o,r,i+1)):delete d[a]}},groupById:function(e){for(var t,n,r,i=this,o=i.id,a=i.parentId,l={},s=[],d=0,c=e.length;c>d;d++)null==(t=(r=e[d])[a])&&(t=""),(n=l[t])||(n=l[t]=[]),n.push(r);return i._groupById(s,o,l[""]||[],l,0),s},init:function(){var e=this,t=e.that,n=t.options,r=n.treeModel,i=r.cbId,o=e.dataIndx=r.dataIndx;e.cbId=i,e.prop="pq_tree_prop",e.id=r.id,e.parentId=r.parentId,e.childstr=r.childstr,e.onCMInit(),o?e._init||(e.on("CMInit",e.onCMInit.bind(e)).on("dataAvailable",e.onDataAvailable(e,t,r)).on("dataReadyAfter",e.onDataReadyAfter(e,t,r)).on("beforeCellKeyDown",e.onBeforeCellKeyDown.bind(e)).on("customSort",e.onCustomSortTree.bind(e)).on("customFilter",e.onCustomFilter.bind(e)).on("clearFilter",e.onClearFilter.bind(e)).on("change",e.onChange(e,t,r)).on("cellClick",e.onCellClick.bind(e)).on("refresh refreshRow",e.onRefresh(e,r)).on("valChange",e.onCheckbox(e,r)).on("refreshHeader",e.onRefreshHeader.bind(e)).on("beforeCheck",e.onBeforeCheck.bind(e)),e.setCascadeInit(!0),e._init=!0):e._init&&(this.off(),e._init=!1),e._init&&(n.groupModel.on=r.summary)},initData:function(){var e=this,t=e.that.options.dataModel;t.data=e["flat"==e.getFormat()?"groupById":"flatten"](t.data),e.buildCache()},isCollapsed:function(e){return!!e.pq_close},isOn:function(){return null!=this.that.options.treeModel.dataIndx},moveNodes:function(e,t,n){var r,i,o,a,l,s=this,d=s.that,c=s.parentId,u=s.id,h=s.childstr,f=d.options.dataModel,p=t[h].length,g=t[u],v={},m=(n=null==n||n>=p?p:n,0);if(e.forEach(function(e){v[e[u]]=1}),a=(o=e.reduce(function(e,t){return v[t[c]]||e.push(t),e},[])).length){for(d._trigger("beforeMoveNode");a>m;m++)l=o[m],i=(r=s.getParent(l))[h].indexOf(l),r==t?n=pq.moveItem(l,t[h],i,n):(t[h].splice(n++,0,l),r[h].splice(i,1)),l[c]=g;f.data=s.flatten(s.getRoots()),d.refreshView(),d._trigger("moveNode",null,{args:arguments})}},off:function(){var e,t=this.fns,n=this.that;for(e in t)n.off(e,t[e]);this.fns={}},on:function(e,t){return this.fns[e]=t,this.that.on(e,t),this},onCellClick:function(t,n){var r=this;if(n.dataIndx==r.dataIndx&&e(t.originalEvent.target).hasClass("pq-group-icon"))if(pq.isCtrl(t)){r[n.rowData.pq_close?"expandAll":"collapseAll"]()}else r.toggleNode(n.rowData,t)},onBeforeCellKeyDown:function(t,n){var r,i,o=this,a=o.that,l=n.rowData,s=n.dataIndx,d=t.keyCode,c=e.ui.keyCode;if(s==o.dataIndx){if(o.isFolder(l)&&(i=l.pq_close,d==c.ENTER&&!a.isEditable({rowIndx:l.pq_ri,dataIndx:s})||!i&&d==c.LEFT||i&&d==c.RIGHT))return o.toggleNode(l),!1;if(d==c.SPACE&&(r=a.getCell(n).find("input[type='checkbox']")).length)return r.click(),!1}},onChange:function(e,t,n){return function(r,i){var o=i.source||"",a=i.addList.length,l=i.deleteList.length;-1==o.indexOf("checkbox")&&("undo"!=o&&"redo"!=o||!a&&!l?n.summary&&n.refreshOnChange&&!a&&!l?(e.summaryT(),t.refresh()):"addNodes"!=o&&"deleteNodes"!=o||e.refreshViewFull():e.refreshViewFull())}},onClearFilter:function(e,t){return t.data=this.groupById(t.data),!1},onCustomFilter:function(e,t){var n=this,r=n.that,i=n.groupById(t.data),o=r.iFilterData,a=t.filters,l=[],s=[],d=t.mode;return n.filter(n.getRoots(i),a,o,d,l,s),t.dataTmp=n.groupById(l),t.dataUF=s,!1},onDataAvailable:function(e){return function(){e.initData()}},onDataReadyAfter:function(e,t,n){return function(){n.summary&&e.summaryT(e),e.showHideRows(),e.isCascade(n)&&e.cascadeInit()}},option:function(t,n){var r,i=this,o=i.that,a=o.options.treeModel,l=a.dataIndx;e.extend(a,t),r=a.dataIndx,i.setCellRender(),i.init(),!l&&r&&i.initData(),!1!==n&&o.refreshView()},renderCell:function(e,t){return function(n){var r,i,o,a,l,s,d=n.rowData,c=e.that,u=t.indent,h=n.column,f=h.renderLabel||t.render,p=t.iconCollapse,g=t.checkbox,v=e.isFolder(d),m=e._iconCls(d,v,t),w=d.pq_level||0,x=w*u,y=["pq-group-title-cell"],C=["text-indent:",v?x:x+1*u,"px;"],b=n.formatVal||n.cellData;if(f){var I=c.callFn(f,n);null!=I&&("string"!=typeof I?(I.iconCls&&(m=I.iconCls),null!=I.text&&(b=I.text),a=I.attr,y.push(I.cls),C.push(I.style)):b=I)}return n.Export?e.exportCell(b,w):(g&&((l=e.renderCB(g,d,t.cbId))&&(s=l[0],l[1]&&y.push(l[1]))),v&&(i="<span class='pq-group-icon ui-icon "+(d.pq_close?p[1]:p[0])+"'></span>"),m&&(o="<span class='pq-tree-icon ui-icon "+m+"'></span>"),r=s&&(h.useLabel||t.useLabel),{cls:y.join(" "),attr:a,style:C.join(""),text:[i,o,r?"<label style='width:100%;'>":"",s,b,r?"</label>":""].join("")})}},refreshViewFull:function(e){var t=this,n=t.that.options.dataModel;n.data=t.groupById(n.data),t.buildCache(),e&&t.refreshView()},_iconCls:function(e,t,n){if(n.icons){var r;if(t&&(r=n.iconFolder))return e.pq_close?r[1]:r[0];if(!e.pq_gsummary)return n.iconFile}},setCellRender:function(){var e,t,n=this,r=n.that,i=r.options.treeModel,o=r.columns;i.summary&&r.iGroup.refreshColumns(),(e=n.di_prev)&&((t=o[e])&&(t._render=null),n.di_prev=null),(e=i.dataIndx)&&((t=o[e])._render=n.renderCell(n,i),n.di_prev=e)},_showHideRows:function(e,t,n){for(var r,i,o,a=this,l=t||a.getRoots(),s=a.childstr,d=n||!1,c=l.length,u=0;c>u;u++)(r=l[u]).pq_hidden=d,(o=r[s])&&(i=d||r.pq_close,a._showHideRows(e,o,i))},showHideRows:function(){var e,t,n=this,r=n.that,i=0,o=r.get_p_data(),a=r.options.treeModel.summary;if(n._showHideRows(o),a)for(e=(o=r.pdata).length;e>i;i++)(t=o[i]).pq_gsummary&&(t.pq_hidden=n.getParent(t).pq_hidden)},toggleNode:function(e,t){this[e.pq_close?"expandNodes":"collapseNodes"]([e],t)}})}(jQuery),function(e){var t=jQuery.paramquery,n=t.pqGrid.prototype,r=function(e){this.that=e;var t=e.options;this.options=t,this.selection=[],this.hclass=" pq-state-select "+(t.bootstrap.on?"":"ui-state-highlight")};t.cRows=r,n.SelectRow=function(){return this.iRows},r.prototype={_add:function(e,t){var n,r=this.that,i=e.rowIndxPage,o=!t,a=e.rowData,l=this.inViewRow(i);return!a.pq_hidden&&l&&((n=r.getRow(e)).length&&(n[o?"addClass":"removeClass"](this.hclass),!o&&n.removeAttr("tabindex"))),a.pq_rowselect=o,e},_data:function(e){e=e||{};var t=this.that,n=e.all,r=t.riOffset,i=n?0:r,o=t.get_p_data();return[o,i,i+(n?o.length:t.pdata.length)]},add:function(e){var t=e.addList=e.rows||[{rowIndx:e.rowIndx}];e.isFirst&&this.setFirst(t[0].rowIndx),this.update(e)},extend:function(e){var t,n,r,i,o,a=e.rowIndx,l=[],s=this.getFirst();if(null!=s){if(null==(o=this.isSelected({rowIndx:s})))return;for(s>a?(r=s=[a,a=s][0],i=a-1):(r=s+1,i=a),t=r;i>=t;t++)n={rowIndx:t},l.push(n);this.update(o?{addList:l}:{deleteList:l})}},getFirst:function(){return this._firstR},getSelection:function(){for(var e,t=this.that.get_p_data(),n=0,r=t.length,i=[];r>n;n++)(e=t[n])&&e.pq_rowselect&&i.push({rowIndx:n,rowData:e});return i},inViewCol:function(e){var t=this.that,n=t.options,r=t.iRenderB;return n.freezeCols>e||e>=r.initH&&e<=r.finalH},inViewRow:function(e){var t=this.that,n=t.options,r=t.iRenderB;return n.freezeRows>e||e>=r.initV&&e<=r.finalV},isSelected:function(e){var t=e.rowData||this.that.getRowData(e);return t?!0===t.pq_rowselect:null},isSelectedAll:function(e){for(var t,n=this._data(e),r=n[0],i=n[1],o=n[2];o>i;i++)if((t=r[i])&&!t.pq_rowselect)return!1;return!0},removeAll:function(e){this.selectAll(e,!0)},remove:function(e){var t=e.deleteList=e.rows||[{rowIndx:e.rowIndx}];e.isFirst&&this.setFirst(t[0].rowIndx),this.update(e)},replace:function(e){e.deleteList=this.getSelection(),this.add(e)},selectAll:function(e,t){for(var n,r=[],i=this.that.riOffset,o=this._data(e),a=o[0],l=o[1],s=o[2];s>l;l++)(n=a[l])&&r.push({rowIndx:l,rowIndxPage:l-i,rowData:n});this.update(t?{deleteList:r}:{addList:r},!0)},setFirst:function(e){this._firstR=e},toRange:function(){for(var e,t,n=[],r=this.that,i=r.get_p_data(),o=0,a=i.length;a>o;o++)i[o].pq_rowselect?null!=e?t=o:e=t=o:null!=e&&(n.push({r1:e,r2:t}),e=t=null);return null!=e&&n.push({r1:e,r2:t}),r.Range(n)},toggle:function(e){this[this.isSelected(e)?"remove":"add"](e)},toggleAll:function(e){this[this.isSelectedAll(e)?"removeAll":"selectAll"](e)},update:function(e,t){var n=this,r=n.that,i={source:e.source},o=function(e){return t?e:r.normalizeList(e)},a=o(e.addList||[]),l=o(e.deleteList||[]);if(a=a.filter(function(e){return!1===n.isSelected(e)}),l=l.filter(n.isSelected.bind(n)),a.length||l.length){if(i.addList=a,i.deleteList=l,!1===r._trigger("beforeRowSelect",null,i))return;i.addList.forEach(function(e){n._add(e)}),i.deleteList.forEach(function(e){n._add(e,!0)}),r._trigger("rowSelect",null,i)}}}}(),function(e){var t=e.paramquery;e(document).on("pqGrid:bootup",function(e,t){var r=t.instance;r.iImport=new n(r)}),t.pqGrid.prototype.importWb=function(e){return this.iImport.importWb(e)};var n=t.cImport=function(e){this.that=e};n.prototype={fillRows:function(e,t,n){for(var r=e.length;t>r;r++)e.push(n?{}:[])},generateCols:function(e,t,n){var r,i,o=pq.toLetter,a=[],l=0,s=pq.excel.colWidth,d=n?n.cells:[],c=[];for(d.forEach(function(e,t){var n=e.indx||t;c[n]=e.value}),(t=t||[]).forEach(function(e,t){var n=e.indx||t;a[n]={hidden:e.hidden,width:e.width,title:c[n]||""}}),e=Math.max(e,t.length);e>l;l++)i={title:(r=a[l]||{}).title||o(l),width:r.width||s,halign:"center"},r.hidden&&(i.hidden=!0),a[l]=i;return a},importS:function(e,n,r,i,o){var a,l,s,d,c,u,h,f=e.mergeCells,p=this,g=[],v=this.that,m=0,w=e.rows,x=e.frozenRows||0,y=w.length,C=0,b=v.options.colModel,I=0,_=b&&b.length,q=t.cFormulas.shiftRC();for(null!=o&&(I=o+1,u=w[o],w=w.slice(I),x=(x-=I)>0?x:0),C=0,y=w.length;y>C;C++)l=(a=w[C]).indx||C,s={},l!=C&&this.fillRows(g,l,!0),a.cells.forEach(function(e,t){d=e.indx||t,c=i&&_&&b[d]?b[d].dataIndx:d,s[c]=e.value,p.copyStyle(s,c,e),e.format&&p.copyFormat(s,c,e.format),(h=e.formula)&&p.copyFormula(s,c,I?q(h,0,-I):h),d>=m&&(m=d+1)}),a.hidden&&(s.pq_hidden=!0),g[l]=s;e.name&&v.option("title",e.name),n&&this.fillRows(g,g.length+n,!0),v.option("dataModel.data",g),m+=r||0,v.refreshCM(this.generateCols(m,e.columns,u)),v.option("mergeCells",(f||[]).map(function(e){var t=pq.getAddress(e);return t.r1-=I,t.r2-=I,t}).filter(function(e){return e.r1>=0})),v.option({freezeRows:x,freezeCols:e.frozenCols}),v.refreshDataAndView(),v._trigger("importWb")},copyFormula:function(e,t,n){(e.pq_fn=e.pq_fn||{})[t]=n},copyFormat:function(e,t,n){var r=e.pq_format=e.pq_format||{};n=pq.isDateFormat(n)?pq.excelToJui(n):pq.excelToNum(n),r[t]=n},copyStyle:function(e,t,n){var r,i=[];(r=n.font)&&i.push("font-family:"+r),(r=n.fontSize)&&i.push("font-size:"+r+"px"),(r=n.color)&&i.push("color:"+r),(r=n.bgColor)&&i.push("background:"+r),n.bold&&i.push("font-weight:bold"),n.italic&&i.push("font-style:italic"),n.underline&&i.push("text-decoration:underline"),(r=n.align)&&i.push("text-align:"+r),(r=n.valign)&&i.push("vertical-align:"+r),n.wrap&&i.push("white-space:normal"),(i=i.join(";"))&&((e.pq_cellattr=e.pq_cellattr||{})[t]={style:i})},importWb:function(e){var t=e.workbook,n=e.sheet||0,r=t.sheets.filter(function(e,t){return n==t||n==e.name})[0];r&&this.importS(r,e.extraRows,e.extraCols,e.keepCM,e.headerRowIndx)}}}(jQuery),function(e){pq.excelImport={attr:function(){var e=new RegExp('([a-z]+)\\s*=\\s*"([^"]*)"',"gi");return function(t){t=(t=t||"").slice(0,t.indexOf(">"));var n={};return t.replace(e,function(e,t,r){n[t]=r}),n}}(),cacheStyles:function(){var t,n,r,i=this,o=e(e.parseXML(i.getStyleText())),a=e.extend(!0,{},i.preDefFormats),l=[],s=[""],d=["",""];o.find("numFmts>numFmt").each(function(t,n){var r=e(n),i=r.attr("formatCode");a[r.attr("numFmtId")]=i}),o.find("fills>fill>patternFill>fgColor[rgb]").each(function(t,n){var r=i.getColor(e(n).attr("rgb"));d.push(r)}),o.find("fonts>font").each(function(r,o){var a=e(o),l=1*a.find("sz").attr("val"),d=a.find("name").attr("val"),c=a.find("color").attr("rgb"),u={};return 0===r?(t=l,void(n=d.toUpperCase())):(a.find("b").length&&(u.bold=!0),c&&(u.color=i.getColor(c)),d&&d.toUpperCase()!=n&&(u.font=d),l&&l!=t&&(u.fontSize=l),a.find("u").length&&(u.underline=!0),a.find("i").length&&(u.italic=!0),void s.push(u))}),o.find("cellXfs>xf").each(function(t,n){var i,o,c,u=e(n),h=1*u.attr("numFmtId"),f=1*u.attr("fillId"),p=u.children("alignment"),g=1*u.attr("fontId"),v=g?s[g]:{},m={};for(c in p.length&&((i=p.attr("horizontal"))&&(m.align=i),(o=p.attr("vertical"))&&(m.valign=o),"1"==p.attr("wrapText")&&(m.wrap=!0)),h&&(r=a[h],/(?=.*m.*)(?=.*d.*)(?=.*y.*)/i.test(r)&&(r=r.replace(/(\[.*\]|[^mdy\/\-\s])/gi,"")),m.format=r),f&&d[f]&&(m.bgColor=d[f]),v)m[c]=v[c];l.push(m)}),i.getStyle=function(e){return l[e]},o=0},getMergeCells:function(e){var t=this;return(e.match(/<mergeCell\s+.*?(\/>|<\/mergeCell>)/g)||[]).map(function(e){return t.attr(e).ref})},getFrozen:function(e){var t=this.match(e,/<pane.*?(\/>|<\/pane>)/,0),n=this.attr(t),r=1*n.xSplit;return{r:1*n.ySplit||0,c:r||0}},getFormula:function(t){var n={},r=e.paramquery.cFormulas.shiftRC();return function(e,i,o){if("<f"===e.substr(0,2)){var a,l=t.match(e,/^<f.*?>(.*?)<\/f>/,1),s=t.attr(e);return"shared"==s.t&&(l?n[s.si]={r:i,c:o,f:l}:(a=n[s.si],l=r(a.f,o-a.c,i-a.r))),l}}},getCols:function(e){for(var t=(e.match(/<dimension\s.*?\/>/)||[])[0],n=this.attr(t||"").ref,r=[],i=e.match(/<col\s.*?\/>/g)||[],o=n?pq.getAddress(n).c2+1:i.length,a=pq.excel.colRatio,l=0;o>l;l++)for(var s,d=i[l],c=this.attr(d),u=1*c.min,h=1*c.max,f=1*c.hidden,p=1*c.width,g=u;h>=g;g++)s={},f?s.hidden=!0:s.width=1*(p*a).toFixed(2),g!==r.length+1&&(s.indx=g-1),r.push(s);return r},getColor:function(e){return"#"+e.slice(2)},getPath:function(e){return this.paths[e]},getPathSheets:function(){return this.pathSheets},getFileTextFromKey:function(e){return this.getFileText(this.getPath(e))},getFileText:function(e){return this.files[e.replace(/^\//,"")].asText()},getSheetText:function(e){e=e||0;var t=this.pathSheets.filter(function(t,n){return t.name===e||n===e})[0].path;return this.getFileText(t)},getStyleText:function(){return this.getFileTextFromKey("st")},getSI:function(e){var t,n=[],r=pq.unescapeXml,i=1*this.attr(this.match(e,/<sst.*?>[\s\S]*?<\/sst>/,0)).uniqueCount;if(e.replace(/<si>([\s\S]*?)<\/si>/g,function(e,i){t=[],i.replace(/<t.*?>([\s\S]*?)<\/t>/g,function(e,n){t.push(n)}),n.push(r(t.join("")))}),i&&i!==n.length)throw"si misatch";return n},getWorkBook:function(e,t,n){var r=this,i={};t?i[t]=!0:"string"==typeof e&&(i.base64=!0),r.files=new JSZip(e,i).files,this.readPaths(),this.cacheStyles();var o=this.getPath("ss"),a=[],l=o?this.getSI(this.getFileText(o)):[];return r.getPathSheets().forEach(function(e,t){if(!n||n.indexOf(t)>-1||n.indexOf(e.name)>-1){var i=r.getFileText(e.path),o=r.match(i,/<sheetData.*?>(.*?)<\/sheetData>/,1),s=r.getWorkSheet(i,o,l,e.name);a.push(s)}}),delete r.files,{sheets:a}},getWorkSheet:function(e,t,n,r){for(var i,o,a,l,s,d,c,u,h,f,p,g,v,m,w,x,y,C=this,b=[],I=0,_=pq.toNumber,q=this.getFormula(C),R=pq.isEmpty,D=pq.formulas,M=pq.isDateFormat,T=C.getMergeCells(e),E=t.match(/<row.*?<\/row>/g)||[],k=0,S=E.length;S>k;k++){d={cells:[]},w=E[k],(x=(y=(v=C.attr(w)).r)?y-1:k)!==k&&(d.indx=x),v.hidden&&(d.hidden=!0);for(var P=0,A=(c=w.match(/(<c[^<]*?\/>|<c.*?<\/c>)/g)||[]).length;A>P;P++){if(o=c[P],u=(m=C.attr(o)).t,g=C.match(o,/<c.*?>(.*?)(<\/c>)?$/,1),s={},"inlineStr"==u?f=g.match(/<t><!\[CDATA\[(.*?)\]\]><\/t>/)[1]:null!=(f=C.match(g,/<v>(.*?)<\/v>/,1)||void 0)&&(f="s"==u?n[f]:"str"==u?pq.unescapeXml(f):"b"==u?"1"==f:D.VALUE(f)),(p=m.r)?p=_(p=p.replace(/\d+/,"")):p=P,I=I>p?I:p,void 0!==f&&(s.value=f),p!==P&&(s.indx=p),(a=q(g,x,p))&&(s.formula=pq.unescapeXml(a)),(h=m.s)&&(h=this.getStyle(h))){for(i in h)s[i]=h[i];l=s.format,null!=f&&!a&&l&&M(l)&&(s.value=D.TEXT(f,"m/d/yyyy"))}!R(s)&&d.cells.push(s)}b.push(d)}var $={rows:b,name:r},H=C.getCols(e),F=C.getFrozen(e);return T.length&&($.mergeCells=T),H.length&&($.columns=H),F.r&&($.frozenRows=F.r),F.c&&($.frozenCols=F.c),$},Import:function(e,t){var n,r,i,o=this,a=e.file,l=e.content,s=e.url,d=function(n,r){t(o.getWorkBook(n,e.type||r,e.sheets))};s?(r="?"+Math.random(),window.Uint8Array?((i=new XMLHttpRequest).open("GET",s+r,!0),i.responseType="arraybuffer",i.onload=function(e){200==this.status&&d(i.response)},i.send()):JSZipUtils.getBinaryContent(s+r,function(e,t){d(t,"binary")})):a?((n=new FileReader).onload=function(e){d(e.target.result)},n.readAsArrayBuffer(a)):l&&d(l)},match:function(e,t,n){var r=e.match(t);return r?r[n]:""},preDefFormats:{1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",5:"$#,##0_);($#,##0)",6:"$#,##0_);[Red]($#,##0)",7:"$#,##0.00_);($#,##0.00)",8:"$#,##0.00_);[Red]($#,##0.00)",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yyyy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yyyy h:mm",37:"#,##0_);(#,##0)",38:"#,##0_);[Red](#,##0)",39:"#,##0.00_);(#,##0.00)",40:"#,##0.00_);[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mm:ss.0",48:"##0.0E+0",49:"@"},readPaths:function(){var t=this.files,n=e(e.parseXML(t["[Content_Types].xml"].asText())),r=this.paths={wb:"sheet.main",ws:"worksheet",st:"styles",ss:"sharedStrings"};for(var i in r)r[i]=n.find('[ContentType$="'+r[i]+'+xml"]').attr("PartName");for(i in t)if(/workbook.xml.rels$/.test(i)){r.wbrels=i;break}var o=e(this.getFileTextFromKey("wbrels")),a=e(this.getFileTextFromKey("wb")),l=this.pathSheets=[];a.find("sheet").each(function(t,r){var i=e(r),a=i.attr("r:id"),s=i.attr("name"),d=o.find('[Id="'+a+'"]').attr("Target"),c=n.find('Override[PartName$="'+d+'"]').attr("PartName");l.push({name:s,rId:a,path:c})})}}}(jQuery),function(e){var t=e.paramquery,n=t._pqGrid.prototype;n.exportExcel=function(e){return(e=e||{}).format="xlsx",this.exportData(e)},n.exportCsv=function(e){return(e=e||{}).format="csv",this.exportData(e)},n.exportData=function(e){return new r(this,e).Export(e)};var r=t.cExport=function(e,t){this.that=e};r.prototype=e.extend({copyStyle:function(e,t){var n,r,i,o,a,l,s;"string"==typeof t&&(s=t.split(";"),t={},s.forEach(function(e){e&&((s=e.split(":"))[0]&&s[1]&&(t[s[0].trim()]=s[1].trim()))})),(n=t.background)&&(e.bgColor=n),(r=t["font-size"])&&(e.fontSize=parseFloat(r)),(o=t.color)&&(e.color=o),"normal"==t["white-space"]&&(e.wrap=!0),(a=t["text-align"])&&(e.align=a),(l=t["vertical-align"])&&(e.valign=l),"bold"==t["font-weight"]&&(e.bold=!0),(i=t["font-family"])&&(e.font=i),"italic"==t["font-style"]&&(e.italic=!0),"underline"==t["text-decoration"]&&(e.underline=!0)},getCsvHeader:function(e,t,n,r){for(var i,o,a,l=[],s=[],d=0;t>d;d++){for(var c=e[d],u=null,h=0,f=c.length;f>h;h++)(i=n[h]).hidden||!1===i.copy||(o=c[h],d>0&&o==e[d-1][h]?l.push(""):u&&h>0&&o==u?l.push(""):(a=(a=this.getTitle(o,h))?a.replace(/\"/g,'""'):"",u=o,l.push('"'+a+'"')));s.push(l.join(r)),l=[]}return s},getCSVContent:function(e,t,n,r,i,o,a,l,s,d,c,u,h){var f,p,g,v,m,w,x,y,C=this,b=e.separator||",",I=[];for(y=h?C.getCsvHeader(r,i,t,b):[],g=0;a>g;g++)if(!(m=o[g]).pq_hidden){v={rowIndx:w=l?g+s:g,rowIndxPage:w-s,rowData:m,Export:!0};for(var _=0;n>_;_++)if(!(x=t[_]).hidden&&!1!==x.copy){f=null,null,d.ismergedCell(w,_)?d.isRootCell(w,_)?((f=d.getRootCellO(w,_)).Export=!0,p=C.getRenderVal(f,c,u)[0]):p="":(v.colIndx=_,v.column=x,v.dataIndx=x.dataIndx,p=C.getRenderVal(v,c,u)[0]);var q=(null==p?"":p)+"";q=q.replace(/\"/g,'""'),I.push('"'+q+'"')}y.push(I.join(b)),I=[]}return"\ufeff"+y.join("\n")},getExportCM:function(e,t){return t>1?e:e.filter(function(e){return 0!=e.copy})},Export:function(e){if(!1===this.that._trigger("beforeExport",null,e))return!1;var t,n=this,r=n.that,i=r.options,o=i.groupModel,a="remote"==i.pageModel.type,l=r.riOffset,s=r.iRenderB,d=r.iMerge,c=r.headerCells,u=c.length,h=r.colModel,f=h.length,p=n.getExportCM(h,u),g=p.length,v=i.treeModel,m=o.on&&o.dataIndx.length||a||v.dataIndx&&v.summary?r.pdata:i.dataModel.data,w=(m=i.summaryData?m.concat(i.summaryData):m).length,x=e.render,y=!e.noheader,C=e.format;if("xlsx"==C){var b=n.getWorkbook(p,g,c,u,m,w,a,l,d,x,s,y,e.sheetName);if(!1===r._trigger("workbookReady",null,{workbook:b}))return b;if(e.workbook)return b;e.workbook=b,t=pq.excel.exportWb(e)}else e.data="json"==C?n.getJsonContent(e,m):"csv"==C?n.getCSVContent(e,h,f,c,u,m,w,a,l,d,x,s,y):n.getHtmlContent(e,h,f,c,u,m,w,a,l,d,x,s,y);return t=t||n.postRequest(e),r._trigger("exportData",null,e),t},getHtmlHeader:function(e,t){for(var n,r,i,o,a,l=[],s=0;t>s;s++){var d=e[s],c=null;l.push("<tr>");for(var u=0,h=d.length;h>u;u++)r=(n=d[u]).colSpan,!n.hidden&&r&&!1!==n.copy&&(i=n.rowSpan,s>0&&n==e[s-1][u]||c&&u>0&&n==c||(o=this.getTitle(n,u),c=n,a=(a=n.halign||n.align)?"align="+a:"",l.push("<th colspan=",r," rowspan=",i," ",a,">",o,"</th>")));l.push("</tr>")}return l.join("")},getHtmlBody:function(e,t,n,r,i,o,a,l,s){var d,c,u,h,f,p,g,v,m,w,x,y,C,b=[];for(d=0;r>d;d++)if(!(m=n[d]).pq_hidden){for(v={rowIndx:w=i?d+o:d,rowIndxPage:w-o,rowData:m,Export:!0},b.push("<tr>"),c=0;t>c;c++)if(!(u=e[c]).hidden&&!1!==u.copy){if(h=null,f=null,y="",a.ismergedCell(w,c)){if(!(f=a.isRootCell(w,c)))continue;(h=a.getRootCellO(w,c)).Export=!0,x=(p=this.getRenderVal(h,l,s))[0],g=p[1],y="rowspan="+f.rowspan+" colspan="+f.colspan+" "}else v.colIndx=c,v.column=u,v.dataIndx=u.dataIndx,x=(p=this.getRenderVal(v,l,s))[0],g=p[1];y+=(C=u.align)?"align="+C:"",x=null==x?"":x,x=pq.newLine(x),b.push("<td ",y,g?' style="'+g+'"':"",">",x,"</td>")}b.push("</tr>")}return b.join("")},getHtmlContent:function(e,t,n,r,i,o,a,l,s,d,c,u,h){var f=this,p=f.that,g=e.cssRules||"",v=p.element.find(".pq-grid-table"),m="table{empty-cells:show;font-family:"+v.css("font-family")+";font-size:"+v.css("font-size")+";border-collapse:collapse;}",w=[];return w.push("<!DOCTYPE html><html><head>",'<meta charset="utf-8" />',"<title>",e.title?e.title:" ","</title>","</head><body>","<style>",m,"td,th{padding: 5px;border:1px solid #ccc;}",g,"</style>","<table>"),w.push(h?f.getHtmlHeader(r,i,t):""),w.push(f.getHtmlBody(t,n,o,a,l,s,d,c,u)),w.push("</table></body></html>"),w.join("")},getJsonContent:function(e,t){return e.nostringify?t:JSON.stringify(t,e.nopqdata?function(e,t){return 0!==(e+"").indexOf("pq_")?t:void 0}:null,e.nopretty?null:2)},getTitle:function(e,t){var n=e.title;return n?"function"==typeof n&&(n=n.call(this.that,{colIndx:t,column:e,dataIndx:e.dataIndx,Export:!0})):n="",n},getXlsMergeCells:function(e,t,n,r){e=e.concat(n.getMergeCells(t,this.curPage,r));for(var i=[],o=pq.toLetter,a=e.length,l=0;a>l;l++){var s=e[l];s=o(s.c1)+(s.r1+1)+":"+o(s.c2)+(s.r2+1),i.push(s)}return i},getXlsCols:function(e,t){for(var n,r,i,o=[],a=0,l=pq.excel.colWidth;t>a;a++)n={},(i=1*((r=e[a])._width||l).toFixed(2))!==l&&(n.width=i),r.hidden&&(n.hidden=!0),pq.isEmpty(n)||(o.length!==a&&(n.indx=a),o.push(n));return o},getXlsHeader:function(e,t,n){for(var r=[],i=0;t>i;i++){for(var o=e[i],a=[],l=0,s=o.length;s>l;l++){var d=o[l];if(!1!==d.copy){var c=d.o_colspan,u=d.rowSpan,h=this.getTitle(d,l);i>0&&d==e[i-1][l]?h="":l>0&&d==e[i][l-1]?h="":(c>1||u>1)&&n.push({r1:i,c1:l,r2:i+u-1,c2:l+c-1}),a.push({value:h,bgColor:"#eeeeee"})}}r.push({cells:a})}return r},getXlsBody:function(n,r,i,o,a,l,s,d,c,u){var h,f,p,g,v,m,w,x,y,C,b,I,_,q,R,D,M,T,E=this,k=E.that,S=[],P=t.cFormulas.shiftRC(k);for(f=0;o>f;f++){for(b=[],x={rowIndx:_=a?f+l:f,rowIndxPage:_-l,rowData:I=i[f],Export:!0},p=0;r>p;p++)q=(w=n[p]).dataIndx,M=I.pq_cellattr,g=m=I[q],v=k.getFormula(I,q),h=!1,s.ismergedCell(_,p)&&(s.isRootCell(_,p,"o")||(h=!0)),h||v||(x.colIndx=p,x.column=w,x.dataIndx=q,g=(y=E.getRenderVal(x,d,c))[0],C=y[1]),D={},"string"==typeof(T=E.getCellFormat(I,q)||w.format)&&(pq.isDateFormat(T)?(g!==m&&e.Uidatepicker.formatDate(T,new Date(m))===g&&(g=m),T=pq.juiToExcel(T)):(g!==m&&pq.formatNumber(m,T)===g&&(g=m),T=pq.numToExcel(T)),D.format=T),void 0!==g&&(D.value=g),M&&(M=M[q])&&(M=M.style)&&E.copyStyle(D,M),C&&E.copyStyle(D,C),v&&(u&&(v=P(v,0,u)),D.formula=v),pq.isEmpty(D)||(D.dataIndx=q,b.length!==p&&(D.indx=p),b.push(D));R={},b.length&&(R.cells=b),I.pq_hidden&&(R.hidden=!0),pq.isEmpty(R)||(S.length!==f&&(R.indx=f),S.push(R))}return S},getCellFormat:function(e,t){var n=e.pq_format;return n&&n[t]},getWorkbook:function(e,t,n,r,i,o,a,l,s,d,c,u,h){var f,p=this,g=p.getXlsCols(e,t),v=[],m=p.that.options,w=m.freezeCols,x=u?r:0,y=x+(m.freezeRows||0),C=u?p.getXlsHeader(n,r,v):[],b=p.getXlsMergeCells(v,u?r:0,s,o),I=p.getXlsBody(e,t,i,o,a,l,s,d,c,x),_={columns:g,rows:C.concat(I)};return b.length&&(_.mergeCells=b),(f=C.length)&&(_.headerRows=f),y&&(_.frozenRows=y),w&&(_.frozenCols=w),(h||(h=m.title))&&(_.name=h),{sheets:[_]}},postRequest:function(t){var n,r,i=t.format,o=t.url,a=t.filename||"pqGrid";if(t.zip&&"xlsx"!=i){var l=new JSZip;l.file(a+"."+t.format,t.data),n=l.generate({type:"base64",compression:"DEFLATE"}),r=!0,i="zip"}else r=!!t.decodeBase,n=t.data;return o&&e.ajax({url:o,type:"POST",cache:!1,data:{pq_ext:i,pq_data:n,pq_decode:r,pq_filename:a},success:function(t){o+=(o.indexOf("?")>0?"&":"?")+"pq_filename="+t,e(document.body).append("<iframe height='0' width='0' frameborder='0' src=\""+o+'"></iframe>')}}),n}},pq.mixin.render)}(jQuery),function(e){var t=pq.excel={_tmpl:{rels:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="workbook.xml"/></Relationships>'},eachRow:function(e,t){for(var n=e.rows,r=0,i=n.length;i>r;r++)t(n[r],r)},exportWb:function(e){var t=e.workbook,n=this._tmpl,r=this,i=[],o=t.sheets,a=o.length,l=new JSZip;l.file("[Content_Types].xml",this.getContentTypes(a)),o.forEach(function(e,t){var n=r.getCols(e.columns),o=r.getFrozen(e.frozenRows,e.frozenCols),a=r.getBody(e.rows),s=r.getMergeCells(e.mergeCells);i.push(e.name),l.file("worksheet"+(t+1)+".xml",r.getSheet(o,n,a,s))}),l.file("workbook.xml",this.getWBook(i)),l.file("styles.xml",r.getStyle());var s=l.folder("_rels");return s.file(".rels",n.rels),s.file("workbook.xml.rels",this.getWBookRels(a)),e.url?(e.data=l.generate({type:"base64",compression:"DEFLATE"}),e.decodeBase=!0,pq.postRequest(e)):l.generate({type:e.type||"blob",compression:"DEFLATE"})},eachCell:function(e,t,n){e.forEach(function(e,r){var i,o;if(i=e.cells){r=e.indx||r;for(var a=0,l=i.length;l>a;a++)o=i[a],t(o,o.indx||a,r,n)}else(i=e.rows)&&this.eachCell(i,t,r)},this)},findIndex:function(e,t){var n=e.findIndex(t);return e[n].indx||n},getArray:function(e){var t=[],n=this;return this.eachRow(e,function(e){var r=[];e.cells.forEach(function(e){r.push(n.getCell(e))}),t.push(r)}),t},getBody:function(e){var t,n,r,i,o,a,l,s,d,c,u,h,f,p,g,v,m,w,x,y,C,b,I,_,q,R,D=pq.formulas,M=[],T=e.length;for(t=0;T>t;t++){for(_=(u=(f=e[t]).cells).length,q=f.hidden?'hidden="1"':"",o='r="'+(r=(f.indx||t)+1)+'"',M.push("<row "+q+" "+o+">"),n=0;_>n;n++)h=(c=u[n]).value,a="",l="",o=(i=c.indx||n)===n?"":'r="'+pq.toLetter(i)+r+'"',R=c.format,p=c.bgColor,g=c.color,v=c.font,m=c.fontSize,C=c.bold,b=c.italic,I=c.underline,w=c.align,x=c.wrap,y=c.valign,d=(d=c.formula)?"<f>"+pq.escapeXml(d)+"</f>":"",null==h?s="<v></v>":h==parseFloat(h)&&(h+"").match(/^[0-9,-,\.]*$/g)?s="<v>"+h+"</v>":R&&D.isDate(h)?s="<v>"+D.VALUE(h)+"</v>":"boolean"==typeof h?(s="<v>"+(h?"1":"0")+"</v>",a='t="b"'):(a='t="inlineStr"',s="<is><t><![CDATA["+h+"]]></t></is>"),(R||p||g||m||w||y||x||C||b||I)&&(l='s="'+this.getStyleIndx(R,p,g,v,m,w,y,x,C,b,I)+'"'),M.push("<c "+a+" "+o+" "+l+">"+d+s+"</c>");M.push("</row>")}return M.join("")},getCell:function(e){var t=e.format,n=e.value;return t?pq.formulas.TEXT(n,t):n},getCSV:function(e){var t=[],n=this;return this.eachRow(e,function(e){var r=[];e.cells.forEach(function(e){r.push(n.getCell(e))}),t.push(r.join(","))}),t.join("\r\n")},getColor:function(){var e={},t=function(e){return 1===e.length?"0"+e:e};return function(n){var r,i,o=e[n];if(o||(/^#[0-9,a,b,c,d,e,f]{6}$/i.test(n)?i=n.replace("#",""):(r=n.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/i))&&(i=t((1*r[1]).toString(16))+t((1*r[2]).toString(16))+t((1*r[3]).toString(16))),i&&6===i.length&&(o=e[n]="ff"+i)),o)return o;throw"invalid color: "+n}}(),_getCol:function(e,t,n,r,i){if(i){if(i==this.colWidth&&!r)return;i=' customWidth="1" width="'+(i=1*(i/this.colRatio).toFixed(2))+'"'}e.push('<col min="',t,'" max="',n,'" hidden="',r,'"',i,"/>")},getCols:function(e){if(!e||!e.length)return"";var t,n,r,i,o,a=[],l=0,s=0,d=0,c=e.length;for(a.push("<cols>");c>d;d++){var u=e[d],h=u.hidden?1:0,f=u.width;l=(u.indx||l)+1,r===f&&i===h&&l==s+1?n=l:(o&&(this._getCol(a,t,n,i,r),t=null),n=l,null==t&&(t=l)),r=f,i=h,s=l,o=!0}return this._getCol(a,t,n,i,r),a.push("</cols>"),a.join("")},getContentTypes:function(e){for(var t=[],n=1;e>=n;n++)t.push('<Override PartName="/worksheet'+n+'.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"/>');return['<?xml version="1.0" encoding="UTF-8" standalone="yes"?>','<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types">','<Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/>','<Override PartName="/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"/>',t.join(""),'<Override PartName="/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/>',"</Types>"].join("")},getFillIndx:function(e){var t=this,n=t.fills=t.fills||{length:2};return t.getIndx(n,e)},getFontIndx:function(e,t,n,r,i,o){var a=this,l=a.fonts=a.fonts||{length:1};return a.getIndx(l,(e||"")+"_"+(t||"")+"_"+(n||"")+"_"+(r||"")+"_"+(i||"")+"_"+(o||""))},getFormatIndx:function(e){var t=this,n=t.formats=t.formats||{length:164};return t.numFmtIds[e]||t.getIndx(n,e)},getFrozen:function(e,t){return['<sheetViews><sheetView workbookViewId="0">','<pane xSplit="',t=t||0,'" ySplit="',e=e||0,'" topLeftCell="',pq.toLetter(t)+(e+1),'" activePane="bottomLeft" state="frozen"/>',"</sheetView></sheetViews>"].join("")},getIndx:function(e,t){var n=e[t];return null==n&&(n=e[t]=e.length,e.length++),n},getItem:function(e,t){var n,r,i=e[t],o=0,a=0,l=i?i.indx:-1;if(null==l||t==l)return i;if((n=-1==l?e.length-1:t)>=0)for(;;){if(++a>20)throw"not found";if((l=(i=e[r=Math.floor((n+o)/2)]).indx)==t)return i;if(l>t?n=r:o=r==o?r+1:r,o==n&&r==o)break}},getMergeCells:function(e){var t=[],n=0,r=(e=e||[]).length;for(t.push('<mergeCells count="'+r+'">');r>n;n++)t.push('<mergeCell ref="',e[n],'"/>');return t.push("</mergeCells>"),r?t.join(""):""},getWBook:function(e){return['<?xml version="1.0" encoding="UTF-8" standalone="yes"?><workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships">',"<bookViews><workbookView /></bookViews><sheets>",e.map(function(e,t){return t++,["=tiffu obnf>#".replace(/[^\s]/g,function(e){return String.fromCharCode(e.charCodeAt(0)-1)}),"RctcoSwgt{ Gxcn ".replace(/[^\s]/g,function(e){return String.fromCharCode(e.charCodeAt(0)-2)})+t,'" sheetId="',t,'" r:id="rId',t,'"/>'].join("")}).join(""),"</sheets></workbook>"].join("")},getWBookRels:function(e){for(var t=[],n=1;e>=n;n++)t.push('<Relationship Id="rId'+n+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="/worksheet'+n+'.xml"/>');return['<?xml version="1.0" encoding="UTF-8" standalone="yes"?>','<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">',t.join(""),'<Relationship Id="rId',n,'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="/styles.xml"/>',"</Relationships>"].join("")},getSheet:function(e,t,n,r){return['<?xml version="1.0" encoding="UTF-8" standalone="yes"?><worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships">',e,t,"<sheetData>",n,"</sheetData>",r,"</worksheet>"].join("")},getStyleIndx:function(e,t,n,r,i,o,a,l,s,d,c){var u=this,h=(e?u.getFormatIndx(e):"")+"_"+(t?u.getFillIndx(t):"")+"_"+(n||r||i||s||d||c?u.getFontIndx(n,r,i,s,d,c):"")+"_"+(o||"")+"_"+(a||"")+"_"+(l||""),f=u.styles=u.styles||{length:1};return u.getIndx(f,h)},getStyle:function(){var e,t,n,r,i,o,a,l,s,d,c,u,h,f,p,g,v,m,w=this.formats,x=this.fills,y=this.fonts,C=this.styles,b=[],I=[],_=[],q=['<xf numFmtId="0" applyNumberFormat="1"/>'];if(w){for(m in delete w.length,w)b.push('<numFmt numFmtId="'+w[m]+'" formatCode="'+m+'"/>');delete this.formats}if(x){for(m in delete x.length,x)I.push('<fill><patternFill patternType="solid"><fgColor rgb="'+this.getColor(m)+'"/></patternFill></fill>');delete this.fills}if(y){for(m in delete y.length,y)e="<color "+((a=m.split("_"))[0]?'rgb="'+this.getColor(a[0])+'"':'theme="1"')+" />",n='<name val="'+(a[1]||"Calibri")+'"/>',t='<sz val="'+(a[2]||11)+'"/>',r=a[3]?"<b/>":"",i=a[4]?"<i/>":"",o=a[5]?"<u/>":"",_.push("<font>",r,i,o,t,e,n,'<family val="2"/></font>');delete this.fonts}if(C){for(m in delete C.length,C)l=(a=m.split("_"))[0],s=a[1],d=a[2],c=a[3],f=s?' applyFill="1" fillId="'+s+'" ':"",g=d?' applyFont="1" fontId="'+d+'" ':"",p=l?' applyNumberFormat="1" numFmtId="'+l+'"':"",u=(u=a[4])?' vertical="'+u+'" ':"",h=(h=a[5])?' wrapText="1" ':"",v=(c=c?' horizontal="'+c+'" ':"")||u||h?' applyAlignment="1"><alignment '+c+u+h+"/></xf>":"/>",q.push("<xf "+p+f+g+v);delete this.styles}return b=b.join("\n"),q=q.join("\n"),I=I.join("\n"),['<?xml version="1.0" encoding="UTF-8" standalone="yes"?>','<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">',"<numFmts>",b,"</numFmts>","<fonts>",'<font><sz val="11"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font>',_=_.join(""),"</fonts>",'<fills><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill>',I,"</fills>",'<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>','<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/>',"</cellStyleXfs>","<cellXfs>",q,"</cellXfs>",'<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>','<dxfs count="0"/><tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleLight16"/>',"</styleSheet>"].join("")},importXl:function(){var e=pq.excelImport;return e.Import.apply(e,arguments)},SpreadSheet:function(e){var n,r=t.SpreadSheet;if(this instanceof r==0)return new r(e);for(n in e)this[n]=e[n]}};t.colRatio=8,t.colWidth=8.43*t.colRatio,t.numFmtIds=function(){var e=pq.excelImport.preDefFormats,t={};for(var n in e)t[e[n]]=n;return t}(),pq.postRequest=function(t){var n,r,i=t.format,o=t.url,a=t.filename||"pqGrid";if(t.zip&&"xlsx"!=i){var l=new JSZip;l.file(a+"."+t.format,t.data),n=l.generate({type:"base64",compression:"DEFLATE"}),r=!0,i="zip"}else r=!!t.decodeBase,n=t.data;return o&&e.ajax({url:o,type:"POST",cache:!1,data:{pq_ext:i,pq_data:n,pq_decode:r,pq_filename:a},success:function(t){o+=(o.indexOf("?")>0?"&":"?")+"pq_filename="+t,e(document.body).append("<iframe height='0' width='0' frameborder='0' src=\""+o+'"></iframe>')}}),n},t.SpreadSheet.prototype={getCell:function(e,n){var r=this.rows||[],i=t.getItem(r,e)||{cells:[]};return t.getItem(i.cells,n)}}}(jQuery),function(e){var t=e.paramquery;t.pqGrid.defaults.formulasModel={on:!0},t.pqGrid.prototype.getFormula=function(e,t){var n=this.iFormulas.getFnW(e,t);return n?n.fn:void 0},e(document).on("pqGrid:bootup",function(e,t){var r=t.instance;r.options.formulasModel.on&&(r.iFormulas=new n(r))});var n=t.cFormulas=function(e){var t=this;t.that=e,t.fn={},e.on("dataReadyDone",function(){t.onDataReadyDone()}).on("columnOrder",function(){t.onColumnOrder()}).on("beforeValidateDone",function(e,n){t.onBeforeValidateDone(n)}).on("autofillSeries",function(e,n){t.onAutofill(n)}).on("editorBegin",function(e,n){t.onEditorBegin(n)}).on("editorEnd",function(){t.onEditorEnd()}).on("editorKeyUp editorClick",function(e,n){t.onEditorKeyUp(e,n)}).on(!0,"change",function(e,n){t.onChange(n)})};e.extend(n,{deString:function(e,t,n){var r=[];return e=t(e=e.replace(/"(([^"]|"")+)"/g,function(e,t){return r.push(t),"#"+(r.length-1)+"#"})),r.forEach(function(t,r){n&&(t=t.replace(/""/g,'\\"')),e=e.replace("#"+r+"#",'"'+t+'"')}),e},selectExp:function(e,t){var n,r,i,o=e.slice(0,t).replace(/"[^"]*"/g,"");return!/"[^"]+$/.test(o)&&(i=e.slice(t),(n=o.match(/.*?([a-z0-9:$]+)$/i))&&(""===i&&(r=[])||(r=i.match(/^([a-z0-9:$]+)?.*/i))))?(n[1]+(null==r[1]?"":r[1])).replace(/\$/g,"").toUpperCase():void 0},shiftRC:function(e){var t=n,r=e?e.get_p_data().length-1:0,i=e?e.colModel.length-1:0;return function(e,n,o){return n&&(e=t.shiftC(e,n,i)),o&&(e=t.shiftR(e,o,r)),e}},shiftR:function(e,t,r){return n.deString(e,function(e){return(e=e.replace(/(\$?)([A-Z]+)(\$?)([\d]+)/g,function(e,n,i,o,a){if(o)return e;var l=1*a+t-1;return n+i+((l=0>l?0:r&&l>r?r:l)+1)})).replace(/(\$?)([0-9]+):(\$?)([0-9]+)/g,function(e,n,i,o,a){var l;return n||(i=(l=0>(l=1*i+t-1)?0:r&&l>r?r:l)+1),o||(a=(l=0>(l=1*a+t-1)?0:r&&l>r?r:l)+1),n+i+":"+o+a})})},shiftC:function(e,t,r){return n.deString(e,function(e){return(e=e.replace(/(\$?)([A-Z]+)(\$?)([\d]+)/g,function(e,n,i,o,a){if(n)return e;var l=pq.toNumber(i)+t;return l=0>l?0:r&&l>r?r:l,pq.toLetter(l)+o+a})).replace(/(\$?)([A-Z]+):(\$?)([A-Z]+)/g,function(e,n,i,o,a){var l;return n||(l=0>(l=pq.toNumber(i)+t)?0:r&&l>r?r:l,i=pq.toLetter(l)),o||(l=0>(l=pq.toNumber(a)+t)?0:r&&l>r?r:l,a=pq.toLetter(l)),n+i+":"+o+a})})}}),n.prototype={addRowIndx:function(e){e.forEach(function(e){var t,n,r=e.newRow,i=r.pq_fn;if(i)for(n in i)(t=i[n]).ri=t.riO=r.pq_ri})},cell:function(e){var t=this.toCell(e),n=t.r,r=t.c;return this.valueArr(n,r)[0]},check:function(e){return n.deString(e,function(e){return(e=e.split(" ").join("")).toUpperCase().replace(/([A-Z]+)([0-9]+)\:([A-Z]+)([0-9]+)/g,function(e,t,n,r,i){return(t=pq.toNumber(t))>(r=pq.toNumber(r))&&(t=[r,r=t][0]),1*n>1*i&&(n=[i,i=n][0]),pq.toLetter(t)+n+":"+pq.toLetter(r)+i})})},computeAll:function(){var e,t=this,n=t.that;return t.initObj(),t.eachFormula(function(t){t.clean=0,e=!0}),e?(t.eachFormula(function(e,r,i,o,a){r[i]=t.execIfDirty(e),a&&n.isValid({rowIndx:o,rowData:r,dataIndx:i,allowInvalid:!0})}),!0):void 0},eachFormula:function(e){var t=!0,n=this.that,r=function(n,r,i){var o,a;for(o in i)"string"!=typeof(a=i[o])&&e(a,n,o,r,t)},i=function(e){for(var t,n,i=(e=e||[]).length;i--;)(t=e[i])&&(n=t.pq_fn)&&r(t,i,n)};i(n.get_p_data()),t=!1,i(n.options.summaryData)},execIfDirty:function(e){if(e.clean){if(.5==e.clean)return}else e.clean=.5,e.val=this.exec(e.fn,e.ri,e.ci),e.clean=1;return e.val},exec:function(e,t,r){var i=this,o=i.obj,a=n.deString(e,function(e){return(e=(e=e.replace(/(\$?([A-Z]+)?\$?([0-9]+)?\:\$?([A-Z]+)?\$?([0-9]+)?)/g,function(e,t){return o[t]=o[t]||i.range(t),"this['"+t+"']"})).replace(/(?:[^:]|^)(\$?[A-Z]+\$?[0-9]+)(?!:)/g,function(e,t){o[t]=o[t]||i.cell(t);var n=e.charAt(0);return(e===t?"":"$"==n?"":n)+t})).replace(/{/g,"[").replace(/}/g,"]").replace(/(?:[^><])(=+)/g,function(e,t){return e+(1===t.length?"=":"")}).replace(/<>/g,"!=").replace(/&/g,"+")},!0);o.getRange=function(){return{r1:t,c1:r}};try{var l=new Function("with(this){return "+a+"}").call(o);"function"==typeof l?l="#NAME?":"string"==typeof l&&n.deString(l,function(e){e.indexOf("function")>=0&&(l="#NAME?")}),l!=l&&(l=null)}catch(e){l="string"==typeof e?e:e.message}return l},initObj:function(){this.obj=e.extend({iFormula:this},pq.formulas)},onAutofill:function(e){var t=e.sel,r=this.that,i=t.r,o=t.c,a=e.x,l=r.getRowData({rowIndx:i}),s=r.colModel,d=s.length-1,c=r.get_p_data().length-1,u=s[o].dataIndx,h=this.getFnW(l,u);h&&(e.series=function(e){return"="+(a?n.shiftC(h.fn,e-1,d):n.shiftR(h.fn,e-1,c))})},onBeforeValidateDone:function(e){var t=this,n=this.that.colIndxs,r=function(r){r.forEach(function(r){var i,o,a,l=r.newRow,s=r.rowData;for(o in l)if("string"==typeof(i=l[o])&&"="===i[0]){e.allowInvalid=!0;var d=t.check(i),c=s?t.getFnW(s,o):null;c?d!==c.fn&&(r.oldRow[o]="="+c.fn,t.save(s,o,d,r.rowIndx,n[o])):t.save(s||l,o,d,r.rowIndx,n[o])}else s&&(a=t.remove(s,o))&&(r.oldRow[o]="="+a.fn)})};r(e.addList),r(e.updateList)},onChange:function(e){this.addRowIndx(e.addList),e.addList.length||e.deleteList.length||this.computeAll()&&"edit"===e.source&&this.that.refresh({header:!1})},onColumnOrder:function(){var e,t,r=this,i=r.that,o=n.shiftRC(i),a=i.colIndxs;r.eachFormula(function(n,r,i){e=a[i],n.ci!=e&&(t=e-n.ciO,n.ci=e,n.fn=o(n.fnOrig,t,n.ri-n.riO))}),null!=e&&r.computeAll()},onEditorBegin:function(e){var t=this.getFnW(e.rowData,e.dataIndx);t&&e.$editor.val("="+t.fn)},onEditorEnd:function(){pq.intel.hide()},onEditorKeyUp:function(e,t){var n=t.$editor,r=n[0],i=r.value,o=pq.intel,a=r.selectionEnd;i&&0===i.indexOf("=")&&(o.popup(i,a,n),this.select(i,a))},onDataReadyDone:function(){var e,t=this,r=t.that,i=n.shiftRC(r),o=r.colIndxs,a=function(n,r,a){var l,s,d;for(s in a)l=a[s],e=!0,"string"==typeof l?t.save(n,s,t.check(l),r,o[s]):l.ri!=r&&(d=r-l.riO,l.ri=r,l.fn=i(l.fnOrig,l.ci-l.ciO,d))},l=function(e){for(var t,n,r=(e=e||[]).length;r--;)(t=e[r])&&(n=t.pq_fn)&&a(t,r,n)};l(r.get_p_data()),l(r.options.summaryData),t.initObj(),e&&t.computeAll()},getFnW:function(e,t){var n;return(n=e.pq_fn)?n[t]:void 0},remove:function(e,t){var n,r=e.pq_fn;return r&&(n=r[t])?(delete r[t],pq.isEmpty(r)&&delete e.pq_fn,n):void 0},range:function(e){var t=e.split(":"),n=this.that,r=this.toCell(t[0]),i=r.r,o=r.c,a=this.toCell(t[1]),l=a.r,s=a.c;return this.valueArr(null==i?0:i,null==o?0:o,null==l?n.get_p_data().length-1:l,null==s?n.colModel.length-1:s)},save:function(e,t,n,r,i){var o=n.replace(/^=/,""),a={clean:0,fn:o,fnOrig:o,riO:r,ciO:i,ri:r,ci:i};return(e.pq_fn=e.pq_fn||{})[t]=a,a},selectRange:function(e,t){var r,i,o,a,l=n.selectExp(e,t);return l?(/^([a-z0-9]+):([a-z0-9]+)$/i.test(l)?(r=l.split(":"),i=this.toCell(r[0]),o=this.toCell(r[1]),a={r1:i.r,c1:i.c,r2:o.r,c2:o.c}):/^[a-z]+[0-9]+$/i.test(l)&&(a={r1:(i=this.toCell(l)).r,c1:i.c}),a):void 0},select:function(e,t){var n=this.selectRange(e,t),r=this.that;n?r.Range(n).select():r.Selection().removeAll()},toCell:function(e){var t=e.match(/\$?([A-Z]+)?\$?(\d+)?/);return{c:t[1]?pq.toNumber(t[1]):null,r:t[2]?t[2]-1:null}},valueArr:function(e,t,n,r){var i,o,a,l,s,d,c=this.that,u=c.colModel,h=u.length,f=[],p=[],g=[],v=c.get_p_data(),m=v.length;for(r=null==r?t:r,t=0>t?0:t,n=(n=null==n?e:n)>=m?m-1:n,r=r>=h?h-1:r,i=e=0>e?0:e;n>=i;i++){for(a=v[i],o=t;r>=o;o++)l=u[o].dataIndx,d=(s=this.getFnW(a,l))?this.execIfDirty(s):a[l],f.push(d),g.push(d);p.push(g),g=[]}return f.get2Arr=function(){return p},f.getRange=function(){return{r1:e,c1:t,r2:n,c2:r}},f}}}(jQuery),function(e){pq.intel={removeFn:function(e){return e.length===(e=e.replace(/[a-z]*\([^()]*\)/gi,"")).length?e:this.removeFn(e)},removeStrings:function(e){return(e=e.replace(/"[^"]*"/g,"")).replace(/"[^"]*$/,"")},getMatch:function(e,t){var n,r=pq.formulas,i=[];for(n in e=e.toUpperCase(),r)if(t){if(n===e)return[n]}else 0===n.indexOf(e)&&i.push(n);return i},intel:function(e){e=this.removeStrings(e);var t,n,r;return(t=(e=this.removeFn(e)).match(/^=(.*[,+\-&*\s(><=])?([a-z]+)((\()[^)]*)?$/i))&&(n=t[2],t[4]&&(r=!0)),[n,r]},movepos:function(e){var t;return(t=e.match(/([^a-z].*)/i))?e.indexOf(t[1])+1:e.length},intel3:function(e,t){t<e.length&&/=(.*[,+\-&*\s(><=])?[a-z]+$/i.test(e.slice(0,t))&&(t+=this.movepos(e.slice(t)));var n=e.substr(0,t);return this.intel(n)},item:function(e){var t=this.that.options.strFormulas;return"<div>"+((t=t?t[e]:null)?t[0]:e)+"</div>"+(t?"<div style='font-size:0.9em;color:#888;margin-bottom:5px;'>"+t[1]+"</div>":"")},popup:function(t,n,r){var i,o,a=r.closest(".pq-grid"),l=e(".pq-intel"),s=a,d=this.intel3(t,n);this.that=a.pqGrid("instance"),l.remove(),(i=d[0])&&((o=this.getMatch(i,d[1]).map(this.item,this).join(""))&&e("<div class='pq-intel' style='width:350px;max-height:300px;overflow:auto;background:#fff;border:1px solid gray;box-shadow: 4px 4px 2px #aaaaaa;padding:5px;'></div>").appendTo(s).html(o).position({my:"center top",at:"center bottom",collision:"flipfit",of:r,within:s}))},hide:function(){e(".pq-intel").remove()}}}(jQuery),function($){var f=pq.formulas={evalify:function(e,t){var n,r,i=t.match(/([><=]{1,2})?(.*)/),o=i[1]||"=",a=i[2],l=this;return/(\*|\?)/.test(a)?n=a.replace(/\*/g,".*").replace(/\?/g,"\\S").replace(/\(/g,"\\(").replace(/\)/g,"\\)"):(o="="===o?"==":"<>"===o?"!=":o,r=this.isNumber(a)),e.map(function(e){return n?e=("<>"===o?"!":"")+"/^"+n+'$/i.test("'+(e=null==e?"":e)+'")':r?e=l.isNumber(e)?e+o+a:"false":e='"'+((e=null==e?"":e)+"").toUpperCase()+'"'+o+'"'+(a+"").toUpperCase()+'"',e})},get2Arr:function(e){return e.get2Arr?e.get2Arr():e},isNumber:function(e){return parseFloat(e)==e},_reduce:function(e,t){var n=(e.length,[]),r=t.map(function(e){return[]});return e.forEach(function(e,i){null!=e&&(e*=1,isNaN(e)||(n.push(e),r.forEach(function(e,n){e.push(t[n][i])})))}),[n,r]},reduce:function(e){var t=(e=this.toArray(e)).shift(),n=e.filter(function(e,t){return t%2==0}),r=this._reduce(t,n);return t=r[0],n=r[1],[t].concat(e.map(function(t,r){return r%2==0?n[r/2]:e[r]}))},strDate1:"(\\d{1,2})/(\\d{1,2})/(\\d{2,4})",strDate2:"(\\d{4})-(\\d{1,2})-(\\d{1,2})",strTime:"(\\d{1,2})(:(\\d{1,2}))?(:(\\d{1,2}))?(\\s(AM|PM))?",isDate:function(e){return this.reDate.test(e)&&Date.parse(e)||e&&e.constructor==Date},toArray:function(e){for(var t=[],n=0,r=e.length;r>n;n++)t.push(e[n]);return t},valueToDate:function(e){var t=new Date(Date.UTC(1900,0,1));return t.setUTCDate(t.getUTCDate()+e-2),t},varToDate:function(e){var t,n,r,i,o;if(this.isNumber(e))t=this.valueToDate(e);else if(e.getTime)t=e;else if("string"==typeof e){if((n=e.match(this.reDateTime))?n[12]?(o=1*n[13],i=1*n[15],r=1*n[14]):(r=1*n[2],i=1*n[3],o=1*n[4]):(n=e.match(this.reDate2))?(o=1*n[1],i=1*n[3],r=1*n[2]):(n=e.match(this.reDate1))&&(r=1*n[1],i=1*n[2],o=1*n[3]),!n)throw"#N/A date";e=Date.UTC(o,r-1,i),t=new Date(e)}return t},_IFS:function(arg,fn){for(var len=arg.length,i=0,arr=[],a=0;len>i;i+=2)arr.push(this.evalify(arg[i],arg[i+1]));for(var condsIndx=arr[0].length,lenArr=len/2,j;condsIndx--;){for(j=0;lenArr>j&&eval(arr[j][condsIndx]);j++);a+=j===lenArr?fn(condsIndx):0}return a},ABS:function(e){return Math.abs(e.map?e[0]:e)},ACOS:function(e){return Math.acos(e)},AND:function(){var arr=this.toArray(arguments);return eval(arr.join(" && "))},ASIN:function(e){return Math.asin(e)},ATAN:function(e){return Math.atan(e)},_AVERAGE:function(e){var t=0,n=0;if(e.forEach(function(e){parseFloat(e)==e&&(n+=1*e,t++)}),t)return n/t;throw"#DIV/0!"},AVERAGE:function(){return this._AVERAGE(pq.flatten(arguments))},AVERAGEIF:function(e,t,n){return this.AVERAGEIFS(n||e,e,t)},AVERAGEIFS:function(){var e=this.reduce(arguments),t=0,n=e.shift(),r=this._IFS(e,function(e){return t++,n[e]});if(!t)throw"#DIV/0!";return r/t},TRUE:!0,FALSE:!1,CEILING:function(e){return Math.ceil(e)},CHAR:function(e){return String.fromCharCode(e)},CHOOSE:function(){var e=pq.flatten(arguments),t=e[0];if(t>0&&t<e.length)return e[t];throw"#VALUE!"},CODE:function(e){return(e+"").charCodeAt(0)},COLUMN:function(e){return(e||this).getRange().c1+1},COLUMNS:function(e){var t=e.getRange();return t.c2-t.c1+1},CONCATENATE:function(){var e=pq.flatten(arguments),t="";return e.forEach(function(e){t+=e}),t},COS:function(e){return Math.cos(e)},_COUNT:function(e){var t=pq.flatten(e),n=this,r=0,i=0,o=0;return t.forEach(function(e){null==e||""===e?r++:(i++,n.isNumber(e)&&o++)}),[r,i,o]},COUNT:function(){return this._COUNT(arguments)[2]},COUNTA:function(){return this._COUNT(arguments)[1]},COUNTBLANK:function(){return this._COUNT(arguments)[0]},COUNTIF:function(e,t){return this.COUNTIFS(e,t)},COUNTIFS:function(){return this._IFS(arguments,function(){return 1})},DATE:function(e,t,n){if(0>e||e>9999)throw"#NUM!";return 1899>=e&&(e+=1900),this.VALUE(new Date(Date.UTC(e,t-1,n)))},DATEVALUE:function(e){return this.DATEDIF("1/1/1900",e,"D")+2},DATEDIF:function(e,t,n){var r,i=this.varToDate(t),o=this.varToDate(e),a=(i.getTime()-o.getTime())/864e5;if("Y"===n)return parseInt(a/365);if("M"===n)return r=i.getUTCMonth()-o.getUTCMonth()+12*(i.getUTCFullYear()-o.getUTCFullYear()),o.getUTCDate()>i.getUTCDate()&&r--,r;if("D"===n)return a;throw"unit N/A"},DAY:function(e){return this.varToDate(e).getUTCDate()},DAYS:function(e,t){return this.DATEDIF(t,e,"D")},DEGREES:function(e){return 180/Math.PI*e},EOMONTH:function(e,t){t=t||0;var n=this.varToDate(e);return n.setUTCMonth(n.getUTCMonth()+t+1),n.setUTCDate(0),this.VALUE(n)},EXP:function(e){return Math.exp(e)},FIND:function(e,t,n){return t.indexOf(e,n?n-1:0)+1},FLOOR:function(e,t){return 0>e*t?"#NUM!":parseInt(e/t)*t},HLOOKUP:function(e,t,n,r){null==r&&(r=!0),t=this.get2Arr(t);var i=this.MATCH(e,t[0],r?1:0);return this.INDEX(t,n,i)},HOUR:function(e){return Date.parse(e)?new Date(e).getHours():24*e},IF:function(e,t,n){return e?t:n},INDEX:function(e,t,n){return t=t||1,n=n||1,"function"==typeof(e=this.get2Arr(e))[0].push?e[t-1][n-1]:e[t>1?t-1:n-1]},INDIRECT:function(e){return this.iFormula.cell(e.toUpperCase())},LARGE:function(e,t){return e.sort(),e[e.length-(t||1)]},LEFT:function(e,t){return e.substr(0,t||1)},LEN:function(e){return(e=(e.map?e:[e]).map(function(e){return e.length})).length>1?e:e[0]},LOOKUP:function(e,t,n){n=n||t;var r=this.MATCH(e,t,1);return this.INDEX(n,1,r)},LOWER:function(e){return(e+"").toLocaleLowerCase()},_MAXMIN:function(e,t){var n,r=this;return e.forEach(function(e){null!=e&&(e=r.VALUE(e),r.isNumber(e)&&(e*t>n*t||null==n)&&(n=e))}),null!=n?n:0},MATCH:function(val,arr,type){var isNumber=this.isNumber(val),_isNumber,sign,indx,_val,i=0,len=arr.length;if(null==type&&(type=1),val=isNumber?val:val.toUpperCase(),0===type){for(arr=this.evalify(arr,val+""),i=0;len>i;i++)if(_val=arr[i],eval(_val)){indx=i+1;break}}else{for(i=0;len>i;i++)if(_val=arr[i],_isNumber=this.isNumber(_val),_val=arr[i]=_isNumber?_val:_val?_val.toUpperCase():"",val==_val){indx=i+1;break}if(!indx){for(i=0;len>i;i++)if(_val=arr[i],_isNumber=this.isNumber(_val),type*(val>_val?-1:1)==1&&isNumber==_isNumber){indx=i;break}indx=null==indx?i:indx}}if(indx)return indx;throw"#N/A"},MAX:function(){var e=pq.flatten(arguments);return this._MAXMIN(e,1)},MEDIAN:function(){var e=pq.flatten(arguments).filter(function(e){return 1*e==e}).sort(function(e,t){return t-e}),t=e.length,n=t/2;return n===parseInt(n)?(e[n-1]+e[n])/2:e[(t-1)/2]},MID:function(e,t,n){if(1>t||0>n)throw"#VALUE!";return e.substr(t-1,n)},MIN:function(){var e=pq.flatten(arguments);return this._MAXMIN(e,-1)},MODE:function(){var e,t,n=pq.flatten(arguments),r={},i=0;if(n.forEach(function(n){(e=r[n]=r[n]?r[n]+1:1)>i&&(i=e,t=n)}),2>i)throw"#N/A";return t},MONTH:function(e){return this.varToDate(e).getUTCMonth()+1},OR:function(){var arr=this.toArray(arguments);return eval(arr.join(" || "))},PI:function(){return Math.PI},POWER:function(e,t){return Math.pow(e,t)},PRODUCT:function(){var e=pq.flatten(arguments),t=1;return e.forEach(function(e){t*=e}),t},PROPER:function(e){return e.replace(/(\S+)/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},RADIANS:function(e){return Math.PI/180*e},RAND:function(){return Math.random()},RANK:function(e,t,n){for(var r=JSON.stringify(t.getRange()),i=this,o=r+"_range",a=0,l=(t=this[o]||(i[o]=t,t.sort(function(e,t){return e-t}))).length;l>a;a++)if(e===t[a])return n?a+1:l-a},RATE:function(){},REPLACE:function(e,t,n,r){return(e+="").substr(0,t-1)+r+e.substr(t+n-1)},REPT:function(e,t){for(var n="";t--;)n+=e;return n},RIGHT:function(e,t){return t=t||1,e.substr(-1*t,t)},_ROUND:function(e,t,n){var r=Math.pow(10,t),i=e*r,o=parseInt(i);return n(o,i-o)/r},ROUND:function(e,t){return this._ROUND(e,t,function(e,t){var n=Math.abs(t);return e+(n>=.5?n/t:0)})},ROUNDDOWN:function(e,t){return this._ROUND(e,t,function(e){return e})},ROUNDUP:function(e,t){return this._ROUND(e,t,function(e,t){return e+(t?Math.abs(t)/t:0)})},ROW:function(e){return(e||this).getRange().r1+1},ROWS:function(e){var t=e.getRange();return t.r2-t.r1+1},SEARCH:function(e,t,n){return e=e.toUpperCase(),(t=t.toUpperCase()).indexOf(e,n?n-1:0)+1},SIN:function(e){return Math.sin(e)},SMALL:function(e,t){return e.sort(),e[(t||1)-1]},SQRT:function(e){return Math.sqrt(e)},_STDEV:function(e){var t=(e=pq.flatten(e)).length,n=this._AVERAGE(e),r=0;return e.forEach(function(e){r+=(e-n)*(e-n)}),[r,t]},STDEV:function(){var e=this._STDEV(arguments);if(1===e[1])throw"#DIV/0!";return Math.sqrt(e[0]/(e[1]-1))},STDEVP:function(){var e=this._STDEV(arguments);return Math.sqrt(e[0]/e[1])},SUBSTITUTE:function(e,t,n,r){var i=0;return e.replace(new RegExp(t,"g"),function(e){return i++,r?i===r?n:t:n})},SUM:function(){var e=pq.flatten(arguments),t=0,n=this;return e.forEach(function(e){e=n.VALUE(e),n.isNumber(e)&&(t+=parseFloat(e))}),t},SUMIF:function(e,t,n){return this.SUMIFS(n||e,e,t)},SUMIFS:function(){var e=this.reduce(arguments),t=e.shift();return this._IFS(e,function(e){return t[e]})},SUMPRODUCT:function(){var e=this.toArray(arguments);return e=e[0].map(function(t,n){var r=1;return e.forEach(function(e){var t=e[n];r*=parseFloat(t)==t?t:0}),r}),pq.aggregate.sum(e)},TAN:function(e){return Math.tan(e)},TEXT:function(e,t){return this.isNumber(e)&&t.indexOf("#")>=0?pq.formatNumber(e,t):$.Uidatepicker.formatDate(pq.excelToJui(t),this.varToDate(e))},TIME:function(e,t,n){return(e+t/60+n/3600)/24},TIMEVALUE:function(e){var t=e.match(this.reTime);if(t&&null!=t[1]&&(null!=t[3]||null!=t[7]))var n=1*t[1],r=1*(t[3]||0),i=1*(t[5]||0),o=(t[7]||"").toUpperCase(),a=n+r/60+i/3600;if(a>=0&&(o&&13>a||!o&&24>a))return"PM"==o&&12>n?a+=12:"AM"==o&&12==n&&(a-=12),a/24;throw"#VALUE!"},TODAY:function(){var e=new Date;return this.VALUE(new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())))},TRIM:function(e){return e.replace(/^\s+|\s+$/gm,"")},TRUNC:function(e,t){return~~(e*(t=Math.pow(10,t||0)))/t},UPPER:function(e){return(e+"").toLocaleUpperCase()},VALUE:function(e){var t,n;if(e)if(parseFloat(e)==e)n=parseFloat(e);else if(this.isDate(e))n=this.DATEVALUE(e);else if(t=e.match(this.reDateTime)){var r=t[1]||t[12],i=e.substr(r.length+1);n=this.DATEVALUE(r)+this.TIMEVALUE(i)}else(t=e.match(this.reTime))?n=this.TIMEVALUE(e):n=(n=e.replace(/[^0-9\-.]/g,"")).replace(/(\.[1-9]*)0+$/,"$1").replace(/\.$/,"");else n=0;return n},VAR:function(){var e=this._STDEV(arguments);return e[0]/(e[1]-1)},VARP:function(){var e=this._STDEV(arguments);return e[0]/e[1]},VLOOKUP:function(e,t,n,r){null==r&&(r=!0);var i=(t=this.get2Arr(t)).map(function(e){return e[0]}),o=this.MATCH(e,i,r?1:0);return this.INDEX(t,o,n)},YEAR:function(e){return this.varToDate(e).getUTCFullYear()}};f.reDate1=new RegExp("^"+f.strDate1+"$"),f.reDate2=new RegExp("^"+f.strDate2+"$"),f.reDate=new RegExp("^"+f.strDate1+"$|^"+f.strDate2+"$"),f.reTime=new RegExp("^"+f.strTime+"$","i"),f.reDateTime=new RegExp("^("+f.strDate1+")\\s"+f.strTime+"$|^("+f.strDate2+")\\s"+f.strTime+"$")}(jQuery),function(e){pq.Select=function(t,n){if(this instanceof pq.Select==0)return new pq.Select(t,n);var r=n.closest(".pq-grid"),i=e("<div/>").appendTo(r);pq.grid(i,e.extend({width:n[0].offsetWidth,scrollModel:{autoFit:!0},height:"flex",autoRow:!1,numberCell:{show:!1},hoverMode:"row",fillHandle:"",stripeRows:!1,showTop:!1,showHeader:!1},t)),pq.makePopup(i[0]),i.position({my:"left top",at:"left bottom",of:n,collision:"flipfit",within:r})}}(jQuery),function(e){var t=function(e){this.options=e.options};t.prototype={empty:function(){for(var e in this)0==e.indexOf("_")&&delete this[e];delete this.options.dataModel.dataPrimary},getCM:function(){return this._cm},setCM:function(e){this._cm=e},getCols:function(){return this._columns},setCols:function(e){this._columns=e},getDMData:function(){return this.options.dataModel.dataPrimary},setDMData:function(e){this.options.dataModel.dataPrimary=e},getOCM:function(){return this._ocm},setOCM:function(e){this._ocm=e}},e(document).on("pqGrid:bootup",function(e,n){var r=n.instance,i=r.Group();i.primary=new t(r),r.on("beforeFilterDone",i.onBeforeFilterDone.bind(i)).one("CMInit",i.oneCMInit.bind(i))});var n={},r={clearPivot:function(e){if(this.isPivot()){var t=this.that,n=t.options.dataModel,r=this.primary;if(r.getOCM()&&t.refreshCM(r.getOCM()),e){if(!r.getDMData())throw"!primary.getDMData";n.data=r.getDMData()}else r.getDMData()&&(n.data=r.getDMData());return this.primary.empty(),this.setPivot(!1),!0}},getColsPrimary:function(){return this.primary.getCols()||this.that.columns},getCMPrimary:function(){return this.primary.getCM()||this.that.colModel},getOCMPrimary:function(){return this.primary.getOCM()||this.that.options.colModel},getSumCols:function(){return(n.getSumCols.call(this)||[]).map(function(e){return[e.dataIndx,e.dataType,e.summary,e.summary.type+"("+e.title+")",e.width,e.format,e.showifOpen]})},getVal:function(){return this._pivot?function(e,t){return e[t]}:n.getVal.apply(this,arguments)},groupData:function(){var e,t,r,i=this,o=i.that,a=o.options.groupModel,l=a.dataIndx,s=a.groupCols,d=i.isPivot(),c=!d&&a.pivot,u=s.length;if(c?(u&&(e=l.slice(),a.dataIndx=l=l.concat(s)),i.skipConcat=!0,t=a.titleInFirstCol,r=a.merge,a.titleInFirstCol=!1,a.fixCols=!0,a.merge=!1):d&&u&&(e=l.slice(),a.dataIndx.length=a.dataIndx.length-1,i.setPivot(!1)),n.groupData.call(i),c&&(o.pdata=o.pdata.reduce(function(e,t){return t.pq_gtitle&&e.push(t),e},[])),d&&u&&(a.dataIndx=e,i.setPivot(!0)),c){if(u){t?(a.titleInFirstCol=!0,a.fixCols=!1):e.length>1&&(a.merge=r),i.pivotData(l,e),a.dataIndx=e.slice(0,e.length-1),a.summaryInTitleRow="all",i.skipConcat=!1;var h=i.firstCol().dataIndx,f=e[e.length-1];t&&h!=f&&o.pdata.forEach(function(e){e[h]=e[f]}),n.groupData.call(i),a.dataIndx=e,i.setPivot(!0)}i.skipConcat=!1}o._trigger("groupData")},isPivot:function(){return this._pivot},getSorter:function(e){var t=e.pivotSortFn;return t||(t="number"==pq.getDataType(e)?function(e,t){return 1*e.sortby>1*t.sortby?1:-1}:function(e,t){return e.sortby>t.sortby?1:-1}),t},nestedCM:function(t,n){var r=this,i=n.groupCols,o=n.pivotColsTotal,a="hideifOpen"!=o&&null,l=[],s=[],d=r.that.columns;return d=i.map(function(e){var t=d[e];return l.push(r.getSorter(t)),s.push(pq.getDataType(t)),t}),function n(r,i,c){i=i||0,c=c||[];var u,h,f,p,g,v,m,w,x=0,y=[];if(e.isEmptyObject(r))for(;x<t.length;x++)u=t[x],(h=c.slice()).push(u[0]),f={dataIndx:h.join("_"),dataType:u[1],summary:u[2],title:u[3],width:u[4],format:u[5],showifOpen:u[6]},y.push(f);else{for(g in u=d[i],p=s[i],r)m="aggr"===g,(h=c.slice()).push(g),v=n(r[g],i+1,h),m?(w=v).forEach(function(e){e.showifOpen=a,e.type="aggr"}):(f={showifOpen:!0,sortby:g,title:pq.format(u,g,p),colModel:v},v.length>1&&!v.find(function(e){return!e.type}).dataIndx&&(f.collapsible={on:!0,last:null}),y.push(f));y.sort(l[i]),w&&y["before"==o?"unshift":"push"].apply(y,w)}return y}},onBeforeFilterDone:function(e,t){if(this.isPivot()){for(var n=t.rules,r=this.primary.getCols(),i=0;i<n.length;i++)if(!r[n[i].dataIndx])return!1;this.clearPivot(!0),t.header=!0}},oneCMInit:function(){this.updateAgg(this.that.options.groupModel.agg)},option:function(e,t,r,i){var o=this;o.isPivot()&&o.clearPivot(),n.option.call(o,e,t,r,i)},pivotData:function(t,n){var r,i,o=this.that,a=this.getSumCols(),l=this.getSumDIs(),s=o.options,d=s.groupModel,c=this.primary,u=o.pdata,h=o.columns;d.titleInFirstCol?i=[r=o.colModel[0]].concat(n.reduce(function(t,n){return n!=r.dataIndx&&t.push(e.extend({hidden:!0},h[n])),t},[])):i=n.map(function(e){return h[e]});var f=this.transformData(u,l,t,n),p=this.nestedCM(a,d)(f),g={};g.CM=i=i.concat(p),o._trigger("pivotCM",null,g),c.setOCM(s.colModel),c.setCM(o.colModel),c.setCols(o.columns),o.refreshCM(g.CM,{pivot:!0})},setPivot:function(e){this._pivot=e},transformData:function(e,t,n,r){var i,o,a,l,s=this,d=[],c=this.that,u=this.primary,h={},f=[],p=c.options,g=p.dataModel,v=p.groupModel,m=v.pivotColsTotal,w=r.length,x={},y=n.length;return e.forEach(function(e){var c,u,p=e.pq_level,g=p-w,v=x,C=n[p],b=e[C];if(g>=0)for(f[g]=b,c=0;g+1>c;c++)v=v[u=f[c]]=v[u]||{};p===y-1?t.forEach(function(t){(l=f.slice()).push(t),a[l.join("_")]=e[t]}):((!a||o>p&&w>p)&&(a={pq_gid:s.idCount++},i=!0),w>p&&(h[C]=a[C]=b),m&&y-2>=p&&p>=w-1&&t.forEach(function(t){(l=f.slice(0,g+1)).push("aggr"),l.push(t),a[l.join("_")]=e[t]})),o=p,i&&(d.push(a),r.forEach(function(e){void 0===a[e]&&(a[e]=h[e])}),i=!1)}),u.setDMData(g.data),g.data=c.pdata=d,m&&this.addAggrInCM(x,v.pivotTotalForSingle),x},addAggrInCM:function(e,t){var n,r=0;for(n in e)r++,this.addAggrInCM(e[n],t);r>(t?0:1)&&(e.aggr={})},updateAgg:function(e,t){var n,r=this.that.columns;if(t)for(n in t)r[n].summary=null;if(e)for(n in e)r[n].summary={type:e[n]}}},i=e.paramquery.cGroup.prototype;for(var o in r)n[o]=i[o],i[o]=r[o]}(jQuery),function(e){var t=e.paramquery;t.pqGrid.defaults.toolPanel={},t.pqGrid.prototype.ToolPanel=function(){return this.iToolPanel},e(document).on("pqGrid:bootup",function(e,n){var r=n.instance;r.iToolPanel=new t.cToolPanel(r)}),t.cToolPanel=function(e){var t=this;t.that=e,t.clsSort="pq-sortable",e.one("render",t.init.bind(t))},t.cToolPanel.prototype={getArray:function(e){return e.find(".pq-pivot-col").get().map(function(e){return e.id})},getInit:function(){return this._inited},getObj:function(e){var t={};return e.find(".pq-pivot-col").each(function(e,n){t[n.id]=n.getAttribute("type")||"sum"}),t},getSortCancel:function(){return this._sortCancel},_hide:function(e){this.$ele[e?"hide":"show"](),this.init(),this.that.refresh({soft:!0})},hide:function(){this._hide(!0)},init:function(){var e=this,t=e.$ele=e.that.$toolPanel;if(e.isVisible()&&!e.getInit()){var n=e.that,r=n.options,i=r.toolPanel,o=r.groupModel.pivot,a=" pq-pivot-label ",l=" pq-pivot-pane pq-border-1 ",s=e.isHideColPane(),d=i.hidePivotChkBox,c=o?"checked":"",u=e.clsSort;t.html(["<div class='pq-pivot-cols-all",l,"'>","<div class='",u,"' style='",d?"padding-top:0;":"","'></div>",d?"":["<div class='",a,"'>","<label><input type='checkbox' class='pq-pivot-checkbox' ",c,"/>",r.strTP_pivot,"</label>","</div>"].join(""),"</div>","<div class='pq-pivot-rows",l,"' style='display:",i.hideRowPane?"none":"",";'>","<div deny='denyGroup' class='",u,"'></div>","<div class='",a,"'><span class='pq-icon'></span>",r.strTP_rowPane,"</div>","</div>","<div class='pq-pivot-cols",l,"' style='display:",s?"none":"",";'>","<div deny='denyPivot' class='",u,"'></div>","<div class='",a,"'><span class='pq-icon'></span>",r.strTP_colPane,"</div>","</div>","<div class='pq-pivot-vals",l,"' style='display:",i.hideAggPane?"none":"",";'>","<div deny='denyAgg' class='",u,"'></div>","<div class='",a,"'><span class='pq-icon'></span>",r.strTP_aggPane,"</div>","</div>"].join("")),e.$pivotChk=t.find(".pq-pivot-checkbox").on("click",e.onPivotChange(e,n)),e.$colsAll=t.find(".pq-pivot-cols-all>."+u),e.$colsPane=t.find(".pq-pivot-cols"),e.$cols=t.find(".pq-pivot-cols>."+u),e.$rows=t.find(".pq-pivot-rows>."+u),e.$aggs=t.find(".pq-pivot-vals>."+u).on("click contextmenu",e.onClick.bind(e)),n.on("refreshFull",e.setHt.bind(e)).on("groupOption",e.onGroupOption.bind(e)),setTimeout(function(){n.element&&(n.on("CMInit",e.onCMInit.bind(e)),e.render())}),e.setInit()}},isHideColPane:function(){var e=this.that.options;return e.toolPanel.hideColPane||!e.groupModel.pivot},isDeny:function(e,t,n){var r=t.attr("deny");return this.that.iGroup.getColsPrimary()[n[0].id][r]},isVisible:function(){return this.$ele.is(":visible")},onCMInit:function(e,t){t.pivot||t.flex||t.group||this.that.Group().isPivot()||this.refresh()},onClick:function(t){var n=e(t.target),r=this,i=r.that;if(n.hasClass("pq-pivot-col")){var o=n[0].id,a=i.iGroup.getColsPrimary()[o],l={dataModel:{data:i.iGroup.getAggOptions(a.dataType).sort().map(function(e){return[e]})},cellClick:function(e,t){var i=t.rowData[0],o=this;n.attr("type",i),setTimeout(function(){o.destroy(),r.refreshGrid(),r.refresh()})}};return pq.Select(l,n),!1}},onGroupOption:function(e,t){if("tp"!=t.source){var n=t.oldGM,r=this.that.options.groupModel;r.groupCols==n.groupCols&&r.agg==n.agg&&r.dataIndx==n.dataIndx&&r.pivot==n.pivot||this.refresh()}},onPivotChange:function(e,t){return function(){var n={pivot:!!this.checked};t.Group().option(n,null,"tp"),e.showHideColPane()}},ph:function(e){return"<span style='color:#999;margin:1px;display:inline-block;'>"+e+"</span>"},refreshGrid:function(){var e=this,t=e.that,n=e.getArray(e.$cols),r=e.getObj(e.$aggs),i=e.getArray(e.$rows);t.Group().option({groupCols:n,dataIndx:i,agg:r,on:!!i.length},null,"tp"),setTimeout(function(){e.refresh()})},onReceive:function(e,t){return this.getSortCancel()?this.setSortCancel(!1):void this.refreshGrid()},onOver:function(t){return function(n,r){var i=e(this),o=r.item,a=o.parent(),l="addClass",s="removeClass",d=a[0]!=i[0]&&t.isDeny(a,i,o);r.helper.find(".ui-icon")[d?l:s]("ui-icon-closethick")[d?s:l]("ui-icon-check")}},onStop:function(t){return function(n,r){var i=e(this),o=r.item,a=o.parent();i[0]!=a[0]&&t.isDeny(i,a,o)&&(i.sortable("cancel"),t.setSortCancel(!0))}},onTimer:function(){var e;return function(t,n){clearTimeout(e);var r=this;e=setTimeout(function(){r.onReceive(t,n)})}}(),refresh:function(){this.setHtml(),e(this.panes).sortable("refresh")},render:function(){var t=this,n="."+t.clsSort,r=t.that;r.element&&(t.panes=[t.$colsAll,t.$cols,t.$rows,t.$aggs],t.setHtml(),e(t.panes).sortable({appendTo:t.$ele,connectWith:n,containment:t.$ele,cursor:"move",items:"> .pq-pivot-col:not('.pq-deny-drag')",helper:function(e,t){return t.clone(!0).css({opacity:"0.8"}).prepend("<span class='ui-icon-check ui-icon'></span>")},receive:t.onTimer.bind(t),stop:t.onStop(t),over:t.onOver(t),update:t.onTimer.bind(t),tolerance:"pointer"}),r._trigger("tpRender"))},setHtml:function(){var e,t,n=this,r=n.that,i=[],o=[],a=[],l=[],s=n.template,d=n.templateVals,c={},u=r.options,h=r.iGroup,f=h.getColsPrimary(),p=h.getCMPrimary(),g=u.groupModel,v=g.dataIndx,m=g.groupCols;v.concat(m).forEach(function(e){c[e]=1}),n.$pivotChk[0].checked=g.pivot,n.showHideColPane();for(var w=0,x=p.length;x>w;w++)t=(e=p[w]).dataIndx,e.tpHide||c[t]||(e.summary&&e.summary.type?l.push(d(t,e)):i.push(s(t,e)));v.forEach(function(e){a.push(s(e,f[e]))}),m.forEach(function(e){o.push(s(e,f[e]))}),n.$colsAll.html(i.join("")),n.$rows.html(a.join("")||n.ph(u.strTP_rowPH)),n.$cols.html(o.join("")||n.ph(u.strTP_colPH)),n.$aggs.html(l.join("")||n.ph(u.strTP_aggPH))},setAttrPanes:function(){this.$ele.attr("panes",this.panes.filter(function(e){return e.is(":visible")}).length)},setHt:function(){this.$ele.height(this.$ele.parent()[0].offsetHeight)},setSortCancel:function(e){this._sortCancel=e},setInit:function(){this._inited=!0},show:function(){this._hide(!1)},showHideColPane:function(){var e=this;e.$colsPane.css("display",e.isHideColPane()?"none":""),e.setAttrPanes()},template:function(e,t){return["<div id='",e,"' class='pq-pivot-col pq-border-2 ",t.tpCls||"","'>",t.title,"</div>"].join("")},templateVals:function(e,t){var n=t.summary.type;return["<div id='",e,"' type='",n,"' class='pq-pivot-col pq-border-2 ",t.tpCls||"","'>",n,"(",t.title,")</div>"].join("")},toggle:function(){this._hide(this.isVisible())}}}(jQuery),function(e){function t(e){var t=this;t.that=e,e.on("headerCellClick",t.onHeadCellClick.bind(t)).on("headerClick",t.onHeadClick.bind(t)).on("destroy",t.onDestroy.bind(t))}e.paramquery,e(document).on("pqGrid:bootup",function(e,n){var r=n.instance;r.iHeaderMenu=new t(r),r.HeaderMenu=function(){return r.iHeaderMenu}}),t.prototype={close:function(){this.$popup.remove(),this.$popup=null},popup:function(){return this.$popup},openFilterTab:function(){var e=this.$popup.find("a[href='tabs-filter']").closest("li").index();return this.$tabs.tabs("option","active",e),this.filterMenu},FilterMenu:function(){return this.filterMenu},getCM:function(){var e=this.that.options.strSelectAll||"Select All";return this.nested?[{editor:!1,dataIndx:"title",title:e,useLabel:!0,filter:{crules:[{condition:"contain"}]}},{hidden:!0,dataIndx:"visible",dataType:"bool"}]:[{type:"checkbox",cbId:"visible",dataIndx:"title",title:e,useLabel:!0,filter:{crules:[{condition:"contain"}]},editor:!1},{dataIndx:"visible",hidden:!0,cb:{header:!0},dataType:"bool"}]},getData:function(){var e=1,t=this,n=t.that,r=n.iRenderHead;return n.Columns().reduce(function(n){var i=this.getColIndx({column:n}),o=!n.hidden,a=n.childCount;return n.menuInHide||n.collapsible?void 0:(a&&(t.nested=!0),{visible:a?void 0:o,title:a?n.title:r.getTitle(n,i)||n.dataIndx,column:n,id:e++,pq_disable:n.menuInDisable,pq_close:n.menuInClose,colModel:a?n.colModel:void 0})})},getGridObj:function(){var t=this,n=t.that;return e.extend({dataModel:{data:t.getData()},colModel:t.getCM(),check:t.onChange.bind(t),treeExpand:t.onTreeExpand.bind(t),treeModel:t.nested?{dataIndx:"title",childstr:"colModel",checkbox:!0,checkboxHead:!0,cbId:"visible",cascade:!0,useLabel:!0}:void 0},n.options.menuUI.gridOptions)},onChange:function(e,t){if(!t.init){var n=[],r=[];(t.getCascadeList?t.getCascadeList():t.rows).forEach(function(e){var t=e.rowData,i=t.visible,o=t.column,a=o.dataIndx,l=o.colModel;l&&l.length||(i?n.push(a):r.push(a))}),this.that.Columns().hide({diShow:n,diHide:r})}},onDestroy:function(){var e=this.$popup;e&&e.remove(),delete this.$popup},onHeadCellClick:function(t,n){var r=e(t.originalEvent.target);return r.hasClass("pq-filter-icon")?this.onFilterClick(t,n,r):r.hasClass("pq-menu-icon")?this.onMenuClick(t,n,r):void 0},onHeadClick:function(e,t){return null==this.that.getColModel().find(function(e){return!e.hidden})?this.onMenuClick(e,t):void 0},getMenuHtml:function(e){var t={hideCols:"visible",filter:"filter"};return["<div class='pq-head-menu pq-theme'>","<div class='pq-tabs' style='border-width:0;'>","<ul>",e.map(function(e){return['<li><a href="#tabs-',e,'"><span class="pq-tab-',t[e],'-icon">&nbsp;</span></a></li>'].join("")}).join(""),"</ul>",e.map(function(e){return'<div id="tabs-'+e+'"></div>'}).join(""),"</div>","</div>"].join("")},getMenuH:function(t,n){return e.extend({},t.menuUI,n.menuUI)},open:function(t,n,r){var i,o,a=this,l=a.that;n=n||l.getCellHeader({dataIndx:t}),null!=t?(o=l.columns[t],i=(a.menuH=a.getMenuH(l.options,o)).tabs):i=["hideCols"];var s=a.$popup=e(a.getMenuHtml(i)).appendTo(document.body),d=this.$tabs=s.find(".pq-tabs");if(i.indexOf("hideCols")>-1){var c=a.$grid=e("<div/>").appendTo(s.find("#tabs-hideCols"));a.grid=pq.grid(c,a.getGridObj())}return i.indexOf("filter")>-1&&a.appendFilter(s.find("#tabs-filter"),o),pq.makePopup(a.$popup[0]),d.tabs({active:localStorage["pq-menu-tab"]||1,activate:function(t,n){localStorage["pq-menu-tab"]=e(this).tabs("option","active"),e(n.newPanel).find(".pq-grid").pqGrid("refresh")}}),s.resizable({handles:"e,w",maxWidth:600,minWidth:220}),s.position({my:"left top",at:"left bottom",of:r||n}),this},onMenuClick:function(e,t,n){return this.open(t.dataIndx,e,n),!1},onTreeExpand:function(e,t){t.nodes.forEach(function(e){e.column.menuInClose=t.close})},appendFilter:function(t,n){var r,i,o=this,a=o.that,l=e("<div class='pq-filter-menu pq-theme'/>").appendTo(t),s=o.$popup||l;r=o.filterMenu=new pq.cFilterMenu;var d={filterRow:t.is(document.body),grid:a,column:n,$popup:s,menuH:this.menuH||this.getMenuH(a.options,n)};return r.init(d),i=r.getHtml(),l.html(i),r.ready(l.children().get()),r.addEvents(),s.on("remove",function(){o.$popup=o.filterMenu=null}),l},onFilterClick:function(t,n,r){var i=this.$popup=this.appendFilter(e(document.body),n.column);return pq.makePopup(i[0]),i.position({my:"left top",at:"left bottom",of:r}),!1}}}(jQuery),function(e){var t=pq.cFilterMenu=function(){};t.select=function(e,t){this.that=e,this.di1="selected",this.grid=null,this.column=t},t.select.prototype={change:function(e){this.onChange(e).call(this.grid)},create:function(t,n,r){var i=this,o=i.that,a=i.getGridObj(n,r),l=function(e){var t=n[e];t&&t.call(o,s),o._trigger(e,null,s)},s=e.extend({obj:a,column:i.column},n);return l("selectGridObj"),s.grid=i.grid=pq.grid(t,a),l("selectGridCreated"),i.grid},getCM:function(t,n,r,i,o,a){var l=t.dataIndx,s=e.extend({filter:{crules:[{condition:"contain"}]},align:"left",format:a.format||t.format,deFormat:t.deFormat,title:t.pq_title||t.title,dataType:t.dataType,dataIndx:l,editor:!1,useLabel:!0,renderLabel:this.getRenderLbl(i,l,this.that.options.strBlanks)},r?{}:{type:"checkbox",cbId:n});return r?[s,{dataIndx:n,dataType:"bool",hidden:!0},{dataIndx:r,hidden:!0}]:[s,{dataIndx:n,dataType:"bool",hidden:!0,cb:{header:!o,maxCheck:o}}]},getData:function(t,n){var r=this.column,i=this.that,o={},a=this.di1,l=r.dataIndx,s=t.maxCheck,d=pq.filter.getVal(n)[0],c=pq.filter.getOptions(r,t,i,!0);return e.isArray(d)?s&&(d=d.slice(0,s)):d=1==s?[d]:[],d.forEach(function(e){o[e]=!0}),d.length?c.forEach(function(e){e[a]=o[e[l]]}):c.forEach(function(e){e[a]=!s}),c},getGridObj:function(t,n){var r=this,i=r.column,o=r.that.options,a=i.filter,l="gridOptions",s=t.groupIndx,d=t.maxCheck,c=r.di1,u=r.getData(t,a),h=u&&u.length&&null!=u[0].pq_label?"pq_label":t.labelIndx;return r.filterUI=t,e.extend({colModel:r.getCM(i,c,s,h,d,t),check:r.onChange(!n),filterModel:"bool"===i.dataType?{}:void 0,groupModel:s?{on:!0,dataIndx:s?[s]:[],titleInFirstCol:!0,fixCols:!1,indent:18,checkbox:!0,select:!1,checkboxHead:!d,cascade:!d,maxCheck:d,cbId:c}:{},dataModel:{data:u}},o.menuUI[l],o.filterModel[l],t[l])},getRenderLbl:function(e,t,n){return e===t&&(e=void 0),function(r){var i=r.rowData,o=i[e];return o||""!==i[t]?o:n}},onChange:function(e){var t=this,n=t.filterUI,r=n.maxCheck,i=n.condition;return function(){if(e){var n=!1,o=t.column.dataIndx,a=t.di1,l=t.that,s=this.getData().filter(function(e){var t=e[a];return t||(n=!0),t}).map(function(e){return e[o]});n?l.filter({oper:"add",rule:{dataIndx:o,condition:i,value:1===r?s[0]:s}}):l.filter({rule:{dataIndx:o,condition:i,value:[]}}),t.refreshRowFilter()}}},refreshRowFilter:function(){this.that.iRenderHead.postRenderCell(this.column)}},t.prototype={addEvents:function(){var e=this;e.$sel0.on("change",e.onSel1Change.bind(e)),e.$sel1.on("change",e.onSel2Change.bind(e)),e.$filter_mode.on("change",e.onModeChange.bind(e)),e.$clear.button().on("click",e.clear.bind(e)),e.$ok.button().on("click",e.ok.bind(e))},addEventsInput:function(){var e=this;e.$inp&&(e.$inp.filter("[type='checkbox']").off("click").on("click",e.onInput.bind(e)),e.$inp.filter("[type='text']").off("keyup").on("keyup",e.onInput.bind(e)))},clear:function(){var e=this.that,t=this.column,n=this.cond0,r=this.getType(n),i=t.dataIndx;e.filter({rule:{dataIndx:i,condition:r?n:void 0},oper:"remove"}),this.refreshRowFilter(),this.ready()},close:function(){this.$popup.remove()},filterByCond:function(e){var t=this,n=t.that,r=t.column.dataIndx,i=t.cond0,o=""===i,a=t.cond1,l=t.filterRow;if(t.showHide(i,a),!l)var s=t.getModeVal(),d=t.getType(i),c=t.getVal(0),u=c[0],h=c[1],f=t.getVal(1),p=f[0],g=f[1],v=t.$gridR;"select"==d?(e&&n.filter({oper:"add",rule:{dataIndx:r,condition:i,value:[]}}),l||t.iRange.create(v,t.filterUI[0],t.btnOk)):e&&n.filter({oper:o?"remove":"add",rule:{dataIndx:r,mode:s,crules:[{condition:i,value:u,value2:h},{condition:a,value:p,value2:g}]}})},getBtnOk:function(){return this.$ok},getInp:function(e){return this["$inp"+e]},getSel:function(e){return this["$sel"+e]},getBtnClear:function(){return this.$clear},getHtmlInput:function(e){var t=this.column.dataIndx,n=this.filterUI[2>e?0:1],r="checkbox";return"<input type='"+(n.type==r?r:"text")+"' "+["name='",t,"' class='",n.cls||"","' style='width:100%;",n.style||"","display:none;' ",n.attr||""].join("")+" />"},getHtml:function(){var e=this,t=e.column.filter,n=e.menuH,r=t.crules||[],i=r[0]||t,o=r[1]||{},a=e.that.options,l=e.cond0=i.condition,s=e.cond1=o.condition,d=e.filterRow;e.readFilterUI();var c=function(t,n){return["<div style='margin:0 auto 4px;'>",e.getHtmlInput(t),"</div>","<div style='margin:0 auto 4px;'>",e.getHtmlInput(n),"</div>"].join("")},u=pq.filter.getConditionsCol(this.column,e.filterUI[0]);return["<div style='padding:4px;'>","<div style='margin:0 auto 4px;'>",a.strCondition," <select>",this.getOptionStr(u,l),"</select></div>",d?"":["<div>",c(0,1),"<div data-rel='grid' style='display:none;'></div>",n.singleFilter?"":["<div class='filter_mode_div' style='text-align:center;display:none;margin:4px 0 4px;'>","<label><input type='radio' name='pq_filter_mode' value='AND'/>AND</label>&nbsp;","<label><input type='radio' name='pq_filter_mode' value='OR'/>OR</label>","</div>","<div style='margin:0 auto 4px;'><select>",this.getOptionStr(u,s,!0),"</select></div>",c(2,3)].join(""),"</div>"].join(""),"<div style='margin:4px 0 0;'>",n.buttons.map(function(e){return"<button data-rel='"+e+"' type='button' style='width:calc(50% - 4px);margin:2px;' >"+(a["str"+pq.cap1(e)]||e)+"</button>"}).join(""),"</div>","</div>"].join("")},getMode:function(e){var t=this.$filter_mode;return e>=0?t[e]:t},getModeVal:function(){return this.$filter_mode.filter(":checked").val()},getOptionStr:function(e,t,n){var r=[""].concat(e),i=this,o=i.that.options.strConditions||{};return n&&(r=r.filter(function(e){return"select"!=i.getType(e)})),r.map(function(e){return'<option value="'+e+'" '+(t==e?"selected":"")+">"+(o[e]||e)+"</option>"}).join("")},getType:function(e){return pq.filter.getType(e,this.column)},getVal:function(e){var t,n,r=this.column,i=this["cond"+e],o=this["$inp"+(e?"2":"0")],a=o[0],l=this["$inp"+(e?"3":"1")];if(o.is("[type='checkbox']")){var s=a.indeterminate;t=!!a.checked||!!s&&null}else o.is(":visible")&&(t=pq.deFormat(r,o.val(),i)),l.is(":visible")&&(n=pq.deFormat(r,l.val(),i));return[t,n]},init:function(e){var t=this.column=e.column;t.filter=t.filter||{},this.that=e.grid,this.menuH=e.menuH,this.$popup=e.$popup,this.filterRow=e.filterRow},initControls:function(){var t=this.filterUI[0],n=this.that,r={column:this.column,headMenu:!0};r.$editor=e([this.$inp0[0],this.$inp1[0]]),r.condition=this.cond0,r.type=t.type,r.filterUI=t,t.init.find(function(e){return e.call(n,r)}),t=this.filterUI[1],r.$editor=e([this.$inp2[0],this.$inp3[0]]),r.condition=this.cond1,r.type=t.type,r.filterUI=t,t.init.find(function(e){return e.call(n,r)})},isInputHidden:function(e){return"select"==e||!e||void 0},ok:function(){var e=this.cond0;"select"!=this.getType(e)||this.filterRow?e&&this.filterByCond(!0):this.iRange.change(!0),this.close(),this.refreshRowFilter()},onModeChange:function(){this.filterByCond(!this.btnOk)},onInput:function(t){var n=e(t.target),r=!this.btnOk;n.is(":checkbox")&&n.pqval({incr:!0}),this.filterByCond(r),r&&this.refreshRowFilter()},onSel1Change:function(){var e=!this.btnOk;this.cond0=this.getSel(0).val(),this.readFilterUI(),this.filterRow||(this.$inp0.replaceWith(this.getHtmlInput(0)),this.$inp1.replaceWith(this.getHtmlInput(1)),this.refreshInputVarsAndEvents(),this.initControls()),this.filterByCond(e),this.refreshRowFilter()},onSel2Change:function(){this.cond1=this.getSel(1).val(),this.readFilterUI(),this.$inp2.replaceWith(this.getHtmlInput(2)),this.$inp3.replaceWith(this.getHtmlInput(3)),this.refreshInputVarsAndEvents(),this.initControls(),this.filterByCond(!this.btnOk)},ready:function(t){this.node=t=t||this.node;var n,r,i,o=e(t),a=this,l=a.that,s=a.column,d=s.filter,c=d.crules||[],u=c[0]||d,h=c[1]||{},f=a.cond0=u.condition,p=a.cond1=h.condition,g=a.readFilterUI();a.iRange=new pq.cFilterMenu.select(l,s),n=a.getType(f),r=a.getType(p),i=a.$select=o.find("select"),a.$sel0=e(i[0]).val(f),a.$sel1=e(i[1]).val(p),a.$filter_mode=o.find('[name="pq_filter_mode"]'),a.$clear=o.find("[data-rel='clear']"),a.$ok=o.find("[data-rel='ok']"),a.btnOk=a.$ok.length,a.filterRow||(a.refreshInputVarsAndEvents(),a.$gridR=o.find("[data-rel='grid']"),a.$filter_mode.filter("[value="+d.mode+"]").attr("checked","checked"),a.$filter_mode_div=o.find(".filter_mode_div"),a.showHide(f,p),"select"==n?a.iRange.create(a.$gridR,g[0],a.btnOk):a.readyInput(0,n,u),a.readyInput(1,r,h),a.initControls())},readyInput:function(e,t,n){var r=this.column,i=this["cond"+e],o=this["$inp"+(e?"2":"0")],a=this["$inp"+(e?"3":"1")];o.is(":checkbox")&&o.pqval({val:n.value}),o.val(pq.formatEx(r,n.value,i)),"textbox2"==t&&a.val(pq.formatEx(r,n.value2,i))},readFilterUI:function(){var e=this.filterUI=[],t=this.that,n={column:this.column,condition:this.cond0,indx:0,headMenu:!0};return e[0]=pq.filter.getFilterUI(n,t),n.condition=this.cond1,n.indx=1,e[1]=pq.filter.getFilterUI(n,t),e},refreshInputVarsAndEvents:function(){var t=this,n=t.column,r=t.$inp=e(this.node).find("input[name='"+n.dataIndx+"']"),i=r[0],o=r[1],a=r[2],l=r[3];t.$inp0=e(i),t.$inp1=e(o),t.$inp2=e(a),t.$inp3=e(l),t.addEventsInput()},refreshRowFilter:function(){this.that.refreshHeaderFilter({dataIndx:this.column.dataIndx})},SelectGrid:function(){return this.$gridR.pqGrid("instance")},showHide:function(e,t){if(!this.filterRow){var n,r=this,i=r.$filter_mode_div,o=r.$sel1,a=r.getType(e),l=r.$inp;"select"===a?(r.$gridR.show(),r.$gridR.hasClass("pq-grid")&&r.$gridR.pqGrid("destroy"),l.hide(),i.hide(),o.hide()):(r.$gridR.hide(),e?(r.$inp0[r.isInputHidden(a)?"hide":"show"](),r.$inp1["textbox2"===a?"show":"hide"](),i.show(),o.show(),t?(n=r.getType(t),r.$inp2[r.isInputHidden(n)?"hide":"show"](),r.$inp3["textbox2"===n?"show":"hide"]()):(r.$inp2.hide(),r.$inp3.hide())):(l.hide(),i.hide(),o.hide()))}},updateConditions:function(){var e=this.column.filter;e.crules=e.crules||[{}],e.crules[0].condition=this.cond0,this.cond1&&(e.crules[1]=e.crules[1]||{},e.crules[1].condition=this.cond1)}}}(jQuery),function(e){var t=e.paramquery;e(document).on("pqGrid:bootup",function(e,n){var r=n.instance;new t.cEditor(r)}),t.cEditor=function(e){var t=this;t.that=e,e.on("editorBeginDone",function(e,n){n.$td[0].edited=!0,t.fixWidth(n),setTimeout(function(){document.body.contains(n.$editor[0])&&t.fixWidth(n)})}).on("editorEnd",function(e,n){n.$td[0].edited=!1,cancelAnimationFrame(t.id)}).on("editorKeyDown",function(e,n){t.id=requestAnimationFrame(function(){t.fixWidth(n)})})},t.cEditor.prototype={escape:function(e){return(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/</g,"&lt;")).replace(/(\n)$/,"$1A")},fixWidth:function(t){var n,r=this,i=r.that,o=t.$td,a=o[0],l=a.offsetWidth,s=a.offsetHeight,d=i.widget(),c=t.$editor,u=c[0].type;if("text"==u||"textarea"==u){var h=r.escape(c.val()),f=d.width(),p=e("<span style='position:absolute;top:0;left:0;visibilty:hidden;'><pre>"+h+"</pre></span>").appendTo(d),g=parseInt(p.width())+25;if(p.remove(),g=g>f?f:g>l?g:l,"textarea"==u){var v=c.clone().appendTo(d),m=v[0];v.css({height:18,width:g,position:"absolute",left:0,top:0,overflow:"hidden"}),n=m.scrollHeight+5,v.remove(),c.css({height:n,width:g,resize:"none",overflow:"hidden"})}}else g=l,n=s;c.css("width",g+"px"),r.position(c,d,o)},position:function(e,t,n){e.closest(".pq-editor-outer").css("border-width","0").position({my:"left center",at:"left center",of:n,collision:"fit",within:t})}}}(jQuery),function(e){var t=e.paramquery,n=pq.grid,r=t.cProxy=function(e){this.that=e,e.options.reactive&&this.init()};t.pqGrid.defaults.reactive=!0,e(document).on("pqGrid:bootup",function(e,t){var n=t.instance;n.iProxy=new r(n)}),pq.isEqual=function(e,t){if(pq.isObject(e)){for(var n in e)if(!pq.isEqual(e[n],t[n]))return!1;return!0}return e===t},pq.grid=function(e,t){var r=n.apply(pq,arguments),i=r.iProxy,o=r.options;return o.reactive&&(r.on("filter",function(){t.dataModel&&(t.dataModel.data=o.dataModel.data),i.prxData()}),i.prxObj(t,i.onOption,!0)),r},r.prototype={init:function(){var e=this,t=e.that;e.prxData(),e.prxCM(),t.on("refresh",e.clear.bind(e)).on("dataReady",e.clearV.bind(e)).on("dataAvailable",e.clearDV.bind(e))},onOption:function(e,t){var n,r=this,i=r.that,o={},a=i.options;if(o[e]=t,i.element&&!pq.isEqual(o,a))if(r.refresh(),pq.isObject(a[e]))if("groupModel"==e)i.Group().option(t,!1),r.refreshView();else if("treeModel"==e)i.Tree().option(t);else if("sortModel"==e)i.sort(t);else for(n in"dataModel"==e?(t.data&&r.prxData(t.data),r.refreshDataView()):"pageModel"==e&&(t.rPP||null!=t.type)&&r.refreshDataView(),t)i.option(e+"."+n,t[n]);else"colModel"==e?r.prxCM(t):"mergeCells"==e&&r.refreshView(),i.option(e,t)},onCMChange:function(){var e=this,t=e.that;clearTimeout(e.CMtimer),e.CMtimer=setTimeout(function(){t.refreshCM(),e.refresh()}),t.one("CMInit",function(){clearTimeout(e.CMtimer)})},prxCM:function(e){var t=this,n=t.that,r=e||n.options.colModel;r&&(t.prxArray(r,t.onCMChange.bind(t)),r.forEach(function(e){e.colModel&&t.prxCM(e.colModel)}))},prxData:function(e){var t=this,n=t.that,r=e||n.options.dataModel.data;r&&t.prxArray(r,function(){clearTimeout(t.datatimer),t.datatimer=setTimeout(function(){t.refreshView()}),n.one("dataReady",function(){clearTimeout(t.datatimer)})})},prxArray:function(e,t){var n=this,r=Array.prototype;"pop push reverse shift sort splice unshift".split(" ").forEach(function(i){e[i]=function(){var o=arguments,a="splice"==i,l=Object.getPrototypeOf(e)[i].apply(this,o);return("push"==i||a||"unshift"==i)&&n.prxArrayObjs(a?r.slice.call(o,2):o),t.call(n),l}}),n.prxArrayObjs(e)},prxArrayObjs:function(e){for(var t=0,n=e.length;n>t;t++)this.prxObj(e[t])},prxObj:function(e,t,n,r){if(pq.isObject(e)){var i,o,a=this,l="pq_proxy";for(o in e[l]||Object.defineProperty(e,l,{value:{},enumerable:!1}),(i=e[l]).__self=a,e)"pq_"!=o.substr(0,3)&&(n&&!r&&pq.isObject(e[o])&&a.prxObj(e[o],t,n,o),i.hasOwnProperty(o)||(Object.defineProperty(i,o,Object.getOwnPropertyDescriptor(e,o)),a.defineProp(e,i,o,t,n,r)))}},defineProp:function(e,t,n,r,i,o){Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){var a,l=t.__self;i&&!o&&pq.isObject(e)&&l.prxObj(e,r,i,n),t[n]=e,r?(a=e,o&&((a={})[n]=e),r.call(l,o||n,a)):l.refresh()},enumerable:!0})},clear:function(){clearTimeout(this.timer)},clearV:function(){this.clear(),clearTimeout(this.timerV)},clearDV:function(){this.clearV(),clearTimeout(this.timerDV)},X:function(e,t){var n=this;n[t]=setTimeout(function(){n.that.element&&n.that[e]()})},refresh:function(){this.clear(),this.X("refresh","timer")},refreshView:function(){this.clearV(),this.X("refreshView","timerV")},refreshDataView:function(){this.clearDV(),this.X("refreshDataAndView","timerDV")}}}(jQuery),function(e){var t=pq.cVirtual=function(){this.diffH=0,this.diffV=0};t.setSBDim=function(){var t=e("<div style='max-width:100px;height:100px;position:fixed;left:0;top:0;overflow:auto;visibility:hidden;'><div style='width:200px;height:100px;'></div></div>").appendTo(document.body),n=t[0];this.SBDIM=n.offsetHeight-n.clientHeight,t.remove()},t.prototype={assignTblDims:function(e){var t,n=this,r=n.isBody(),i=n.getTopSafe(this[e?"cols":"rows"],e,!0),o=n.maxHt;i>o?(n[e?"ratioH":"ratioV"]=i/o,n[e?"virtualWd":"virtualHt"]=i,i=o):(i=i||(n.isHead()?0:1),n[e?"ratioH":"ratioV"]=1);var a=n.$tbl_right[0],l=n[e?"$tbl_tr":"$tbl_left"],s=l.length?l[0]:{style:{}},d=e?"width":"height";a.style[d]=i+"px",s.style[d]=i+"px",t=r?"Tbl":n.isHead()?"TblHead":"TblSum",!r&&e&&n.$spacer.css("left",i),n.dims[e?"wd"+t:"ht"+t]=i,r&&n.triggerTblDims(100)},calInitFinal:function(e,t,n){var r,i,o,a=this[n?"cols":"rows"],l=this[n?"freezeCols":"freezeRows"],s=this[n?"leftArr":"topArr"],d=this.getTopSafe(l,n);if(n&&(d-=this.numColWd),e+=d,t+=d,a>l&&s[l]<e){for(var c,u=30,h=a;u--;)if(s[c=Math.floor((l+h)/2)]>=e)h=c;else{if(l==c){o=!0;break}l=c}if(!o)throw"ri not found"}for(;a>=l;l++)if(s[l]>e){r=l?l-1:l;break}for(;a>=l;l++)if(s[l]>t){i=l-1;break}return null==r&&null==i&&a&&e>s[a-1]?[null,null]:(null==r&&(r=0),null==i&&(i=a-1),[r,i])},calInitFinalSuper:function(){var e=this,t=this.dims||{},n=e.calcTopBottom(),r=n[0],i=n[1],o=n[2],a=e.calcTopBottom(!0),l=a[0],s=a[1],d=e.calInitFinal(r,i),c=d[0],u=d[1],h=e.calInitFinal(l,s,!0),f=h[0],p=h[1];return this.isBody()&&(t.bottom=i,t.top=r,t.left=l,t.right=s),[c,f,u,p,o=o||a[2]]},calcTopBottom:function(e){var n,r,i=this,o=i.isBody(),a=i.dims,l=i.$cright[0];if(e)var s=l.scrollLeft,d=i.sleft,c=a.wdCont,u=i.wdContLeft,h=i.ratioH;else s=l.scrollTop,d=i.stop,c=i.htCont,u=i.htContTop,h=i.ratioV;if(s=0>s?0:s,1==h)return(r=s+c-u)>=0||(r=0),[s,r];var f,p,g,v=t.maxHt,m=i[e?"virtualWd":"virtualHt"],w=e?a.wdContClient:a.htContClient,x=e?"diffH":"diffV",y=i[x];if(s+w>=v?n=(r=m-u+(c-w))-c+u:(0==s?n=0:n=s*(f=null==d||Math.abs(s-d)>c?h:1)+(1==f&&y?y:0),r=n+c-u),(p=n-s)!=y&&(g=!0,i[x]=p,o&&i.triggerTblDims(3e3)),i[e?"sleft":"stop"]=s,!(s>=0))throw"stop NaN";if(!(r>=0&&n>=0))throw"top bottom NaN";return[n,r,g]},getHtDetail:function(e,t){var n=e.pq_detail;return n&&n.show?n.height||t:0},getTop:function(e,t){var n=this.topArr[e],r=t?0:this.diffV;if(r&&(0>(n-=e>this.freezeRows?r:0)&&(n=0)),n>=0)return n;throw n},getTopSafe:function(e,t,n){var r=t?this.cols:this.rows;return this[t?"getLeft":"getTop"](e>r?r:e,n)},getLeft:function(e,t){var n=this.numColWd,r=-1==e?0:this.leftArr[e]+n,i=t?0:this.diffH;if(i&&(0>(r-=e>this.freezeCols?i:0)&&(r=0)),r>=0)return r;throw r},getHeightR:function(e,t){t=t||1;var n=this.topArr,r=n[e+t]-n[e];if(r>=0)return r;throw r},getHeightCell:function(e,t){t=t||1;var n,r,i=this.topArr,o=this.rowHtDetail;if(n=o?this.getHtDetail(this.data[e+t-1],o):0,(r=i[e+t]-i[e]-n)>=0)return r;throw r},getHeightCellM:function(e,t){return this.getTopSafe(e+t)-this.getTop(e)},getHeightCellDirty:function(e,t){return this.setTopArr(e,null,e+t),this.getHeightCellM(e,t)},getWidthCell:function(e){if(-1==e)return this.numColWd;var t=this.colwdArr[e];if(t>=0)return t;throw t},getWidthCellM:function(e,t){return this.getTopSafe(e+t,!0)-this.getLeft(e)},initRowHtArr:function(){var e,t=this.rowHt,n=this.data,r=n.length,i=this.rowHtDetail,o=this.rowhtArr=[],a=(this.topArr=[],0);if(i)for(;r>a;a++)e=n[a],o[a]=e.pq_hidden?0:e.pq_ht||t+this.getHtDetail(e,i);else for(;r>a;a++)e=n[a],o[a]=e.pq_hidden?0:e.pq_ht||t},initRowHtArrDetailSuper:function(e){var t,n=this.rowhtArr,r=this.data;e.forEach(function(e){t=e[0],n[t]=r[t].pq_ht=n[t]+e[1]}),this.setTopArr(),this.assignTblDims()},initRowHtArrSuper:function(){this.initRowHtArr(),this.setTopArr(),this.assignTblDims()},refreshRowHtArr:function(e,t){var n=this.data[e],r=this.rowHtDetail,i=this.rowHt;this.rowhtArr[e]=n.pq_hidden?0:i+this.getHtDetail(n,r),t&&(this.setTopArr(e),this.assignTblDims())},setTopArr:function(e,t,n){var r,i,o,a,l,s=e||0,d=this;for(t?(i=d.cols,a=d.colwdArr,l=d.leftArr):(i=d.rows,a=d.rowhtArr,l=d.topArr),o=n&&i>n?n:i-1,r=s?l[s]:0;o>=s;s++)l[s]=r,r+=a[s];l[s]=r,l.length=i+1},triggerTblDims:function(e){var t=this;t.setTimer(function(){t.that._trigger("assignTblDims")},"assignTblDims",e)}}}(jQuery),function(e){var t=1533910;e(function(){var n=e("<div style='position:relative;'></div>").appendTo(document.body),r=e("<div style='position:absolute;left:0;'></div>").appendTo(n)[0],i=pq.cVirtual;r.style.top=1e9+"px";var o=r.offsetTop-50;(t=1e4>=o?t:o)>16554378&&(t=16554378),i.maxHt=t,n.remove(),i.setSBDim(),e(window).on("resize",i.setSBDim.bind(i))})}(jQuery),function(e){pq.cRender=function(){this.data=[]},pq.cRender.prototype=e.extend({},{_m:function(){},autoHeight:function(e){var t=this,n=t.that,r=t.isBody(),i=e.hChanged,o=t.freezeRows,a=!1,l=t.initV,s=t.finalV;t.rows&&(r&&n._trigger("beforeAutoRowHeight"),a=t.setRowHtArr(l,s,i),(a=t.setRowHtArr(0,o-1,i)||a)?(t.setTopArr(o?0:l),t.assignTblDims(),t.setPanes(),t.setCellDims(!0),r&&(e.source="autoRow",t.refresh(e),n._trigger("autoRowHeight"))):t.setCellDims(!0))},autoWidth:function(e){var t=this,n=t.freezeCols,r=t.initH,i=t.finalH;null==e?(t.setColWdArr(r,i),t.setColWdArr(0,n-1)):t.setColWdArr(e,e)},_each:function(e,t,n,r,i,o){for(var a,l=this.jump,s=0;n>=s;s++)(a=r[s=l(t,o,s)])[i]||e.call(this,a,s)},eachV:function(e){var t=this;t._each(e,t.initV,t.finalV,t.data,"pq_hidden",t.freezeRows)},eachH:function(e){var t=this;t._each(e,t.initH,t.finalH,t.colModel,"hidden",t.freezeCols)},generateCell:function(e,t,n,r,i,o){var a,l,s,d,c,u,h,f,p=this.iMerge,g=[],v=this.riOffset,m=e+v,w=[this.cellCls];if(this._m()&&(f=p.ismergedCell(m,t))){if(!f.o_rc)return e==this._initV||t==this._initH?(c=this.getCellRegion(e,t),l=(d=p.getRootCell(m,t)).v_ri-v,s=d.v_ci,0>l?"":(u=this.getCellRegion(l,s),this.mcLaid[l+","+s+(u==c?"":","+c)]=!0,"")):"";(d=p.getClsStyle(m,t)).style&&g.push(d.style),d.cls&&w.push(d.cls),e=(m=f.o_ri)-v,n=this.data[e],t=f.o_ci,r=this.colModel[t],o=this.getHeightCellM(e,f.o_rc),a=this.getWidthCellM(t,f.o_cc),w.push("pq-merge-cell")}else if(n.pq_hidden||r.hidden)return"";if(h=this.getCellId(e,t,i),this.getById(h))return"";var x=o||this.getHeightCell(e),y=a||this.colwdArr[t],C=this.getLeft(t);return g.push("left:"+C+"px;width:"+y+"px;height:"+x+"px;"),this.renderCell({style:g,cls:w,attr:["role='gridcell' id='"+h+"'"],rowData:n,rowIndxPage:e,rowIndx:m,colIndx:t,column:r})},generateRow:function(e,t){var n="pq-grid-row",r="top:"+this.getTop(e)+"px;height:"+this.getHeightR(e)+"px;width:100%;",i="role='row' id='"+this.getRowId(e,t)+"'",o=this.getRowClsStyleAttr(e);return n+=" "+o[0],r+=o[1],"<div class='"+n+"' "+(i+=" "+o[2])+" style='"+r+"'>"},getById:function(e){return document.getElementById(e)},getCell:function(e,t,n){var r,i,o=this.riOffset,a=e+o;return n||(r=this.iMerge).ismergedCell(a,t)&&(i=r.getRootCell(a,t),this.isHead()&&(e=i.o_ri,t=i.o_ci),n=this.getCellRegion(i.v_ri-o,i.v_ci)),this.getById(this.getCellId(e,t,n))},getCellIndx:function(e){var t=e.id.split("-");return t[3]=="u"+this.uuid?[1*t[4],1*t[5],t[6]]:void 0},getCellId:function(e,t,n){return e>=this.data.length?"":(n=n||this.getCellRegion(e,t),this.cellPrefix+e+"-"+t+"-"+n)},getCellCont:function(e,t){return this["$c"+this.getCellRegion(e,t)]},getCellCoords:function(e,t){var n,r,i=this,o=i.maxHt,a=i.getTop(e),l=i.getHeightCell(e),s=(a=(n=(n=a+l)>o?o:n)-l,i.getLeft(t)),d=i.getWidthCell(t);return[s=(r=(r=s+d)>o?o:r)-d,a,r,n]},getCellRegion:function(e,t){var n=this.freezeCols;return this.freezeRows>e?n>t?"lt":"tr":n>t?"left":"right"},getCellXY:function(e,t){var n=this.maxHt;return[Math.min(this.getLeft(t),n),Math.min(this.getTop(e),n)]},getContRight:function(){return this.$cright},getMergeCells:function(){return this._m()?this.$tbl.children().children(".pq-merge-cell"):e()},getRow:function(e,t){return this.getById(this.getRowId(e,t))},getAllCells:function(){return this.$ele.children().children().children().children().children(this.isHead()?".pq-grid-col":".pq-grid-cell")},get$Col:function(e,t){var n=["right","left","lt","rt"].map(function(t){return"[id$=-"+e+"-"+t+"]"}).join(",");return(t||this.getAllCells()).filter(n)},get$Row:function(e){return this.$ele.find("[id^="+this.getRowId(e,"")+"]")},getRowClsStyleAttr:function(e){var t=this.that,n=[],r=t.options,i=r.rowInit,o=this.data[e],a=o.pq_rowcls,l=o.pq_rowattr,s="",d="",c=e+this.riOffset;if(i){var u=i.call(t,{rowData:o,rowIndxPage:e,rowIndx:c});u&&(u.cls&&n.push(u.cls),s+=u.attr?" "+u.attr:"",d+=u.style?u.style:"")}if(r.stripeRows&&this.stripeArr[e]&&n.push("pq-striped"),o.pq_rowselect&&n.push(t.iRows.hclass),a&&n.push(a),l){var h=t.stringifyAttr(l);for(var f in h){s+=" "+f+'="'+h[f]+'"'}}return[n.join(" "),d,s]},getRowId:function(e,t){if(null==t)throw"getRowId region.";return this.rowPrefix+e+"-"+t},getRowIndx:function(e){var t=e.id.split("-");return[1*t[4],t[5]]},getTable:function(e,t){return this["$tbl_"+this.getCellRegion(e,t)]},getTblCls:function(e){var t=this.isBody()?[]:["pq-grid-summary-table"];return e.rowBorders&&t.push("pq-td-border-top"),e.columnBorders&&t.push("pq-td-border-right"),e.wrap||t.push("pq-no-wrap"),t.join(" ")},getFlexWidth:function(){return this._flexWidth},preInit:function(e){var t=this,n=t.isBody(),r=t.isHead(),i=t.that.options,o=(i.freezeCols,r||i.freezeRows,"pq-table "+t.getTblCls(i)),a=["pq-cont-inner ","pq-cont-right","pq-cont-left","pq-cont-lt","pq-cont-tr"];e.empty(),e[0].innerHTML=['<div class="pq-grid-cont">',n?'<div class="pq-grid-norows">'+i.strNoRows+"</div>":"",'<div class="',a[0]+a[1],'"><div class="pq-table-right '+o+'"></div>',n?"":'<div class="pq-r-spacer" style="position:absolute;top:0;height:10px;"></div>',"</div>",'<div class="'+a[0]+a[2]+'"><div class="pq-table-left '+o+'"></div></div>','<div class="'+a[0]+a[4]+'"><div class="pq-table-tr '+o+'"></div></div>','<div class="'+a[0]+a[3]+'"><div class="pq-table-lt '+o+'"></div></div>',"</div>"].join(""),t.$cright=e.find("."+a[1]).on("scroll",t.onNativeScroll(t)),n||(t.$spacer=e.find(".pq-r-spacer")),t.$cleft=e.find("."+a[2]).on("scroll",t.onScrollL),t.$clt=e.find("."+a[3]).on("scroll",t.onScrollLT),t.$ctr=e.find("."+a[4]).on("scroll",t.onScrollT),t.$tbl=e.find(".pq-table").on("scroll",t.onScrollLT),t.$tbl_right=e.find(".pq-table-right"),t.$tbl_left=e.find(".pq-table-left"),t.$tbl_lt=e.find(".pq-table-lt"),t.$tbl_tr=e.find(".pq-table-tr"),n&&t.$cleft.add(t.$ctr).on("mousewheel DOMMouseScroll",t.onMouseWheel(t))},isBody:function(){},isHead:function(){},isSum:function(){},jump:function(e,t,n){return e>n&&n>=t&&(n=e),n},hasMergeCls:function(e){return e&&e.className.indexOf("pq-merge-cell")>=0},initRefreshTimer:function(e){var t=this;t.setTimer(t.onRefreshTimer(t,e),"refresh")},initStripeArr:function(){for(var e,t=this.rows,n=0,r=this.stripeArr=[],i=this.data;t>n;n++)i[n].pq_hidden||(e=r[n]=!e)},isRenderedRow:function(e){return!!this.getRow(e)},onScrollLT:function(){this.scrollTop=this.scrollLeft=0},onScrollT:function(){this.scrollTop=0},onScrollL:function(){this.scrollLeft=0},refresh:function(e){e=e||{};var t=this,n=t.that,r=t.isBody(),i=t.isHead(),o=(null==e.timer||e.timer,t.mcLaid={}),a=t.freezeCols,l=t.numColWd,s=!(!a&&!l),d=t.freezeRows,c=(y=t.calInitFinalSuper())[0],u=y[1],h=y[2],f=y[3],p=y[4],g=t.initV,v=t.finalV,m=t.initH,w=t.finalH;for(var x in r&&n.blurEditor({force:!0}),t._initV=c,t._finalV=h,t._initH=u,t._finalH=f,r&&n._trigger("beforeTableView",null,{initV:c,finalV:h,pageData:t.data}),p||(null!=v&&h>=g&&v>=c&&(c>g?(t.removeView(g,c-1,m,w),s&&t.removeView(g,c-1,l?-1:0,a-1)):g>c&&(t.renderView(c,g-1,u,f),s&&t.renderView(c,g-1,0,a-1)),v>h?(t.removeView(h+1,v,m,w),s&&t.removeView(h+1,v,l?-1:0,a-1)):h>v&&(t.renderView(v+1,h,u,f),s&&t.renderView(v+1,h,0,a-1)),g=c,v=h),null!=w&&f>m&&w>u&&(u>m?(t.removeView(g,v,m,u-1),d&&t.removeView(0,d-1,m,u-1)):m>u&&(t.renderView(g,v,u,m-1),d&&t.renderView(0,d-1,u,m-1)),w>f?(t.removeView(g,v,f+1,w),d&&t.removeView(0,d-1,f+1,w)):f>w&&(t.renderView(g,v,w+1,f),d&&t.renderView(0,d-1,w+1,f)),m=u,w=f)),p||h!==v||c!==g||u!==m||f!==w?(r&&n._trigger("beforeViewEmpty",null,{region:"right"}),t.$tbl_right.empty(),t.renderView(c,h,u,f),!s||h===v&&c===g||(t.$tbl_left.empty(),t.renderView(c,h,0,a-1)),d&&(u===m&&f===w||(n._trigger("beforeViewEmpty",null,{region:"tr"}),t.$tbl_tr.empty(),t.renderView(0,d-1,u,f)),s&&null==v&&(t.$tbl_lt.empty(),t.renderView(0,d-1,0,a-1)))):t.removeMergeCells(),o){var y,C=1*(y=x.split(","))[0],b=1*y[1],I=y[2];t.renderView(C,C,b,b,I)}var _=u!=t.initH||f!=t.finalH,q=_&&null!=t.initH;(h!=t.finalV||c!=t.initV||_)&&(t.initV=c,t.finalV=h,t.initH=u,t.finalH=f,r?n._trigger("refresh",null,{source:e.source,hChanged:q}):n._trigger(i?"refreshHeader":"refreshSum",null,{hChanged:q}))},refreshAllCells:function(e){var t=this;t.initH=t.initV=t.finalH=t.finalV=null,t.refresh(e)},refreshCell:function(t,n,r,i){var o,a=this,l=a.isBody()&&a._m()?a.iMerge.getRootCellV(t+a.riOffset,n):0,s=t,d=n,c=function(l,s){l&&(o=!0,l.id="",e(l).replaceWith(a.generateCell(t,n,r,i,s)))};return l?(t=l.rowIndxPage,n=l.colIndx,r=l.rowData,i=l.column,["lt","tr","left","right"].forEach(function(e){c(a.getCell(s,d,e),e)})):c(a.getCell(t,n)),o},removeMergeCells:function(){for(var t,n,r,i,o,a,l,s,d,c,u=this,h=u.iMerge,f=u.riOffset,p=(u.freezeCols,u.freezeRows,u.getMergeCells()),g=u._initH,v=u._finalH,m=u._initV,w=u._finalV,x=0,y=p.length;y>x;x++)s=p[x],(n=u.getCellIndx(s))&&(r=n[0],i=n[1],d=n[2],o=r+(t=h.getRootCell(r+f,i)).o_rc-1,a=i+t.o_cc-1,l=!1,r>w||i>v?l=!0:"right"==d?(m>o||g>a)&&(l=!0):"left"==d?m>o&&(l=!0):"tr"==d&&g>a&&(l=!0),c=s.parentNode,l&&e(s).remove(),c.children.length||c.parentNode.removeChild(c))},removeView:function(t,n,r,i){var o,a,l,s,d=this.getCellRegion(t,r);for(a=t;n>=a;a++)if(o=this.getRow(a,d)){for(l=r;i>=l;l++)(s=this.getCell(a,l,d))&&(this.hasMergeCls(s)||e(s).remove());o.children.length||o.parentNode.removeChild(o)}},renderNumCell:function(e,t,n){var r=this,i=r.getHeightR(e),o=r.isHead();return"<div id='"+r.getCellId(e,-1,n)+"' style='"+("position:absolute;left:0;top:0;width:"+t+"px;height:"+i+"px;")+"' role='gridcell' class='pq-grid-number-cell '>"+(r.isBody()?e+1+r.riOffset:o&&e==r.data.length-1&&r.numberCell.title||"")+"</div>"},renderRow:function(t,n,r,i,o,a){var l,s,d,c,u=this.getRow(r,a),h=this.numColWd,f=[],p=this.getHeightCell(r),g=this.colModel;for(!u&&t.push(this.generateRow(r,a)),0!=i||!h||"left"!=a&&"lt"!=a||(c=this.renderNumCell(r,h,a),f.push(c)),d=i;o>=d;d++)(s=g[d]).hidden||(c=this.generateCell(r,d,n,s,a,p),f.push(c));l=f.join(""),u?e(u).append(l):t.push(l,"</div>")},renderView:function(e,t,n,r,i){if(null!=n&&null!=r){i=i||this.getCellRegion(e,Math.min(n,r));for(var o,a=[],l=this.data,s=this["$tbl_"+i],d=e;t>=d;d++)(o=l[d])&&!o.pq_hidden&&this.renderRow(a,o,d,n,r,i);s.append(a.join(""))}},scrollX:function(e,t){var n=this.$cright[0];return e>=0?void this.scrollXY(e,n.scrollTop,t):n.scrollLeft},setCellDims:function(e){var t,n=this,r=n.iMerge,i=n._m(),o=n.colModel,a=n.numColWd,l=n.jump,s=n.setRowDims(),d=n.riOffset,c=n.initH,u=n.finalH,h=n.freezeCols;n.eachV(function(f,p){var g,v=n.get$Row(p),m=n.getHeightR(p),x=n.getTop(p),y=n.getHeightCell(p);s(v,m,x);for(var C=a?-1:0;u>=C;C++)(0>(C=l(c,h,C))||!o[C].hidden)&&(i&&(w=r.ismergedCell(p+d,C))||(g=n.getCell(p,C))&&((t=g.style).height=(-1==C?m:y)+"px",e||(t.width=n.getWidthCell(C)+"px",t.left=n.getLeft(C)+"px")))});for(var f=n.getMergeCells(),p=0,g=f.length;g>p;p++){var v=f[p],m=n.getCellIndx(v);if(m){var w,x=m[0],y=m[1],C=(w=r.getRootCell(x+d,y)).v_ri-d,b=n.get$Row(C),I=n.getHeightR(C),_=n.getHeightCellM(x,w.o_rc),q=n.getTop(C);s(b,I,q),(t=v.style).height=_+"px",e||(t.width=n.getWidthCellM(y,w.o_cc)+"px",t.left=n.getLeft(y)+"px")}}},setRowDims:function(){var e=this.isBody()&&this.that.Anim().isActive();return function(t,n,r){var i={height:n,width:"100%"};e||(i.top=r),t.css(i)}},setColWdArr:function(t,n){var r,i,o,a,l,s,d,c,u=n,h=this,f=h.jump,p=h.colModel,g=h.data,v=h.freezeRows,m=this.maxHt+"px",w=h.iMerge,x=h.initV,y=h.isBody(),C=h.isSum(),b=y||C,I=h.isHead()?h.that.headerCells.length-1:h.finalV;if(I>=0)for(;u>=t;u--)if(!(i=p[u]).hidden&&-1==(i.width+"").indexOf("%")&&(s=b?i.width:i._minWidth)){for(r=0;I>=r;r++)if((a=g[r=f(x,v,r)])&&!a.pq_hidden){if(d=!0,c=w.ismergedCell(r,u)){if(1==c)continue;if((c=w.getRootCell(r,u)).v_rc>1||c.v_cc>1){if(c.v_cc>1)continue;d=!1}o=h.getCell(c.o_ri,c.o_ci)}else o=h.getCell(r,u);if(o.parentNode.style.width=m,d){o.style.width="auto";var _=e(o).find(".pq-menu-icon,.pq-menu-filter-icon");if(_.length){_.css({position:"static",float:"left",width:20});var q=e(o).find(".pq-td-div");q.css("width","auto")}}l=o.offsetWidth+1,d&&_.length&&(_.css({position:"",float:"",width:""}),q.css("width","")),s=Math.max(l,s)}if(!(s>0))throw"wd NaN";i.width=h.colwdArr[u]=s,i._resized=!0}},setRowHtArr:function(e,t,n){for(var r,i,o,a,l,s,d,c,u,h,f=t,p=this,g=p.jump,v=p.riOffset,m=p.rowhtArr,w=p.data,x=p.colModel,y=p._m(),C=p.diffV,b=p.freezeCols,I=p.rowHt,_=p.iMerge,q=p.rowHtDetail,R=p.initH,D=p.finalH;f>=e;f--)if((a=w[f])&&!a.pq_hidden){for(h=q?p.getHtDetail(a,q):0,d=n?m[f]-h:I,r=0;D>=r;r++)if(r,!x[r=g(R,b,r)].hidden){if(c=y&&_.ismergedCell(f+v,r)){if(1==c||C)continue;c=_.getRootCell(f+v,r),l=p.getCell(c.o_ri-v,c.o_ci)}else l=p.getCell(f,r);l.style.height="auto",s=l.offsetHeight,c&&(u=c.o_rc-(c.v_ri-c.o_ri)-1,s-=c.v_rc>1?p.getHeightCellDirty(c.v_ri+1,u):0),d=Math.max(s,d)}o=d+h,m[f]!=o&&(m[f]=a.pq_ht=o,i=!0)}return i},setTimer:function(e){var t={};return function(n,r,i){r=e+r,clearTimeout(t[r]);var o=this;t[r]=setTimeout(function(){o.that.element&&n.call(o)},i||300)}}},new pq.cVirtual)}(jQuery),function(e){pq.cRenderBody=function(e,t){var n=this,r=n.uuid=e.uuid,i=e.options,o=n.$ele=t.$b,a=n.$sum=t.$sum,l=n.$h=t.$h,s=i.postRenderInterval;n.that=e,n.setTimer=n.setTimer(r),n.cellPrefix="pq-body-cell-u"+r+"-",n.rowPrefix="pq-body-row-u"+r+"-",n.cellCls="pq-grid-cell",n.iMerge=e.iMerge,n.rowHt=i.rowHt||27,n.rowHtDetail=i.detailModel.height,n.iRenderHead=e.iRenderHead=new pq.cRenderHead(e,l),n.iRenderSum=e.iRenderSum=new pq.cRenderSum(e,a),e.on("headHtChanged",n.onHeadHtChanged(n)),null!=s&&e.on("refresh refreshRow refreshCell refreshColumn",function(){0>s?n.postRenderAll():n.setTimer(n.postRenderAll,"postRender",s)}),n.preInit(o),e.on("refresh softRefresh",n.onRefresh.bind(n))},pq.cRenderBody.prototype=e.extend({},new e.paramquery.cGenerateView,new pq.cRender,{setHtCont:function(e){this.dims.htCont=e,this.$ele.css("height",e)},flex:function(e){var t=this,n=t.that;0!=n._trigger("beforeFlex",null,{colIndx:e})&&(t.iRenderHead.autoWidth(e),t.iRenderSum.autoWidth(e),t.autoWidth(e),n.refreshCM(null,{flex:!0}),n.refresh({source:"flex",soft:!0}))},init:function(e){e=e||{};var t,n=this,r=n.that,i=e.soft,o=!i,a=e.source,l=n.iRenderHead,s=n.iRenderSum,d=r.options,c=d.scrollModel,u=(n.freezeCols=d.freezeCols||0,n.freezeRows=d.freezeRows,n.numberCell=d.numberCell),h=n.colModel=r.colModel,f=(n.width=d.width,n.height=d.height,n.$ele);o&&(n.dims=r.dims,n.autoFit=c.autoFit,n.pauseTO=c.timeout,t=r.pdata||[],f.find(".pq-grid-norows").css("display",t.length?"none":""),n.data=t,n.maxHt=pq.cVirtual.maxHt,n.riOffset=r.riOffset,n.cols=h.length,n.rows=t.length,r._mergeCells&&(n._m=function(){return!0}),n.autoRow=d.autoRow,n.initRowHtArrSuper(),d.stripeRows&&n.initStripeArr()),n.refreshColumnWidths(),n.numColWd=l.numColWd=s.numColWd=u.show?u.outerWidth:0,n.initColWdArrSuper(),s.init(e),e.header?l.init(e):n.setPanes(),s.initPost(e),e.header&&l.initPost(e),n.$cright[0].scrollTop>n.getTop(n.rows)||(o?n.refreshAllCells({source:a}):i&&(n.setCellDims(),n.refresh({source:a}),r._trigger("softRefresh")))},initColWdArr:function(){for(var e,t=this.colModel,n=t.length,r=(this.leftArr=this.iRenderHead.leftArr=this.iRenderSum.leftArr=[],0),i=this.colwdArr=this.iRenderHead.colwdArr=this.iRenderSum.colwdArr=[];n>r;r++)e=t[r],i[r]=e.hidden?0:e.outerWidth},initColWdArrSuper:function(){this.initColWdArr(),this.setTopArr(0,!0),this.assignTblDims(!0)},inViewport:function(e,t,n){n=n||this.getCell(e,t);var r=this.dims,i=r.left-2,o=r.right-(r.wdCont-r.wdContClient)+2,a=r.top-2,l=r.bottom-(r.htCont-r.htContClient)+2,s=this.getCellRegion(e,t),d=(this.initH,this.finalH,this.initV,this.finalV,n.parentNode),c=n.offsetLeft-r.wdContLeft,u=d.offsetTop-r.htContTop,h=c+n.offsetWidth,f=u+n.offsetHeight;return"right"==s?c>i&&o>h&&u>a&&l>f:"tr"==s?c>i&&o>h:"left"!=s||u>a&&l>f},isBody:function(){return!0},onHeadHtChanged:function(e){return function(t,n){e.setPanes()}},onMouseWheel:function(e){var t;return function(e){var n=this;n.style["pointer-events"]="none",clearTimeout(t),t=setTimeout(function(){n.style["pointer-events"]=""},300)}},onNativeScroll:function(e){return function(){var t=e.$cright[0],n=e.that,r=t.scrollLeft,i=t.scrollTop;e.iRenderSum.setScrollLeft(r),e.iRenderHead.setScrollLeft(r),e.$cleft[0].scrollTop=i,e.$ctr[0].scrollLeft=r,e.refresh(),n._trigger("scroll"),e.setTimer(function(){n._trigger("scrollStop")},"scrollStop",e.pauseTO)}},onRefresh:function(e,t){"autoRow"!=t.source&&this.initRefreshTimer(t.hChanged)},onRefreshTimer:function(e,t){return function(){var n=e.$cright[0];e.autoRow&&e.autoHeight({hChanged:t}),n.scrollTop=n.scrollTop,n.scrollLeft=n.scrollLeft}},pageDown:function(e,t){var n,r=this,i=r.topArr,o=i[e],a=e,l=r.dims,s=this.$cright[0].scrollTop,d=95*(l.htContClient-l.htContTop)/100,c=o+d,u=e,h=i.length-1;r.scrollY(s+d,function(){for(u=e<r.initV?r.initV:e;h>=u;u++)if((n=i[u])>o&&(o=n,a=u-1),n>c){a=u-1;break}t(a)})},pageUp:function(e,t){for(var n,r=this,i=r.topArr,o=i[e],a=this.$cright[0].scrollTop,l=r.dims,s=80*(l.htContClient-l.htContTop)/100,d=o-s,c=e,u=e;u>=0;u--)if(o>(n=i[u])&&(o=n,c=u),d>n){c=u;break}r.scrollY(a-s,function(){t(c)})},postRenderAll:function(){var e,t,n,r=this,i=r.that,o=r.riOffset,a=r.iMerge,l=r.data;r.colModel,r.eachH(function(l,s){(n=l.postRender)&&r.eachV(function(l,d){t=a.getRootCellO(d+o,s,!0),(e=r.getCell(t.rowIndxPage,t.colIndx))&&!e._postRender&&(t.cell=e,i.callFn(n,t),e._postRender=!0)})}),(n=r.numberCell.postRender)&&r.eachV(function(e,t){var a=r.getCell(t,-1),s=t+o,d={rowIndxPage:t,colIndx:-1,rowIndx:s,rowData:l[s]};a&&!a._postRender&&(d.cell=a,i.callFn(n,d),a._postRender=!0)})},refreshRow:function(e){var t,n,r=this,i=r.initH,o=r.finalH,a=r.freezeCols,l=r.get$Row(e),s=[];l.each(function(e,t){var n=r.getRowIndx(t);s.push(n[1])}),r.that._trigger("beforeViewEmpty",null,{rowIndxPage:e}),l.remove(),s.forEach(function(l){"left"==l||"lt"==l?(t=0,n=a-1):(t=i,n=o),r.renderView(e,e,t,n,l)})},_scrollRow:function(e,t){var n,r=this,i=r.dims,o=i[t?"wdContClient":"htContClient"],a=t?"scrollLeft":"scrollTop",l=r.$cright[0],s=r[t?"colModel":"data"].length,d=r[t?"freezeCols":"freezeRows"],c=l[a],u=i[t?"wdContLeft":"htContTop"];if(d>e||e>s-1)return c;var h=r.getTopSafe(e,t),f=r[t?"getWidthCell":"getHeightR"](e);return null!=h?(h+f+1>c+o?n=h+f+1-o:c+u>h&&(n=0>(n=h-u)?0:n),n>=0?n:c):void 0},scrollColumn:function(e,t){var n=this._scrollRow(e,!0);this.scrollX(n,t)},scrollRow:function(e,t){var n=this._scrollRow(e);this.scrollY(n,t)},scrollCell:function(e,t,n){var r=this._scrollRow(e),i=this._scrollRow(t,!0);this.scrollXY(i,r,n)},scrollY:function(e,t){var n=this.$cright[0];return null==e?n.scrollTop:(e=e>=0?e:0,void this.scrollXY(n.scrollLeft,e,t))},scrollXY:function(e,t,n){var r,i,o=this.$cright[0],a=this.that,l=o.scrollLeft,s=o.scrollTop;return e>=0?(o.scrollLeft=e,o.scrollTop=t,r=o.scrollLeft,i=o.scrollTop,void(n&&(r==l&&i==s?n():a.one("scroll",function(){r==l?n():a.one("scrollHead",n)})))):[l,s]},getSBHt:function(e){var t=this.dims,n=this.that.options,r=pq.cVirtual.SBDIM;return this.autoFit?0:("flex"!=this.width||n.maxWidth)&&e>t.wdCenter+r?r:0},getSBWd:function(){return this.dims.htCenter?pq.cVirtual.SBDIM:0},setPanes:function(){var e,t,n,r=this,i=r.that.options,o=r.autoFit,a=r.dims,l=a.htCenter-a.htHead-a.htSum,s=a.wdCenter,d=r.$ele,c=r.freezeCols,u=r.freezeRows,h=r.$cright,f=h[0],p=r.$cleft,g=r.$clt,v=r.$ctr,m=r.getLeft(c),w=pq.cVirtual.SBDIM,x=a.wdTbl,y=Math.max(a.htTbl,30)+r.getSBHt(x),C=r.getTopSafe(u);v.css("display",u?"":"none"),p.css("display",m?"":"none"),g.css("display",m&&u?"":"none"),h.css("overflow-y",""),"flex"==r.height?(l>0&&y>l?y=Math.min(y,l):h.css("overflow-y","hidden"),r.setHtCont(y)):r.setHtCont(l),o&&r.getSBWd()&&h.css("overflow-y","scroll"),h.css("overflow-x",o?"hidden":""),"flex"==r.width?(x=parseInt(d[0].style.height)>=a.htTbl-1?x:x+w,i.maxWidth&&x>s?x=Math.min(x,s):h.css("overflow-x","hidden"),r._flexWidth=x,d.width(r._flexWidth)):d.css("width",""),r.htCont=a.htCont=h.height(),r.wdCont=a.wdCont=h.width(),a.htContClient=n=f.clientHeight,a.wdContClient=e=f.clientWidth,m>e&&(h.css("overflow-x","hidden"),m=e),p.css("width",m),g.css("width",m),v.width(e),p.height(n),t=f.offsetWidth,r.iRenderHead.setWidth(t,e),r.iRenderSum.setWidth(t,e),C>n&&(h.css("overflow-y","hidden"),C=n),g.css("height",C),v.css("height",C),r.wdContLeft=a.wdContLeft=p.width(),r.htContTop=a.htContTop=v.height()}},new pq.cVirtual)}(jQuery),function(e){function t(e){this.that=e}jQuery.paramquery.cMergeHead=t,t.prototype={getRootCell:function(e,t){for(var n=this.that,r=n.headerCells,i=r[e][t],o=i.rowSpan,a=i.leftPos;e&&r[e-1][a]==i;)e--;return{v_ri:e,o_ri:e,v_ci:n.getNextVisibleCI(a),o_ci:a,v_rc:o,o_rc:o,v_cc:i.colSpan,o_cc:i.o_colspan}},ismergedCell:function(e,t){var n,r,i,o=this.that,a=o.headerCells,l=a[e],s=l?l[t]:"";if(s)if(n=s.leftPos,0!=e&&a[e-1][t]===s||o.getNextVisibleCI(n)!=t){if(s.colSpan)return!0}else if(r=s.rowSpan,i=s.colSpan,r&&i&&(r>1||i>1))return{o_ri:e,o_ci:n,v_rc:r,o_rc:r,v_cc:i,o_cc:s.o_colspan}},getClsStyle:function(){return{}}}}(),function(e){pq.cRenderHS=e.extend({},new pq.cRender,{init:function(e){e=e||{};var t,n=this,r=n.that,i=r.options,o=(n.freezeCols=i.freezeCols||0,n.numberCell=i.numberCell,n.colModel=r.colModel),a=n.isHead(),l=n.isSum(),s=a?i.autoRowHead:i.autoRowSum,d=(n.width=i.width,n.height="flex",r.headerCells);n.freezeRows=0,n.dims=r.dims,a?t=n.data=i.showHeader?i.filterModel.header?d.concat([[]]):d:[]:l&&(t=n.data=i.summaryData||[]),n.maxHt=pq.cVirtual.maxHt,n.riOffset=0,n.cols=o.length,n.rows=t.length,a?d.length>1&&(n._m=function(){return!0}):i.stripeRows&&n.initStripeArr(),n.autoRow=null==s?i.autoRow:s,n.initRowHtArrSuper(),n.assignTblDims(!0),n.setPanes()},initPost:function(e){e=e||{};var t=this;t.autoRow,t.data.length&&(e.soft?(t.setCellDims(),t.refresh()):t.refreshAllCells())},onNativeScroll:function(e){return function(){e.refresh(),e.isHead()&&e.that._trigger("scrollHead")}},onRefresh:function(e,t){this.initRefreshTimer(t.hChanged)},refreshHS:function(){this.init(),this.initPost()},setPanes:function(){var e=this,t=e.that,n=e.dims,r=e.$ele,i=e.freezeCols,o=e.$cright,a=o[0],l=e.$cleft,s=e.getLeft(i),d=e.isHead(),c=e.isSum(),u=e.getTopSafe(e.rows);e.data.length,l.css("display",s?"":"none"),r.height(u),d?(n.htHead=u,t._trigger("headHtChanged")):c&&(n.htSum=u,t._trigger("headHtChanged")),e.htCont=o.height(),e.wdCont=o.width(),l.css("width",s),l.height(a.clientHeight),e.wdContLeft=l.width(),e.htContTop=0},setScrollLeft:function(e){var t=this.$cright;t&&this.scrollLeft!==e&&(this.scrollLeft=t[0].scrollLeft=e)},setWidth:function(e,t){this.$ele[0].style.width=e+"px",this.$spacer.width(e-t)}})}(jQuery),function(e){var t=e.paramquery;(pq.cRenderHead=function(e,n){this.that=e;var r=e.options,i=this,o=i.uuid=e.uuid;i.iMerge=new t.cMergeHead(e),i.$ele=n,i.height="flex",i.scrollTop=0,i.rowHt=r.rowHtHead||28,i.cellCls="pq-grid-col",i.setTimer=i.setTimer(o),i.cellPrefix="pq-head-cell-u"+o+"-",i.rowPrefix="pq-head-row-u"+o+"-",i.preInit(n),n.on("click",function(e){return i.onHeaderClick(e)}),e.on("headerKeyDown",i.onHeaderKeyDown.bind(i)).on("refreshHeader softRefresh",i.onRefresh.bind(i))}).prototype=e.extend({},pq.cRenderHS,new t.cHeader,new t.cHeaderSearch,{getRowClsStyleAttr:function(e){var t=this.that.headerCells.length,n="";return t==e?n="pq-grid-header-search-row":e==t-1&&(n="pq-grid-title-row"),[n,"",""]},getTblCls:function(e){var t="pq-grid-header-table";return e.hwrap?t:t+" pq-no-wrap"},isHead:function(){return!0},onRefreshTimer:function(e,t){return function(){var n=e.$cright[0];e.autoRow&&e.autoHeight({timer:!1,hChanged:t}),n.scrollTop=0,n.scrollLeft=n.scrollLeft,e.onCreateHeader(),e.refreshResizeColumn(),e.refreshHeaderSortIcons(),e.that._trigger("refreshHeadAsync")}},_resizeId:function(e){return"pq-resize-div-"+this.uuid+"-"+e},_resizeCls:function(){return"pq-resize-div-"+this.uuid},_resizeDiv:function(e){return this.getById(this._resizeId(e))},refreshResizeColumn:function(){var e,t,n,r,i=this.initH,o=this.colModel,a=this._resizeCls(),l=this.finalH,s=this.numberCell,d=this.freezeCols,c=[],u=[],h=s.show?-1:0;for(this.$ele.find("."+a).remove();l>=h;h++){if(h>=i)t=u;else{if(!(d>h))continue;t=c}(e=h>=0?o[h]:s).hidden||!1===e.resizable||this._resizeDiv(h)||(n=this.getLeft(h+1)-5,r=this._resizeId(h),t.push("<div id='",r,"' pq-col-indx='",h,"' style='left:",n,"px;'"," class='pq-grid-col-resize-handle "+a+"'>&nbsp;</div>"))}c.length&&this.$cleft.append(c.join("")),u.length&&this.$cright.append(u.join(""))},renderCell:function(e){var t,n=e.rowData,r=e.rowIndx,i=e.colIndx,o=e.attr,a=e.cls,l=e.style,s=n[i];return s?(s.colSpan>1&&l.push("z-index:3;"),this.createHeaderCell(r,i,s,o,a,l)):(t=this.renderFilterCell(e.column,i,a),"<div "+o+" class='"+a.join(" ")+"' style='"+l.join("")+"'>"+t+"</div>")}})}(jQuery),function(e){var t=e.paramquery;(pq.cRenderSum=function(e,t){var n=e.options,r=this,i=r.uuid=e.uuid;r.that=e,r.iMerge={ismergedCell:function(){}},r.$ele=t,r.height="flex",r.scrollTop=0,r.rowHt=n.rowHtSum||27,r.cellCls="pq-grid-cell",r.setTimer=r.setTimer(i),r.cellPrefix="pq-sum-cell-u"+i+"-",r.rowPrefix="pq-sum-row-u"+i+"-",r.preInit(t),e.on("refreshSum softRefresh",r.onRefresh.bind(r))}).prototype=e.extend({},new t.cGenerateView,pq.cRenderHS,{isSum:function(){return!0},onRefreshTimer:function(e,t){return function(){var n=e.$cright[0];e.autoRow&&e.autoHeight({timer:!1,hChanged:t}),n.scrollTop=0,n.scrollLeft=n.scrollLeft}}})}(jQuery),function(e){var t=e.paramquery;t.pqGrid.regional.en={strAdd:"Add",strBlanks:text_queryis_empty,strDelete:text_querydelete_rule,strEdit:"Edit",strCondition:text_filtresekli,strConditions:{"":pleaseselect,begin:text_querybegins_with,between:text_querybetween,contain:text_querycontains,equal:text_queryequal,empty:text_queryis_empty,end:text_queryends_with,great:text_querygreater,gte:text_querygreater_or_equal,less:text_queryless,lte:text_queryless_or_equal,notbegin:text_querynot_begins_with,notcontain:text_querynot_contains,notequal:text_querynot_equal,notempty:text_queryis_not_empty,notend:text_querynot_ends_with,range:text_queryin,regexp:text_querycontains,notbetween:text_querynot_between,equalsql:text_equalsql,notequalsql:text_notequalsql,gtesql:text_gtesql,greatsql:text_greatsql,datetimeintervallte:text_datetimeintervallte,datetimeintervalgte:text_datetimeintervalgte,dateintervallte:text_dateintervallte,dateintervalgte:text_dateintervalgte,gtesql:text_gtesql,greatsql:text_greatsql,ltesql:text_ltesql,lesssql:text_lesssql,rangesql:text_rangesql,betweensql:text_betweensql},strOk:text_ok,strClear:text_clear,strGroup_header:text_strGroup_header,strGroup_merge:text_strGroup_merge,strGroup_fixCols:text_strGroup_fixCols,strGroup_grandSummary:text_strGroup_grandSummary,strTP_aggPane:"Aggregates",strTP_colPane:"Group columns",strTP_pivot:"Pivot mode",strTP_rowPane:"Group rows",strTP_aggPH:"Drop columns for computing aggregate values",strTP_colPH:"Drop columns here for grouping along column or x axis",strTP_rowPH:"Drop columns here for grouping along row or y axis",strLoading:text_pleasewait,strNextResult:text_next,strNoRows:text_strNoRows,strNothingFound:text_norecord,strPrevResult:text_prev,strSearch:text_fastsearch,strSelectAll:"Select All",strSelectedmatches:"Selected {0} of {1} match(es)",strFormulas:{ABS:["ABS(number)","Returns the absolute value of a number. The absolute value of a number is the number without its sign."],ACOS:["ACOS(number)","Returns the arccosine, or inverse cosine, of a number. The arccosine is the angle whose cosine is number. The returned angle is given in radians in the range 0 (zero) to pi."],AND:["AND(logical1, [logical2], ...)","Returns TRUE if all its arguments evaluate to TRUE, and returns FALSE if one or more arguments evaluate to FALSE."],ASIN:["ASIN(number)","Returns the arcsine, or inverse sine, of a number. The arcsine is the angle whose sine is number. The returned angle is given in radians in the range -pi/2 to pi/2."],ATAN:["ATAN(number)","Returns the arctangent, or inverse tangent, of a number. The arctangent is the angle whose tangent is number. The returned angle is given in radians in the range -pi/2 to pi/2."],AVERAGE:["AVERAGE(number1, [number2], ...)","Returns the average (arithmetic mean) of the arguments. For example, if the range A1:A20 contains numbers, the formula =AVERAGE(A1:A20) returns the average of those numbers."],AVERAGEIF:["AVERAGEIF(range, criteria, [average_range])","Returns the average (arithmetic mean) of all the cells in a range that meet a given criteria."],AVERAGEIFS:["AVERAGEIFS(average_range, criteria_range1, criteria1, [criteria_range2, criteria2], ...)","Returns the average (arithmetic mean) of all cells that meet multiple criteria."],CEILING:["CEILING(number, significance)","Returns number rounded up, away from zero, to the nearest multiple of significance. For example, if you want to avoid using pennies in your prices and your product is priced at $4.42, use the formula =CEILING(4.42,0.05) to round prices up to the nearest nickel."],CHAR:["CHAR(number)","Returns the character specified by a number."],CHOOSE:["CHOOSE(index_num, value1, [value2], ...)","If index_num is 1, CHOOSE returns value1; if it is 2, CHOOSE returns value2; and so on."],CODE:["CODE(text)","Returns a numeric code for the first character in a text string."],COLUMN:["COLUMN()","Returns reference of the cell in which the COLUMN function appears."],COLUMNS:["COLUMNS(array)","Returns the number of columns in an array or reference."],CONCATENATE:["CONCATENATE(text1, [text2], ...)","join two or more text strings into one string."],COS:["COS(number)","Returns the cosine of the given angle(in radians)."],COUNT:["COUNT(value1, [value2], ...)","Counts the number of cells that contain numbers, and counts numbers within the list of arguments."],COUNTA:["COUNTA(value1, [value2], ...)","The COUNTA function counts the number of cells that are not empty in a range."],COUNTBLANK:["COUNTBLANK(range)","Counts empty cells in a specified range of cells."],COUNTIF:["COUNTIF(range, criteria)","counts the number of cells that meet a criterion; for example, to count the number of times a particular city appears in a customer list."],COUNTIFS:["COUNTIFS(criteria_range1, criteria1, [criteria_range2, criteria2]…)","Applies criteria to cells across multiple ranges and counts the number of times all criteria are met."],DATE:["DATE(year,month,day)","returns the sequential serial number that represents a particular date."],DATEDIF:["DATEDIF(start_date,end_date,unit)","Calculates the number of days, months, or years between two dates. Unit can be 'Y', 'M' or 'D'."],DATEVALUE:["DATEVALUE(date_text)",'converts a date that is stored as text to a serial number that Excel recognizes as a date. For example, the formula =DATEVALUE("1/1/2008") returns 39448.'],DAY:["DAY(serial_number)","Returns the day of a date, represented by a serial number."],DAYS:["DAYS(end_date, start_date)","Returns the number of days between two dates."],DEGREES:["DEGREES(angle)","Converts radians into degrees."],EOMONTH:["EOMONTH(start_date, months)","Returns the serial number for the last day of the month that is the indicated number of months before or after start_date."],EXP:["EXP(number)","Returns e raised to the power of number. "],FIND:["FIND(find_text, within_text, [start_num])","Locates one text string within a second text string, and return the number of the starting position of the first text string from the first character of the second text string."],FLOOR:["FLOOR(number, significance)","Rounds number down, toward zero, to the nearest multiple of significance."],HLOOKUP:["HLOOKUP(lookup_value, table_array, row_index_num, [range_lookup])","Searches for a value in the top row of a table or an array of values, and then returns a value in the same column from a row you specify in the table or array."],HOUR:["HOUR(serial_number)","Returns the hour of a time value. The hour is given as an integer, ranging from 0 (12:00 A.M.) to 23 (11:00 P.M.)."],IF:["IF(logical_test, value_if_true, [value_if_false])","returns one value if a condition is true and another value if it's false."],INDEX:["INDEX(array, row_num, [column_num])","Returns the value of an element in a table or an array, selected by the row and column number indexes."],INDIRECT:["INDIRECT(ref_text, [a1])","Returns the reference specified by a text string. References are immediately evaluated to display their contents."],LARGE:["LARGE(array, k)","Returns the k-th largest value in a data set."],LEFT:["LEFT(text, [num_chars])","returns the first character or characters in a text string, based on the number of characters you specify."],LEN:["LEN(text)","returns the number of characters in a text string."],LOOKUP:["LOOKUP(lookup_value, lookup_vector, [result_vector])","Looks in a one-row or one-column range (known as a vector) for a value and returns a value from the same position in a second one-row or one-column range."],LOWER:["LOWER(text)","Converts all uppercase letters in a text string to lowercase."],MATCH:["MATCH(lookup_value, lookup_array, [match_type])","Searches for a specified item in a range of cells, and then returns the relative position of that item in the range. match_type can be: 0 for exact match with option to use wildcards; 1 ( default ) for less than, The values in the lookup_array argument must be placed in ascending order; -1 for greater than, values in the lookup_array argument must be placed in descending order."],MAX:["MAX(number1, [number2], ...)","Returns the largest value in a set of values."],MEDIAN:["MEDIAN(number1, [number2], ...)","Returns the median of the given numbers. The median is the number in the middle of a set of numbers."],MID:["MID(text, start_num, num_chars)","returns a specific number of characters from a text string, starting at the position you specify, based on the number of characters you specify."],MIN:["MIN(number1, [number2], ...)","Returns the smallest number in a set of values."],MODE:["MODE(number1,[number2],...)","Returns the most frequently occurring, or repetitive, value in an array or range of data."],MONTH:["MONTH(serial_number)","Returns the month of a date represented by a serial number. The month is given as an integer, ranging from 1 (January) to 12 (December)."],OR:["OR(logical1, [logical2], ...)","returns TRUE if any of its arguments evaluate to TRUE, and returns FALSE if all of its arguments evaluate to FALSE."],PI:["PI()","Returns the number 3.14159265358979, the mathematical constant pi."],POWER:["POWER(number, power)","Returns the result of a number raised to a power."],PRODUCT:["PRODUCT(number1, [number2], ...)","multiplies all the numbers given as arguments and returns the product. PRODUCT(A1:A3, C1:C3) is equivalent to =A1 * A2 * A3 * C1 * C2 * C3."],PROPER:["PROPER(text)","Capitalizes the first letter in each word of a text value."],RADIANS:["RADIANS(angle)","Converts degrees into radians."],RAND:["RAND()","Returns an evenly distributed random real number greater than or equal to 0 and less than 1."],RANK:["RANK(number,ref,[order])","Returns the rank of a number in a list of numbers."],RATE:["",""],REPLACE:["REPLACE(old_text, start_num, num_chars, new_text)","replaces part of a text string, based on the number of characters you specify, with a different text string."],REPT:["REPT(text, number_times)","Repeats text a given number of times."],RIGHT:["RIGHT(text,[num_chars])","returns the last character or characters in a text string, based on the number of characters you specify."],ROUND:["ROUND(number, num_digits)","rounds a number to a specified number of digits."],ROUNDDOWN:["ROUNDDOWN(number, num_digits)","Rounds a number down, toward zero."],ROUNDUP:["ROUNDUP(number, num_digits)","Rounds a number up, away from 0 (zero)."],ROW:["ROW()","Returns the reference of the cell in which the ROW function appears."],ROWS:["ROWS(array)","Returns the number of rows in a reference or array."],SEARCH:["SEARCH(find_text,within_text,[start_num])","locate one text string within a second text string, and return the number of the starting position of the first text string from the first character of the second text string."],SIN:["SIN(number)","Returns the sine of the given angle(in radians)."],SMALL:["SMALL(array, k)","Returns the k-th smallest value in a data set."],SQRT:["SQRT(number)","Returns a positive square root."],STDEV:["STDEV(number1,[number2],...)","Estimates standard deviation based on a sample. The standard deviation is a measure of how widely values are dispersed from the average value (the mean)."],STDEVP:["STDEVP(number1,[number2],...)","Calculates standard deviation based on the entire population given as arguments."],SUBSTITUTE:["SUBSTITUTE(text, old_text, new_text, [instance_num])","Substitutes new_text for old_text in a text string."],SUM:["SUM(number1,[number2],...)","Adds its arguments. You can add individual values, cell references or ranges or a mix of all three."],SUMIF:["SUMIF(range, criteria, [sum_range])","adds the values in a range that meet criteria that you specify"],SUMIFS:["SUMIFS(sum_range, criteria_range1, criteria1, [criteria_range2, criteria2], ...)","adds all of its arguments that meet multiple criteria."],SUMPRODUCT:["SUMPRODUCT(array1, [array2], [array3], ...)","Multiplies corresponding components in the given arrays, and returns the sum of those products."],TAN:["TAN(number)","Returns the tangent of the given angle(in radians)."],TEXT:['TEXT(Value you want to format, "Format code you want to apply")',"The TEXT function lets you change the way a number appears by applying formatting to it with format codes."],TIME:["TIME(hour, minute, second)","Returns the decimal number for a particular time."],TIMEVALUE:["TIMEVALUE(time_text)","Returns the decimal number of the time represented by a text string. The decimal number is a value ranging from 0 (zero) to 0.99988426, representing the times from 0:00:00 (12:00:00 AM) to 23:59:59 (11:59:59 P.M.)."],TODAY:["TODAY()","Returns the serial number of the current date."],TRIM:["TRIM(text)","Removes all spaces from text except for single spaces between words."],TRUNC:["TRUNC(number, [num_digits])","Truncates a number to an integer by removing the fractional part of the number."],UPPER:["UPPER(text)","Converts text to uppercase."],VALUE:["VALUE(text)","Converts a text string that represents a number to a number."],VAR:["VAR(number1,[number2],...)","Estimates variance based on a sample."],VARP:["VARP(number1,[number2],...)","Calculates variance based on the entire population."],VLOOKUP:["VLOOKUP (lookup_value, table_array, col_index_num, [range_lookup])","look up a value in a table or a range by row. For example, look up a price of an automotive part by the part number."],YEAR:["YEAR(serial_number)","Returns the year corresponding to a date. The year is returned as an integer in the range 1900-9999."]}},t.pqPager.regional.en={strDisplay:text_showing+" {0} / {1} = {2}",strFirstPage:text_first,strLastPage:text_last,strNextPage:text_next,strPage:text_page+" {0} / {1}",strPrevPage:text_prev,strRefresh:"Refresh",strRpp:text_showing+" {0}"},e.extend(t.pqGrid.defaults,t.pqGrid.regional.en),e.extend(t.pqPager.defaults,t.pqPager.regional.en)}(jQuery);

!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.JSZip=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";c.encode=function(a){for(var b,c,e,f,g,h,i,j="",k=0;k<a.length;)b=a.charCodeAt(k++),c=a.charCodeAt(k++),e=a.charCodeAt(k++),f=b>>2,g=(3&b)<<4|c>>4,h=(15&c)<<2|e>>6,i=63&e,isNaN(c)?h=i=64:isNaN(e)&&(i=64),j=j+d.charAt(f)+d.charAt(g)+d.charAt(h)+d.charAt(i);return j},c.decode=function(a){var b,c,e,f,g,h,i,j="",k=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");k<a.length;)f=d.indexOf(a.charAt(k++)),g=d.indexOf(a.charAt(k++)),h=d.indexOf(a.charAt(k++)),i=d.indexOf(a.charAt(k++)),b=f<<2|g>>4,c=(15&g)<<4|h>>2,e=(3&h)<<6|i,j+=String.fromCharCode(b),64!=h&&(j+=String.fromCharCode(c)),64!=i&&(j+=String.fromCharCode(e));return j}},{}],2:[function(a,b){"use strict";function c(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}c.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},b.exports=c},{}],3:[function(a,b,c){"use strict";c.STORE={magic:"\x00\x00",compress:function(a){return a},uncompress:function(a){return a},compressInputType:null,uncompressInputType:null},c.DEFLATE=a("./flate")},{"./flate":8}],4:[function(a,b){"use strict";var c=a("./utils"),d=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];b.exports=function(a,b){if("undefined"==typeof a||!a.length)return 0;var e="string"!==c.getTypeOf(a);"undefined"==typeof b&&(b=0);var f=0,g=0,h=0;b=-1^b;for(var i=0,j=a.length;j>i;i++)h=e?a[i]:a.charCodeAt(i),g=255&(b^h),f=d[g],b=b>>>8^f;return-1^b}},{"./utils":21}],5:[function(a,b){"use strict";function c(){this.data=null,this.length=0,this.index=0}var d=a("./utils");c.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<a||0>a)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var b,c=0;for(this.checkOffset(a),b=this.index+a-1;b>=this.index;b--)c=(c<<8)+this.byteAt(b);return this.index+=a,c},readString:function(a){return d.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date((a>>25&127)+1980,(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1)}},b.exports=c},{"./utils":21}],6:[function(a,b,c){"use strict";c.base64=!1,c.binary=!1,c.dir=!1,c.createFolders=!1,c.date=null,c.compression=null,c.compressionOptions=null,c.comment=null,c.unixPermissions=null,c.dosPermissions=null},{}],7:[function(a,b,c){"use strict";var d=a("./utils");c.string2binary=function(a){return d.string2binary(a)},c.string2Uint8Array=function(a){return d.transformTo("uint8array",a)},c.uint8Array2String=function(a){return d.transformTo("string",a)},c.string2Blob=function(a){var b=d.transformTo("arraybuffer",a);return d.arrayBuffer2Blob(b)},c.arrayBuffer2Blob=function(a){return d.arrayBuffer2Blob(a)},c.transformTo=function(a,b){return d.transformTo(a,b)},c.getTypeOf=function(a){return d.getTypeOf(a)},c.checkSupport=function(a){return d.checkSupport(a)},c.MAX_VALUE_16BITS=d.MAX_VALUE_16BITS,c.MAX_VALUE_32BITS=d.MAX_VALUE_32BITS,c.pretty=function(a){return d.pretty(a)},c.findCompression=function(a){return d.findCompression(a)},c.isRegExp=function(a){return d.isRegExp(a)}},{"./utils":21}],8:[function(a,b,c){"use strict";var d="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,e=a("pako");c.uncompressInputType=d?"uint8array":"array",c.compressInputType=d?"uint8array":"array",c.magic="\b\x00",c.compress=function(a,b){return e.deflateRaw(a,{level:b.level||-1})},c.uncompress=function(a){return e.inflateRaw(a)}},{pako:24}],9:[function(a,b){"use strict";function c(a,b){return this instanceof c?(this.files={},this.comment=null,this.root="",a&&this.load(a,b),void(this.clone=function(){var a=new c;for(var b in this)"function"!=typeof this[b]&&(a[b]=this[b]);return a})):new c(a,b)}var d=a("./base64");c.prototype=a("./object"),c.prototype.load=a("./load"),c.support=a("./support"),c.defaults=a("./defaults"),c.utils=a("./deprecatedPublicUtils"),c.base64={encode:function(a){return d.encode(a)},decode:function(a){return d.decode(a)}},c.compressions=a("./compressions"),b.exports=c},{"./base64":1,"./compressions":3,"./defaults":6,"./deprecatedPublicUtils":7,"./load":10,"./object":13,"./support":17}],10:[function(a,b){"use strict";var c=a("./base64"),d=a("./zipEntries");b.exports=function(a,b){var e,f,g,h;for(b=b||{},b.base64&&(a=c.decode(a)),f=new d(a,b),e=f.files,g=0;g<e.length;g++)h=e[g],this.file(h.fileName,h.decompressed,{binary:!0,optimizedBinaryString:!0,date:h.date,dir:h.dir,comment:h.fileComment.length?h.fileComment:null,unixPermissions:h.unixPermissions,dosPermissions:h.dosPermissions,createFolders:b.createFolders});return f.zipComment.length&&(this.comment=f.zipComment),this}},{"./base64":1,"./zipEntries":22}],11:[function(a,b){(function(a){"use strict";b.exports=function(b,c){return new a(b,c)},b.exports.test=function(b){return a.isBuffer(b)}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],12:[function(a,b){"use strict";function c(a){this.data=a,this.length=this.data.length,this.index=0}var d=a("./uint8ArrayReader");c.prototype=new d,c.prototype.readData=function(a){this.checkOffset(a);var b=this.data.slice(this.index,this.index+a);return this.index+=a,b},b.exports=c},{"./uint8ArrayReader":18}],13:[function(a,b){"use strict";var c=a("./support"),d=a("./utils"),e=a("./crc32"),f=a("./signature"),g=a("./defaults"),h=a("./base64"),i=a("./compressions"),j=a("./compressedObject"),k=a("./nodeBuffer"),l=a("./utf8"),m=a("./stringWriter"),n=a("./uint8ArrayWriter"),o=function(a){if(a._data instanceof j&&(a._data=a._data.getContent(),a.options.binary=!0,a.options.base64=!1,"uint8array"===d.getTypeOf(a._data))){var b=a._data;a._data=new Uint8Array(b.length),0!==b.length&&a._data.set(b,0)}return a._data},p=function(a){var b=o(a),e=d.getTypeOf(b);return"string"===e?!a.options.binary&&c.nodebuffer?k(b,"utf-8"):a.asBinary():b},q=function(a){var b=o(this);return null===b||"undefined"==typeof b?"":(this.options.base64&&(b=h.decode(b)),b=a&&this.options.binary?D.utf8decode(b):d.transformTo("string",b),a||this.options.binary||(b=d.transformTo("string",D.utf8encode(b))),b)},r=function(a,b,c){this.name=a,this.dir=c.dir,this.date=c.date,this.comment=c.comment,this.unixPermissions=c.unixPermissions,this.dosPermissions=c.dosPermissions,this._data=b,this.options=c,this._initialMetadata={dir:c.dir,date:c.date}};r.prototype={asText:function(){return q.call(this,!0)},asBinary:function(){return q.call(this,!1)},asNodeBuffer:function(){var a=p(this);return d.transformTo("nodebuffer",a)},asUint8Array:function(){var a=p(this);return d.transformTo("uint8array",a)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var s=function(a,b){var c,d="";for(c=0;b>c;c++)d+=String.fromCharCode(255&a),a>>>=8;return d},t=function(){var a,b,c={};for(a=0;a<arguments.length;a++)for(b in arguments[a])arguments[a].hasOwnProperty(b)&&"undefined"==typeof c[b]&&(c[b]=arguments[a][b]);return c},u=function(a){return a=a||{},a.base64!==!0||null!==a.binary&&void 0!==a.binary||(a.binary=!0),a=t(a,g),a.date=a.date||new Date,null!==a.compression&&(a.compression=a.compression.toUpperCase()),a},v=function(a,b,c){var e,f=d.getTypeOf(b);if(c=u(c),"string"==typeof c.unixPermissions&&(c.unixPermissions=parseInt(c.unixPermissions,8)),c.unixPermissions&&16384&c.unixPermissions&&(c.dir=!0),c.dosPermissions&&16&c.dosPermissions&&(c.dir=!0),c.dir&&(a=x(a)),c.createFolders&&(e=w(a))&&y.call(this,e,!0),c.dir||null===b||"undefined"==typeof b)c.base64=!1,c.binary=!1,b=null,f=null;else if("string"===f)c.binary&&!c.base64&&c.optimizedBinaryString!==!0&&(b=d.string2binary(b));else{if(c.base64=!1,c.binary=!0,!(f||b instanceof j))throw new Error("The data of '"+a+"' is in an unsupported format !");"arraybuffer"===f&&(b=d.transformTo("uint8array",b))}var g=new r(a,b,c);return this.files[a]=g,g},w=function(a){"/"==a.slice(-1)&&(a=a.substring(0,a.length-1));var b=a.lastIndexOf("/");return b>0?a.substring(0,b):""},x=function(a){return"/"!=a.slice(-1)&&(a+="/"),a},y=function(a,b){return b="undefined"!=typeof b?b:!1,a=x(a),this.files[a]||v.call(this,a,null,{dir:!0,createFolders:b}),this.files[a]},z=function(a,b,c){var f,g=new j;return a._data instanceof j?(g.uncompressedSize=a._data.uncompressedSize,g.crc32=a._data.crc32,0===g.uncompressedSize||a.dir?(b=i.STORE,g.compressedContent="",g.crc32=0):a._data.compressionMethod===b.magic?g.compressedContent=a._data.getCompressedContent():(f=a._data.getContent(),g.compressedContent=b.compress(d.transformTo(b.compressInputType,f),c))):(f=p(a),(!f||0===f.length||a.dir)&&(b=i.STORE,f=""),g.uncompressedSize=f.length,g.crc32=e(f),g.compressedContent=b.compress(d.transformTo(b.compressInputType,f),c)),g.compressedSize=g.compressedContent.length,g.compressionMethod=b.magic,g},A=function(a,b){var c=a;return a||(c=b?16893:33204),(65535&c)<<16},B=function(a){return 63&(a||0)},C=function(a,b,c,g,h){var i,j,k,m,n=(c.compressedContent,d.transformTo("string",l.utf8encode(b.name))),o=b.comment||"",p=d.transformTo("string",l.utf8encode(o)),q=n.length!==b.name.length,r=p.length!==o.length,t=b.options,u="",v="",w="";k=b._initialMetadata.dir!==b.dir?b.dir:t.dir,m=b._initialMetadata.date!==b.date?b.date:t.date;var x=0,y=0;k&&(x|=16),"UNIX"===h?(y=798,x|=A(b.unixPermissions,k)):(y=20,x|=B(b.dosPermissions,k)),i=m.getHours(),i<<=6,i|=m.getMinutes(),i<<=5,i|=m.getSeconds()/2,j=m.getFullYear()-1980,j<<=4,j|=m.getMonth()+1,j<<=5,j|=m.getDate(),q&&(v=s(1,1)+s(e(n),4)+n,u+="up"+s(v.length,2)+v),r&&(w=s(1,1)+s(this.crc32(p),4)+p,u+="uc"+s(w.length,2)+w);var z="";z+="\n\x00",z+=q||r?"\x00\b":"\x00\x00",z+=c.compressionMethod,z+=s(i,2),z+=s(j,2),z+=s(c.crc32,4),z+=s(c.compressedSize,4),z+=s(c.uncompressedSize,4),z+=s(n.length,2),z+=s(u.length,2);var C=f.LOCAL_FILE_HEADER+z+n+u,D=f.CENTRAL_FILE_HEADER+s(y,2)+z+s(p.length,2)+"\x00\x00\x00\x00"+s(x,4)+s(g,4)+n+u+p;return{fileRecord:C,dirRecord:D,compressedObject:c}},D={load:function(){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(a){var b,c,d,e,f=[];for(b in this.files)this.files.hasOwnProperty(b)&&(d=this.files[b],e=new r(d.name,d._data,t(d.options)),c=b.slice(this.root.length,b.length),b.slice(0,this.root.length)===this.root&&a(c,e)&&f.push(e));return f},file:function(a,b,c){if(1===arguments.length){if(d.isRegExp(a)){var e=a;return this.filter(function(a,b){return!b.dir&&e.test(a)})}return this.filter(function(b,c){return!c.dir&&b===a})[0]||null}return a=this.root+a,v.call(this,a,b,c),this},folder:function(a){if(!a)return this;if(d.isRegExp(a))return this.filter(function(b,c){return c.dir&&a.test(b)});var b=this.root+a,c=y.call(this,b),e=this.clone();return e.root=c.name,e},remove:function(a){a=this.root+a;var b=this.files[a];if(b||("/"!=a.slice(-1)&&(a+="/"),b=this.files[a]),b&&!b.dir)delete this.files[a];else for(var c=this.filter(function(b,c){return c.name.slice(0,a.length)===a}),d=0;d<c.length;d++)delete this.files[c[d].name];return this},generate:function(a){a=t(a||{},{base64:!0,compression:"STORE",compressionOptions:null,type:"base64",platform:"DOS",comment:null,mimeType:"application/zip"}),d.checkSupport(a.type),("darwin"===a.platform||"freebsd"===a.platform||"linux"===a.platform||"sunos"===a.platform)&&(a.platform="UNIX"),"win32"===a.platform&&(a.platform="DOS");var b,c,e=[],g=0,j=0,k=d.transformTo("string",this.utf8encode(a.comment||this.comment||""));for(var l in this.files)if(this.files.hasOwnProperty(l)){var o=this.files[l],p=o.options.compression||a.compression.toUpperCase(),q=i[p];if(!q)throw new Error(p+" is not a valid compression method !");var r=o.options.compressionOptions||a.compressionOptions||{},u=z.call(this,o,q,r),v=C.call(this,l,o,u,g,a.platform);g+=v.fileRecord.length+u.compressedSize,j+=v.dirRecord.length,e.push(v)}var w="";w=f.CENTRAL_DIRECTORY_END+"\x00\x00\x00\x00"+s(e.length,2)+s(e.length,2)+s(j,4)+s(g,4)+s(k.length,2)+k;var x=a.type.toLowerCase();for(b="uint8array"===x||"arraybuffer"===x||"blob"===x||"nodebuffer"===x?new n(g+j+w.length):new m(g+j+w.length),c=0;c<e.length;c++)b.append(e[c].fileRecord),b.append(e[c].compressedObject.compressedContent);for(c=0;c<e.length;c++)b.append(e[c].dirRecord);b.append(w);var y=b.finalize();switch(a.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return d.transformTo(a.type.toLowerCase(),y);case"blob":return d.arrayBuffer2Blob(d.transformTo("arraybuffer",y),a.mimeType);case"base64":return a.base64?h.encode(y):y;default:return y}},crc32:function(a,b){return e(a,b)},utf8encode:function(a){return d.transformTo("string",l.utf8encode(a))},utf8decode:function(a){return l.utf8decode(a)}};b.exports=D},{"./base64":1,"./compressedObject":2,"./compressions":3,"./crc32":4,"./defaults":6,"./nodeBuffer":11,"./signature":14,"./stringWriter":16,"./support":17,"./uint8ArrayWriter":19,"./utf8":20,"./utils":21}],14:[function(a,b,c){"use strict";c.LOCAL_FILE_HEADER="PK",c.CENTRAL_FILE_HEADER="PK",c.CENTRAL_DIRECTORY_END="PK",c.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",c.ZIP64_CENTRAL_DIRECTORY_END="PK",c.DATA_DESCRIPTOR="PK\b"},{}],15:[function(a,b){"use strict";function c(a,b){this.data=a,b||(this.data=e.string2binary(this.data)),this.length=this.data.length,this.index=0}var d=a("./dataReader"),e=a("./utils");c.prototype=new d,c.prototype.byteAt=function(a){return this.data.charCodeAt(a)},c.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)},c.prototype.readData=function(a){this.checkOffset(a);var b=this.data.slice(this.index,this.index+a);return this.index+=a,b},b.exports=c},{"./dataReader":5,"./utils":21}],16:[function(a,b){"use strict";var c=a("./utils"),d=function(){this.data=[]};d.prototype={append:function(a){a=c.transformTo("string",a),this.data.push(a)},finalize:function(){return this.data.join("")}},b.exports=d},{"./utils":21}],17:[function(a,b,c){(function(a){"use strict";if(c.base64=!0,c.array=!0,c.string=!0,c.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,c.nodebuffer="undefined"!=typeof a,c.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)c.blob=!1;else{var b=new ArrayBuffer(0);try{c.blob=0===new Blob([b],{type:"application/zip"}).size}catch(d){try{var e=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,f=new e;f.append(b),c.blob=0===f.getBlob("application/zip").size}catch(d){c.blob=!1}}}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],18:[function(a,b){"use strict";function c(a){a&&(this.data=a,this.length=this.data.length,this.index=0)}var d=a("./dataReader");c.prototype=new d,c.prototype.byteAt=function(a){return this.data[a]},c.prototype.lastIndexOfSignature=function(a){for(var b=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2),e=a.charCodeAt(3),f=this.length-4;f>=0;--f)if(this.data[f]===b&&this.data[f+1]===c&&this.data[f+2]===d&&this.data[f+3]===e)return f;return-1},c.prototype.readData=function(a){if(this.checkOffset(a),0===a)return new Uint8Array(0);var b=this.data.subarray(this.index,this.index+a);return this.index+=a,b},b.exports=c},{"./dataReader":5}],19:[function(a,b){"use strict";var c=a("./utils"),d=function(a){this.data=new Uint8Array(a),this.index=0};d.prototype={append:function(a){0!==a.length&&(a=c.transformTo("uint8array",a),this.data.set(a,this.index),this.index+=a.length)},finalize:function(){return this.data}},b.exports=d},{"./utils":21}],20:[function(a,b,c){"use strict";for(var d=a("./utils"),e=a("./support"),f=a("./nodeBuffer"),g=new Array(256),h=0;256>h;h++)g[h]=h>=252?6:h>=248?5:h>=240?4:h>=224?3:h>=192?2:1;g[254]=g[254]=1;var i=function(a){var b,c,d,f,g,h=a.length,i=0;for(f=0;h>f;f++)c=a.charCodeAt(f),55296===(64512&c)&&h>f+1&&(d=a.charCodeAt(f+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),f++)),i+=128>c?1:2048>c?2:65536>c?3:4;for(b=e.uint8array?new Uint8Array(i):new Array(i),g=0,f=0;i>g;f++)c=a.charCodeAt(f),55296===(64512&c)&&h>f+1&&(d=a.charCodeAt(f+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),f++)),128>c?b[g++]=c:2048>c?(b[g++]=192|c>>>6,b[g++]=128|63&c):65536>c?(b[g++]=224|c>>>12,b[g++]=128|c>>>6&63,b[g++]=128|63&c):(b[g++]=240|c>>>18,b[g++]=128|c>>>12&63,b[g++]=128|c>>>6&63,b[g++]=128|63&c);return b},j=function(a,b){var c;for(b=b||a.length,b>a.length&&(b=a.length),c=b-1;c>=0&&128===(192&a[c]);)c--;return 0>c?b:0===c?b:c+g[a[c]]>b?c:b},k=function(a){var b,c,e,f,h=a.length,i=new Array(2*h);for(c=0,b=0;h>b;)if(e=a[b++],128>e)i[c++]=e;else if(f=g[e],f>4)i[c++]=65533,b+=f-1;else{for(e&=2===f?31:3===f?15:7;f>1&&h>b;)e=e<<6|63&a[b++],f--;f>1?i[c++]=65533:65536>e?i[c++]=e:(e-=65536,i[c++]=55296|e>>10&1023,i[c++]=56320|1023&e)}return i.length!==c&&(i.subarray?i=i.subarray(0,c):i.length=c),d.applyFromCharCode(i)};c.utf8encode=function(a){return e.nodebuffer?f(a,"utf-8"):i(a)},c.utf8decode=function(a){if(e.nodebuffer)return d.transformTo("nodebuffer",a).toString("utf-8");a=d.transformTo(e.uint8array?"uint8array":"array",a);for(var b=[],c=0,f=a.length,g=65536;f>c;){var h=j(a,Math.min(c+g,f));b.push(e.uint8array?k(a.subarray(c,h)):k(a.slice(c,h))),c=h}return b.join("")}},{"./nodeBuffer":11,"./support":17,"./utils":21}],21:[function(a,b,c){"use strict";function d(a){return a}function e(a,b){for(var c=0;c<a.length;++c)b[c]=255&a.charCodeAt(c);return b}function f(a){var b=65536,d=[],e=a.length,f=c.getTypeOf(a),g=0,h=!0;try{switch(f){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,j(0))}}catch(i){h=!1}if(!h){for(var k="",l=0;l<a.length;l++)k+=String.fromCharCode(a[l]);return k}for(;e>g&&b>1;)try{d.push("array"===f||"nodebuffer"===f?String.fromCharCode.apply(null,a.slice(g,Math.min(g+b,e))):String.fromCharCode.apply(null,a.subarray(g,Math.min(g+b,e)))),g+=b}catch(i){b=Math.floor(b/2)}return d.join("")}function g(a,b){for(var c=0;c<a.length;c++)b[c]=a[c];return b}var h=a("./support"),i=a("./compressions"),j=a("./nodeBuffer");c.string2binary=function(a){for(var b="",c=0;c<a.length;c++)b+=String.fromCharCode(255&a.charCodeAt(c));return b},c.arrayBuffer2Blob=function(a,b){c.checkSupport("blob"),b=b||"application/zip";try{return new Blob([a],{type:b})}catch(d){try{var e=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,f=new e;return f.append(a),f.getBlob(b)}catch(d){throw new Error("Bug : can't construct the Blob.")}}},c.applyFromCharCode=f;var k={};k.string={string:d,array:function(a){return e(a,new Array(a.length))},arraybuffer:function(a){return k.string.uint8array(a).buffer},uint8array:function(a){return e(a,new Uint8Array(a.length))},nodebuffer:function(a){return e(a,j(a.length))}},k.array={string:f,array:d,arraybuffer:function(a){return new Uint8Array(a).buffer},uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return j(a)}},k.arraybuffer={string:function(a){return f(new Uint8Array(a))},array:function(a){return g(new Uint8Array(a),new Array(a.byteLength))},arraybuffer:d,uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return j(new Uint8Array(a))}},k.uint8array={string:f,array:function(a){return g(a,new Array(a.length))},arraybuffer:function(a){return a.buffer},uint8array:d,nodebuffer:function(a){return j(a)}},k.nodebuffer={string:f,array:function(a){return g(a,new Array(a.length))},arraybuffer:function(a){return k.nodebuffer.uint8array(a).buffer},uint8array:function(a){return g(a,new Uint8Array(a.length))},nodebuffer:d},c.transformTo=function(a,b){if(b||(b=""),!a)return b;c.checkSupport(a);var d=c.getTypeOf(b),e=k[d][a](b);return e},c.getTypeOf=function(a){return"string"==typeof a?"string":"[object Array]"===Object.prototype.toString.call(a)?"array":h.nodebuffer&&j.test(a)?"nodebuffer":h.uint8array&&a instanceof Uint8Array?"uint8array":h.arraybuffer&&a instanceof ArrayBuffer?"arraybuffer":void 0},c.checkSupport=function(a){var b=h[a.toLowerCase()];if(!b)throw new Error(a+" is not supported by this browser")},c.MAX_VALUE_16BITS=65535,c.MAX_VALUE_32BITS=-1,c.pretty=function(a){var b,c,d="";for(c=0;c<(a||"").length;c++)b=a.charCodeAt(c),d+="\\x"+(16>b?"0":"")+b.toString(16).toUpperCase();return d},c.findCompression=function(a){for(var b in i)if(i.hasOwnProperty(b)&&i[b].magic===a)return i[b];return null},c.isRegExp=function(a){return"[object RegExp]"===Object.prototype.toString.call(a)}},{"./compressions":3,"./nodeBuffer":11,"./support":17}],22:[function(a,b){"use strict";function c(a,b){this.files=[],this.loadOptions=b,a&&this.load(a)}var d=a("./stringReader"),e=a("./nodeBufferReader"),f=a("./uint8ArrayReader"),g=a("./utils"),h=a("./signature"),i=a("./zipEntry"),j=a("./support"),k=a("./object");c.prototype={checkSignature:function(a){var b=this.reader.readString(4);if(b!==a)throw new Error("Corrupted zip or bug : unexpected signature ("+g.pretty(b)+", expected "+g.pretty(a)+")")},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2),this.zipComment=this.reader.readString(this.zipCommentLength),this.zipComment=k.utf8decode(this.zipComment)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var a,b,c,d=this.zip64EndOfCentralSize-44,e=0;d>e;)a=this.reader.readInt(2),b=this.reader.readInt(4),c=this.reader.readString(b),this.zip64ExtensibleData[a]={id:a,length:b,value:c}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var a,b;for(a=0;a<this.files.length;a++)b=this.files[a],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(h.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var a;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===h.CENTRAL_FILE_HEADER;)a=new i({zip64:this.zip64},this.loadOptions),a.readCentralPart(this.reader),this.files.push(a)},readEndOfCentral:function(){var a=this.reader.lastIndexOfSignature(h.CENTRAL_DIRECTORY_END);if(-1===a){var b=!0;try{this.reader.setIndex(0),this.checkSignature(h.LOCAL_FILE_HEADER),b=!1}catch(c){}throw new Error(b?"Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html":"Corrupted zip : can't find end of central directory")}if(this.reader.setIndex(a),this.checkSignature(h.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===g.MAX_VALUE_16BITS||this.diskWithCentralDirStart===g.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===g.MAX_VALUE_16BITS||this.centralDirRecords===g.MAX_VALUE_16BITS||this.centralDirSize===g.MAX_VALUE_32BITS||this.centralDirOffset===g.MAX_VALUE_32BITS){if(this.zip64=!0,a=this.reader.lastIndexOfSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR),-1===a)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.reader.setIndex(a),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}},prepareReader:function(a){var b=g.getTypeOf(a);this.reader="string"!==b||j.uint8array?"nodebuffer"===b?new e(a):new f(g.transformTo("uint8array",a)):new d(a,this.loadOptions.optimizedBinaryString)},load:function(a){this.prepareReader(a),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},b.exports=c},{"./nodeBufferReader":12,"./object":13,"./signature":14,"./stringReader":15,"./support":17,"./uint8ArrayReader":18,"./utils":21,"./zipEntry":23}],23:[function(a,b){"use strict";function c(a,b){this.options=a,this.loadOptions=b}var d=a("./stringReader"),e=a("./utils"),f=a("./compressedObject"),g=a("./object"),h=0,i=3;c.prototype={isEncrypted:function(){return 1===(1&this.bitFlag)},useUTF8:function(){return 2048===(2048&this.bitFlag)},prepareCompressedContent:function(a,b,c){return function(){var d=a.index;a.setIndex(b);var e=a.readData(c);return a.setIndex(d),e}},prepareContent:function(a,b,c,d,f){return function(){var a=e.transformTo(d.uncompressInputType,this.getCompressedContent()),b=d.uncompress(a);if(b.length!==f)throw new Error("Bug : uncompressed data size mismatch");return b}},readLocalPart:function(a){var b,c;if(a.skip(22),this.fileNameLength=a.readInt(2),c=a.readInt(2),this.fileName=a.readString(this.fileNameLength),a.skip(c),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(b=e.findCompression(this.compressionMethod),null===b)throw new Error("Corrupted zip : compression "+e.pretty(this.compressionMethod)+" unknown (inner file : "+this.fileName+")");if(this.decompressed=new f,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(a,a.index,this.compressedSize,b),this.decompressed.getContent=this.prepareContent(a,a.index,this.compressedSize,b,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=e.transformTo("string",this.decompressed.getContent()),g.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(a){if(this.versionMadeBy=a.readInt(2),this.versionNeeded=a.readInt(2),this.bitFlag=a.readInt(2),this.compressionMethod=a.readString(2),this.date=a.readDate(),this.crc32=a.readInt(4),this.compressedSize=a.readInt(4),this.uncompressedSize=a.readInt(4),this.fileNameLength=a.readInt(2),this.extraFieldsLength=a.readInt(2),this.fileCommentLength=a.readInt(2),this.diskNumberStart=a.readInt(2),this.internalFileAttributes=a.readInt(2),this.externalFileAttributes=a.readInt(4),this.localHeaderOffset=a.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=a.readString(this.fileNameLength),this.readExtraFields(a),this.parseZIP64ExtraField(a),this.fileComment=a.readString(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var a=this.versionMadeBy>>8;this.dir=16&this.externalFileAttributes?!0:!1,a===h&&(this.dosPermissions=63&this.externalFileAttributes),a===i&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileName.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var a=new d(this.extraFields[1].value);this.uncompressedSize===e.MAX_VALUE_32BITS&&(this.uncompressedSize=a.readInt(8)),this.compressedSize===e.MAX_VALUE_32BITS&&(this.compressedSize=a.readInt(8)),this.localHeaderOffset===e.MAX_VALUE_32BITS&&(this.localHeaderOffset=a.readInt(8)),this.diskNumberStart===e.MAX_VALUE_32BITS&&(this.diskNumberStart=a.readInt(4))}},readExtraFields:function(a){var b,c,d,e=a.index;for(this.extraFields=this.extraFields||{};a.index<e+this.extraFieldsLength;)b=a.readInt(2),c=a.readInt(2),d=a.readString(c),this.extraFields[b]={id:b,length:c,value:d}},handleUTF8:function(){if(this.useUTF8())this.fileName=g.utf8decode(this.fileName),this.fileComment=g.utf8decode(this.fileComment);else{var a=this.findExtraFieldUnicodePath();null!==a&&(this.fileName=a);var b=this.findExtraFieldUnicodeComment();null!==b&&(this.fileComment=b)}},findExtraFieldUnicodePath:function(){var a=this.extraFields[28789];if(a){var b=new d(a.value);return 1!==b.readInt(1)?null:g.crc32(this.fileName)!==b.readInt(4)?null:g.utf8decode(b.readString(a.length-5))
}return null},findExtraFieldUnicodeComment:function(){var a=this.extraFields[25461];if(a){var b=new d(a.value);return 1!==b.readInt(1)?null:g.crc32(this.fileComment)!==b.readInt(4)?null:g.utf8decode(b.readString(a.length-5))}return null}},b.exports=c},{"./compressedObject":2,"./object":13,"./stringReader":15,"./utils":21}],24:[function(a,b){"use strict";var c=a("./lib/utils/common").assign,d=a("./lib/deflate"),e=a("./lib/inflate"),f=a("./lib/zlib/constants"),g={};c(g,d,e,f),b.exports=g},{"./lib/deflate":25,"./lib/inflate":26,"./lib/utils/common":27,"./lib/zlib/constants":30}],25:[function(a,b,c){"use strict";function d(a,b){var c=new s(b);if(c.push(a,!0),c.err)throw c.msg;return c.result}function e(a,b){return b=b||{},b.raw=!0,d(a,b)}function f(a,b){return b=b||{},b.gzip=!0,d(a,b)}var g=a("./zlib/deflate.js"),h=a("./utils/common"),i=a("./utils/strings"),j=a("./zlib/messages"),k=a("./zlib/zstream"),l=0,m=4,n=0,o=1,p=-1,q=0,r=8,s=function(a){this.options=h.assign({level:p,method:r,chunkSize:16384,windowBits:15,memLevel:8,strategy:q,to:""},a||{});var b=this.options;b.raw&&b.windowBits>0?b.windowBits=-b.windowBits:b.gzip&&b.windowBits>0&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new k,this.strm.avail_out=0;var c=g.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(c!==n)throw new Error(j[c]);b.header&&g.deflateSetHeader(this.strm,b.header)};s.prototype.push=function(a,b){var c,d,e=this.strm,f=this.options.chunkSize;if(this.ended)return!1;d=b===~~b?b:b===!0?m:l,e.input="string"==typeof a?i.string2buf(a):a,e.next_in=0,e.avail_in=e.input.length;do{if(0===e.avail_out&&(e.output=new h.Buf8(f),e.next_out=0,e.avail_out=f),c=g.deflate(e,d),c!==o&&c!==n)return this.onEnd(c),this.ended=!0,!1;(0===e.avail_out||0===e.avail_in&&d===m)&&this.onData("string"===this.options.to?i.buf2binstring(h.shrinkBuf(e.output,e.next_out)):h.shrinkBuf(e.output,e.next_out))}while((e.avail_in>0||0===e.avail_out)&&c!==o);return d===m?(c=g.deflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===n):!0},s.prototype.onData=function(a){this.chunks.push(a)},s.prototype.onEnd=function(a){a===n&&(this.result="string"===this.options.to?this.chunks.join(""):h.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg},c.Deflate=s,c.deflate=d,c.deflateRaw=e,c.gzip=f},{"./utils/common":27,"./utils/strings":28,"./zlib/deflate.js":32,"./zlib/messages":37,"./zlib/zstream":39}],26:[function(a,b,c){"use strict";function d(a,b){var c=new m(b);if(c.push(a,!0),c.err)throw c.msg;return c.result}function e(a,b){return b=b||{},b.raw=!0,d(a,b)}var f=a("./zlib/inflate.js"),g=a("./utils/common"),h=a("./utils/strings"),i=a("./zlib/constants"),j=a("./zlib/messages"),k=a("./zlib/zstream"),l=a("./zlib/gzheader"),m=function(a){this.options=g.assign({chunkSize:16384,windowBits:0,to:""},a||{});var b=this.options;b.raw&&b.windowBits>=0&&b.windowBits<16&&(b.windowBits=-b.windowBits,0===b.windowBits&&(b.windowBits=-15)),!(b.windowBits>=0&&b.windowBits<16)||a&&a.windowBits||(b.windowBits+=32),b.windowBits>15&&b.windowBits<48&&0===(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new k,this.strm.avail_out=0;var c=f.inflateInit2(this.strm,b.windowBits);if(c!==i.Z_OK)throw new Error(j[c]);this.header=new l,f.inflateGetHeader(this.strm,this.header)};m.prototype.push=function(a,b){var c,d,e,j,k,l=this.strm,m=this.options.chunkSize;if(this.ended)return!1;d=b===~~b?b:b===!0?i.Z_FINISH:i.Z_NO_FLUSH,l.input="string"==typeof a?h.binstring2buf(a):a,l.next_in=0,l.avail_in=l.input.length;do{if(0===l.avail_out&&(l.output=new g.Buf8(m),l.next_out=0,l.avail_out=m),c=f.inflate(l,i.Z_NO_FLUSH),c!==i.Z_STREAM_END&&c!==i.Z_OK)return this.onEnd(c),this.ended=!0,!1;l.next_out&&(0===l.avail_out||c===i.Z_STREAM_END||0===l.avail_in&&d===i.Z_FINISH)&&("string"===this.options.to?(e=h.utf8border(l.output,l.next_out),j=l.next_out-e,k=h.buf2string(l.output,e),l.next_out=j,l.avail_out=m-j,j&&g.arraySet(l.output,l.output,e,j,0),this.onData(k)):this.onData(g.shrinkBuf(l.output,l.next_out)))}while(l.avail_in>0&&c!==i.Z_STREAM_END);return c===i.Z_STREAM_END&&(d=i.Z_FINISH),d===i.Z_FINISH?(c=f.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===i.Z_OK):!0},m.prototype.onData=function(a){this.chunks.push(a)},m.prototype.onEnd=function(a){a===i.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):g.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg},c.Inflate=m,c.inflate=d,c.inflateRaw=e,c.ungzip=d},{"./utils/common":27,"./utils/strings":28,"./zlib/constants":30,"./zlib/gzheader":33,"./zlib/inflate.js":35,"./zlib/messages":37,"./zlib/zstream":39}],27:[function(a,b,c){"use strict";var d="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;c.assign=function(a){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var c=b.shift();if(c){if("object"!=typeof c)throw new TypeError(c+"must be non-object");for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}}return a},c.shrinkBuf=function(a,b){return a.length===b?a:a.subarray?a.subarray(0,b):(a.length=b,a)};var e={arraySet:function(a,b,c,d,e){if(b.subarray&&a.subarray)return void a.set(b.subarray(c,c+d),e);for(var f=0;d>f;f++)a[e+f]=b[c+f]},flattenChunks:function(a){var b,c,d,e,f,g;for(d=0,b=0,c=a.length;c>b;b++)d+=a[b].length;for(g=new Uint8Array(d),e=0,b=0,c=a.length;c>b;b++)f=a[b],g.set(f,e),e+=f.length;return g}},f={arraySet:function(a,b,c,d,e){for(var f=0;d>f;f++)a[e+f]=b[c+f]},flattenChunks:function(a){return[].concat.apply([],a)}};c.setTyped=function(a){a?(c.Buf8=Uint8Array,c.Buf16=Uint16Array,c.Buf32=Int32Array,c.assign(c,e)):(c.Buf8=Array,c.Buf16=Array,c.Buf32=Array,c.assign(c,f))},c.setTyped(d)},{}],28:[function(a,b,c){"use strict";function d(a,b){if(65537>b&&(a.subarray&&g||!a.subarray&&f))return String.fromCharCode.apply(null,e.shrinkBuf(a,b));for(var c="",d=0;b>d;d++)c+=String.fromCharCode(a[d]);return c}var e=a("./common"),f=!0,g=!0;try{String.fromCharCode.apply(null,[0])}catch(h){f=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(h){g=!1}for(var i=new e.Buf8(256),j=0;256>j;j++)i[j]=j>=252?6:j>=248?5:j>=240?4:j>=224?3:j>=192?2:1;i[254]=i[254]=1,c.string2buf=function(a){var b,c,d,f,g,h=a.length,i=0;for(f=0;h>f;f++)c=a.charCodeAt(f),55296===(64512&c)&&h>f+1&&(d=a.charCodeAt(f+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),f++)),i+=128>c?1:2048>c?2:65536>c?3:4;for(b=new e.Buf8(i),g=0,f=0;i>g;f++)c=a.charCodeAt(f),55296===(64512&c)&&h>f+1&&(d=a.charCodeAt(f+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),f++)),128>c?b[g++]=c:2048>c?(b[g++]=192|c>>>6,b[g++]=128|63&c):65536>c?(b[g++]=224|c>>>12,b[g++]=128|c>>>6&63,b[g++]=128|63&c):(b[g++]=240|c>>>18,b[g++]=128|c>>>12&63,b[g++]=128|c>>>6&63,b[g++]=128|63&c);return b},c.buf2binstring=function(a){return d(a,a.length)},c.binstring2buf=function(a){for(var b=new e.Buf8(a.length),c=0,d=b.length;d>c;c++)b[c]=a.charCodeAt(c);return b},c.buf2string=function(a,b){var c,e,f,g,h=b||a.length,j=new Array(2*h);for(e=0,c=0;h>c;)if(f=a[c++],128>f)j[e++]=f;else if(g=i[f],g>4)j[e++]=65533,c+=g-1;else{for(f&=2===g?31:3===g?15:7;g>1&&h>c;)f=f<<6|63&a[c++],g--;g>1?j[e++]=65533:65536>f?j[e++]=f:(f-=65536,j[e++]=55296|f>>10&1023,j[e++]=56320|1023&f)}return d(j,e)},c.utf8border=function(a,b){var c;for(b=b||a.length,b>a.length&&(b=a.length),c=b-1;c>=0&&128===(192&a[c]);)c--;return 0>c?b:0===c?b:c+i[a[c]]>b?c:b}},{"./common":27}],29:[function(a,b){"use strict";function c(a,b,c,d){for(var e=65535&a|0,f=a>>>16&65535|0,g=0;0!==c;){g=c>2e3?2e3:c,c-=g;do e=e+b[d++]|0,f=f+e|0;while(--g);e%=65521,f%=65521}return e|f<<16|0}b.exports=c},{}],30:[function(a,b){b.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],31:[function(a,b){"use strict";function c(){for(var a,b=[],c=0;256>c;c++){a=c;for(var d=0;8>d;d++)a=1&a?3988292384^a>>>1:a>>>1;b[c]=a}return b}function d(a,b,c,d){var f=e,g=d+c;a=-1^a;for(var h=d;g>h;h++)a=a>>>8^f[255&(a^b[h])];return-1^a}var e=c();b.exports=d},{}],32:[function(a,b,c){"use strict";function d(a,b){return a.msg=G[b],b}function e(a){return(a<<1)-(a>4?9:0)}function f(a){for(var b=a.length;--b>=0;)a[b]=0}function g(a){var b=a.state,c=b.pending;c>a.avail_out&&(c=a.avail_out),0!==c&&(C.arraySet(a.output,b.pending_buf,b.pending_out,c,a.next_out),a.next_out+=c,b.pending_out+=c,a.total_out+=c,a.avail_out-=c,b.pending-=c,0===b.pending&&(b.pending_out=0))}function h(a,b){D._tr_flush_block(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,b),a.block_start=a.strstart,g(a.strm)}function i(a,b){a.pending_buf[a.pending++]=b}function j(a,b){a.pending_buf[a.pending++]=b>>>8&255,a.pending_buf[a.pending++]=255&b}function k(a,b,c,d){var e=a.avail_in;return e>d&&(e=d),0===e?0:(a.avail_in-=e,C.arraySet(b,a.input,a.next_in,e,c),1===a.state.wrap?a.adler=E(a.adler,b,e,c):2===a.state.wrap&&(a.adler=F(a.adler,b,e,c)),a.next_in+=e,a.total_in+=e,e)}function l(a,b){var c,d,e=a.max_chain_length,f=a.strstart,g=a.prev_length,h=a.nice_match,i=a.strstart>a.w_size-jb?a.strstart-(a.w_size-jb):0,j=a.window,k=a.w_mask,l=a.prev,m=a.strstart+ib,n=j[f+g-1],o=j[f+g];a.prev_length>=a.good_match&&(e>>=2),h>a.lookahead&&(h=a.lookahead);do if(c=b,j[c+g]===o&&j[c+g-1]===n&&j[c]===j[f]&&j[++c]===j[f+1]){f+=2,c++;do;while(j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&m>f);if(d=ib-(m-f),f=m-ib,d>g){if(a.match_start=b,g=d,d>=h)break;n=j[f+g-1],o=j[f+g]}}while((b=l[b&k])>i&&0!==--e);return g<=a.lookahead?g:a.lookahead}function m(a){var b,c,d,e,f,g=a.w_size;do{if(e=a.window_size-a.lookahead-a.strstart,a.strstart>=g+(g-jb)){C.arraySet(a.window,a.window,g,g,0),a.match_start-=g,a.strstart-=g,a.block_start-=g,c=a.hash_size,b=c;do d=a.head[--b],a.head[b]=d>=g?d-g:0;while(--c);c=g,b=c;do d=a.prev[--b],a.prev[b]=d>=g?d-g:0;while(--c);e+=g}if(0===a.strm.avail_in)break;if(c=k(a.strm,a.window,a.strstart+a.lookahead,e),a.lookahead+=c,a.lookahead+a.insert>=hb)for(f=a.strstart-a.insert,a.ins_h=a.window[f],a.ins_h=(a.ins_h<<a.hash_shift^a.window[f+1])&a.hash_mask;a.insert&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[f+hb-1])&a.hash_mask,a.prev[f&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=f,f++,a.insert--,!(a.lookahead+a.insert<hb)););}while(a.lookahead<jb&&0!==a.strm.avail_in)}function n(a,b){var c=65535;for(c>a.pending_buf_size-5&&(c=a.pending_buf_size-5);;){if(a.lookahead<=1){if(m(a),0===a.lookahead&&b===H)return sb;if(0===a.lookahead)break}a.strstart+=a.lookahead,a.lookahead=0;var d=a.block_start+c;if((0===a.strstart||a.strstart>=d)&&(a.lookahead=a.strstart-d,a.strstart=d,h(a,!1),0===a.strm.avail_out))return sb;if(a.strstart-a.block_start>=a.w_size-jb&&(h(a,!1),0===a.strm.avail_out))return sb}return a.insert=0,b===K?(h(a,!0),0===a.strm.avail_out?ub:vb):a.strstart>a.block_start&&(h(a,!1),0===a.strm.avail_out)?sb:sb}function o(a,b){for(var c,d;;){if(a.lookahead<jb){if(m(a),a.lookahead<jb&&b===H)return sb;if(0===a.lookahead)break}if(c=0,a.lookahead>=hb&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+hb-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),0!==c&&a.strstart-c<=a.w_size-jb&&(a.match_length=l(a,c)),a.match_length>=hb)if(d=D._tr_tally(a,a.strstart-a.match_start,a.match_length-hb),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=hb){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+hb-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(0!==--a.match_length);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask;else d=D._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(d&&(h(a,!1),0===a.strm.avail_out))return sb}return a.insert=a.strstart<hb-1?a.strstart:hb-1,b===K?(h(a,!0),0===a.strm.avail_out?ub:vb):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?sb:tb}function p(a,b){for(var c,d,e;;){if(a.lookahead<jb){if(m(a),a.lookahead<jb&&b===H)return sb;if(0===a.lookahead)break}if(c=0,a.lookahead>=hb&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+hb-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=hb-1,0!==c&&a.prev_length<a.max_lazy_match&&a.strstart-c<=a.w_size-jb&&(a.match_length=l(a,c),a.match_length<=5&&(a.strategy===S||a.match_length===hb&&a.strstart-a.match_start>4096)&&(a.match_length=hb-1)),a.prev_length>=hb&&a.match_length<=a.prev_length){e=a.strstart+a.lookahead-hb,d=D._tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-hb),a.lookahead-=a.prev_length-1,a.prev_length-=2;do++a.strstart<=e&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+hb-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(0!==--a.prev_length);if(a.match_available=0,a.match_length=hb-1,a.strstart++,d&&(h(a,!1),0===a.strm.avail_out))return sb}else if(a.match_available){if(d=D._tr_tally(a,0,a.window[a.strstart-1]),d&&h(a,!1),a.strstart++,a.lookahead--,0===a.strm.avail_out)return sb}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(d=D._tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<hb-1?a.strstart:hb-1,b===K?(h(a,!0),0===a.strm.avail_out?ub:vb):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?sb:tb}function q(a,b){for(var c,d,e,f,g=a.window;;){if(a.lookahead<=ib){if(m(a),a.lookahead<=ib&&b===H)return sb;if(0===a.lookahead)break}if(a.match_length=0,a.lookahead>=hb&&a.strstart>0&&(e=a.strstart-1,d=g[e],d===g[++e]&&d===g[++e]&&d===g[++e])){f=a.strstart+ib;do;while(d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&f>e);a.match_length=ib-(f-e),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=hb?(c=D._tr_tally(a,1,a.match_length-hb),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(c=D._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),c&&(h(a,!1),0===a.strm.avail_out))return sb}return a.insert=0,b===K?(h(a,!0),0===a.strm.avail_out?ub:vb):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?sb:tb}function r(a,b){for(var c;;){if(0===a.lookahead&&(m(a),0===a.lookahead)){if(b===H)return sb;break}if(a.match_length=0,c=D._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,c&&(h(a,!1),0===a.strm.avail_out))return sb}return a.insert=0,b===K?(h(a,!0),0===a.strm.avail_out?ub:vb):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?sb:tb}function s(a){a.window_size=2*a.w_size,f(a.head),a.max_lazy_match=B[a.level].max_lazy,a.good_match=B[a.level].good_length,a.nice_match=B[a.level].nice_length,a.max_chain_length=B[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=hb-1,a.match_available=0,a.ins_h=0}function t(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new C.Buf16(2*fb),this.dyn_dtree=new C.Buf16(2*(2*db+1)),this.bl_tree=new C.Buf16(2*(2*eb+1)),f(this.dyn_ltree),f(this.dyn_dtree),f(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new C.Buf16(gb+1),this.heap=new C.Buf16(2*cb+1),f(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new C.Buf16(2*cb+1),f(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function u(a){var b;return a&&a.state?(a.total_in=a.total_out=0,a.data_type=X,b=a.state,b.pending=0,b.pending_out=0,b.wrap<0&&(b.wrap=-b.wrap),b.status=b.wrap?lb:qb,a.adler=2===b.wrap?0:1,b.last_flush=H,D._tr_init(b),M):d(a,O)}function v(a){var b=u(a);return b===M&&s(a.state),b}function w(a,b){return a&&a.state?2!==a.state.wrap?O:(a.state.gzhead=b,M):O}function x(a,b,c,e,f,g){if(!a)return O;var h=1;if(b===R&&(b=6),0>e?(h=0,e=-e):e>15&&(h=2,e-=16),1>f||f>Z||c!==Y||8>e||e>15||0>b||b>9||0>g||g>V)return d(a,O);8===e&&(e=9);var i=new t;return a.state=i,i.strm=a,i.wrap=h,i.gzhead=null,i.w_bits=e,i.w_size=1<<i.w_bits,i.w_mask=i.w_size-1,i.hash_bits=f+7,i.hash_size=1<<i.hash_bits,i.hash_mask=i.hash_size-1,i.hash_shift=~~((i.hash_bits+hb-1)/hb),i.window=new C.Buf8(2*i.w_size),i.head=new C.Buf16(i.hash_size),i.prev=new C.Buf16(i.w_size),i.lit_bufsize=1<<f+6,i.pending_buf_size=4*i.lit_bufsize,i.pending_buf=new C.Buf8(i.pending_buf_size),i.d_buf=i.lit_bufsize>>1,i.l_buf=3*i.lit_bufsize,i.level=b,i.strategy=g,i.method=c,v(a)}function y(a,b){return x(a,b,Y,$,_,W)}function z(a,b){var c,h,k,l;if(!a||!a.state||b>L||0>b)return a?d(a,O):O;if(h=a.state,!a.output||!a.input&&0!==a.avail_in||h.status===rb&&b!==K)return d(a,0===a.avail_out?Q:O);if(h.strm=a,c=h.last_flush,h.last_flush=b,h.status===lb)if(2===h.wrap)a.adler=0,i(h,31),i(h,139),i(h,8),h.gzhead?(i(h,(h.gzhead.text?1:0)+(h.gzhead.hcrc?2:0)+(h.gzhead.extra?4:0)+(h.gzhead.name?8:0)+(h.gzhead.comment?16:0)),i(h,255&h.gzhead.time),i(h,h.gzhead.time>>8&255),i(h,h.gzhead.time>>16&255),i(h,h.gzhead.time>>24&255),i(h,9===h.level?2:h.strategy>=T||h.level<2?4:0),i(h,255&h.gzhead.os),h.gzhead.extra&&h.gzhead.extra.length&&(i(h,255&h.gzhead.extra.length),i(h,h.gzhead.extra.length>>8&255)),h.gzhead.hcrc&&(a.adler=F(a.adler,h.pending_buf,h.pending,0)),h.gzindex=0,h.status=mb):(i(h,0),i(h,0),i(h,0),i(h,0),i(h,0),i(h,9===h.level?2:h.strategy>=T||h.level<2?4:0),i(h,wb),h.status=qb);else{var m=Y+(h.w_bits-8<<4)<<8,n=-1;n=h.strategy>=T||h.level<2?0:h.level<6?1:6===h.level?2:3,m|=n<<6,0!==h.strstart&&(m|=kb),m+=31-m%31,h.status=qb,j(h,m),0!==h.strstart&&(j(h,a.adler>>>16),j(h,65535&a.adler)),a.adler=1}if(h.status===mb)if(h.gzhead.extra){for(k=h.pending;h.gzindex<(65535&h.gzhead.extra.length)&&(h.pending!==h.pending_buf_size||(h.gzhead.hcrc&&h.pending>k&&(a.adler=F(a.adler,h.pending_buf,h.pending-k,k)),g(a),k=h.pending,h.pending!==h.pending_buf_size));)i(h,255&h.gzhead.extra[h.gzindex]),h.gzindex++;h.gzhead.hcrc&&h.pending>k&&(a.adler=F(a.adler,h.pending_buf,h.pending-k,k)),h.gzindex===h.gzhead.extra.length&&(h.gzindex=0,h.status=nb)}else h.status=nb;if(h.status===nb)if(h.gzhead.name){k=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>k&&(a.adler=F(a.adler,h.pending_buf,h.pending-k,k)),g(a),k=h.pending,h.pending===h.pending_buf_size)){l=1;break}l=h.gzindex<h.gzhead.name.length?255&h.gzhead.name.charCodeAt(h.gzindex++):0,i(h,l)}while(0!==l);h.gzhead.hcrc&&h.pending>k&&(a.adler=F(a.adler,h.pending_buf,h.pending-k,k)),0===l&&(h.gzindex=0,h.status=ob)}else h.status=ob;if(h.status===ob)if(h.gzhead.comment){k=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>k&&(a.adler=F(a.adler,h.pending_buf,h.pending-k,k)),g(a),k=h.pending,h.pending===h.pending_buf_size)){l=1;break}l=h.gzindex<h.gzhead.comment.length?255&h.gzhead.comment.charCodeAt(h.gzindex++):0,i(h,l)}while(0!==l);h.gzhead.hcrc&&h.pending>k&&(a.adler=F(a.adler,h.pending_buf,h.pending-k,k)),0===l&&(h.status=pb)}else h.status=pb;if(h.status===pb&&(h.gzhead.hcrc?(h.pending+2>h.pending_buf_size&&g(a),h.pending+2<=h.pending_buf_size&&(i(h,255&a.adler),i(h,a.adler>>8&255),a.adler=0,h.status=qb)):h.status=qb),0!==h.pending){if(g(a),0===a.avail_out)return h.last_flush=-1,M}else if(0===a.avail_in&&e(b)<=e(c)&&b!==K)return d(a,Q);if(h.status===rb&&0!==a.avail_in)return d(a,Q);if(0!==a.avail_in||0!==h.lookahead||b!==H&&h.status!==rb){var o=h.strategy===T?r(h,b):h.strategy===U?q(h,b):B[h.level].func(h,b);if((o===ub||o===vb)&&(h.status=rb),o===sb||o===ub)return 0===a.avail_out&&(h.last_flush=-1),M;if(o===tb&&(b===I?D._tr_align(h):b!==L&&(D._tr_stored_block(h,0,0,!1),b===J&&(f(h.head),0===h.lookahead&&(h.strstart=0,h.block_start=0,h.insert=0))),g(a),0===a.avail_out))return h.last_flush=-1,M}return b!==K?M:h.wrap<=0?N:(2===h.wrap?(i(h,255&a.adler),i(h,a.adler>>8&255),i(h,a.adler>>16&255),i(h,a.adler>>24&255),i(h,255&a.total_in),i(h,a.total_in>>8&255),i(h,a.total_in>>16&255),i(h,a.total_in>>24&255)):(j(h,a.adler>>>16),j(h,65535&a.adler)),g(a),h.wrap>0&&(h.wrap=-h.wrap),0!==h.pending?M:N)}function A(a){var b;return a&&a.state?(b=a.state.status,b!==lb&&b!==mb&&b!==nb&&b!==ob&&b!==pb&&b!==qb&&b!==rb?d(a,O):(a.state=null,b===qb?d(a,P):M)):O}var B,C=a("../utils/common"),D=a("./trees"),E=a("./adler32"),F=a("./crc32"),G=a("./messages"),H=0,I=1,J=3,K=4,L=5,M=0,N=1,O=-2,P=-3,Q=-5,R=-1,S=1,T=2,U=3,V=4,W=0,X=2,Y=8,Z=9,$=15,_=8,ab=29,bb=256,cb=bb+1+ab,db=30,eb=19,fb=2*cb+1,gb=15,hb=3,ib=258,jb=ib+hb+1,kb=32,lb=42,mb=69,nb=73,ob=91,pb=103,qb=113,rb=666,sb=1,tb=2,ub=3,vb=4,wb=3,xb=function(a,b,c,d,e){this.good_length=a,this.max_lazy=b,this.nice_length=c,this.max_chain=d,this.func=e};B=[new xb(0,0,0,0,n),new xb(4,4,8,4,o),new xb(4,5,16,8,o),new xb(4,6,32,32,o),new xb(4,4,16,16,p),new xb(8,16,32,32,p),new xb(8,16,128,128,p),new xb(8,32,128,256,p),new xb(32,128,258,1024,p),new xb(32,258,258,4096,p)],c.deflateInit=y,c.deflateInit2=x,c.deflateReset=v,c.deflateResetKeep=u,c.deflateSetHeader=w,c.deflate=z,c.deflateEnd=A,c.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./messages":37,"./trees":38}],33:[function(a,b){"use strict";function c(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}b.exports=c},{}],34:[function(a,b){"use strict";var c=30,d=12;b.exports=function(a,b){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;e=a.state,f=a.next_in,B=a.input,g=f+(a.avail_in-5),h=a.next_out,C=a.output,i=h-(b-a.avail_out),j=h+(a.avail_out-257),k=e.dmax,l=e.wsize,m=e.whave,n=e.wnext,o=e.window,p=e.hold,q=e.bits,r=e.lencode,s=e.distcode,t=(1<<e.lenbits)-1,u=(1<<e.distbits)-1;a:do{15>q&&(p+=B[f++]<<q,q+=8,p+=B[f++]<<q,q+=8),v=r[p&t];b:for(;;){if(w=v>>>24,p>>>=w,q-=w,w=v>>>16&255,0===w)C[h++]=65535&v;else{if(!(16&w)){if(0===(64&w)){v=r[(65535&v)+(p&(1<<w)-1)];continue b}if(32&w){e.mode=d;break a}a.msg="invalid literal/length code",e.mode=c;break a}x=65535&v,w&=15,w&&(w>q&&(p+=B[f++]<<q,q+=8),x+=p&(1<<w)-1,p>>>=w,q-=w),15>q&&(p+=B[f++]<<q,q+=8,p+=B[f++]<<q,q+=8),v=s[p&u];c:for(;;){if(w=v>>>24,p>>>=w,q-=w,w=v>>>16&255,!(16&w)){if(0===(64&w)){v=s[(65535&v)+(p&(1<<w)-1)];continue c}a.msg="invalid distance code",e.mode=c;break a}if(y=65535&v,w&=15,w>q&&(p+=B[f++]<<q,q+=8,w>q&&(p+=B[f++]<<q,q+=8)),y+=p&(1<<w)-1,y>k){a.msg="invalid distance too far back",e.mode=c;break a}if(p>>>=w,q-=w,w=h-i,y>w){if(w=y-w,w>m&&e.sane){a.msg="invalid distance too far back",e.mode=c;break a}if(z=0,A=o,0===n){if(z+=l-w,x>w){x-=w;do C[h++]=o[z++];while(--w);z=h-y,A=C}}else if(w>n){if(z+=l+n-w,w-=n,x>w){x-=w;do C[h++]=o[z++];while(--w);if(z=0,x>n){w=n,x-=w;do C[h++]=o[z++];while(--w);z=h-y,A=C}}}else if(z+=n-w,x>w){x-=w;do C[h++]=o[z++];while(--w);z=h-y,A=C}for(;x>2;)C[h++]=A[z++],C[h++]=A[z++],C[h++]=A[z++],x-=3;x&&(C[h++]=A[z++],x>1&&(C[h++]=A[z++]))}else{z=h-y;do C[h++]=C[z++],C[h++]=C[z++],C[h++]=C[z++],x-=3;while(x>2);x&&(C[h++]=C[z++],x>1&&(C[h++]=C[z++]))}break}}break}}while(g>f&&j>h);x=q>>3,f-=x,q-=x<<3,p&=(1<<q)-1,a.next_in=f,a.next_out=h,a.avail_in=g>f?5+(g-f):5-(f-g),a.avail_out=j>h?257+(j-h):257-(h-j),e.hold=p,e.bits=q}},{}],35:[function(a,b,c){"use strict";function d(a){return(a>>>24&255)+(a>>>8&65280)+((65280&a)<<8)+((255&a)<<24)}function e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function f(a){var b;return a&&a.state?(b=a.state,a.total_in=a.total_out=b.total=0,a.msg="",b.wrap&&(a.adler=1&b.wrap),b.mode=K,b.last=0,b.havedict=0,b.dmax=32768,b.head=null,b.hold=0,b.bits=0,b.lencode=b.lendyn=new r.Buf32(ob),b.distcode=b.distdyn=new r.Buf32(pb),b.sane=1,b.back=-1,C):F}function g(a){var b;return a&&a.state?(b=a.state,b.wsize=0,b.whave=0,b.wnext=0,f(a)):F}function h(a,b){var c,d;return a&&a.state?(d=a.state,0>b?(c=0,b=-b):(c=(b>>4)+1,48>b&&(b&=15)),b&&(8>b||b>15)?F:(null!==d.window&&d.wbits!==b&&(d.window=null),d.wrap=c,d.wbits=b,g(a))):F}function i(a,b){var c,d;return a?(d=new e,a.state=d,d.window=null,c=h(a,b),c!==C&&(a.state=null),c):F}function j(a){return i(a,rb)}function k(a){if(sb){var b;for(p=new r.Buf32(512),q=new r.Buf32(32),b=0;144>b;)a.lens[b++]=8;for(;256>b;)a.lens[b++]=9;for(;280>b;)a.lens[b++]=7;for(;288>b;)a.lens[b++]=8;for(v(x,a.lens,0,288,p,0,a.work,{bits:9}),b=0;32>b;)a.lens[b++]=5;v(y,a.lens,0,32,q,0,a.work,{bits:5}),sb=!1}a.lencode=p,a.lenbits=9,a.distcode=q,a.distbits=5}function l(a,b,c,d){var e,f=a.state;return null===f.window&&(f.wsize=1<<f.wbits,f.wnext=0,f.whave=0,f.window=new r.Buf8(f.wsize)),d>=f.wsize?(r.arraySet(f.window,b,c-f.wsize,f.wsize,0),f.wnext=0,f.whave=f.wsize):(e=f.wsize-f.wnext,e>d&&(e=d),r.arraySet(f.window,b,c-d,e,f.wnext),d-=e,d?(r.arraySet(f.window,b,c-d,d,0),f.wnext=d,f.whave=f.wsize):(f.wnext+=e,f.wnext===f.wsize&&(f.wnext=0),f.whave<f.wsize&&(f.whave+=e))),0}function m(a,b){var c,e,f,g,h,i,j,m,n,o,p,q,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,yb,zb,Ab=0,Bb=new r.Buf8(4),Cb=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return F;c=a.state,c.mode===V&&(c.mode=W),h=a.next_out,f=a.output,j=a.avail_out,g=a.next_in,e=a.input,i=a.avail_in,m=c.hold,n=c.bits,o=i,p=j,xb=C;a:for(;;)switch(c.mode){case K:if(0===c.wrap){c.mode=W;break}for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(2&c.wrap&&35615===m){c.check=0,Bb[0]=255&m,Bb[1]=m>>>8&255,c.check=t(c.check,Bb,2,0),m=0,n=0,c.mode=L;break}if(c.flags=0,c.head&&(c.head.done=!1),!(1&c.wrap)||(((255&m)<<8)+(m>>8))%31){a.msg="incorrect header check",c.mode=lb;break}if((15&m)!==J){a.msg="unknown compression method",c.mode=lb;break}if(m>>>=4,n-=4,wb=(15&m)+8,0===c.wbits)c.wbits=wb;else if(wb>c.wbits){a.msg="invalid window size",c.mode=lb;break}c.dmax=1<<wb,a.adler=c.check=1,c.mode=512&m?T:V,m=0,n=0;break;case L:for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(c.flags=m,(255&c.flags)!==J){a.msg="unknown compression method",c.mode=lb;break}if(57344&c.flags){a.msg="unknown header flags set",c.mode=lb;break}c.head&&(c.head.text=m>>8&1),512&c.flags&&(Bb[0]=255&m,Bb[1]=m>>>8&255,c.check=t(c.check,Bb,2,0)),m=0,n=0,c.mode=M;case M:for(;32>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.head&&(c.head.time=m),512&c.flags&&(Bb[0]=255&m,Bb[1]=m>>>8&255,Bb[2]=m>>>16&255,Bb[3]=m>>>24&255,c.check=t(c.check,Bb,4,0)),m=0,n=0,c.mode=N;case N:for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.head&&(c.head.xflags=255&m,c.head.os=m>>8),512&c.flags&&(Bb[0]=255&m,Bb[1]=m>>>8&255,c.check=t(c.check,Bb,2,0)),m=0,n=0,c.mode=O;case O:if(1024&c.flags){for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.length=m,c.head&&(c.head.extra_len=m),512&c.flags&&(Bb[0]=255&m,Bb[1]=m>>>8&255,c.check=t(c.check,Bb,2,0)),m=0,n=0}else c.head&&(c.head.extra=null);c.mode=P;case P:if(1024&c.flags&&(q=c.length,q>i&&(q=i),q&&(c.head&&(wb=c.head.extra_len-c.length,c.head.extra||(c.head.extra=new Array(c.head.extra_len)),r.arraySet(c.head.extra,e,g,q,wb)),512&c.flags&&(c.check=t(c.check,e,q,g)),i-=q,g+=q,c.length-=q),c.length))break a;c.length=0,c.mode=Q;case Q:if(2048&c.flags){if(0===i)break a;q=0;do wb=e[g+q++],c.head&&wb&&c.length<65536&&(c.head.name+=String.fromCharCode(wb));while(wb&&i>q);if(512&c.flags&&(c.check=t(c.check,e,q,g)),i-=q,g+=q,wb)break a}else c.head&&(c.head.name=null);c.length=0,c.mode=R;case R:if(4096&c.flags){if(0===i)break a;q=0;do wb=e[g+q++],c.head&&wb&&c.length<65536&&(c.head.comment+=String.fromCharCode(wb));while(wb&&i>q);if(512&c.flags&&(c.check=t(c.check,e,q,g)),i-=q,g+=q,wb)break a}else c.head&&(c.head.comment=null);c.mode=S;case S:if(512&c.flags){for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m!==(65535&c.check)){a.msg="header crc mismatch",c.mode=lb;break}m=0,n=0}c.head&&(c.head.hcrc=c.flags>>9&1,c.head.done=!0),a.adler=c.check=0,c.mode=V;break;case T:for(;32>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}a.adler=c.check=d(m),m=0,n=0,c.mode=U;case U:if(0===c.havedict)return a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,E;a.adler=c.check=1,c.mode=V;case V:if(b===A||b===B)break a;case W:if(c.last){m>>>=7&n,n-=7&n,c.mode=ib;break}for(;3>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}switch(c.last=1&m,m>>>=1,n-=1,3&m){case 0:c.mode=X;break;case 1:if(k(c),c.mode=bb,b===B){m>>>=2,n-=2;break a}break;case 2:c.mode=$;break;case 3:a.msg="invalid block type",c.mode=lb}m>>>=2,n-=2;break;case X:for(m>>>=7&n,n-=7&n;32>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if((65535&m)!==(m>>>16^65535)){a.msg="invalid stored block lengths",c.mode=lb;break}if(c.length=65535&m,m=0,n=0,c.mode=Y,b===B)break a;case Y:c.mode=Z;case Z:if(q=c.length){if(q>i&&(q=i),q>j&&(q=j),0===q)break a;r.arraySet(f,e,g,q,h),i-=q,g+=q,j-=q,h+=q,c.length-=q;break}c.mode=V;break;case $:for(;14>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(c.nlen=(31&m)+257,m>>>=5,n-=5,c.ndist=(31&m)+1,m>>>=5,n-=5,c.ncode=(15&m)+4,m>>>=4,n-=4,c.nlen>286||c.ndist>30){a.msg="too many length or distance symbols",c.mode=lb;break}c.have=0,c.mode=_;case _:for(;c.have<c.ncode;){for(;3>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.lens[Cb[c.have++]]=7&m,m>>>=3,n-=3}for(;c.have<19;)c.lens[Cb[c.have++]]=0;if(c.lencode=c.lendyn,c.lenbits=7,yb={bits:c.lenbits},xb=v(w,c.lens,0,19,c.lencode,0,c.work,yb),c.lenbits=yb.bits,xb){a.msg="invalid code lengths set",c.mode=lb;break}c.have=0,c.mode=ab;case ab:for(;c.have<c.nlen+c.ndist;){for(;Ab=c.lencode[m&(1<<c.lenbits)-1],qb=Ab>>>24,rb=Ab>>>16&255,sb=65535&Ab,!(n>=qb);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(16>sb)m>>>=qb,n-=qb,c.lens[c.have++]=sb;else{if(16===sb){for(zb=qb+2;zb>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m>>>=qb,n-=qb,0===c.have){a.msg="invalid bit length repeat",c.mode=lb;break}wb=c.lens[c.have-1],q=3+(3&m),m>>>=2,n-=2}else if(17===sb){for(zb=qb+3;zb>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=qb,n-=qb,wb=0,q=3+(7&m),m>>>=3,n-=3}else{for(zb=qb+7;zb>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=qb,n-=qb,wb=0,q=11+(127&m),m>>>=7,n-=7}if(c.have+q>c.nlen+c.ndist){a.msg="invalid bit length repeat",c.mode=lb;break}for(;q--;)c.lens[c.have++]=wb}}if(c.mode===lb)break;if(0===c.lens[256]){a.msg="invalid code -- missing end-of-block",c.mode=lb;break}if(c.lenbits=9,yb={bits:c.lenbits},xb=v(x,c.lens,0,c.nlen,c.lencode,0,c.work,yb),c.lenbits=yb.bits,xb){a.msg="invalid literal/lengths set",c.mode=lb;break}if(c.distbits=6,c.distcode=c.distdyn,yb={bits:c.distbits},xb=v(y,c.lens,c.nlen,c.ndist,c.distcode,0,c.work,yb),c.distbits=yb.bits,xb){a.msg="invalid distances set",c.mode=lb;break}if(c.mode=bb,b===B)break a;case bb:c.mode=cb;case cb:if(i>=6&&j>=258){a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,u(a,p),h=a.next_out,f=a.output,j=a.avail_out,g=a.next_in,e=a.input,i=a.avail_in,m=c.hold,n=c.bits,c.mode===V&&(c.back=-1);
break}for(c.back=0;Ab=c.lencode[m&(1<<c.lenbits)-1],qb=Ab>>>24,rb=Ab>>>16&255,sb=65535&Ab,!(n>=qb);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(rb&&0===(240&rb)){for(tb=qb,ub=rb,vb=sb;Ab=c.lencode[vb+((m&(1<<tb+ub)-1)>>tb)],qb=Ab>>>24,rb=Ab>>>16&255,sb=65535&Ab,!(n>=tb+qb);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=tb,n-=tb,c.back+=tb}if(m>>>=qb,n-=qb,c.back+=qb,c.length=sb,0===rb){c.mode=hb;break}if(32&rb){c.back=-1,c.mode=V;break}if(64&rb){a.msg="invalid literal/length code",c.mode=lb;break}c.extra=15&rb,c.mode=db;case db:if(c.extra){for(zb=c.extra;zb>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.length+=m&(1<<c.extra)-1,m>>>=c.extra,n-=c.extra,c.back+=c.extra}c.was=c.length,c.mode=eb;case eb:for(;Ab=c.distcode[m&(1<<c.distbits)-1],qb=Ab>>>24,rb=Ab>>>16&255,sb=65535&Ab,!(n>=qb);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(0===(240&rb)){for(tb=qb,ub=rb,vb=sb;Ab=c.distcode[vb+((m&(1<<tb+ub)-1)>>tb)],qb=Ab>>>24,rb=Ab>>>16&255,sb=65535&Ab,!(n>=tb+qb);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=tb,n-=tb,c.back+=tb}if(m>>>=qb,n-=qb,c.back+=qb,64&rb){a.msg="invalid distance code",c.mode=lb;break}c.offset=sb,c.extra=15&rb,c.mode=fb;case fb:if(c.extra){for(zb=c.extra;zb>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.offset+=m&(1<<c.extra)-1,m>>>=c.extra,n-=c.extra,c.back+=c.extra}if(c.offset>c.dmax){a.msg="invalid distance too far back",c.mode=lb;break}c.mode=gb;case gb:if(0===j)break a;if(q=p-j,c.offset>q){if(q=c.offset-q,q>c.whave&&c.sane){a.msg="invalid distance too far back",c.mode=lb;break}q>c.wnext?(q-=c.wnext,ob=c.wsize-q):ob=c.wnext-q,q>c.length&&(q=c.length),pb=c.window}else pb=f,ob=h-c.offset,q=c.length;q>j&&(q=j),j-=q,c.length-=q;do f[h++]=pb[ob++];while(--q);0===c.length&&(c.mode=cb);break;case hb:if(0===j)break a;f[h++]=c.length,j--,c.mode=cb;break;case ib:if(c.wrap){for(;32>n;){if(0===i)break a;i--,m|=e[g++]<<n,n+=8}if(p-=j,a.total_out+=p,c.total+=p,p&&(a.adler=c.check=c.flags?t(c.check,f,p,h-p):s(c.check,f,p,h-p)),p=j,(c.flags?m:d(m))!==c.check){a.msg="incorrect data check",c.mode=lb;break}m=0,n=0}c.mode=jb;case jb:if(c.wrap&&c.flags){for(;32>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m!==(4294967295&c.total)){a.msg="incorrect length check",c.mode=lb;break}m=0,n=0}c.mode=kb;case kb:xb=D;break a;case lb:xb=G;break a;case mb:return H;case nb:default:return F}return a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,(c.wsize||p!==a.avail_out&&c.mode<lb&&(c.mode<ib||b!==z))&&l(a,a.output,a.next_out,p-a.avail_out)?(c.mode=mb,H):(o-=a.avail_in,p-=a.avail_out,a.total_in+=o,a.total_out+=p,c.total+=p,c.wrap&&p&&(a.adler=c.check=c.flags?t(c.check,f,p,a.next_out-p):s(c.check,f,p,a.next_out-p)),a.data_type=c.bits+(c.last?64:0)+(c.mode===V?128:0)+(c.mode===bb||c.mode===Y?256:0),(0===o&&0===p||b===z)&&xb===C&&(xb=I),xb)}function n(a){if(!a||!a.state)return F;var b=a.state;return b.window&&(b.window=null),a.state=null,C}function o(a,b){var c;return a&&a.state?(c=a.state,0===(2&c.wrap)?F:(c.head=b,b.done=!1,C)):F}var p,q,r=a("../utils/common"),s=a("./adler32"),t=a("./crc32"),u=a("./inffast"),v=a("./inftrees"),w=0,x=1,y=2,z=4,A=5,B=6,C=0,D=1,E=2,F=-2,G=-3,H=-4,I=-5,J=8,K=1,L=2,M=3,N=4,O=5,P=6,Q=7,R=8,S=9,T=10,U=11,V=12,W=13,X=14,Y=15,Z=16,$=17,_=18,ab=19,bb=20,cb=21,db=22,eb=23,fb=24,gb=25,hb=26,ib=27,jb=28,kb=29,lb=30,mb=31,nb=32,ob=852,pb=592,qb=15,rb=qb,sb=!0;c.inflateReset=g,c.inflateReset2=h,c.inflateResetKeep=f,c.inflateInit=j,c.inflateInit2=i,c.inflate=m,c.inflateEnd=n,c.inflateGetHeader=o,c.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./inffast":34,"./inftrees":36}],36:[function(a,b){"use strict";var c=a("../utils/common"),d=15,e=852,f=592,g=0,h=1,i=2,j=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],k=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];b.exports=function(a,b,n,o,p,q,r,s){var t,u,v,w,x,y,z,A,B,C=s.bits,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=null,O=0,P=new c.Buf16(d+1),Q=new c.Buf16(d+1),R=null,S=0;for(D=0;d>=D;D++)P[D]=0;for(E=0;o>E;E++)P[b[n+E]]++;for(H=C,G=d;G>=1&&0===P[G];G--);if(H>G&&(H=G),0===G)return p[q++]=20971520,p[q++]=20971520,s.bits=1,0;for(F=1;G>F&&0===P[F];F++);for(F>H&&(H=F),K=1,D=1;d>=D;D++)if(K<<=1,K-=P[D],0>K)return-1;if(K>0&&(a===g||1!==G))return-1;for(Q[1]=0,D=1;d>D;D++)Q[D+1]=Q[D]+P[D];for(E=0;o>E;E++)0!==b[n+E]&&(r[Q[b[n+E]]++]=E);if(a===g?(N=R=r,y=19):a===h?(N=j,O-=257,R=k,S-=257,y=256):(N=l,R=m,y=-1),M=0,E=0,D=F,x=q,I=H,J=0,v=-1,L=1<<H,w=L-1,a===h&&L>e||a===i&&L>f)return 1;for(var T=0;;){T++,z=D-J,r[E]<y?(A=0,B=r[E]):r[E]>y?(A=R[S+r[E]],B=N[O+r[E]]):(A=96,B=0),t=1<<D-J,u=1<<I,F=u;do u-=t,p[x+(M>>J)+u]=z<<24|A<<16|B|0;while(0!==u);for(t=1<<D-1;M&t;)t>>=1;if(0!==t?(M&=t-1,M+=t):M=0,E++,0===--P[D]){if(D===G)break;D=b[n+r[E]]}if(D>H&&(M&w)!==v){for(0===J&&(J=H),x+=F,I=D-J,K=1<<I;G>I+J&&(K-=P[I+J],!(0>=K));)I++,K<<=1;if(L+=1<<I,a===h&&L>e||a===i&&L>f)return 1;v=M&w,p[v]=H<<24|I<<16|x-q|0}}return 0!==M&&(p[x+M]=D-J<<24|64<<16|0),s.bits=H,0}},{"../utils/common":27}],37:[function(a,b){"use strict";b.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],38:[function(a,b,c){"use strict";function d(a){for(var b=a.length;--b>=0;)a[b]=0}function e(a){return 256>a?gb[a]:gb[256+(a>>>7)]}function f(a,b){a.pending_buf[a.pending++]=255&b,a.pending_buf[a.pending++]=b>>>8&255}function g(a,b,c){a.bi_valid>V-c?(a.bi_buf|=b<<a.bi_valid&65535,f(a,a.bi_buf),a.bi_buf=b>>V-a.bi_valid,a.bi_valid+=c-V):(a.bi_buf|=b<<a.bi_valid&65535,a.bi_valid+=c)}function h(a,b,c){g(a,c[2*b],c[2*b+1])}function i(a,b){var c=0;do c|=1&a,a>>>=1,c<<=1;while(--b>0);return c>>>1}function j(a){16===a.bi_valid?(f(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=255&a.bi_buf,a.bi_buf>>=8,a.bi_valid-=8)}function k(a,b){var c,d,e,f,g,h,i=b.dyn_tree,j=b.max_code,k=b.stat_desc.static_tree,l=b.stat_desc.has_stree,m=b.stat_desc.extra_bits,n=b.stat_desc.extra_base,o=b.stat_desc.max_length,p=0;for(f=0;U>=f;f++)a.bl_count[f]=0;for(i[2*a.heap[a.heap_max]+1]=0,c=a.heap_max+1;T>c;c++)d=a.heap[c],f=i[2*i[2*d+1]+1]+1,f>o&&(f=o,p++),i[2*d+1]=f,d>j||(a.bl_count[f]++,g=0,d>=n&&(g=m[d-n]),h=i[2*d],a.opt_len+=h*(f+g),l&&(a.static_len+=h*(k[2*d+1]+g)));if(0!==p){do{for(f=o-1;0===a.bl_count[f];)f--;a.bl_count[f]--,a.bl_count[f+1]+=2,a.bl_count[o]--,p-=2}while(p>0);for(f=o;0!==f;f--)for(d=a.bl_count[f];0!==d;)e=a.heap[--c],e>j||(i[2*e+1]!==f&&(a.opt_len+=(f-i[2*e+1])*i[2*e],i[2*e+1]=f),d--)}}function l(a,b,c){var d,e,f=new Array(U+1),g=0;for(d=1;U>=d;d++)f[d]=g=g+c[d-1]<<1;for(e=0;b>=e;e++){var h=a[2*e+1];0!==h&&(a[2*e]=i(f[h]++,h))}}function m(){var a,b,c,d,e,f=new Array(U+1);for(c=0,d=0;O-1>d;d++)for(ib[d]=c,a=0;a<1<<_[d];a++)hb[c++]=d;for(hb[c-1]=d,e=0,d=0;16>d;d++)for(jb[d]=e,a=0;a<1<<ab[d];a++)gb[e++]=d;for(e>>=7;R>d;d++)for(jb[d]=e<<7,a=0;a<1<<ab[d]-7;a++)gb[256+e++]=d;for(b=0;U>=b;b++)f[b]=0;for(a=0;143>=a;)eb[2*a+1]=8,a++,f[8]++;for(;255>=a;)eb[2*a+1]=9,a++,f[9]++;for(;279>=a;)eb[2*a+1]=7,a++,f[7]++;for(;287>=a;)eb[2*a+1]=8,a++,f[8]++;for(l(eb,Q+1,f),a=0;R>a;a++)fb[2*a+1]=5,fb[2*a]=i(a,5);kb=new nb(eb,_,P+1,Q,U),lb=new nb(fb,ab,0,R,U),mb=new nb(new Array(0),bb,0,S,W)}function n(a){var b;for(b=0;Q>b;b++)a.dyn_ltree[2*b]=0;for(b=0;R>b;b++)a.dyn_dtree[2*b]=0;for(b=0;S>b;b++)a.bl_tree[2*b]=0;a.dyn_ltree[2*X]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0}function o(a){a.bi_valid>8?f(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0}function p(a,b,c,d){o(a),d&&(f(a,c),f(a,~c)),E.arraySet(a.pending_buf,a.window,b,c,a.pending),a.pending+=c}function q(a,b,c,d){var e=2*b,f=2*c;return a[e]<a[f]||a[e]===a[f]&&d[b]<=d[c]}function r(a,b,c){for(var d=a.heap[c],e=c<<1;e<=a.heap_len&&(e<a.heap_len&&q(b,a.heap[e+1],a.heap[e],a.depth)&&e++,!q(b,d,a.heap[e],a.depth));)a.heap[c]=a.heap[e],c=e,e<<=1;a.heap[c]=d}function s(a,b,c){var d,f,i,j,k=0;if(0!==a.last_lit)do d=a.pending_buf[a.d_buf+2*k]<<8|a.pending_buf[a.d_buf+2*k+1],f=a.pending_buf[a.l_buf+k],k++,0===d?h(a,f,b):(i=hb[f],h(a,i+P+1,b),j=_[i],0!==j&&(f-=ib[i],g(a,f,j)),d--,i=e(d),h(a,i,c),j=ab[i],0!==j&&(d-=jb[i],g(a,d,j)));while(k<a.last_lit);h(a,X,b)}function t(a,b){var c,d,e,f=b.dyn_tree,g=b.stat_desc.static_tree,h=b.stat_desc.has_stree,i=b.stat_desc.elems,j=-1;for(a.heap_len=0,a.heap_max=T,c=0;i>c;c++)0!==f[2*c]?(a.heap[++a.heap_len]=j=c,a.depth[c]=0):f[2*c+1]=0;for(;a.heap_len<2;)e=a.heap[++a.heap_len]=2>j?++j:0,f[2*e]=1,a.depth[e]=0,a.opt_len--,h&&(a.static_len-=g[2*e+1]);for(b.max_code=j,c=a.heap_len>>1;c>=1;c--)r(a,f,c);e=i;do c=a.heap[1],a.heap[1]=a.heap[a.heap_len--],r(a,f,1),d=a.heap[1],a.heap[--a.heap_max]=c,a.heap[--a.heap_max]=d,f[2*e]=f[2*c]+f[2*d],a.depth[e]=(a.depth[c]>=a.depth[d]?a.depth[c]:a.depth[d])+1,f[2*c+1]=f[2*d+1]=e,a.heap[1]=e++,r(a,f,1);while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1],k(a,b),l(f,j,a.bl_count)}function u(a,b,c){var d,e,f=-1,g=b[1],h=0,i=7,j=4;for(0===g&&(i=138,j=3),b[2*(c+1)+1]=65535,d=0;c>=d;d++)e=g,g=b[2*(d+1)+1],++h<i&&e===g||(j>h?a.bl_tree[2*e]+=h:0!==e?(e!==f&&a.bl_tree[2*e]++,a.bl_tree[2*Y]++):10>=h?a.bl_tree[2*Z]++:a.bl_tree[2*$]++,h=0,f=e,0===g?(i=138,j=3):e===g?(i=6,j=3):(i=7,j=4))}function v(a,b,c){var d,e,f=-1,i=b[1],j=0,k=7,l=4;for(0===i&&(k=138,l=3),d=0;c>=d;d++)if(e=i,i=b[2*(d+1)+1],!(++j<k&&e===i)){if(l>j){do h(a,e,a.bl_tree);while(0!==--j)}else 0!==e?(e!==f&&(h(a,e,a.bl_tree),j--),h(a,Y,a.bl_tree),g(a,j-3,2)):10>=j?(h(a,Z,a.bl_tree),g(a,j-3,3)):(h(a,$,a.bl_tree),g(a,j-11,7));j=0,f=e,0===i?(k=138,l=3):e===i?(k=6,l=3):(k=7,l=4)}}function w(a){var b;for(u(a,a.dyn_ltree,a.l_desc.max_code),u(a,a.dyn_dtree,a.d_desc.max_code),t(a,a.bl_desc),b=S-1;b>=3&&0===a.bl_tree[2*cb[b]+1];b--);return a.opt_len+=3*(b+1)+5+5+4,b}function x(a,b,c,d){var e;for(g(a,b-257,5),g(a,c-1,5),g(a,d-4,4),e=0;d>e;e++)g(a,a.bl_tree[2*cb[e]+1],3);v(a,a.dyn_ltree,b-1),v(a,a.dyn_dtree,c-1)}function y(a){var b,c=4093624447;for(b=0;31>=b;b++,c>>>=1)if(1&c&&0!==a.dyn_ltree[2*b])return G;if(0!==a.dyn_ltree[18]||0!==a.dyn_ltree[20]||0!==a.dyn_ltree[26])return H;for(b=32;P>b;b++)if(0!==a.dyn_ltree[2*b])return H;return G}function z(a){pb||(m(),pb=!0),a.l_desc=new ob(a.dyn_ltree,kb),a.d_desc=new ob(a.dyn_dtree,lb),a.bl_desc=new ob(a.bl_tree,mb),a.bi_buf=0,a.bi_valid=0,n(a)}function A(a,b,c,d){g(a,(J<<1)+(d?1:0),3),p(a,b,c,!0)}function B(a){g(a,K<<1,3),h(a,X,eb),j(a)}function C(a,b,c,d){var e,f,h=0;a.level>0?(a.strm.data_type===I&&(a.strm.data_type=y(a)),t(a,a.l_desc),t(a,a.d_desc),h=w(a),e=a.opt_len+3+7>>>3,f=a.static_len+3+7>>>3,e>=f&&(e=f)):e=f=c+5,e>=c+4&&-1!==b?A(a,b,c,d):a.strategy===F||f===e?(g(a,(K<<1)+(d?1:0),3),s(a,eb,fb)):(g(a,(L<<1)+(d?1:0),3),x(a,a.l_desc.max_code+1,a.d_desc.max_code+1,h+1),s(a,a.dyn_ltree,a.dyn_dtree)),n(a),d&&o(a)}function D(a,b,c){return a.pending_buf[a.d_buf+2*a.last_lit]=b>>>8&255,a.pending_buf[a.d_buf+2*a.last_lit+1]=255&b,a.pending_buf[a.l_buf+a.last_lit]=255&c,a.last_lit++,0===b?a.dyn_ltree[2*c]++:(a.matches++,b--,a.dyn_ltree[2*(hb[c]+P+1)]++,a.dyn_dtree[2*e(b)]++),a.last_lit===a.lit_bufsize-1}var E=a("../utils/common"),F=4,G=0,H=1,I=2,J=0,K=1,L=2,M=3,N=258,O=29,P=256,Q=P+1+O,R=30,S=19,T=2*Q+1,U=15,V=16,W=7,X=256,Y=16,Z=17,$=18,_=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ab=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],bb=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],cb=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],db=512,eb=new Array(2*(Q+2));d(eb);var fb=new Array(2*R);d(fb);var gb=new Array(db);d(gb);var hb=new Array(N-M+1);d(hb);var ib=new Array(O);d(ib);var jb=new Array(R);d(jb);var kb,lb,mb,nb=function(a,b,c,d,e){this.static_tree=a,this.extra_bits=b,this.extra_base=c,this.elems=d,this.max_length=e,this.has_stree=a&&a.length},ob=function(a,b){this.dyn_tree=a,this.max_code=0,this.stat_desc=b},pb=!1;c._tr_init=z,c._tr_stored_block=A,c._tr_flush_block=C,c._tr_tally=D,c._tr_align=B},{"../utils/common":27}],39:[function(a,b){"use strict";function c(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}b.exports=c},{}]},{},[9])(9)});

var saveAs=saveAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(t){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var e=t.document,n=t.URL||t.webkitURL||t,o=e.createElementNS("http://www.w3.org/1999/xhtml","a"),r=!t.externalHost&&"download"in o,i=t.webkitRequestFileSystem,a=t.requestFileSystem||i||t.mozRequestFileSystem,c=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},s=0,u=[],d=function(){for(var t=u.length;t--;){var e=u[t];"string"==typeof e?n.revokeObjectURL(e):e.remove()}u.length=0},f=function(t,e,n){for(var o=(e=[].concat(e)).length;o--;){var r=t["on"+e[o]];if("function"==typeof r)try{r.call(t,n||t)}catch(t){c(t)}}},l=function(n,c){var d,l,w,v=this,p=n.type,m=!1,y=function(){var e=(t.URL||t.webkitURL||t).createObjectURL(n);return u.push(e),e},h=function(){f(v,"writestart progress write writeend".split(" "))},E=function(){!m&&d||(d=y()),l?l.location.href=d:window.open(d,"_blank"),v.readyState=v.DONE,h()},g=function(t){return function(){if(v.readyState!==v.DONE)return t.apply(this,arguments)}},R={create:!0,exclusive:!1};if(v.readyState=v.INIT,c||(c="download"),r){d=y(),e=t.document,(o=e.createElementNS("http://www.w3.org/1999/xhtml","a")).href=d,o.download=c;var S=e.createEvent("MouseEvents");return S.initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(S),v.readyState=v.DONE,void h()}t.chrome&&p&&"application/octet-stream"!==p&&(w=n.slice||n.webkitSlice,n=w.call(n,0,n.size,"application/octet-stream"),m=!0),i&&"download"!==c&&(c+=".download"),("application/octet-stream"===p||i)&&(l=t),a?(s+=n.size,a(t.TEMPORARY,s,g(function(t){t.root.getDirectory("saved",R,g(function(t){var e=function(){t.getFile(c,R,g(function(t){t.createWriter(g(function(e){e.onwriteend=function(e){l.location.href=t.toURL(),u.push(t),v.readyState=v.DONE,f(v,"writeend",e)},e.onerror=function(){var t=e.error;t.code!==t.ABORT_ERR&&E()},"writestart progress write abort".split(" ").forEach(function(t){e["on"+t]=v["on"+t]}),e.write(n),v.abort=function(){e.abort(),v.readyState=v.DONE},v.readyState=v.WRITING}),E)}),E)};t.getFile(c,{create:!1},g(function(t){t.remove(),e()}),g(function(t){t.code===t.NOT_FOUND_ERR?e():E()}))}),E)}),E)):E()},w=l.prototype,v=function(t,e){return new l(t,e)};return w.abort=function(){this.readyState=this.DONE,f(this,"abort")},w.readyState=w.INIT=0,w.WRITING=1,w.DONE=2,w.error=w.onwritestart=w.onprogress=w.onwrite=w.onabort=w.onerror=w.onwriteend=null,t.addEventListener("unload",d,!1),v.unload=function(){d(),t.removeEventListener("unload",d,!1)},v}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&(module.exports=saveAs);
